(function(a,s){if(!a.seajs){var l=a.seajs={version:"2.2.3"},p=l.data={},o=F("Object"),h=F("String"),c=Array.isArray||F("Array"),g=F("Function"),d=F("Undefined"),e=0,n=p.events={};l.on=function(e,t){return(n[e]||(n[e]=[])).push(t),l},l.off=function(e,t){if(!e&&!t)return n=p.events={},l;var i=n[e];if(i)if(t)for(var r=i.length-1;0<=r;r--)i[r]===t&&i.splice(r,1);else delete n[e];return l};var t,u=l.emit=function(e,t){var i,r=n[e];if(r)for(r=r.slice();i=r.shift();)i(t);return l},i=/[^?#]*\//,f=/\/\.\//g,_=/\/[^/]+\/\.\.\//,v=/([^:/])\/\//g,m=/^([^/:]+)(\/.+)$/,x=/{([^{]+)}/g,y=/^\/\/.|:\//,b=/^.*?\/\/.*?\//,w=document,r=q(w.URL),k=w.scripts,S=w.getElementById("seajsnode")||k[k.length-1],C=q(((t=S).hasAttribute?t.src:t.getAttribute("src",4))||r);l.resolve=function(e,t){if(!e)return"";var i,r,n,o,a,l,s,c,d,u;i=e,e=(r=p.alias)&&h(r[i])?r[i]:i,n=e,(a=p.paths)&&(o=n.match(m))&&h(a[o[1]])&&(n=a[o[1]]+o[2]),l=e=n,(s=p.vars)&&-1<l.indexOf("{")&&(l=l.replace(x,function(e,t){return h(s[t])?s[t]:e})),d=(c=e=l).length-1;var f=$(e="#"===(u=c.charAt(d))?c.substring(0,d):".js"===c.substring(d-2)||0<c.indexOf("?")||".css"===c.substring(d-3)||"/"===u?c:c+".js",t);return f=function(e){var t=p.map,i=e;if(t)for(var r=0,n=t.length;r<n;r++){var o=t[r];if((i=g(o)?o(e)||e:e.replace(o[0],o[1]))!==e)break}return i}(f)};var T,A,E=w.head||w.getElementsByTagName("head")[0]||w.documentElement,M=E.getElementsByTagName("base")[0],N=/\.css(?:\?|$)/i,L=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;l.request=function(e,t,i,r){var n=N.test(e),o=w.createElement(n?"link":"script");i&&(o.charset=i),d(r)||o.setAttribute("crossorigin",r),function(e,t,i,r){var n="onload"in e;if(i&&(L||!n))return setTimeout(function(){!function e(t,i){var r,n=t.sheet;if(L)n&&(r=!0);else if(n)try{n.cssRules&&(r=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(r=!0)}setTimeout(function(){r?i():e(t,i)},20)}(e,t)},1);function o(){e.onload=e.onerror=e.onreadystatechange=null,i||p.debug||E.removeChild(e),e=null,t()}n?(e.onload=o,e.onerror=function(){u("error",{uri:r,node:e}),o()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&o()}}(o,t,n,e),n?(o.rel="stylesheet",o.href=e):(o.async=!0,o.src=e),T=o,M?E.insertBefore(o,M):E.appendChild(o),T=null};var I,D=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,O=/\\\\/g,z=l.cache={},R={},P={},B={},H=U.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};U.prototype.resolve=function(){for(var e=this.dependencies,t=[],i=0,r=e.length;i<r;i++)t[i]=U.resolve(e[i],this.uri);return t},U.prototype.load=function(){var e=this;if(!(e.status>=H.LOADING)){e.status=H.LOADING;var t=e.resolve();u("load",t);for(var i,r=e._remain=t.length,n=0;n<r;n++)(i=U.get(t[n])).status<H.LOADED?i._waitings[e.uri]=(i._waitings[e.uri]||0)+1:e._remain--;if(0!==e._remain){var o={};for(n=0;n<r;n++)(i=z[t[n]]).status<H.FETCHING?i.fetch(o):i.status===H.SAVED&&i.load();for(var a in o)o.hasOwnProperty(a)&&o[a]()}else e.onload()}},U.prototype.onload=function(){var e=this;e.status=H.LOADED,e.callback&&e.callback();var t,i,r=e._waitings;for(t in r)r.hasOwnProperty(t)&&((i=z[t])._remain-=r[t],0===i._remain&&i.onload());delete e._waitings,delete e._remain},U.prototype.fetch=function(e){var t=this,i=t.uri;t.status=H.FETCHING;var r={uri:i};u("fetch",r);var n=r.requestUri||i;function o(){l.request(r.requestUri,r.onRequest,r.charset,r.crossorigin)}n&&!P[n]?R[n]?B[n].push(t):(R[n]=!0,B[n]=[t],u("request",r={uri:i,requestUri:n,onRequest:function(){delete R[n],P[n]=!0,I&&(U.save(i,I),I=null);var e,t=B[n];delete B[n];for(;e=t.shift();)e.load()},charset:g(p.charset)?p.charset(n):p.charset,crossorigin:g(p.crossorigin)?p.crossorigin(n):p.crossorigin}),r.requested||(e?e[r.requestUri]=o:o())):t.load()},U.prototype.exec=function(){var e=this;if(e.status>=H.EXECUTING)return e.exports;e.status=H.EXECUTING;var i=e.uri;function r(e){return U.get(r.resolve(e)).exec()}r.resolve=function(e){return U.resolve(e,i)},r.async=function(e,t){return U.use(e,t,i+"_async_"+j()),r};var t=e.factory,n=g(t)?t(r,e.exports={},e):t;return n===s&&(n=e.exports),delete e.factory,e.exports=n,e.status=H.EXECUTED,u("exec",e),n},U.resolve=function(e,t){var i={id:e,refUri:t};return u("resolve",i),i.uri||l.resolve(i.id,t)},U.define=function(e,t,i){var r,n,o=arguments.length;1===o?(i=e,e=s):2===o&&(i=t,c(e)?(t=e,e=s):t=s),!c(t)&&g(i)&&(r=i.toString(),n=[],r.replace(O,"").replace(D,function(e,t,i){i&&n.push(i)}),t=n);var a={id:e,uri:U.resolve(e),deps:t,factory:i};if(!a.uri&&w.attachEvent){var l=function(){if(T)return T;if(A&&"interactive"===A.readyState)return A;for(var e=E.getElementsByTagName("script"),t=e.length-1;0<=t;t--){var i=e[t];if("interactive"===i.readyState)return A=i}}();l&&(a.uri=l.src)}u("define",a),a.uri?U.save(a.uri,a):I=a},U.save=function(e,t){var i=U.get(e);i.status<H.SAVED&&(i.id=t.id||e,i.dependencies=t.deps||[],i.factory=t.factory,i.status=H.SAVED)},U.get=function(e,t){return z[e]||(z[e]=new U(e,t))},U.use=function(e,n,t){var o=U.get(t,c(e)?e:[e]);o.callback=function(){for(var e=[],t=o.resolve(),i=0,r=t.length;i<r;i++)e[i]=z[t[i]].exec();n&&n.apply(a,e),delete o.callback},o.load()},U.preload=function(e){var t=p.preload,i=t.length;i?U.use(t,function(){t.splice(0,i),U.preload(e)},p.cwd+"_preload_"+j()):e()},l.use=function(e,t){return U.preload(function(){U.use(e,t,p.cwd+"_use_"+j())}),l},U.define.cmd={},a.define=U.define,l.Module=U,p.fetchedList=P,p.cid=j,l.require=function(e){var t=U.get(U.resolve(e));return t.status<H.EXECUTING&&(t.onload(),t.exec()),t.exports};var W,X;p.base=(C.match(/^(.+?\/)(\?\?)?(seajs\/)+/)||["",C])[1],p.dir=C,p.cwd=r,p.charset="utf-8",p.history={},p.preload=(W=[],X=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2"),(X+=" "+w.cookie).replace(/(seajs-\w+)=1/g,function(e,t){W.push(t)}),W),l.config=function(e){for(var t in e){var i=e[t],r=p[t];if(p.history[t]=p.history[t]||[],p.history[t].push(V(i)),r&&o(r))for(var n in i)r[n]=i[n];else c(r)?i=r.concat(i):"base"===t&&("/"!==i.slice(-1)&&(i+="/"),i=$(i)),p[t]=i}return u("config",e),l}}function F(t){return function(e){return{}.toString.call(e)=="[object "+t+"]"}}function j(){return e++}function q(e){return e.match(i)[0]}function $(e,t){var i,r=e.charAt(0);if(y.test(e))i=e;else if("."===r)i=function(e){for(e=e.replace(f,"/");e.match(_);)e=e.replace(_,"/");return e=e.replace(v,"$1/")}((t?q(t):p.cwd)+e);else if("/"===r){var n=p.cwd.match(b);i=n?n[0]+e.substring(1):e}else i=p.base+e;return 0===i.indexOf("//")&&(i=location.protocol+i),i}function U(e,t){this.uri=e,this.dependencies=t||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}function V(e){if(o(e)){var t={};for(var i in e)t[i]=e[i];return t}return e}})(this),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(k,e){"use strict";var t=[],S=k.document,r=Object.getPrototypeOf,l=t.slice,g=t.concat,s=t.push,n=t.indexOf,i={},o=i.toString,_=i.hasOwnProperty,a=_.toString,c=a.call(Object),v={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},d={type:!0,src:!0,noModule:!0};function y(e,t,i){var r,n=(t=t||S).createElement("script");if(n.text=e,i)for(r in d)i[r]&&(n[r]=i[r]);t.head.appendChild(n).parentNode.removeChild(n)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?i[o.call(e)]||"object":typeof e}var C=function(e,t){return new C.fn.init(e,t)},u=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function f(e){var t=!!e&&"length"in e&&e.length,i=b(e);return!m(e)&&!x(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}C.fn=C.prototype={jquery:"3.3.1",constructor:C,length:0,toArray:function(){return l.call(this)},get:function(e){return null==e?l.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return C.each(this,e)},map:function(i){return this.pushStack(C.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(0<=i&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:t.sort,splice:t.splice},C.extend=C.fn.extend=function(){var e,t,i,r,n,o,a=arguments[0]||{},l=1,s=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[l]||{},l++),"object"==typeof a||m(a)||(a={}),l===s&&(a=this,l--);l<s;l++)if(null!=(e=arguments[l]))for(t in e)i=a[t],a!==(r=e[t])&&(c&&r&&(C.isPlainObject(r)||(n=Array.isArray(r)))?(o=n?(n=!1,i&&Array.isArray(i)?i:[]):i&&C.isPlainObject(i)?i:{},a[t]=C.extend(c,o,r)):void 0!==r&&(a[t]=r));return a},C.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(i=_.call(t,"constructor")&&t.constructor)&&a.call(i)===c)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){y(e)},each:function(e,t){var i,r=0;if(f(e))for(i=e.length;r<i&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(u,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(f(Object(e))?C.merge(i,"string"==typeof e?[e]:e):s.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:n.call(t,e,i)},merge:function(e,t){for(var i=+t.length,r=0,n=e.length;r<i;r++)e[n++]=t[r];return e.length=n,e},grep:function(e,t,i){for(var r=[],n=0,o=e.length,a=!i;n<o;n++)!t(e[n],n)!==a&&r.push(e[n]);return r},map:function(e,t,i){var r,n,o=0,a=[];if(f(e))for(r=e.length;o<r;o++)null!=(n=t(e[o],o,i))&&a.push(n);else for(o in e)null!=(n=t(e[o],o,i))&&a.push(n);return g.apply([],a)},guid:1,support:v}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=t[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){i["[object "+t+"]"]=t.toLowerCase()});var p=function(i){var e,p,y,o,n,h,u,g,b,s,c,w,k,a,S,_,l,d,v,C="sizzle"+1*new Date,m=i.document,T=0,r=0,f=ae(),x=ae(),A=ae(),E=function(e,t){return e===t&&(c=!0),0},M={}.hasOwnProperty,t=[],N=t.pop,L=t.push,I=t.push,D=t.slice,O=function(e,t){for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",P="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",B="\\["+R+"*("+P+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+P+"))|)"+R+"*\\]",H=":("+P+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",W=new RegExp(R+"+","g"),X=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),F=new RegExp("^"+R+"*,"+R+"*"),j=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),q=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),$=new RegExp(H),U=new RegExp("^"+P+"$"),V={ID:new RegExp("^#("+P+")"),CLASS:new RegExp("^\\.("+P+")"),TAG:new RegExp("^("+P+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+z+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,G=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,J=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),ee=function(e,t,i){var r="0x"+t-65536;return r!=r||i?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){w()},ne=me(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{I.apply(t=D.call(m.childNodes),m.childNodes),t[m.childNodes.length].nodeType}catch(e){I={apply:t.length?function(e,t){L.apply(e,D.call(t))}:function(e,t){for(var i=e.length,r=0;e[i++]=t[r++];);e.length=i-1}}}function oe(e,t,i,r){var n,o,a,l,s,c,d,u=t&&t.ownerDocument,f=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return i;if(!r&&((t?t.ownerDocument||t:m)!==k&&w(t),t=t||k,S)){if(11!==f&&(s=Q.exec(e)))if(n=s[1]){if(9===f){if(!(a=t.getElementById(n)))return i;if(a.id===n)return i.push(a),i}else if(u&&(a=u.getElementById(n))&&v(t,a)&&a.id===n)return i.push(a),i}else{if(s[2])return I.apply(i,t.getElementsByTagName(e)),i;if((n=s[3])&&p.getElementsByClassName&&t.getElementsByClassName)return I.apply(i,t.getElementsByClassName(n)),i}if(p.qsa&&!A[e+" "]&&(!_||!_.test(e))){if(1!==f)u=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((l=t.getAttribute("id"))?l=l.replace(te,ie):t.setAttribute("id",l=C),o=(c=h(e)).length;o--;)c[o]="#"+l+" "+ve(c[o]);d=c.join(","),u=Z.test(e)&&ge(t.parentNode)||t}if(d)try{return I.apply(i,u.querySelectorAll(d)),i}catch(e){}finally{l===C&&t.removeAttribute("id")}}}return g(e.replace(X,"$1"),t,i,r)}function ae(){var r=[];return function e(t,i){return r.push(t+" ")>y.cacheLength&&delete e[r.shift()],e[t+" "]=i}}function le(e){return e[C]=!0,e}function se(e){var t=k.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ce(e,t){for(var i=e.split("|"),r=i.length;r--;)y.attrHandle[i[r]]=t}function de(e,t){var i=t&&e,r=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function ue(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function fe(i){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===i}}function pe(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ne(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function he(a){return le(function(o){return o=+o,le(function(e,t){for(var i,r=a([],e.length,o),n=r.length;n--;)e[i=r[n]]&&(e[i]=!(t[i]=e[i]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in p=oe.support={},n=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},w=oe.setDocument=function(e){var t,i,r=e?e.ownerDocument||e:m;return r!==k&&9===r.nodeType&&r.documentElement&&(a=(k=r).documentElement,S=!n(k),m!==k&&(i=k.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),p.attributes=se(function(e){return e.className="i",!e.getAttribute("className")}),p.getElementsByTagName=se(function(e){return e.appendChild(k.createComment("")),!e.getElementsByTagName("*").length}),p.getElementsByClassName=G.test(k.getElementsByClassName),p.getById=se(function(e){return a.appendChild(e).id=C,!k.getElementsByName||!k.getElementsByName(C).length}),p.getById?(y.filter.ID=function(e){var t=e.replace(J,ee);return function(e){return e.getAttribute("id")===t}},y.find.ID=function(e,t){if(void 0!==t.getElementById&&S){var i=t.getElementById(e);return i?[i]:[]}}):(y.filter.ID=function(e){var i=e.replace(J,ee);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===i}},y.find.ID=function(e,t){if(void 0!==t.getElementById&&S){var i,r,n,o=t.getElementById(e);if(o){if((i=o.getAttributeNode("id"))&&i.value===e)return[o];for(n=t.getElementsByName(e),r=0;o=n[r++];)if((i=o.getAttributeNode("id"))&&i.value===e)return[o]}return[]}}),y.find.TAG=p.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):p.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,r=[],n=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;i=o[n++];)1===i.nodeType&&r.push(i);return r},y.find.CLASS=p.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&S)return t.getElementsByClassName(e)},l=[],_=[],(p.qsa=G.test(k.querySelectorAll))&&(se(function(e){a.appendChild(e).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&_.push("[*^$]="+R+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||_.push("\\["+R+"*(?:value|"+z+")"),e.querySelectorAll("[id~="+C+"-]").length||_.push("~="),e.querySelectorAll(":checked").length||_.push(":checked"),e.querySelectorAll("a#"+C+"+*").length||_.push(".#.+[+~]")}),se(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=k.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&_.push("name"+R+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&_.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&_.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),_.push(",.*:")})),(p.matchesSelector=G.test(d=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&se(function(e){p.disconnectedMatch=d.call(e,"*"),d.call(e,"[s!='']:x"),l.push("!=",H)}),_=_.length&&new RegExp(_.join("|")),l=l.length&&new RegExp(l.join("|")),t=G.test(a.compareDocumentPosition),v=t||G.test(a.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(i.contains?i.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},E=t?function(e,t){if(e===t)return c=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!p.sortDetached&&t.compareDocumentPosition(e)===i?e===k||e.ownerDocument===m&&v(m,e)?-1:t===k||t.ownerDocument===m&&v(m,t)?1:s?O(s,e)-O(s,t):0:4&i?-1:1)}:function(e,t){if(e===t)return c=!0,0;var i,r=0,n=e.parentNode,o=t.parentNode,a=[e],l=[t];if(!n||!o)return e===k?-1:t===k?1:n?-1:o?1:s?O(s,e)-O(s,t):0;if(n===o)return de(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;a[r]===l[r];)r++;return r?de(a[r],l[r]):a[r]===m?-1:l[r]===m?1:0}),k},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==k&&w(e),t=t.replace(q,"='$1']"),p.matchesSelector&&S&&!A[t+" "]&&(!l||!l.test(t))&&(!_||!_.test(t)))try{var i=d.call(e,t);if(i||p.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return 0<oe(t,k,null,[e]).length},oe.contains=function(e,t){return(e.ownerDocument||e)!==k&&w(e),v(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==k&&w(e);var i=y.attrHandle[t.toLowerCase()],r=i&&M.call(y.attrHandle,t.toLowerCase())?i(e,t,!S):void 0;return void 0!==r?r:p.attributes||!S?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},oe.escape=function(e){return(e+"").replace(te,ie)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,i=[],r=0,n=0;if(c=!p.detectDuplicates,s=!p.sortStable&&e.slice(0),e.sort(E),c){for(;t=e[n++];)t===e[n]&&(r=i.push(n));for(;r--;)e.splice(i[r],1)}return s=null,e},o=oe.getText=function(e){var t,i="",r=0,n=e.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=o(e)}else if(3===n||4===n)return e.nodeValue}else for(;t=e[r++];)i+=o(t);return i},(y=oe.selectors={cacheLength:50,createPseudo:le,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(J,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(J,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return V.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&$.test(i)&&(t=h(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(J,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=f[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&f(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(i,r,n){return function(e){var t=oe.attr(e,i);return null==t?"!="===r:!r||(t+="","="===r?t===n:"!="===r?t!==n:"^="===r?n&&0===t.indexOf(n):"*="===r?n&&-1<t.indexOf(n):"$="===r?n&&t.slice(-n.length)===n:"~="===r?-1<(" "+t.replace(W," ")+" ").indexOf(n):"|="===r&&(t===n||t.slice(0,n.length+1)===n+"-"))}},CHILD:function(h,e,t,g,_){var v="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===_?function(e){return!!e.parentNode}:function(e,t,i){var r,n,o,a,l,s,c=v!==m?"nextSibling":"previousSibling",d=e.parentNode,u=x&&e.nodeName.toLowerCase(),f=!i&&!x,p=!1;if(d){if(v){for(;c;){for(a=e;a=a[c];)if(x?a.nodeName.toLowerCase()===u:1===a.nodeType)return!1;s=c="only"===h&&!s&&"nextSibling"}return!0}if(s=[m?d.firstChild:d.lastChild],m&&f){for(p=(l=(r=(n=(o=(a=d)[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===T&&r[1])&&r[2],a=l&&d.childNodes[l];a=++l&&a&&a[c]||(p=l=0)||s.pop();)if(1===a.nodeType&&++p&&a===e){n[h]=[T,l,p];break}}else if(f&&(p=l=(r=(n=(o=(a=e)[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===T&&r[1]),!1===p)for(;(a=++l&&a&&a[c]||(p=l=0)||s.pop())&&((x?a.nodeName.toLowerCase()!==u:1!==a.nodeType)||!++p||(f&&((n=(o=a[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[T,p]),a!==e)););return(p-=_)===g||p%g==0&&0<=p/g}}},PSEUDO:function(e,o){var t,a=y.pseudos[e]||y.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return a[C]?a(o):1<a.length?(t=[e,e,"",o],y.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){for(var i,r=a(e,o),n=r.length;n--;)e[i=O(e,r[n])]=!(t[i]=r[n])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],n=[],l=u(e.replace(X,"$1"));return l[C]?le(function(e,t,i,r){for(var n,o=l(e,null,r,[]),a=e.length;a--;)(n=o[a])&&(e[a]=!(t[a]=n))}):function(e,t,i){return r[0]=e,l(r,null,i,n),r[0]=null,!n.pop()}}),has:le(function(t){return function(e){return 0<oe(t,e).length}}),contains:le(function(t){return t=t.replace(J,ee),function(e){return-1<(e.textContent||e.innerText||o(e)).indexOf(t)}}),lang:le(function(i){return U.test(i||"")||oe.error("unsupported lang: "+i),i=i.replace(J,ee).toLowerCase(),function(e){var t;do{if(t=S?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===i||0===t.indexOf(i+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=i.location&&i.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===k.activeElement&&(!k.hasFocus||k.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:pe(!1),disabled:pe(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!y.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,i){return[i<0?i+t:i]}),even:he(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:he(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:he(function(e,t,i){for(var r=i<0?i+t:i;0<=--r;)e.push(r);return e}),gt:he(function(e,t,i){for(var r=i<0?i+t:i;++r<t;)e.push(r);return e})}}).pseudos.nth=y.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[e]=ue(e);for(e in{submit:!0,reset:!0})y.pseudos[e]=fe(e);function _e(){}function ve(e){for(var t=0,i=e.length,r="";t<i;t++)r+=e[t].value;return r}function me(l,e,t){var s=e.dir,c=e.next,d=c||s,u=t&&"parentNode"===d,f=r++;return e.first?function(e,t,i){for(;e=e[s];)if(1===e.nodeType||u)return l(e,t,i);return!1}:function(e,t,i){var r,n,o,a=[T,f];if(i){for(;e=e[s];)if((1===e.nodeType||u)&&l(e,t,i))return!0}else for(;e=e[s];)if(1===e.nodeType||u)if(n=(o=e[C]||(e[C]={}))[e.uniqueID]||(o[e.uniqueID]={}),c&&c===e.nodeName.toLowerCase())e=e[s]||e;else{if((r=n[d])&&r[0]===T&&r[1]===f)return a[2]=r[2];if((n[d]=a)[2]=l(e,t,i))return!0}return!1}}function xe(n){return 1<n.length?function(e,t,i){for(var r=n.length;r--;)if(!n[r](e,t,i))return!1;return!0}:n[0]}function ye(e,t,i,r,n){for(var o,a=[],l=0,s=e.length,c=null!=t;l<s;l++)(o=e[l])&&(i&&!i(o,r,n)||(a.push(o),c&&t.push(l)));return a}function be(p,h,g,_,v,e){return _&&!_[C]&&(_=be(_)),v&&!v[C]&&(v=be(v,e)),le(function(e,t,i,r){var n,o,a,l=[],s=[],c=t.length,d=e||function(e,t,i){for(var r=0,n=t.length;r<n;r++)oe(e,t[r],i);return i}(h||"*",i.nodeType?[i]:i,[]),u=!p||!e&&h?d:ye(d,l,p,i,r),f=g?v||(e?p:c||_)?[]:t:u;if(g&&g(u,f,i,r),_)for(n=ye(f,s),_(n,[],i,r),o=n.length;o--;)(a=n[o])&&(f[s[o]]=!(u[s[o]]=a));if(e){if(v||p){if(v){for(n=[],o=f.length;o--;)(a=f[o])&&n.push(u[o]=a);v(null,f=[],n,r)}for(o=f.length;o--;)(a=f[o])&&-1<(n=v?O(e,a):l[o])&&(e[n]=!(t[n]=a))}}else f=ye(f===t?f.splice(c,f.length):f),v?v(null,t,f,r):I.apply(t,f)})}function we(e){for(var n,t,i,r=e.length,o=y.relative[e[0].type],a=o||y.relative[" "],l=o?1:0,s=me(function(e){return e===n},a,!0),c=me(function(e){return-1<O(n,e)},a,!0),d=[function(e,t,i){var r=!o&&(i||t!==b)||((n=t).nodeType?s(e,t,i):c(e,t,i));return n=null,r}];l<r;l++)if(t=y.relative[e[l].type])d=[me(xe(d),t)];else{if((t=y.filter[e[l].type].apply(null,e[l].matches))[C]){for(i=++l;i<r&&!y.relative[e[i].type];i++);return be(1<l&&xe(d),1<l&&ve(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(X,"$1"),t,l<i&&we(e.slice(l,i)),i<r&&we(e=e.slice(i)),i<r&&ve(e))}d.push(t)}return xe(d)}return _e.prototype=y.filters=y.pseudos,y.setFilters=new _e,h=oe.tokenize=function(e,t){var i,r,n,o,a,l,s,c=x[e+" "];if(c)return t?0:c.slice(0);for(a=e,l=[],s=y.preFilter;a;){for(o in i&&!(r=F.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(n=[])),i=!1,(r=j.exec(a))&&(i=r.shift(),n.push({value:i,type:r[0].replace(X," ")}),a=a.slice(i.length)),y.filter)!(r=V[o].exec(a))||s[o]&&!(r=s[o](r))||(i=r.shift(),n.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return t?a.length:a?oe.error(e):x(e,l).slice(0)},u=oe.compile=function(e,t){var i,_,v,m,x,r,n=[],o=[],a=A[e+" "];if(!a){for(t||(t=h(e)),i=t.length;i--;)(a=we(t[i]))[C]?n.push(a):o.push(a);(a=A(e,(_=o,m=0<(v=n).length,x=0<_.length,r=function(e,t,i,r,n){var o,a,l,s=0,c="0",d=e&&[],u=[],f=b,p=e||x&&y.find.TAG("*",n),h=T+=null==f?1:Math.random()||.1,g=p.length;for(n&&(b=t===k||t||n);c!==g&&null!=(o=p[c]);c++){if(x&&o){for(a=0,t||o.ownerDocument===k||(w(o),i=!S);l=_[a++];)if(l(o,t||k,i)){r.push(o);break}n&&(T=h)}m&&((o=!l&&o)&&s--,e&&d.push(o))}if(s+=c,m&&c!==s){for(a=0;l=v[a++];)l(d,u,t,i);if(e){if(0<s)for(;c--;)d[c]||u[c]||(u[c]=N.call(r));u=ye(u)}I.apply(r,u),n&&!e&&0<u.length&&1<s+v.length&&oe.uniqueSort(r)}return n&&(T=h,b=f),d},m?le(r):r))).selector=e}return a},g=oe.select=function(e,t,i,r){var n,o,a,l,s,c="function"==typeof e&&e,d=!r&&h(e=c.selector||e);if(i=i||[],1===d.length){if(2<(o=d[0]=d[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&S&&y.relative[o[1].type]){if(!(t=(y.find.ID(a.matches[0].replace(J,ee),t)||[])[0]))return i;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(n=V.needsContext.test(e)?0:o.length;n--&&(a=o[n],!y.relative[l=a.type]);)if((s=y.find[l])&&(r=s(a.matches[0].replace(J,ee),Z.test(o[0].type)&&ge(t.parentNode)||t))){if(o.splice(n,1),!(e=r.length&&ve(o)))return I.apply(i,r),i;break}}return(c||u(e,d))(r,t,!S,i,!t||Z.test(e)&&ge(t.parentNode)||t),i},p.sortStable=C.split("").sort(E).join("")===C,p.detectDuplicates=!!c,w(),p.sortDetached=se(function(e){return 1&e.compareDocumentPosition(k.createElement("fieldset"))}),se(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ce("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),p.attributes&&se(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ce("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),se(function(e){return null==e.getAttribute("disabled")})||ce(z,function(e,t,i){var r;if(!i)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(k);C.find=p,C.expr=p.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=p.uniqueSort,C.text=p.getText,C.isXMLDoc=p.isXML,C.contains=p.contains,C.escapeSelector=p.escape;var h=function(e,t,i){for(var r=[],n=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&C(e).is(i))break;r.push(e)}return r},w=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},T=C.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var E=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(e,i,r){return m(i)?C.grep(e,function(e,t){return!!i.call(e,t,e)!==r}):i.nodeType?C.grep(e,function(e){return e===i!==r}):"string"!=typeof i?C.grep(e,function(e){return-1<n.call(i,e)!==r}):C.filter(i,e,r)}C.filter=function(e,t,i){var r=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?C.find.matchesSelector(r,e)?[r]:[]:C.find.matches(e,C.grep(t,function(e){return 1===e.nodeType}))},C.fn.extend({find:function(e){var t,i,r=this.length,n=this;if("string"!=typeof e)return this.pushStack(C(e).filter(function(){for(t=0;t<r;t++)if(C.contains(n[t],this))return!0}));for(i=this.pushStack([]),t=0;t<r;t++)C.find(e,n[t],i);return 1<r?C.uniqueSort(i):i},filter:function(e){return this.pushStack(M(this,e||[],!1))},not:function(e){return this.pushStack(M(this,e||[],!0))},is:function(e){return!!M(this,"string"==typeof e&&T.test(e)?C(e):e||[],!1).length}});var N,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(e,t,i){var r,n;if(!e)return this;if(i=i||N,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==i.ready?i.ready(e):e(C):C.makeArray(e,this);if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:L.exec(e))||!r[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:S,!0)),E.test(r[1])&&C.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(n=S.getElementById(r[2]))&&(this[0]=n,this.length=1),this}).prototype=C.fn,N=C(S);var I=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(C.contains(this,t[e]))return!0})},closest:function(e,t){var i,r=0,n=this.length,o=[],a="string"!=typeof e&&C(e);if(!T.test(e))for(;r<n;r++)for(i=this[r];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?-1<a.index(i):1===i.nodeType&&C.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(1<o.length?C.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?n.call(C(e),this[0]):n.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,i){return h(e,"parentNode",i)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,i){return h(e,"nextSibling",i)},prevUntil:function(e,t,i){return h(e,"previousSibling",i)},siblings:function(e){return w((e.parentNode||{}).firstChild,e)},children:function(e){return w(e.firstChild)},contents:function(e){return A(e,"iframe")?e.contentDocument:(A(e,"template")&&(e=e.content||e),C.merge([],e.childNodes))}},function(r,n){C.fn[r]=function(e,t){var i=C.map(this,n,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(i=C.filter(t,i)),1<this.length&&(D[r]||C.uniqueSort(i),I.test(r)&&i.reverse()),this.pushStack(i)}});var z=/[^\x20\t\r\n\f]+/g;function R(e){return e}function P(e){throw e}function B(e,t,i,r){var n;try{e&&m(n=e.promise)?n.call(e).done(t).fail(i):e&&m(n=e.then)?n.call(e,t,i):t.apply(void 0,[e].slice(r))}catch(e){i.apply(void 0,[e])}}C.Callbacks=function(r){var e,i;r="string"==typeof r?(e=r,i={},C.each(e.match(z)||[],function(e,t){i[t]=!0}),i):C.extend({},r);var n,t,o,a,l=[],s=[],c=-1,d=function(){for(a=a||r.once,o=n=!0;s.length;c=-1)for(t=s.shift();++c<l.length;)!1===l[c].apply(t[0],t[1])&&r.stopOnFalse&&(c=l.length,t=!1);r.memory||(t=!1),n=!1,a&&(l=t?[]:"")},u={add:function(){return l&&(t&&!n&&(c=l.length-1,s.push(t)),function i(e){C.each(e,function(e,t){m(t)?r.unique&&u.has(t)||l.push(t):t&&t.length&&"string"!==b(t)&&i(t)})}(arguments),t&&!n&&d()),this},remove:function(){return C.each(arguments,function(e,t){for(var i;-1<(i=C.inArray(t,l,i));)l.splice(i,1),i<=c&&c--}),this},has:function(e){return e?-1<C.inArray(e,l):0<l.length},empty:function(){return l&&(l=[]),this},disable:function(){return a=s=[],l=t="",this},disabled:function(){return!l},lock:function(){return a=s=[],t||n||(l=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],s.push(t),n||d()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!o}};return u},C.extend({Deferred:function(e){var o=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],n="pending",a={state:function(){return n},always:function(){return l.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var n=arguments;return C.Deferred(function(r){C.each(o,function(e,t){var i=m(n[t[4]])&&n[t[4]];l[t[1]](function(){var e=i&&i.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,i?[e]:arguments)})}),n=null}).promise()},then:function(t,i,r){var s=0;function c(n,o,a,l){return function(){var i=this,r=arguments,e=function(){var e,t;if(!(n<s)){if((e=a.apply(i,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?l?t.call(e,c(s,o,R,l),c(s,o,P,l)):(s++,t.call(e,c(s,o,R,l),c(s,o,P,l),c(s,o,R,o.notifyWith))):(a!==R&&(i=void 0,r=[e]),(l||o.resolveWith)(i,r))}},t=l?e:function(){try{e()}catch(e){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(e,t.stackTrace),s<=n+1&&(a!==P&&(i=void 0,r=[e]),o.rejectWith(i,r))}};n?t():(C.Deferred.getStackHook&&(t.stackTrace=C.Deferred.getStackHook()),k.setTimeout(t))}}return C.Deferred(function(e){o[0][3].add(c(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(c(0,e,m(t)?t:R)),o[2][3].add(c(0,e,m(i)?i:P))}).promise()},promise:function(e){return null!=e?C.extend(e,a):a}},l={};return C.each(o,function(e,t){var i=t[2],r=t[5];a[t[1]]=i.add,r&&i.add(function(){n=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),i.add(t[3].fire),l[t[0]]=function(){return l[t[0]+"With"](this===l?void 0:this,arguments),this},l[t[0]+"With"]=i.fireWith}),a.promise(l),e&&e.call(l,l),l},when:function(e){var i=arguments.length,t=i,r=Array(t),n=l.call(arguments),o=C.Deferred(),a=function(t){return function(e){r[t]=this,n[t]=1<arguments.length?l.call(arguments):e,--i||o.resolveWith(r,n)}};if(i<=1&&(B(e,o.done(a(t)).resolve,o.reject,!i),"pending"===o.state()||m(n[t]&&n[t].then)))return o.then();for(;t--;)B(n[t],a(t),o.reject);return o.promise()}});var H=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(e,t){k.console&&k.console.warn&&e&&H.test(e.name)&&k.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},C.readyException=function(e){k.setTimeout(function(){throw e})};var W=C.Deferred();function X(){S.removeEventListener("DOMContentLoaded",X),k.removeEventListener("load",X),C.ready()}C.fn.ready=function(e){return W.then(e).catch(function(e){C.readyException(e)}),this},C.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--C.readyWait:C.isReady)||(C.isReady=!0)!==e&&0<--C.readyWait||W.resolveWith(S,[C])}}),C.ready.then=W.then,"complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll?k.setTimeout(C.ready):(S.addEventListener("DOMContentLoaded",X),k.addEventListener("load",X));var F=function(e,t,i,r,n,o,a){var l=0,s=e.length,c=null==i;if("object"===b(i))for(l in n=!0,i)F(e,t,l,i[l],!0,o,a);else if(void 0!==r&&(n=!0,m(r)||(a=!0),c&&(t=a?(t.call(e,r),null):(c=t,function(e,t,i){return c.call(C(e),i)})),t))for(;l<s;l++)t(e[l],i,a?r:r.call(e[l],l,t(e[l],i)));return n?e:c?t.call(e):s?t(e[0],i):o},j=/^-ms-/,q=/-([a-z])/g;function $(e,t){return t.toUpperCase()}function U(e){return e.replace(j,"ms-").replace(q,$)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function K(){this.expando=C.expando+K.uid++}K.uid=1,K.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var r,n=this.cache(e);if("string"==typeof t)n[U(t)]=i;else for(r in t)n[U(r)]=t[r];return n},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][U(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,r=e[this.expando];if(void 0!==r){if(void 0!==t){i=(t=Array.isArray(t)?t.map(U):(t=U(t))in r?[t]:t.match(z)||[]).length;for(;i--;)delete r[t[i]]}(void 0===t||C.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var Y=new K,G=new K,Q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function J(e,t,i){var r,n;if(void 0===i&&1===e.nodeType)if(r="data-"+t.replace(Z,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(r))){try{i="true"===(n=i)||"false"!==n&&("null"===n?null:n===+n+""?+n:Q.test(n)?JSON.parse(n):n)}catch(e){}G.set(e,t,i)}else i=void 0;return i}C.extend({hasData:function(e){return G.hasData(e)||Y.hasData(e)},data:function(e,t,i){return G.access(e,t,i)},removeData:function(e,t){G.remove(e,t)},_data:function(e,t,i){return Y.access(e,t,i)},_removeData:function(e,t){Y.remove(e,t)}}),C.fn.extend({data:function(i,e){var t,r,n,o=this[0],a=o&&o.attributes;if(void 0!==i)return"object"==typeof i?this.each(function(){G.set(this,i)}):F(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=G.get(o,i))?t:void 0!==(t=J(o,i))?t:void 0;this.each(function(){G.set(this,i,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(n=G.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=U(r.slice(5)),J(o,r,n[r]));Y.set(o,"hasDataAttrs",!0)}return n},removeData:function(e){return this.each(function(){G.remove(this,e)})}}),C.extend({queue:function(e,t,i){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),i&&(!r||Array.isArray(i)?r=Y.access(e,t,C.makeArray(i)):r.push(i)),r||[]},dequeue:function(e,t){t=t||"fx";var i=C.queue(e,t),r=i.length,n=i.shift(),o=C._queueHooks(e,t);"inprogress"===n&&(n=i.shift(),r--),n&&("fx"===t&&i.unshift("inprogress"),delete o.stop,n.call(e,function(){C.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Y.get(e,i)||Y.access(e,i,{empty:C.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",i])})})}}),C.fn.extend({queue:function(t,i){var e=2;return"string"!=typeof t&&(i=t,t="fx",e--),arguments.length<e?C.queue(this[0],t):void 0===i?this:this.each(function(){var e=C.queue(this,t,i);C._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&C.dequeue(this,t)})},dequeue:function(e){return this.each(function(){C.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,r=1,n=C.Deferred(),o=this,a=this.length,l=function(){--r||n.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(i=Y.get(o[a],e+"queueHooks"))&&i.empty&&(r++,i.empty.add(l));return l(),n.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],re=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&C.contains(e.ownerDocument,e)&&"none"===C.css(e,"display")},ne=function(e,t,i,r){var n,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in n=i.apply(e,r||[]),t)e.style[o]=a[o];return n};function oe(e,t,i,r){var n,o,a=20,l=r?function(){return r.cur()}:function(){return C.css(e,t,"")},s=l(),c=i&&i[3]||(C.cssNumber[t]?"":"px"),d=(C.cssNumber[t]||"px"!==c&&+s)&&te.exec(C.css(e,t));if(d&&d[3]!==c){for(s/=2,c=c||d[3],d=+s||1;a--;)C.style(e,t,d+c),(1-o)*(1-(o=l()/s||.5))<=0&&(a=0),d/=o;d*=2,C.style(e,t,d+c),i=i||[]}return i&&(d=+d||+s||0,n=i[1]?d+(i[1]+1)*i[2]:+i[2],r&&(r.unit=c,r.start=d,r.end=n)),n}var ae={};function le(e,t){for(var i,r,n,o,a,l,s,c=[],d=0,u=e.length;d<u;d++)(r=e[d]).style&&(i=r.style.display,t?("none"===i&&(c[d]=Y.get(r,"display")||null,c[d]||(r.style.display="")),""===r.style.display&&re(r)&&(c[d]=(s=a=o=void 0,a=(n=r).ownerDocument,l=n.nodeName,(s=ae[l])||(o=a.body.appendChild(a.createElement(l)),s=C.css(o,"display"),o.parentNode.removeChild(o),"none"===s&&(s="block"),ae[l]=s)))):"none"!==i&&(c[d]="none",Y.set(r,"display",i)));for(d=0;d<u;d++)null!=c[d]&&(e[d].style.display=c[d]);return e}C.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){re(this)?C(this).show():C(this).hide()})}});var se=/^(?:checkbox|radio)$/i,ce=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,de=/^$|^module$|\/(?:java|ecma)script/i,ue={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function fe(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?C.merge([e],i):i}function pe(e,t){for(var i=0,r=e.length;i<r;i++)Y.set(e[i],"globalEval",!t||Y.get(t[i],"globalEval"))}ue.optgroup=ue.option,ue.tbody=ue.tfoot=ue.colgroup=ue.caption=ue.thead,ue.th=ue.td;var he,ge,_e=/<|&#?\w+;/;function ve(e,t,i,r,n){for(var o,a,l,s,c,d,u=t.createDocumentFragment(),f=[],p=0,h=e.length;p<h;p++)if((o=e[p])||0===o)if("object"===b(o))C.merge(f,o.nodeType?[o]:o);else if(_e.test(o)){for(a=a||u.appendChild(t.createElement("div")),l=(ce.exec(o)||["",""])[1].toLowerCase(),s=ue[l]||ue._default,a.innerHTML=s[1]+C.htmlPrefilter(o)+s[2],d=s[0];d--;)a=a.lastChild;C.merge(f,a.childNodes),(a=u.firstChild).textContent=""}else f.push(t.createTextNode(o));for(u.textContent="",p=0;o=f[p++];)if(r&&-1<C.inArray(o,r))n&&n.push(o);else if(c=C.contains(o.ownerDocument,o),a=fe(u.appendChild(o),"script"),c&&pe(a),i)for(d=0;o=a[d++];)de.test(o.type||"")&&i.push(o);return u}he=S.createDocumentFragment().appendChild(S.createElement("div")),(ge=S.createElement("input")).setAttribute("type","radio"),ge.setAttribute("checked","checked"),ge.setAttribute("name","t"),he.appendChild(ge),v.checkClone=he.cloneNode(!0).cloneNode(!0).lastChild.checked,he.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!he.cloneNode(!0).lastChild.defaultValue;var me=S.documentElement,xe=/^key/,ye=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,be=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function ke(){return!1}function Se(){try{return S.activeElement}catch(e){}}function Ce(e,t,i,r,n,o){var a,l;if("object"==typeof t){for(l in"string"!=typeof i&&(r=r||i,i=void 0),t)Ce(e,l,i,r,t[l],o);return e}if(null==r&&null==n?(n=i,r=i=void 0):null==n&&("string"==typeof i?(n=r,r=void 0):(n=r,r=i,i=void 0)),!1===n)n=ke;else if(!n)return e;return 1===o&&(a=n,(n=function(e){return C().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=C.guid++)),e.each(function(){C.event.add(this,t,n,r,i)})}C.event={global:{},add:function(t,e,i,r,n){var o,a,l,s,c,d,u,f,p,h,g,_=Y.get(t);if(_)for(i.handler&&(i=(o=i).handler,n=o.selector),n&&C.find.matchesSelector(me,n),i.guid||(i.guid=C.guid++),(s=_.events)||(s=_.events={}),(a=_.handle)||(a=_.handle=function(e){return void 0!==C&&C.event.triggered!==e.type?C.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(z)||[""]).length;c--;)p=g=(l=be.exec(e[c])||[])[1],h=(l[2]||"").split(".").sort(),p&&(u=C.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,u=C.event.special[p]||{},d=C.extend({type:p,origType:g,data:r,handler:i,guid:i.guid,selector:n,needsContext:n&&C.expr.match.needsContext.test(n),namespace:h.join(".")},o),(f=s[p])||((f=s[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(p,a)),u.add&&(u.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),n?f.splice(f.delegateCount++,0,d):f.push(d),C.event.global[p]=!0)},remove:function(e,t,i,r,n){var o,a,l,s,c,d,u,f,p,h,g,_=Y.hasData(e)&&Y.get(e);if(_&&(s=_.events)){for(c=(t=(t||"").match(z)||[""]).length;c--;)if(p=g=(l=be.exec(t[c])||[])[1],h=(l[2]||"").split(".").sort(),p){for(u=C.event.special[p]||{},f=s[p=(r?u.delegateType:u.bindType)||p]||[],l=l[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)d=f[o],!n&&g!==d.origType||i&&i.guid!==d.guid||l&&!l.test(d.namespace)||r&&r!==d.selector&&("**"!==r||!d.selector)||(f.splice(o,1),d.selector&&f.delegateCount--,u.remove&&u.remove.call(e,d));a&&!f.length&&(u.teardown&&!1!==u.teardown.call(e,h,_.handle)||C.removeEvent(e,p,_.handle),delete s[p])}else for(p in s)C.event.remove(e,p+t[c],i,r,!0);C.isEmptyObject(s)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,i,r,n,o,a,l=C.event.fix(e),s=new Array(arguments.length),c=(Y.get(this,"events")||{})[l.type]||[],d=C.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,l)){for(a=C.event.handlers.call(this,l,c),t=0;(n=a[t++])&&!l.isPropagationStopped();)for(l.currentTarget=n.elem,i=0;(o=n.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(r=((C.event.special[o.origType]||{}).handle||o.handler).apply(n.elem,s))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,l),l.result}},handlers:function(e,t){var i,r,n,o,a,l=[],s=t.delegateCount,c=e.target;if(s&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},i=0;i<s;i++)void 0===a[n=(r=t[i]).selector+" "]&&(a[n]=r.needsContext?-1<C(n,this).index(c):C.find(n,this,null,[c]).length),a[n]&&o.push(r);o.length&&l.push({elem:c,handlers:o})}return c=this,s<t.length&&l.push({elem:c,handlers:t.slice(s)}),l},addProp:function(t,e){Object.defineProperty(C.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[C.expando]?e:new C.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Se()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Se()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&A(this,"input"))return this.click(),!1},_default:function(e){return A(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},C.Event=function(e,t){if(!(this instanceof C.Event))return new C.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:ke,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[C.expando]=!0},C.Event.prototype={constructor:C.Event,isDefaultPrevented:ke,isPropagationStopped:ke,isImmediatePropagationStopped:ke,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&xe.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ye.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},C.event.addProp),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,n){C.event.special[e]={delegateType:n,bindType:n,handle:function(e){var t,i=e.relatedTarget,r=e.handleObj;return i&&(i===this||C.contains(this,i))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=n),t}}}),C.fn.extend({on:function(e,t,i,r){return Ce(this,e,t,i,r)},one:function(e,t,i,r){return Ce(this,e,t,i,r,1)},off:function(e,t,i){var r,n;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,C(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=ke),this.each(function(){C.event.remove(this,e,i,t)});for(n in e)this.off(n,t,e[n]);return this}});var Te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ae=/<script|<style|<link/i,Ee=/checked\s*(?:[^=]|=\s*.checked.)/i,Me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ne(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&C(e).children("tbody")[0]||e}function Le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ie(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function De(e,t){var i,r,n,o,a,l,s,c;if(1===t.nodeType){if(Y.hasData(e)&&(o=Y.access(e),a=Y.set(t,o),c=o.events))for(n in delete a.handle,a.events={},c)for(i=0,r=c[n].length;i<r;i++)C.event.add(t,n,c[n][i]);G.hasData(e)&&(l=G.access(e),s=C.extend({},l),G.set(t,s))}}function Oe(i,r,n,o){r=g.apply([],r);var e,t,a,l,s,c,d=0,u=i.length,f=u-1,p=r[0],h=m(p);if(h||1<u&&"string"==typeof p&&!v.checkClone&&Ee.test(p))return i.each(function(e){var t=i.eq(e);h&&(r[0]=p.call(this,e,t.html())),Oe(t,r,n,o)});if(u&&(t=(e=ve(r,i[0].ownerDocument,!1,i,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(l=(a=C.map(fe(e,"script"),Le)).length;d<u;d++)s=e,d!==f&&(s=C.clone(s,!0,!0),l&&C.merge(a,fe(s,"script"))),n.call(i[d],s,d);if(l)for(c=a[a.length-1].ownerDocument,C.map(a,Ie),d=0;d<l;d++)s=a[d],de.test(s.type||"")&&!Y.access(s,"globalEval")&&C.contains(c,s)&&(s.src&&"module"!==(s.type||"").toLowerCase()?C._evalUrl&&C._evalUrl(s.src):y(s.textContent.replace(Me,""),c,s))}return i}function ze(e,t,i){for(var r,n=t?C.filter(t,e):e,o=0;null!=(r=n[o]);o++)i||1!==r.nodeType||C.cleanData(fe(r)),r.parentNode&&(i&&C.contains(r.ownerDocument,r)&&pe(fe(r,"script")),r.parentNode.removeChild(r));return e}C.extend({htmlPrefilter:function(e){return e.replace(Te,"<$1></$2>")},clone:function(e,t,i){var r,n,o,a,l,s,c,d=e.cloneNode(!0),u=C.contains(e.ownerDocument,e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||C.isXMLDoc(e)))for(a=fe(d),r=0,n=(o=fe(e)).length;r<n;r++)l=o[r],s=a[r],void 0,"input"===(c=s.nodeName.toLowerCase())&&se.test(l.type)?s.checked=l.checked:"input"!==c&&"textarea"!==c||(s.defaultValue=l.defaultValue);if(t)if(i)for(o=o||fe(e),a=a||fe(d),r=0,n=o.length;r<n;r++)De(o[r],a[r]);else De(e,d);return 0<(a=fe(d,"script")).length&&pe(a,!u&&fe(e,"script")),d},cleanData:function(e){for(var t,i,r,n=C.event.special,o=0;void 0!==(i=e[o]);o++)if(V(i)){if(t=i[Y.expando]){if(t.events)for(r in t.events)n[r]?C.event.remove(i,r):C.removeEvent(i,r,t.handle);i[Y.expando]=void 0}i[G.expando]&&(i[G.expando]=void 0)}}}),C.fn.extend({detach:function(e){return ze(this,e,!0)},remove:function(e){return ze(this,e)},text:function(e){return F(this,function(e){return void 0===e?C.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Oe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)})},prepend:function(){return Oe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Oe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Oe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(fe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return C.clone(this,e,t)})},html:function(e){return F(this,function(e){var t=this[0]||{},i=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!ue[(ce.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;i<r;i++)1===(t=this[i]||{}).nodeType&&(C.cleanData(fe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var i=[];return Oe(this,arguments,function(e){var t=this.parentNode;C.inArray(this,i)<0&&(C.cleanData(fe(this)),t&&t.replaceChild(e,this))},i)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){C.fn[e]=function(e){for(var t,i=[],r=C(e),n=r.length-1,o=0;o<=n;o++)t=o===n?this:this.clone(!0),C(r[o])[a](t),s.apply(i,t.get());return this.pushStack(i)}});var Re=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Pe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=k),t.getComputedStyle(e)},Be=new RegExp(ie.join("|"),"i");function He(e,t,i){var r,n,o,a,l=e.style;return(i=i||Pe(e))&&(""!==(a=i.getPropertyValue(t)||i[t])||C.contains(e.ownerDocument,e)||(a=C.style(e,t)),!v.pixelBoxStyles()&&Re.test(a)&&Be.test(t)&&(r=l.width,n=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=a,a=i.width,l.width=r,l.minWidth=n,l.maxWidth=o)),void 0!==a?a+"":a}function We(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(s){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",s.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",me.appendChild(l).appendChild(s);var e=k.getComputedStyle(s);i="1%"!==e.top,a=12===t(e.marginLeft),s.style.right="60%",o=36===t(e.right),r=36===t(e.width),s.style.position="absolute",n=36===s.offsetWidth||"absolute",me.removeChild(l),s=null}}function t(e){return Math.round(parseFloat(e))}var i,r,n,o,a,l=S.createElement("div"),s=S.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===s.style.backgroundClip,C.extend(v,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),a},scrollboxSize:function(){return e(),n}}))}();var Xe=/^(none|table(?!-c[ea]).+)/,Fe=/^--/,je={position:"absolute",visibility:"hidden",display:"block"},qe={letterSpacing:"0",fontWeight:"400"},$e=["Webkit","Moz","ms"],Ue=S.createElement("div").style;function Ve(e){var t=C.cssProps[e];return t||(t=C.cssProps[e]=function(e){if(e in Ue)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=$e.length;i--;)if((e=$e[i]+t)in Ue)return e}(e)||e),t}function Ke(e,t,i){var r=te.exec(t);return r?Math.max(0,r[2]-(i||0))+(r[3]||"px"):t}function Ye(e,t,i,r,n,o){var a="width"===t?1:0,l=0,s=0;if(i===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(s+=C.css(e,i+ie[a],!0,n)),r?("content"===i&&(s-=C.css(e,"padding"+ie[a],!0,n)),"margin"!==i&&(s-=C.css(e,"border"+ie[a]+"Width",!0,n))):(s+=C.css(e,"padding"+ie[a],!0,n),"padding"!==i?s+=C.css(e,"border"+ie[a]+"Width",!0,n):l+=C.css(e,"border"+ie[a]+"Width",!0,n));return!r&&0<=o&&(s+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-s-l-.5))),s}function Ge(e,t,i){var r=Pe(e),n=He(e,t,r),o="border-box"===C.css(e,"boxSizing",!1,r),a=o;if(Re.test(n)){if(!i)return n;n="auto"}return a=a&&(v.boxSizingReliable()||n===e.style[t]),("auto"===n||!parseFloat(n)&&"inline"===C.css(e,"display",!1,r))&&(n=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(n=parseFloat(n)||0)+Ye(e,t,i||(o?"border":"content"),a,r,n)+"px"}function Qe(e,t,i,r,n){return new Qe.prototype.init(e,t,i,r,n)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=He(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,o,a,l=U(t),s=Fe.test(t),c=e.style;if(s||(t=Ve(l)),a=C.cssHooks[t]||C.cssHooks[l],void 0===i)return a&&"get"in a&&void 0!==(n=a.get(e,!1,r))?n:c[t];"string"===(o=typeof i)&&(n=te.exec(i))&&n[1]&&(i=oe(e,t,n),o="number"),null!=i&&i==i&&("number"===o&&(i+=n&&n[3]||(C.cssNumber[l]?"":"px")),v.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,r))||(s?c.setProperty(t,i):c[t]=i))}},css:function(e,t,i,r){var n,o,a,l=U(t);return Fe.test(t)||(t=Ve(l)),(a=C.cssHooks[t]||C.cssHooks[l])&&"get"in a&&(n=a.get(e,!0,i)),void 0===n&&(n=He(e,t,r)),"normal"===n&&t in qe&&(n=qe[t]),""===i||i?(o=parseFloat(n),!0===i||isFinite(o)?o||0:n):n}}),C.each(["height","width"],function(e,l){C.cssHooks[l]={get:function(e,t,i){if(t)return!Xe.test(C.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Ge(e,l,i):ne(e,je,function(){return Ge(e,l,i)})},set:function(e,t,i){var r,n=Pe(e),o="border-box"===C.css(e,"boxSizing",!1,n),a=i&&Ye(e,l,i,o,n);return o&&v.scrollboxSize()===n.position&&(a-=Math.ceil(e["offset"+l[0].toUpperCase()+l.slice(1)]-parseFloat(n[l])-Ye(e,l,"border",!1,n)-.5)),a&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[l]=t,t=C.css(e,l)),Ke(0,t,a)}}}),C.cssHooks.marginLeft=We(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(He(e,"marginLeft"))||e.getBoundingClientRect().left-ne(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(n,o){C.cssHooks[n+o]={expand:function(e){for(var t=0,i={},r="string"==typeof e?e.split(" "):[e];t<4;t++)i[n+ie[t]+o]=r[t]||r[t-2]||r[0];return i}},"margin"!==n&&(C.cssHooks[n+o].set=Ke)}),C.fn.extend({css:function(e,t){return F(this,function(e,t,i){var r,n,o={},a=0;if(Array.isArray(t)){for(r=Pe(e),n=t.length;a<n;a++)o[t[a]]=C.css(e,t[a],!1,r);return o}return void 0!==i?C.style(e,t,i):C.css(e,t)},e,t,1<arguments.length)}}),((C.Tween=Qe).prototype={constructor:Qe,init:function(e,t,i,r,n,o){this.elem=e,this.prop=i,this.easing=n||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(C.cssNumber[i]?"":"px")},cur:function(){var e=Qe.propHooks[this.prop];return e&&e.get?e.get(this):Qe.propHooks._default.get(this)},run:function(e){var t,i=Qe.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Qe.propHooks._default.set(this),this}}).init.prototype=Qe.prototype,(Qe.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[C.cssProps[e.prop]]&&!C.cssHooks[e.prop]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Qe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},C.fx=Qe.prototype.init,C.fx.step={};var Ze,Je,et,tt,it=/^(?:toggle|show|hide)$/,rt=/queueHooks$/;function nt(){Je&&(!1===S.hidden&&k.requestAnimationFrame?k.requestAnimationFrame(nt):k.setTimeout(nt,C.fx.interval),C.fx.tick())}function ot(){return k.setTimeout(function(){Ze=void 0}),Ze=Date.now()}function at(e,t){var i,r=0,n={height:e};for(t=t?1:0;r<4;r+=2-t)n["margin"+(i=ie[r])]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function lt(e,t,i){for(var r,n=(st.tweeners[t]||[]).concat(st.tweeners["*"]),o=0,a=n.length;o<a;o++)if(r=n[o].call(i,t,e))return r}function st(o,e,t){var i,a,r=0,n=st.prefilters.length,l=C.Deferred().always(function(){delete s.elem}),s=function(){if(a)return!1;for(var e=Ze||ot(),t=Math.max(0,c.startTime+c.duration-e),i=1-(t/c.duration||0),r=0,n=c.tweens.length;r<n;r++)c.tweens[r].run(i);return l.notifyWith(o,[c,i,t]),i<1&&n?t:(n||l.notifyWith(o,[c,1,0]),l.resolveWith(o,[c]),!1)},c=l.promise({elem:o,props:C.extend({},e),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ze||ot(),duration:t.duration,tweens:[],createTween:function(e,t){var i=C.Tween(o,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var t=0,i=e?c.tweens.length:0;if(a)return this;for(a=!0;t<i;t++)c.tweens[t].run(1);return e?(l.notifyWith(o,[c,1,0]),l.resolveWith(o,[c,e])):l.rejectWith(o,[c,e]),this}}),d=c.props;for(!function(e,t){var i,r,n,o,a;for(i in e)if(n=t[r=U(i)],o=e[i],Array.isArray(o)&&(n=o[1],o=e[i]=o[0]),i!==r&&(e[r]=o,delete e[i]),(a=C.cssHooks[r])&&"expand"in a)for(i in o=a.expand(o),delete e[r],o)i in e||(e[i]=o[i],t[i]=n);else t[r]=n}(d,c.opts.specialEasing);r<n;r++)if(i=st.prefilters[r].call(c,o,d,c.opts))return m(i.stop)&&(C._queueHooks(c.elem,c.opts.queue).stop=i.stop.bind(i)),i;return C.map(d,lt,c),m(c.opts.start)&&c.opts.start.call(o,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),C.fx.timer(C.extend(s,{elem:o,anim:c,queue:c.opts.queue})),c}C.Animation=C.extend(st,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return oe(i.elem,e,te.exec(t),i),i}]},tweener:function(e,t){for(var i,r=0,n=(e=m(e)?(t=e,["*"]):e.match(z)).length;r<n;r++)i=e[r],st.tweeners[i]=st.tweeners[i]||[],st.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var r,n,o,a,l,s,c,d,u="width"in t||"height"in t,f=this,p={},h=e.style,g=e.nodeType&&re(e),_=Y.get(e,"fxshow");for(r in i.queue||(null==(a=C._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,C.queue(e,"fx").length||a.empty.fire()})})),t)if(n=t[r],it.test(n)){if(delete t[r],o=o||"toggle"===n,n===(g?"hide":"show")){if("show"!==n||!_||void 0===_[r])continue;g=!0}p[r]=_&&_[r]||C.style(e,r)}if((s=!C.isEmptyObject(t))||!C.isEmptyObject(p))for(r in u&&1===e.nodeType&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],null==(c=_&&_.display)&&(c=Y.get(e,"display")),"none"===(d=C.css(e,"display"))&&(c?d=c:(le([e],!0),c=e.style.display||c,d=C.css(e,"display"),le([e]))),("inline"===d||"inline-block"===d&&null!=c)&&"none"===C.css(e,"float")&&(s||(f.done(function(){h.display=c}),null==c&&(d=h.display,c="none"===d?"":d)),h.display="inline-block")),i.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]})),s=!1,p)s||(_?"hidden"in _&&(g=_.hidden):_=Y.access(e,"fxshow",{display:c}),o&&(_.hidden=!g),g&&le([e],!0),f.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),p)C.style(e,r,p[r])})),s=lt(g?_[r]:0,r,f),r in _||(_[r]=s.start,g&&(s.end=s.start,s.start=0))}],prefilter:function(e,t){t?st.prefilters.unshift(e):st.prefilters.push(e)}}),C.speed=function(e,t,i){var r=e&&"object"==typeof e?C.extend({},e):{complete:i||!i&&t||m(e)&&e,duration:e,easing:i&&t||t&&!m(t)&&t};return C.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in C.fx.speeds?r.duration=C.fx.speeds[r.duration]:r.duration=C.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&C.dequeue(this,r.queue)},r},C.fn.extend({fadeTo:function(e,t,i,r){return this.filter(re).css("opacity",0).show().end().animate({opacity:t},e,i,r)},animate:function(t,e,i,r){var n=C.isEmptyObject(t),o=C.speed(e,i,r),a=function(){var e=st(this,C.extend({},t),o);(n||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,n||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(n,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof n&&(o=e,e=n,n=void 0),e&&!1!==n&&this.queue(n||"fx",[]),this.each(function(){var e=!0,t=null!=n&&n+"queueHooks",i=C.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&rt.test(t)&&a(r[t]);for(t=i.length;t--;)i[t].elem!==this||null!=n&&i[t].queue!==n||(i[t].anim.stop(o),e=!1,i.splice(t,1));!e&&o||C.dequeue(this,n)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),i=t[a+"queue"],r=t[a+"queueHooks"],n=C.timers,o=i?i.length:0;for(t.finish=!0,C.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=n.length;e--;)n[e].elem===this&&n[e].queue===a&&(n[e].anim.stop(!0),n.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete t.finish})}}),C.each(["toggle","show","hide"],function(e,r){var n=C.fn[r];C.fn[r]=function(e,t,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(at(r,!0),e,t,i)}}),C.each({slideDown:at("show"),slideUp:at("hide"),slideToggle:at("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){C.fn[e]=function(e,t,i){return this.animate(r,e,t,i)}}),C.timers=[],C.fx.tick=function(){var e,t=0,i=C.timers;for(Ze=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||C.fx.stop(),Ze=void 0},C.fx.timer=function(e){C.timers.push(e),C.fx.start()},C.fx.interval=13,C.fx.start=function(){Je||(Je=!0,nt())},C.fx.stop=function(){Je=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(r,e){return r=C.fx&&C.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var i=k.setTimeout(e,r);t.stop=function(){k.clearTimeout(i)}})},et=S.createElement("input"),tt=S.createElement("select").appendChild(S.createElement("option")),et.type="checkbox",v.checkOn=""!==et.value,v.optSelected=tt.selected,(et=S.createElement("input")).value="t",et.type="radio",v.radioValue="t"===et.value;var ct,dt=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return F(this,C.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){C.removeAttr(this,e)})}}),C.extend({attr:function(e,t,i){var r,n,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?C.prop(e,t,i):(1===o&&C.isXMLDoc(e)||(n=C.attrHooks[t.toLowerCase()]||(C.expr.match.bool.test(t)?ct:void 0)),void 0!==i?null===i?void C.removeAttr(e,t):n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:(e.setAttribute(t,i+""),i):n&&"get"in n&&null!==(r=n.get(e,t))?r:null==(r=C.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&A(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,r=0,n=t&&t.match(z);if(n&&1===e.nodeType)for(;i=n[r++];)e.removeAttribute(i)}}),ct={set:function(e,t,i){return!1===t?C.removeAttr(e,i):e.setAttribute(i,i),i}},C.each(C.expr.match.bool.source.match(/\w+/g),function(e,t){var a=dt[t]||C.find.attr;dt[t]=function(e,t,i){var r,n,o=t.toLowerCase();return i||(n=dt[o],dt[o]=r,r=null!=a(e,t,i)?o:null,dt[o]=n),r}});var ut=/^(?:input|select|textarea|button)$/i,ft=/^(?:a|area)$/i;function pt(e){return(e.match(z)||[]).join(" ")}function ht(e){return e.getAttribute&&e.getAttribute("class")||""}function gt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(z)||[]}C.fn.extend({prop:function(e,t){return F(this,C.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[C.propFix[e]||e]})}}),C.extend({prop:function(e,t,i){var r,n,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&C.isXMLDoc(e)||(t=C.propFix[t]||t,n=C.propHooks[t]),void 0!==i?n&&"set"in n&&void 0!==(r=n.set(e,i,t))?r:e[t]=i:n&&"get"in n&&null!==(r=n.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):ut.test(e.nodeName)||ft.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(C.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),C.fn.extend({addClass:function(t){var e,i,r,n,o,a,l,s=0;if(m(t))return this.each(function(e){C(this).addClass(t.call(this,e,ht(this)))});if((e=gt(t)).length)for(;i=this[s++];)if(n=ht(i),r=1===i.nodeType&&" "+pt(n)+" "){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");n!==(l=pt(r))&&i.setAttribute("class",l)}return this},removeClass:function(t){var e,i,r,n,o,a,l,s=0;if(m(t))return this.each(function(e){C(this).removeClass(t.call(this,e,ht(this)))});if(!arguments.length)return this.attr("class","");if((e=gt(t)).length)for(;i=this[s++];)if(n=ht(i),r=1===i.nodeType&&" "+pt(n)+" "){for(a=0;o=e[a++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");n!==(l=pt(r))&&i.setAttribute("class",l)}return this},toggleClass:function(n,t){var o=typeof n,a="string"===o||Array.isArray(n);return"boolean"==typeof t&&a?t?this.addClass(n):this.removeClass(n):m(n)?this.each(function(e){C(this).toggleClass(n.call(this,e,ht(this),t),t)}):this.each(function(){var e,t,i,r;if(a)for(t=0,i=C(this),r=gt(n);e=r[t++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==n&&"boolean"!==o||((e=ht(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===n?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,i,r=0;for(t=" "+e+" ";i=this[r++];)if(1===i.nodeType&&-1<(" "+pt(ht(i))+" ").indexOf(t))return!0;return!1}});var _t=/\r/g;C.fn.extend({val:function(i){var r,e,n,t=this[0];return arguments.length?(n=m(i),this.each(function(e){var t;1===this.nodeType&&(null==(t=n?i.call(this,e,C(this).val()):i)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=C.map(t,function(e){return null==e?"":e+""})),(r=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=C.valHooks[t.type]||C.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(_t,""):null==e?"":e:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:pt(C.text(e))}},select:{get:function(e){var t,i,r,n=e.options,o=e.selectedIndex,a="select-one"===e.type,l=a?null:[],s=a?o+1:n.length;for(r=o<0?s:a?o:0;r<s;r++)if(((i=n[r]).selected||r===o)&&!i.disabled&&(!i.parentNode.disabled||!A(i.parentNode,"optgroup"))){if(t=C(i).val(),a)return t;l.push(t)}return l},set:function(e,t){for(var i,r,n=e.options,o=C.makeArray(t),a=n.length;a--;)((r=n[a]).selected=-1<C.inArray(C.valHooks.option.get(r),o))&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<C.inArray(C(e).val(),t)}},v.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),v.focusin="onfocusin"in k;var vt=/^(?:focusinfocus|focusoutblur)$/,mt=function(e){e.stopPropagation()};C.extend(C.event,{trigger:function(e,t,i,r){var n,o,a,l,s,c,d,u,f=[i||S],p=_.call(e,"type")?e.type:e,h=_.call(e,"namespace")?e.namespace.split("."):[];if(o=u=a=i=i||S,3!==i.nodeType&&8!==i.nodeType&&!vt.test(p+C.event.triggered)&&(-1<p.indexOf(".")&&(p=(h=p.split(".")).shift(),h.sort()),s=p.indexOf(":")<0&&"on"+p,(e=e[C.expando]?e:new C.Event(p,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:C.makeArray(t,[e]),d=C.event.special[p]||{},r||!d.trigger||!1!==d.trigger.apply(i,t))){if(!r&&!d.noBubble&&!x(i)){for(l=d.delegateType||p,vt.test(l+p)||(o=o.parentNode);o;o=o.parentNode)f.push(o),a=o;a===(i.ownerDocument||S)&&f.push(a.defaultView||a.parentWindow||k)}for(n=0;(o=f[n++])&&!e.isPropagationStopped();)u=o,e.type=1<n?l:d.bindType||p,(c=(Y.get(o,"events")||{})[e.type]&&Y.get(o,"handle"))&&c.apply(o,t),(c=s&&o[s])&&c.apply&&V(o)&&(e.result=c.apply(o,t),!1===e.result&&e.preventDefault());return e.type=p,r||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),t)||!V(i)||s&&m(i[p])&&!x(i)&&((a=i[s])&&(i[s]=null),C.event.triggered=p,e.isPropagationStopped()&&u.addEventListener(p,mt),i[p](),e.isPropagationStopped()&&u.removeEventListener(p,mt),C.event.triggered=void 0,a&&(i[s]=a)),e.result}},simulate:function(e,t,i){var r=C.extend(new C.Event,i,{type:e,isSimulated:!0});C.event.trigger(r,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each(function(){C.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return C.event.trigger(e,t,i,!0)}}),v.focusin||C.each({focus:"focusin",blur:"focusout"},function(i,r){var n=function(e){C.event.simulate(r,e.target,C.event.fix(e))};C.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=Y.access(e,r);t||e.addEventListener(i,n,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(i,n,!0),Y.remove(e,r))}}});var xt=k.location,yt=Date.now(),bt=/\?/;C.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new k.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||C.error("Invalid XML: "+e),t};var wt=/\[\]$/,kt=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,Ct=/^(?:input|select|textarea|keygen)/i;function Tt(i,e,r,n){var t;if(Array.isArray(e))C.each(e,function(e,t){r||wt.test(i)?n(i,t):Tt(i+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,n)});else if(r||"object"!==b(e))n(i,e);else for(t in e)Tt(i+"["+t+"]",e[t],r,n)}C.param=function(e,t){var i,r=[],n=function(e,t){var i=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,function(){n(this.name,this.value)});else for(i in e)Tt(i,e[i],t,n);return r.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&Ct.test(this.nodeName)&&!St.test(e)&&(this.checked||!se.test(e))}).map(function(e,t){var i=C(this).val();return null==i?null:Array.isArray(i)?C.map(i,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:i.replace(kt,"\r\n")}}).get()}});var At=/%20/g,Et=/#.*$/,Mt=/([?&])_=[^&]*/,Nt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,It=/^\/\//,Dt={},Ot={},zt="*/".concat("*"),Rt=S.createElement("a");function Pt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var i,r=0,n=e.toLowerCase().match(z)||[];if(m(t))for(;i=n[r++];)"+"===i[0]?(i=i.slice(1)||"*",(o[i]=o[i]||[]).unshift(t)):(o[i]=o[i]||[]).push(t)}}function Bt(t,n,o,a){var l={},s=t===Ot;function c(e){var r;return l[e]=!0,C.each(t[e]||[],function(e,t){var i=t(n,o,a);return"string"!=typeof i||s||l[i]?s?!(r=i):void 0:(n.dataTypes.unshift(i),c(i),!1)}),r}return c(n.dataTypes[0])||!l["*"]&&c("*")}function Ht(e,t){var i,r,n=C.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((n[i]?e:r||(r={}))[i]=t[i]);return r&&C.extend(!0,e,r),e}Rt.href=xt.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ht(Ht(e,C.ajaxSettings),t):Ht(C.ajaxSettings,e)},ajaxPrefilter:Pt(Dt),ajaxTransport:Pt(Ot),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var d,u,f,i,p,r,h,g,n,o,_=C.ajaxSetup({},t),v=_.context||_,m=_.context&&(v.nodeType||v.jquery)?C(v):C.event,x=C.Deferred(),y=C.Callbacks("once memory"),b=_.statusCode||{},a={},l={},s="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(h){if(!i)for(i={};t=Nt.exec(f);)i[t[1].toLowerCase()]=t[2];t=i[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return h?f:null},setRequestHeader:function(e,t){return null==h&&(e=l[e.toLowerCase()]=l[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(_.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)w.always(e[w.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||s;return d&&d.abort(t),c(0,t),this}};if(x.promise(w),_.url=((e||_.url||xt.href)+"").replace(It,xt.protocol+"//"),_.type=t.method||t.type||_.method||_.type,_.dataTypes=(_.dataType||"*").toLowerCase().match(z)||[""],null==_.crossDomain){r=S.createElement("a");try{r.href=_.url,r.href=r.href,_.crossDomain=Rt.protocol+"//"+Rt.host!=r.protocol+"//"+r.host}catch(e){_.crossDomain=!0}}if(_.data&&_.processData&&"string"!=typeof _.data&&(_.data=C.param(_.data,_.traditional)),Bt(Dt,_,t,w),h)return w;for(n in(g=C.event&&_.global)&&0==C.active++&&C.event.trigger("ajaxStart"),_.type=_.type.toUpperCase(),_.hasContent=!Lt.test(_.type),u=_.url.replace(Et,""),_.hasContent?_.data&&_.processData&&0===(_.contentType||"").indexOf("application/x-www-form-urlencoded")&&(_.data=_.data.replace(At,"+")):(o=_.url.slice(u.length),_.data&&(_.processData||"string"==typeof _.data)&&(u+=(bt.test(u)?"&":"?")+_.data,delete _.data),!1===_.cache&&(u=u.replace(Mt,"$1"),o=(bt.test(u)?"&":"?")+"_="+yt+++o),_.url=u+o),_.ifModified&&(C.lastModified[u]&&w.setRequestHeader("If-Modified-Since",C.lastModified[u]),C.etag[u]&&w.setRequestHeader("If-None-Match",C.etag[u])),(_.data&&_.hasContent&&!1!==_.contentType||t.contentType)&&w.setRequestHeader("Content-Type",_.contentType),w.setRequestHeader("Accept",_.dataTypes[0]&&_.accepts[_.dataTypes[0]]?_.accepts[_.dataTypes[0]]+("*"!==_.dataTypes[0]?", "+zt+"; q=0.01":""):_.accepts["*"]),_.headers)w.setRequestHeader(n,_.headers[n]);if(_.beforeSend&&(!1===_.beforeSend.call(v,w,_)||h))return w.abort();if(s="abort",y.add(_.complete),w.done(_.success),w.fail(_.error),d=Bt(Ot,_,t,w)){if(w.readyState=1,g&&m.trigger("ajaxSend",[w,_]),h)return w;_.async&&0<_.timeout&&(p=k.setTimeout(function(){w.abort("timeout")},_.timeout));try{h=!1,d.send(a,c)}catch(e){if(h)throw e;c(-1,e)}}else c(-1,"No Transport");function c(e,t,i,r){var n,o,a,l,s,c=t;h||(h=!0,p&&k.clearTimeout(p),d=void 0,f=r||"",w.readyState=0<e?4:0,n=200<=e&&e<300||304===e,i&&(l=function(e,t,i){for(var r,n,o,a,l=e.contents,s=e.dataTypes;"*"===s[0];)s.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(n in l)if(l[n]&&l[n].test(r)){s.unshift(n);break}if(s[0]in i)o=s[0];else{for(n in i){if(!s[0]||e.converters[n+" "+s[0]]){o=n;break}a||(a=n)}o=o||a}if(o)return o!==s[0]&&s.unshift(o),i[o]}(_,w,i)),l=function(e,t,i,r){var n,o,a,l,s,c={},d=e.dataTypes.slice();if(d[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=d.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!s&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),s=o,o=d.shift())if("*"===o)o=s;else if("*"!==s&&s!==o){if(!(a=c[s+" "+o]||c["* "+o]))for(n in c)if((l=n.split(" "))[1]===o&&(a=c[s+" "+l[0]]||c["* "+l[0]])){!0===a?a=c[n]:!0!==c[n]&&(o=l[0],d.unshift(l[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+s+" to "+o}}}return{state:"success",data:t}}(_,l,w,n),n?(_.ifModified&&((s=w.getResponseHeader("Last-Modified"))&&(C.lastModified[u]=s),(s=w.getResponseHeader("etag"))&&(C.etag[u]=s)),204===e||"HEAD"===_.type?c="nocontent":304===e?c="notmodified":(c=l.state,o=l.data,n=!(a=l.error))):(a=c,!e&&c||(c="error",e<0&&(e=0))),w.status=e,w.statusText=(t||c)+"",n?x.resolveWith(v,[o,c,w]):x.rejectWith(v,[w,c,a]),w.statusCode(b),b=void 0,g&&m.trigger(n?"ajaxSuccess":"ajaxError",[w,_,n?o:a]),y.fireWith(v,[w,c]),g&&(m.trigger("ajaxComplete",[w,_]),--C.active||C.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,i){return C.get(e,t,i,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],function(e,n){C[n]=function(e,t,i,r){return m(t)&&(r=r||i,i=t,t=void 0),C.ajax(C.extend({url:e,type:n,dataType:r,data:t,success:i},C.isPlainObject(e)&&e))}}),C._evalUrl=function(e){return C.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},C.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=C(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(i){return m(i)?this.each(function(e){C(this).wrapInner(i.call(this,e))}):this.each(function(){var e=C(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(t){var i=m(t);return this.each(function(e){C(this).wrapAll(i?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(e){return!C.expr.pseudos.visible(e)},C.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new k.XMLHttpRequest}catch(e){}};var Wt={0:200,1223:204},Xt=C.ajaxSettings.xhr();v.cors=!!Xt&&"withCredentials"in Xt,v.ajax=Xt=!!Xt,C.ajaxTransport(function(n){var o,a;if(v.cors||Xt&&!n.crossDomain)return{send:function(e,t){var i,r=n.xhr();if(r.open(n.type,n.url,n.async,n.username,n.password),n.xhrFields)for(i in n.xhrFields)r[i]=n.xhrFields[i];for(i in n.mimeType&&r.overrideMimeType&&r.overrideMimeType(n.mimeType),n.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(i,e[i]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Wt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&k.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(n.hasContent&&n.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),C.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),C.ajaxTransport("script",function(i){var r,n;if(i.crossDomain)return{send:function(e,t){r=C("<script>").prop({charset:i.scriptCharset,src:i.url}).on("load error",n=function(e){r.remove(),n=null,e&&t("error"===e.type?404:200,e.type)}),S.head.appendChild(r[0])},abort:function(){n&&n()}}});var Ft,jt=[],qt=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jt.pop()||C.expando+"_"+yt++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",function(e,t,i){var r,n,o,a=!1!==e.jsonp&&(qt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&qt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(qt,"$1"+r):!1!==e.jsonp&&(e.url+=(bt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||C.error(r+" was not called"),o[0]},e.dataTypes[0]="json",n=k[r],k[r]=function(){o=arguments},i.always(function(){void 0===n?C(k).removeProp(r):k[r]=n,e[r]&&(e.jsonpCallback=t.jsonpCallback,jt.push(r)),o&&m(n)&&n(o[0]),o=n=void 0}),"script"}),v.createHTMLDocument=((Ft=S.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ft.childNodes.length),C.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(v.createHTMLDocument?((r=(t=S.implementation.createHTMLDocument("")).createElement("base")).href=S.location.href,t.head.appendChild(r)):t=S),o=!i&&[],(n=E.exec(e))?[t.createElement(n[1])]:(n=ve([e],t,o),o&&o.length&&C(o).remove(),C.merge([],n.childNodes)));var r,n,o},C.fn.load=function(e,t,i){var r,n,o,a=this,l=e.indexOf(" ");return-1<l&&(r=pt(e.slice(l)),e=e.slice(0,l)),m(t)?(i=t,t=void 0):t&&"object"==typeof t&&(n="POST"),0<a.length&&C.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?C("<div>").append(C.parseHTML(e)).find(r):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,o||[e.responseText,t,e])})}),this},C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){C.fn[t]=function(e){return this.on(t,e)}}),C.expr.pseudos.animated=function(t){return C.grep(C.timers,function(e){return t===e.elem}).length},C.offset={setOffset:function(e,t,i){var r,n,o,a,l,s,c=C.css(e,"position"),d=C(e),u={};"static"===c&&(e.style.position="relative"),l=d.offset(),o=C.css(e,"top"),s=C.css(e,"left"),n=("absolute"===c||"fixed"===c)&&-1<(o+s).indexOf("auto")?(a=(r=d.position()).top,r.left):(a=parseFloat(o)||0,parseFloat(s)||0),m(t)&&(t=t.call(e,i,C.extend({},l))),null!=t.top&&(u.top=t.top-l.top+a),null!=t.left&&(u.left=t.left-l.left+n),"using"in t?t.using.call(e,u):d.css(u)}},C.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){C.offset.setOffset(this,t,e)});var e,i,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),i=r.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,r=this[0],n={top:0,left:0};if("fixed"===C.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),i=r.ownerDocument,e=r.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===C.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((n=C(e).offset()).top+=C.css(e,"borderTopWidth",!0),n.left+=C.css(e,"borderLeftWidth",!0))}return{top:t.top-n.top-C.css(r,"marginTop",!0),left:t.left-n.left-C.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||me})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var o="pageYOffset"===n;C.fn[t]=function(e){return F(this,function(e,t,i){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===i)return r?r[n]:e[t];r?r.scrollTo(o?r.pageXOffset:i,o?i:r.pageYOffset):e[t]=i},t,e,arguments.length)}}),C.each(["top","left"],function(e,i){C.cssHooks[i]=We(v.pixelPosition,function(e,t){if(t)return t=He(e,i),Re.test(t)?C(e).position()[i]+"px":t})}),C.each({Height:"height",Width:"width"},function(a,l){C.each({padding:"inner"+a,content:l,"":"outer"+a},function(r,o){C.fn[o]=function(e,t){var i=arguments.length&&(r||"boolean"!=typeof e),n=r||(!0===e||!0===t?"margin":"border");return F(this,function(e,t,i){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===i?C.css(e,t,n):C.style(e,t,i,n)},l,i?e:void 0,i)}})}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,i){C.fn[i]=function(e,t){return 0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),C.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),C.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,r){return this.on(t,e,i,r)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),C.proxy=function(e,t){var i,r,n;if("string"==typeof t&&(i=e[t],t=e,e=i),m(e))return r=l.call(arguments,2),(n=function(){return e.apply(t||this,r.concat(l.call(arguments)))}).guid=e.guid=e.guid||C.guid++,n},C.holdReady=function(e){e?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=A,C.isFunction=m,C.isWindow=x,C.camelCase=U,C.type=b,C.now=Date.now,C.isNumeric=function(e){var t=C.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return C});var $t=k.jQuery,Ut=k.$;return C.noConflict=function(e){return k.$===C&&(k.$=Ut),e&&k.jQuery===C&&(k.jQuery=$t),C},e||(k.jQuery=k.$=C),C}),define("$",function(e,t){return jQuery.__esModule=!0,jQuery.default=jQuery,jQuery}),define("magix",["$"],function(n){var f=n("$"),o=f.isPlainObject,T=f.isArray,a=0,_=[],l=window,i=document,y=f(i),s=l.setTimeout,r="changed",w="value";function e(){}var v,c=JSON.stringify,C="\x1e",A="prototype",k="params",S="path",E="mx-view",d=/[#?].*$/,u=/([^=&?\/#]+)=?([^&#?]*)/g,p=/(?!^)=|&/,t=function(e){return(e||"mx_")+a++},h={rootId:t(),error:function(e){throw e}},b=function(e){return"object"==typeof e?e:i.getElementById(e)},g=function(e){return!e||"object"!=typeof e},m=function(e,t,i,r){var n,o,a,l=0;for(a in e)n=e[a],o=t[a],g(n)&&o===n||R(r,a)||(l=i[a]=1),t[a]=n;return l},x=function(e,t,i){if(e=b(e),t=b(t),e&&t&&!(i=e==t))try{i=16==(16&t.compareDocumentPosition(e))}catch(e){}return i};function M(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])R(t,n)&&(e[n]=t[n]);return e}var N=function(e,t,i){for(i in t=[],e)R(e,i)&&t.push(i);return t},L=h.hasOwnProperty,I=f("head"),D=function(e,t){t&&!D[e]&&(D[e]=1,I.append("<style>"+t))},O=function(e){return e.id||(e.$a=1,e.id=t())},z=function(e,t,i,r,n){t=t||_,T(e)||(e=[e]),T(t)||(t=[t]);for(var o=0,a=e;o<a.length;o++){n=a[o];try{r=n&&n.apply(i,t)}catch(e){h.error(e)}}return r},R=function(e,t){return e&&L.call(e,t)},P=function(e,t){var i,r;if(g(t))(i=t+"")[0]==C&&R(e,i)&&(t=e[i]);else for(i in t)r=t[i],r=P(e,r),t[i]=r;return t},B=function(e,t){return t.f-e.f||t.t-e.t};function H(e,t,i,r){(r=this).c=[],r.b=t||5,r.x=r.b+(e||20),r.r=i}M(H[A],{get:function(e){var t=this.c[C+e];return t&&(t.f++,t.t=a++,t=t.v),t},each:function(e,t,i,r,n){for(var o=0,a=(i=this).c;o<a.length;o++)e(a[o].v,t,i)},set:function(e,t){var i=this.c,r=C+e,n=i[r],o=this.b;if(!n){if(i.length>=this.x)for(i.sort(B);o--;)0<(n=i.pop()).f&&this.del(n.o);n={o:e},i.push(n),i[r]=n}n.v=t,n.f=1,n.t=a++},del:function(e){e=C+e;var t=this.c,i=t[e],r=this.r;i&&(i.f=-1,i.v="",delete t[e],r&&z(r,i.o))},has:function(e){return R(this.c,C+e)}});var W=function(e,o){if(e){var a=[],t=void 0;if(l.seajs)seajs.use(e,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,r=e;i<r.length;i++){var n=r[i];a.push(n&&n.__esModule&&n.default||n)}o&&o.apply(void 0,a)});else{T(e)||(e=[e]);for(var i=0,r=e;i<r.length;i++)t=r[i],t=n(t),a.push(t&&t.__esModule&&t.default||t);o&&o.apply(void 0,a)}}else o()};function X(){}var F,j=function(e,t,i,r,n){return X[A]=t[A],M(n=new X,i),M(e,r),(n.constructor=e)[A]=n,e},q=f.find||f.zepto,$=q.matchesSelector||q.matches,U=function(e,t){t=e.data,e.eventTarget=t.e,z(t.f,e,t.v)},V=function(e,t,i,r,n){n&&(t+="."+n.i),r?f(e).off(t,i):f(e).on(t,n,i)},K=function(e){return e},Y=new H,G=function(e,t,i){try{i=decodeURIComponent(i)}catch(e){}F[t]=i},Q=function(e){var t,i=Y.get(e);return i||(F={},t=e.replace(d,""),e==t&&p.test(t)&&(t=""),e.replace(t,"").replace(u,G),Y.set(e,i={a:t,b:F})),{path:i.a,params:M({},i.b)}},Z=function(e,t){var i,r={};if(e)for(var n=0,o=e;n<o.length;n++)i=o[n],r[t&&i?i[t]:i]=t?i:1+(0|r[i]);return r},J=new H,ee=function(e,t,i){return J.has(e)?i=J.get(e):(i=z(Function("return "+e)),-1<e.indexOf(C)?P(t,i):J.set(e,i)),i},te={config:function(e,t){return t=h,e&&(t=o(e)?M(t,e):t[e]),t},boot:function(e){M(h,e),W(h.exts,function(){xe().mountView(h.defaultView),ce.on(r,he)})},toMap:Z,toTry:z,toUrl:function(e,t,i){var r,n,o,a=[];for(n in t)r=t[n]+"",(!i||r||R(i,n))&&(r=encodeURIComponent(r),a.push(o=n+"="+r));return o&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+a.join("&")),e},parseUrl:Q,mix:M,has:R,keys:N,inside:x,node:b,applyStyle:D,guid:t,use:W,Cache:H,nodeId:O,guard:K},ie={fire:function(e,t,i,r){var n,o,a,l,s=this,c=s[C+e];if(t||(t={}),t.type=e,c)for(o=(n=c.length)-1;n--;)(l=c[a=r?n:o-n]).f?(l.x=1,z(l.f,t,s),l.x=""):l.x||(c.splice(a,1),o--);return(c=s["on"+e])&&z(c,t,s),i&&s.off(e),s},on:function(e,t){var i=C+e;return(this[i]||(this[i]=[])).push({f:t}),this},off:function(e,t){var i,r=C+e,n=this[r];if(t){if(n)for(var o=0,a=n;o<a.length;o++)if((i=a[o]).f==t){i.f="";break}}else delete this[r],delete this["on"+e];return this}};te.Event=ie;var re={},ne={},oe={},ae=0,le=function(e){for(var t=0,i=e=(e+"").split(",");t<i.length;t++){var r=i[t];R(ne,r)?ne[r]++:ne[r]=1}return e},se=function(e){for(var t,i=0,r=e;i<r.length;i++)t=r[i],R(ne,t)&&(--ne[t]||(delete ne[t],delete re[t]))},ce=M({get:function(e){var t=e?re[e]:re;return t},set:function(e,t){return ae=m(e,re,oe,t)||ae,this},digest:function(e,t){(e&&ce.set(e,t),ae)&&(ae=0,this.fire(r,{keys:oe}),oe={})},diff:function(){return oe},clean:function(e){return{ctor:function(){e=le(e),this.on("destroy",function(){return se(e)})}}}},ie);te.State=ce;var de,ue,fe=0,pe=function(e,t,i,r,n,o){if(e&&e.$a!=fe&&(i=e.$v)&&1<i.$a){(function(e,t,i){var r,n=e.$os;if(n)for(var o=0,a=n;o<a.length&&(r=a[o],!(i=R(t,r)));o++);return i})(i,t)&&i.$b();for(var a=0,l=e.children();a<l.length;a++)o=l[a],pe(ge[o],t)}},he=function(e,t,i){t=xe(),fe=a++,pe(t,e.keys)},ge={},_e=function(e){if(!e.$b&&!e.$d&&e.$cc==e.$rc){e.$cr||(e.$cr=1,e.$ca=0,e.fire("created"));var t=e.id,i=e.pId,r=ge[i];r&&!R(r.$e,t)&&(r.$e[t]=1,r.$rc++,_e(r))}},ve=function(e,t){if(!e.$ca&&e.$cr){e.$cr=0,e.$ca=1,e.fire("alter",t);var i=e.id,r=e.pId,n=ge[r];n&&R(n.$e,i)&&(n.$rc--,delete n.$e[i],ve(n,t))}},me=function(e,t,i,r){return r=(r=(r=ge[e])&&r.$v)?r.$d.$a:{},0<t.indexOf(C)&&P(r,i),r},xe=function(e,t){return de||(v=i.body,b(e=h.rootId)||(v.id=e),de=new we(e)),de},ye=function(e,t){R(ge,e)||(ge[e]=t,we.fire("add",{vframe:t}))},be=[];function we(e,t,i){(i=this).id=e,i.$c={},i.$cc=0,i.$rc=0,i.$g=i.$g||1,i.$e={},i.$f=[],i.pId=t,ye(e,i)}M(we,{all:function(){return ge},get:function(e){return ge[e]}},ie),M(we[A],ie,{mountView:function(e,t){var i,r,n,o,a,l=this,s=l.id,c=b(s),d=l.pId;!l.$h&&c&&(l.$h=1,l.$i=c.innerHTML),l.unmountView(),l.$b=0,i=Q(e||""),n=i[S],c&&n&&(l[S]=e,o=i[k],me(d,e,o),l.$j=i[S],M(o,t),r=l.$g,W(n,function(e){if(r==l.$g){if(!e)return h.error(Error("id:"+s+" cannot load:"+n));a=ut(e),n=new e(s,l,o,c,a),l.$v=n,l.$a=fe,lt(n),z(n.init,[o,{node:c,deep:!n.tmpl}],n),n.$b(),n.tmpl||(l.$h=0,n.$e||n.endUpdate())}}))},unmountView:function(){var e,t,i=this,r=i.$v,n=i.id;i.$f=[],r&&(ue||(t=1,ue={id:n}),i.$b=1,i.unmountZone(0,1),ve(i,ue),(i.$v=0)<r.$a&&(r.$a=0,delete Ae[n],delete Ee[n],r.fire("destroy",0,1,1),ot(r,1),lt(r,1),r.owner=0),r.$a--,(e=b(n))&&i.$h&&f(e).html(i.$i),t&&(ue=0)),i.$g++},mountVframe:function(e,t,i){var r,n=this,o=n.id,a=n.$c;return ve(n,{id:e}),(r=ge[e])||(R(a,e)||(n.$n=0,n.$cc++),a[e]=e,(r=be.pop())?we.call(r,e,o):r=new we(e,o)),r.mountView(t,i),r},mountZone:function(e,t){var i,r,n=this,o=[];e=e||n.id;var a,l=f("#"+e+" ["+E+"]");n.$d=1;for(var s=0,c=l;s<c.length;s++)(i=c[s]).$b||(r=O(i),i.$b=1,o.push([r,i.getAttribute(E)]));for(var d=0,u=o;d<u.length;d++)r=(a=u[d])[0],i=a[1],n.mountVframe(r,i);n.$d=0,t||_e(n)},unmountVframe:function(e,t){var i,r,n,o;if(e=e?this.$c[e]:this.id,i=ge[e]){var a=i.$cr,l=i.pId;i.unmountView(),n=a,(o=ge[r=e])&&(delete ge[r],we.fire("remove",{vframe:o,fcc:n}),(r=b(r))&&(r.$b=0,r.$a=0)),i.id=i.pId=i.$c=i.$e=0,i.$h=0,i.off("alter"),i.off("created"),be.push(i),(i=ge[l])&&R(i.$c,e)&&(delete i.$c[e],i.$n=0,i.$cc--,t||_e(i))}},unmountZone:function(e,t){var i;for(i in this.$c)(!e||i!=e&&x(i,e))&&this.unmountVframe(i,1);t||_e(this)},parent:function(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=ge[t.pId];return t},children:function(e){return(e=this).$n||(e.$n=N(e.$c))},invoke:function(e,t){var i,r,n,o,a,l=this.$f;return(r=this.$v)&&r.$e?i=(n=r[e])&&z(n,t,r):((o=l[a=C+e])&&(o.r=t===o.a),o={n:e,a:t,k:a},l.push(o),l[a]=o),i}}),te.Vframe=we;var ke=new H(30,10),Se=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,Ce={},Te={},Ae={},Ee={},Me=0,Ne=function(e,t){var i,r,n,o,a,l,s=[],c=e,d=e.getAttribute("mx-"+t),u=[],f="#",p=0;if(d&&((a=ke.get(d))||(a={v:(a=d.match(Se)||_)[1],n:a[2],i:a[3]},ke.set(d,a)),a=M({},a,{r:d})),a&&!a.v||Te[t]){if((n=Ee[r=c.$d])&&1==n[c.$e]&&(l=1,f=r),!l){for(u.push(c);c!=v&&(c=c.parentNode);){if(ge[r=c.id]||(n=Ee[r=c.$d])&&1==n[c.$e]){f=r;break}u.push(c)}for(var h=0,g=u;h<g.length;h++)d=g[h],(r=Ee[f])||(r=Ee[f]={}),r[n=d.$e||(d.$e=++Me)]=1,d.$d=f}c=e.id,ge[c]&&(p=f=c);do{if((i=ge[f])&&(l=i.$v)){if(o=(n=l.$so)[t])for(c=o.length;c--;)n={r:r=o[c],v:f,n:r},r?!p&&$(e,r)&&s.push(n):p&&s.unshift(n);if(l.tmpl&&!p){a&&!a.v&&(a.v=f);break}p=0}}while(i&&(f=i.pId))}return a&&s.push(a),s},Le=function(e){for(var t,i,r,n,o,a,l,s=e.target,c=e.type,d=[];s!=v;){if((t=Ne(s,c)).length){d=[];for(var u=0,f=t;u<f.length;u++){var p=f[u],h=p.v,g=(p.r,p.n),_=p.i;if(a!=h){if(a&&e.isPropagationStopped())break;a=h}(n=(r=ge[h])&&r.$v)?(o=n[g+C+c])&&(e.eventTarget=s,l=_?ee(_,n.$d.$a):{},e[k]=l,z(o,e,n)):e.stopPropagation()}}if((i=Ae[o=s.$d])&&(i=i[s.$e])&&i[c]||e.isPropagationStopped()){d.length&&d.push(o);break}a=s.id,ge[a]&&d.push(a),d.push(s),s=s.parentNode||v}if(o=d.length)for(i="#";o--;)(n=d[o]).nodeType?((t=Ae[i])||(t=Ae[i]={}),(l=t[a=n.$e||(n.$e=++Me)])||(l=t[a]={}),l[c]=1):i=n},Ie="http://www.w3.org/2000/svg",De="http://www.w3.org/1998/Math/MathML",Oe={option:[1,"<select multiple>"],thead:[1,"<table>"],col:[2,"<table><colgroup>"],tr:[2,"<table><tbody>"],td:[3,"<table><tbody><tr>"],area:[1,"<map>"],param:[1,"<object>"],g:[1,'<svg xmlns="'+Ie+'">'],m:[1,'<math xmlns="'+De+'">'],_:[0,""]},ze=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;Oe.optgroup=Oe.option,Oe.tbody=Oe.tfoot=Oe.colgroup=Oe.caption=Oe.thead,Oe.th=Oe.td;var Re=i.implementation.createHTMLDocument(""),Pe=Re.createElement("base");Pe.href=i.location.href,Re.head.appendChild(Pe);var Be=function(e,t){var i=O(t);e.$c[i]?e.unmountVframe(i,1):e.unmountZone(i,1)},He={INPUT:[w,"checked"],TEXTAREA:[w],OPTION:["selected"]},We=function(e,t){return 1==e.nodeType&&(e.$f?t=e.$g:((t=e.$a?"":e.id)||(t=e.getAttribute("mxs")),t||(t=e.getAttribute(E))&&(t=Q(t)[S]),e.$f=1,e.$g=t)),t},Xe=function(e,t,i,r,n){for(var o,a,l,s,c,d=e.lastChild,u=t.firstChild,f=0,p={},h={};d;)f++,(l=We(d))&&(l=p[l]||(p[l]=[])).push(d),d=d.previousSibling;for(;u;)(l=We(u))&&(h[l]=(h[l]||0)+1),u=u.nextSibling;for(u=t.firstChild,d=e.firstChild;u;)if(f--,u=(o=u).nextSibling,(s=p[l=We(o)])&&(s=s.pop())){for(;s!=d;)c=d.nextSibling,e.appendChild(d),d=c;d=s.nextSibling,h[l]&&h[l]--,Fe(s,o,e,i,r,n)}else d?(l=We(a=d))&&p[l]&&h[l]?(f++,i.c=1,i.n.push([8,e,o,a])):(d=d.nextSibling,Fe(a,o,e,i,r,n)):(i.c=1,i.n.push([1,e,o]));for(a=e.lastChild;0<f--;)Be(r,a),i.n.push([2,e,a]),a=a.previousSibling,i.c=1},Fe=function(e,t,i,r,n,o){if(function(e,t){var i,r=e.nodeName,n=He[r],o=0;if(n)for(var a=0,l=n;a<l.length;a++)e[i=l[a]]!=t[i]&&(o=1,e[i]=t[i]);return o}(e,t)||1==e.nodeType&&e.hasAttribute("mxv")||!e.isEqualNode||!e.isEqualNode(t))if(e.nodeName===t.nodeName)if(1===e.nodeType){var a=t.getAttribute("mxs");if(a&&a==e.getAttribute("mxs"))return;var l=t.getAttribute(E),s=t.innerHTML,c=t.getAttribute("mxa"),d=!c||c!=e.getAttribute("mxa"),u=void 0,f=void 0,p=ge[e.id],h=void 0,g=void 0,_=l&&Q(l),v=void 0,m=void 0,x=void 0;if(l&&p&&(!t.id||t.id==e.id)&&p.$j==_[S]&&(g=p.$v)){if(m=s!=p.$i,x=l!=p[S],h=e.getAttribute("mxv"),!m&&!x&&h)for(var y=0,b=v=h.split(",");y<b.length;y++)if("#"==(h=b[y])||R(o,h)){x=1;break}(x||m)&&(u=(h=g.$e&&g.$f)?(v=_[k],me(p.pId,l,v),p.$i=s,p[S]=l,_={node:t,deep:!g.tmpl,attr:d,inner:m,query:x,keys:o},z(h,[v,_],g)&&r.v.push(g),_.deep):f=1)}else u=1,f=p;f&&(r.c=1,p.unmountVframe(0,1)),d&&function(e,t,i,r){var n,o,a,l;delete e.$f;var s=e.attributes,c=t.attributes;for(o=s.length;o--;)n=s[o].name,t.hasAttribute(n)||("id"==n?r||i.d.push([e,""]):(i.c=1,e.removeAttribute(n)));for(o=c.length;o--;)a=(n=c[o]).name,l=n[w],e.getAttribute(a)!=l&&("id"==a?i.d.push([e,l]):(i.c=1,e.setAttribute(a,l)))}(e,t,r,p&&l),u&&Xe(e,t,r,n,o)}else e.nodeValue!==t.nodeValue&&(r.c=1,e.nodeValue=t.nodeValue);else Be(n,e),r.c=1,r.n.push([4,i,t,e])},je={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},qe=/[&<>"'\`]/g,$e=function(e){return""+(null==e?"":e)},Ue=function(e){return"&"+je[e]+";"},Ve=function(e){return $e(e).replace(qe,Ue)},Ke=function(e,t,i,r){for(r=e[C];--r;)if(e[i=C+r]===t)return i;return e[i=C+e[C]++]=t,i},Ye={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},Ge=function(e){return Ye[e]},Qe=/[!')(*]/g,Ze=function(e){return encodeURIComponent($e(e)).replace(Qe,Ge)},Je=/[\\'"]/g,et=function(e){return $e(e).replace(Je,"\\$&")},tt=function(t,i){var e,r,n=t.$k,o=t.$c,a=t.$b,l=ge[a],s=l&&l.$v,c={d:[],v:[],n:[]},d=b(a),u=t.$d,f=t.$a,p=function(e){i.i<i.length?tt(t,i):(c=i.slice(),i.i=i.length=0,e&&s.fire("domready"),z(c))};if(i.i=i.length,t.$c=0,t.$k={},o&&s&&0<s.$a&&(e=s.tmpl)&&s.$d==t){s.fire("dompatch"),delete Ae[a],delete Ee[a],r=function(e,t){var i,r=Re.createElement("div"),n=t.namespaceURI;i=n==Ie?"g":n==De?"m":(ze.exec(e)||[0,""])[1];var o=Oe[i]||Oe._;r.innerHTML=o[1]+e;for(var a=o[0];a--;)r=r.lastChild;return r}(e(u,a,f,Ve,$e,Ze,Ke,et),d),Xe(d,r,c,l,n);for(var h=0,g=c.d;h<g.length;h++)(r=g[h])[0].id=r[1];for(var _=0,v=c.n;_<v.length;_++)1==(r=v[_])[0]?r[1].appendChild(r[2]):2==r[0]?r[1].removeChild(r[2]):4==r[0]?r[1].replaceChild(r[2],r[3]):r[1].insertBefore(r[2],r[3]);l.$d=e=c.c||!s.$e;for(var m=0,x=c.v;m<x.length;m++)(r=x[m]).$b();e&&s.endUpdate(a),c.c&&y.trigger({type:"htmlchanged",vId:a}),p(1)}else p()};function it(e){var t,i=this;i.$b=e,i.$c=1,i.$d={vId:e},i.$a=((t={})[C]=1,t),i.$e=[],i.$k={}}M(it[A],{get:function(e,t){return t=this.$d,e&&(t=t[e]),t},set:function(e,t){var i=this;return i.$c=m(e,i.$d,i.$k,t)||i.$c,i},digest:function(e,t,i){var r=this.set(e,t),n=r.$e;i&&n.push(i),n.i||tt(r,n)},snapshot:function(){return this.$f=c(this.$d),this},altered:function(){if(this.$f)return this.$f!=c(this.$d)},translate:function(e){return P(this.$d,e)},parse:function(e){return ee(e,this.$a)}});var rt=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,nt=function(e,t,i){return e.a?i=e:((i=function(e){z(i.a,e,this)}).a=[e],i.b=1),i.a=i.a.concat(t.a||t),i},ot=function(e,t){var i,r,n=e.$r;for(i in n)r=n[i],(t||r.x)&&at(n,i,1)},at=function(e,t,i,r){var n,o,a=e[t];return a&&a!=r&&((n=(o=a.e).destroy)&&i&&z(n,_,o),delete e[t]),o},lt=function(e,t){var i,r,n,o,a,l,s=e.$eo,c=e.$so,d=e.$el,u=e.id;for(i in s)n=c[r=i],o=t,void 0,a=0|Ce[r],l=o?-1:1,a&&o!==a||V(v,r,Le,o),Ce[r]=a+l,n&&(Te[r]=(0|Te[r])+l);for(var f=0,p=d;f<p.length;f++)i=p[f],V(i.e,i.n,U,t,{i:u,v:e,f:i.f,m:i.m,e:i.e})},st={win:l,doc:i},ct=function(e,t,i){for(var r,n,o,a,l={},s=0,c=e;s<c.length;s++)for(r in n=c[s])o=n[r],a=l[r],"ctor"!=r?(rt.test(r)&&(a?o=nt(a,o):o.b=1),l[r]=o):i.push(o);for(r in l)R(t,r)||(t[r]=l[r])};function dt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this._||(this._=[]);return ct(e,this[A],i),this}var ut=function(e){if(!e[C]){e[C]=[];var t=e[A],i=void 0,r=void 0,n=void 0,o=void 0,a={},l=[],s={},c=void 0,d=void 0,u=void 0,f=void 0,p=void 0,h=void 0,g=void 0;for(u in(r=t.mixins)&&ct(r,t,e[C]),t)if(i=t[u],r=u.match(rt)){if(d=r[1],n=r[2],o=r[3],h={},g=r[4])for(var _=0,v=g=g.split(",");_<v.length;_++)h[f=v[_]]=!0;for(var m=0,x=o=o.split(",");m<x.length;m++){if(f=x[m],c=st[n],p=1,d){if(c){l.push({f:i,e:c,n:f,m:h});continue}p=2,(c=s[f])||(c=s[f]=[]),c[n]||(c[n]=1,c.push(n))}a[f]=a[f]|p,(c=t[f=n+C+f])?c.b&&(i.b?t[f]=nt(i,c):R(t,u)&&(t[f]=i)):t[f]=i}}w="$b",k=(y=t)[b="render"],y[b]=y[w]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0<(S=this).$a&&(S.$a++,S.fire("rendercall"),ot(S),z(k,e,S))},t.$eo=a,t.$el=l,t.$so=s,t.$f=t.assign}var y,b,w,k,S;return e[C]};function ft(e,t,i,r,n){(n=this).owner=t,n.id=e,n.$r={},n.$a=1,n.updater=n.$d=new it(n.id),(e=ft._)&&z(e,[i,{node:r,deep:!n.tmpl}],n)}M(ft,{merge:dt,extend:function e(t,i){var c=this,r=(t=t||{}).ctor,d=[];function u(e,t,i,r,n,o,a,l,s){c.call(a=this,e,t,i,r,n),o=u._,l=[i,{node:r,deep:!a.tmpl}],o&&z(o,l,a),(s=d.concat(n)).length&&z(s,l,a)}return r&&d.push(r),u.merge=dt,u.extend=e,j(u,c,t,i)}}),M(ft[A],ie,{init:e,beginUpdate:function(e,t){0<(t=this).$a&&t.$e&&t.owner.unmountZone(e,1)},endUpdate:function(e,t,i,r,n){0<(i=this).$a&&(e=e||i.id,t?n=t:(n=i.$e,i.$e=1),(r=i.owner).mountZone(e,t),n||s(i.wrapAsync(function(){!function(e,t,i){for(t=e.$f;t.length;)(i=t.shift()).r||e.invoke(i.n,i.a),delete t[i.k]}(r)}),0))},wrapAsync:function(i,r){var n=this,o=n.$a;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0<o&&o==n.$a)return i.apply(r||n,e)}},observeState:function(e){this.$os=(e+"").split(",")},capture:function(e,t,i,r){return r=this.$r,t?(at(r,e,1,t),r[e]={e:t,x:i}):t=(r=r[e])&&r.e,t},release:function(e,t){return at(this.$r,e,t)},render:e}),te.View=ft;var pt=f.type,ht=Date.now;function gt(){this.id=t("b"),this.$={}}M(gt[A],{get:function(e,t){var i=this.$;if(e){for(var r=T(e)?e.slice():(e+"").split("."),n=void 0;(n=r.shift())&&i;)i=i[n];n&&(i=void 0)}return void 0!==t&&pt(t)!=pt(i)&&(i=t),i},set:function(e,t){var i;o(e)||((i={})[e]=t,e=i),M(this.$,e)}});function _t(e,t,i){(i=this[e])&&(delete this[e],z(i,t,i.e))}var vt=function(e,t,i,r,n){if(e.$d)return e;if(e.$e)return e.enqueue(vt.bind(e,e,t,i,r,n));e.$e=1,T(t)||(t=[t]);for(var s,c,d,u,f,p,h,g,_,o=e.constructor,a=0,l=o.$f,v=(s=i,c=o,d=e,u=t.length,f=r,p=o.$c,h=[],g=null,_=0,function(e,t){_++;var i,r,n=this,o=n.$b,a=o.k;if(h[e+1]=n,t?(g=t,i=1):p.has(a)||(a&&p.set(a,n),o.t=ht(),(r=o.a)&&z(r,n,n),(r=o.x)&&c.clear(r),i=1),!d.$d){var l=_==u;l&&(d.$e=0,2==f&&(h[0]=g,z(s,h,d))),1==f&&z(s,[t||null,n,l,e],d)}i&&c.fire("end",{bag:n,error:t})}),m=0,x=t;m<x.length;m++){var y=x[m];if(y){var b=o.get(y,n),w=b.e,k=w.$b.k,S=v.bind(w,a++),C=void 0;k&&l[k]?l[k].push(S):b.u?(k&&((C=[S]).e=w,l[k]=C,S=_t.bind(l,k)),o.$s(w,S)):S()}}return e};function mt(){var e=this;e.id=t("s"),e.$g=[]}M(mt[A],{all:function(e,t){return vt(this,e,t,2)},save:function(e,t){return vt(this,e,t,2,1)},one:function(e,t){return vt(this,e,t,1)},enqueue:function(e){var t=this;return t.$d||(t.$g.push(e),t.dequeue(t.$h)),t},dequeue:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i,r=this;r.$e||r.$d||(r.$e=1,s(function(){r.$e=0,r.$d||(i=r.$g.shift())&&z(i,r.$h=e)},0))},destroy:function(e){(e=this).$d=1,e.$g=0}});var xt=function(e,t,i){return[c(t),c(e)].join(C)},yt=function(e,t,i,r){(r=e&&e.$b)&&t[r.n]&&i.del(r.k)},bt=M({add:function(e){var t,i=this.$b;T(e)||(e=[e]);for(var r=0,n=e;r<n.length;r++)if(t=n[r]){var o=t.name,a=t.cache;t.cache=0|a,i[o]=t}},create:function(e){var t=this.meta(e),i=0|e.cache||t.cache,r=new gt;r.set(t),r.$b={n:t.name,a:t.after,x:t.cleans,k:i&&xt(t,e)},o(e)&&r.set(e);var n=t.before;return n&&z(n,r,r),this.fire("begin",{bag:r}),r},meta:function(e){return this.$b[e.name||e]||e},get:function(e,t){var i,r;return t||(i=this.cached(e)),i||(i=this.create(e),r=1),{e:i,u:r}},clear:function(e){this.$c.each(yt,Z((e+"").split(",")))},cached:function(e){var t,i,r=this.$c,n=this.meta(e),o=0|e.cache||n.cache;if(o&&(i=xt(n,e)),i){var a=this.$f[i];a?t=a.e:(t=r.get(i))&&ht()-t.$b.t>o&&(r.del(i),t=0)}return t}},ie);return mt.extend=function(e,t,i){function r(){mt.call(this)}return r.$s=e,r.$c=new H(t,i),r.$f={},r.$b={},j(r,mt,null,bt)},te.Service=mt,te.default=te});var Designer={init:function(o){var e=document.getElementById("boot").src.replace("/editor.js","");seajs.config({paths:{element:e+"/element",editor:e+"/editor",gallery:e+"/gallery",util:e+"/util",i18n:e+"/i18n"}}),seajs.use(["magix","i18n/index"],function(e,t){var i=window.localStorage,r="zh-cn";i&&(r=i.getItem("l.lang")||r),e.config({lang:r}),e.config(o);var n=t.default;e.applyStyle("p_",'body,dd,dl,form,h4,input,ol,p,pre,tbody,td,textarea,tfoot,th,thead,ul{margin:0;padding:0}ol,ul{list-style-type:none;list-style-image:none}a{background-color:transparent}a:active,a:hover{outline-width:0}a:focus{outline:1px dotted}html{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%;font-size:62.5%}body{font-size:14px;line-height:1.8}body,button,input,textarea{font-family:helvetica neue,arial,hiragino sans gb,stheiti,wenquanyi micro hei,sans-serif;-ms-text-autospace:ideograph-alpha ideograph-numeric ideograph-parenthesis;-ms-text-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis;text-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis}h4{font-weight:400;font-size:18px}pre{white-space:pre;white-space:pre-wrap;word-wrap:break-word;overflow:auto}table{border-collapse:collapse;border-spacing:0}th{text-align:left}td,th{border:1px solid #ddd;padding:8px 10px}th{font-weight:inherit;border-bottom-width:2px;border-bottom-color:#ccc}img{border-style:none;width:auto\\9;height:auto;max-width:100%;vertical-align:top;-ms-interpolation-mode:bicubic}svg:not(:root){overflow:hidden}button,input,textarea{font-family:inherit;font-size:100%;margin:0;vertical-align:middle;*vertical-align:middle}button,input{*overflow:visible}button{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;-moz-appearance:button;appearance:button;cursor:pointer}button[disabled],input[disabled]{cursor:not-allowed}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0;*height:13px;*width:13px}button::-moz-focus-inner,input::-moz-focus-inner{border-style:none;padding:0}textarea{overflow:auto;resize:vertical}@media screen and (-webkit-min-device-pixel-ratio:0){input{line-height:normal!important}}input::-moz-placeholder,textarea::-moz-placeholder{color:#a9a9a9;opacity:1}label{cursor:pointer}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}a:focus,button:focus,input:focus,textarea:focus{outline:none;resize:none}a{color:#06f;text-decoration:none}a:focus,a:hover{color:#0e63e2}a:active,a:focus,a:hover,a:visited{outline:0;text-decoration:none}label{cursor:default;display:inline-block;max-width:100%;font-weight:400}::-ms-clear{display:none}@font-face{font-family:pa;src:url("data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAcsAAsAAAAACqQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZXOEjOY21hcAAAAYAAAACWAAACCs4hbhBnbHlmAAACGAAAAugAAAO0BG1azWhlYWQAAAUAAAAALwAAADYPpP4TaGhlYQAABTAAAAAcAAAAJAfeA4pobXR4AAAFTAAAABQAAAAkI+kAAGxvY2EAAAVgAAAAFAAAABQEcAVsbWF4cAAABXQAAAAfAAAAIAEYAF1uYW1lAAAFlAAAAUUAAAJtPlT+fXBvc3QAAAbcAAAATwAAAGizaRo4eJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2Bk/ss4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVDy7z9zwv4EhhrmB4RRQmBEkBwA4Ig2aeJzFkbsNwzAMRE+RP0IQwEEG8AReyl1Kl+68g5Eqy7m7NZyj6EZI6viEJ4AnkRJIADWAKAZRAeGNANNLbsh+xDX7FZ6KH7jLuWBmYseeIxeu3PZdZ7+8UkH55TIvIql6raoNWhnNV97fFM57utQt79MRJTEf6ItMjk2OnWN32Ds2SY6OTZiLow6Dq6Neg5uD9gPbdC1VAAB4nH1SO2sUURi9370zd3Zmd+48dh77yr4mO7MmutlsxkkR3DQ2GgtBCAhaCBY2SrAwjUUw5CEo+A/EoAgR1LBpArEUQVBs3MrCYEAbY+xsMnpHV0ghDsM9936cj+9xDhIR+rlDtkkOZVETjaOT6CxCQEehzvAQ1IKwhUfBrom2azESeEFN8uotcgLcOrWcThT6LpWoBgzKMFHrREELB3A87OIp6DhDAPli4ZzZKJnkHii5oLwUn8ZrYFe8ktY9Fp86Om11qtnUfMY086Z5J0VFMYWxoDG46jqyKCs0fihqBXu7cgRXIJMPCmfOq9WieWk1vDbUcGWAhQXIFqvs8bRRMPh/s+Bkzbykq6lcQfWGLZjfTeeymSH/E+If5rNG5AfxURpNJVMiyUFuhCZ9RFzH0oDWx8CvDzCchigcYKcCTmeACc/CqB/vUgqlfh9KlMa7ZxYZa2gNbZH5bJFjg7FFVf1XkPic3j+UfrD3/4RDwT8z3CIH5AbKowZCYuAHXTjegoCBVAa3E006Sa9R2OCxLkzyGAPy9aMkj7bFvc3NPZGfM0uRIH00RqoHmys9Qnorv09vRxKipZneN0H41uPE9qgs7WjVkZecsNwThN7ySg8Br79AhskC9wuSsWPRegCuH062x/l6HIvY8Syss3JTizWPMXirNctkJJ6NZ/mFwXdPa+rwRis3uR6QiEIu4s9cDwQ1wzNqds2YMGrkQry/Gu+Dvgo69EEfvNDfHPwS9pL6v8UKfG7FSuK/KFEMvxBNae0+NTPicyKTtLghwhdRXFsTlaz0jAhAN4j5t/YsbCGCUJbXfYLXD/jz+sAn78lrMoJaaIxTJcpXym3uJbbg6rcwLzQGLegCv0xz6CRL5z1gKpGtR7oQYJpWtUz6nW2/UosOg7agP1Uk2WKfnPQV6pZcejntfGaWLCnw4K7h7Kp2SqZzijInYd1Wv7j6baVQNHBTsD5kNC3zwRKa2CgWFN7eL0lutBh4nGNgZGBgAGLnEJdv8fw2Xxm4WRhA4JrTXQME/d+MhYG5AcjlYGACiQIAFvYJkgB4nGNgZGBgbvjfwBDDwgACQJKRARVwAgBHDwJyeJxjYWBgYH7JwMDCgBsDAB8LAQ0AAAAAAHYA2AEYAT4BWAF8AYoB2nicY2BkYGDgZAhkYGUAASYg5gJCBob/YD4DABGZAXYAeJxlj01OwzAQhV/6B6QSqqhgh+QFYgEo/RGrblhUavdddN+mTpsqiSPHrdQDcB6OwAk4AtyAO/BIJ5s2lsffvHljTwDc4Acejt8t95E9XDI7cg0XuBeuU38QbpBfhJto41W4Rf1N2MczpsJtdGF5g9e4YvaEd2EPHXwI13CNT+E69S/hBvlbuIk7/Aq30PHqwj7mXle4jUcv9sdWL5xeqeVBxaHJIpM5v4KZXu+Sha3S6pxrW8QmU4OgX0lTnWlb3VPs10PnIhVZk6oJqzpJjMqt2erQBRvn8lGvF4kehCblWGP+tsYCjnEFhSUOjDFCGGSIyujoO1Vm9K+xQ8Jee1Y9zed0WxTU/3OFAQL0z1xTurLSeTpPgT1fG1J1dCtuy56UNJFezUkSskJe1rZUQuoBNmVXjhF6XNGJPyhnSP8ACVpuyAAAAHicbccxDoAgDAXQfkQEbsOR6gLVpAykCeH0xrj6tkeOPpn+JThs8NgRcCAiIRNmqMZ6ShjdhvU4hbUu6/4SLnE11pulvFM/RSvRA98yEWMA") format("woff")}.p_{font-family:pa;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.pa{margin-top:5px}.pb{margin-top:30px}.pc{margin-right:5px}.pd{margin-right:10px}.pe{margin-right:20px}.pf{margin-right:30px}.pg{margin-left:5px}.ph{margin-left:10px}.pi{padding-top:10px}.pj{padding-right:5px}.pk{padding-left:5px}.pl{padding-left:10px}.pm{width:100%}.pn{height:100%}.po{text-align:center}.pp{float:left}.pq{float:right}html .pr{display:inline-block}.ps{cursor:pointer}.pt{position:absolute}.pu{position:relative}html .pv{display:none}.pw:after,.pw:before{content:" ";display:table}.pw:after{clear:both}.px{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.py{word-wrap:normal;overflow:hidden;text-overflow:ellipsis}.py,.pz{white-space:nowrap}.pz{outline:none;display:inline-block;font-weight:400;text-align:center;vertical-align:middle;cursor:pointer;background-image:none;background-color:#ccc;padding:5.5px 14px;font-size:14px;line-height:1;border:0;color:#333;border-radius:4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pz:focus,.pz:hover{background-color:#a0a0a0;color:#333}.pA{background-color:#06f;color:#fff}.pA:focus,.pA:hover{background-color:#0e63e2;color:#fff}.pz[disabled]{background-color:#fbfbfb}.pz[disabled]:hover{border-color:#e6e6e6}::-webkit-input-placeholder{color:#999}::-ms-input-placeholder{color:#999}::placeholder{color:#999}::-moz-selection{background-color:#a0a0a0}::selection{background-color:#a0a0a0}.pB,.pC{caret-color:#06f;display:inline-block;height:25px;padding:3px 4px;border-radius:4px;box-sizing:border-box;box-shadow:none;border:1px solid #e6e6e6;background-color:#fff;color:#333;width:140px;vertical-align:middle;max-width:100%;outline:none}.pB:hover,.pC:hover{border-color:#ccc}.pB:focus,.pC:focus,.pD,.pD:hover{border-color:#06f!important}.pC{height:auto}.pB[disabled],.pC[disabled]{background-color:#fbfbfb}.pB[disabled]:hover,.pC[disabled]:hover{cursor:not-allowed;border-color:#e6e6e6}.pE{width:32px;height:16px;-webkit-appearance:none;-moz-appearance:none;appearance:none;vertical-align:middle;border-radius:8px;background-color:#ccc;margin-right:8px;cursor:pointer;position:relative}.pE,.pE:after{transition:all .25s}.pE:after{content:"";display:block;position:absolute;height:12px;width:12px;background:#fff;margin:2px;border-radius:50%;left:0}.pE:disabled,.pE:disabled:checked{background-color:#d8d8d8}.pE:checked:after{margin-left:-15px;left:100%}.pE:checked{background-color:#06f}.pF{margin-bottom:8px}.pG{height:25px;text-align:right;width:98px;vertical-align:top;white-space:nowrap;word-wrap:normal;overflow:hidden;text-overflow:ellipsis}.pG,.pH{line-height:25px}.pH{display:inline-block;position:relative;min-height:25px}.pI{padding:150px 0;margin:0 auto;width:150px;text-align:center;line-height:0}.pI:after,.pI:before{content:""}.pI:after,.pI:before,.pJ{width:14px;height:14px;background-color:#ccc;border-radius:100%;display:inline-block;-webkit-animation:p_ 1s ease-in-out infinite both;animation:p_ 1s ease-in-out infinite both}.pI:before{-webkit-animation-delay:-.32s;animation-delay:-.32s}.pJ{margin:0 10px;-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes p_{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes p_{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}.pK{padding:8px 25px;border-bottom:1px solid #e6e6e6;color:#333;margin:0;line-height:1.42857143}.pL{padding:18px 25px}.pM{padding:8px 25px;text-align:left;border-top:1px solid #e6e6e6}#app,body,html{height:100%;overflow:hidden}@font-face{font-family:pb;src:url(//at.alicdn.com/t/font_550514_i9xewk87fqd.eot);src:url(//at.alicdn.com/t/font_550514_i9xewk87fqd.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_550514_i9xewk87fqd.woff) format("woff"),url(//at.alicdn.com/t/font_550514_i9xewk87fqd.ttf) format("truetype"),url(//at.alicdn.com/t/font_550514_i9xewk87fqd.svg#iconfont) format("svg")}.pN{font-family:pb;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.pO{width:140px;text-align:left;height:25px;line-height:20px;padding:3px 4px}'),e.View.merge({ctor:function(){this.updater.set({i18n:n})}}),document.title=n("_dR"),e.State.on("__p",function(e){document.title=n("_dR"),i&&i.setItem("l.lang",e.lang)}),e.boot({defaultPath:"/index",defaultView:"editor/index",rootId:"app",error:function(e){setTimeout(function(){throw e},0)}})})}};define("gallery/mx-cell/focus",["magix","$","../../util/table"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix"),n=e("$"),o=e("../../util/table");r.default.applyStyle("pm",".pbM{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.pbN{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.pbN:hover{background:#ccc}.pbO{width:16px;margin:2px}.pbP,.pbP:hover{background:#06f;color:#fff}.pbQ,.pbQ .pbN{cursor:not-allowed;opacity:.7}.pbQ .pbN,.pbQ .pbN:hover{background:#e9e9e9}.pbQ .pbP,.pbQ .pbP:hover{background:#6aa5ff}.pbR{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.pbS{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.pbT{-webkit-transform:rotate(270deg);transform:rotate(270deg)}"),t.default=r.default.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.disabled,d=e.i18n;return s+='<ul class="px pbM',c&&(s+=" pbQ"),s+='"><li title="'+r(d("_fp"))+'" class="pp pbN pN" mx-click="'+t+"\x1e__bu({key:'left'})\">&#xe616;</li><li title=\""+r(d("_fq"))+'" class="pp pbN pN pbR" mx-click="'+t+"\x1e__bu({key:'right'})\">&#xe616;</li><li title=\""+r(d("_fr"))+'" class="pp pbN pN pbS" mx-click="'+t+"\x1e__bu({key:'top'})\">&#xe616;</li><li title=\""+r(d("_fs"))+'" class="pp pbN pN pbT" mx-click="'+t+"\x1e__bu({key:'bottom'})\">&#xe616;</li></ul>"},init:function(e){this.assign(e),this.__q=n.default("#"+this.id)},assign:function(e){return this.__fo=e.props,this.updater.set({disabled:e.disabled}),!0},render:function(){this.updater.digest()},"__bu<click>":function(e){var t=e.params.key,i=this.__fo;o.default.__fe(i,t)&&this.__q.trigger("change")}})}),define("gallery/mx-cell/index",["magix","$","../../util/table"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix"),n=e("$"),o=e("../../util/table");r.default.applyStyle("pm",".pbM{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.pbN{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.pbN:hover{background:#ccc}.pbO{width:16px;margin:2px}.pbP,.pbP:hover{background:#06f;color:#fff}.pbQ,.pbQ .pbN{cursor:not-allowed;opacity:.7}.pbQ .pbN,.pbQ .pbN:hover{background:#e9e9e9}.pbQ .pbP,.pbQ .pbP:hover{background:#6aa5ff}.pbR{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.pbS{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.pbT{-webkit-transform:rotate(270deg);transform:rotate(270deg)}"),t.default=r.default.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.disabled,d=e.i18n;s+='<ul class="px pbM',c&&(s+=" pbQ"),s+='">';var u="//img.alicdn.com/tfs/";return s+='<li class="pp pbN" title="'+r(d("__ad"))+'" mx-click="'+t+'\x1e__bu({type:\'rt\'})"><img class="pbO" src="'+r(u)+'TB1CxUfuTqWBKNjSZFAXXanSpXa-200-200.svg"/></li><li class="pp pbN" title="'+r(d("__ae"))+'" mx-click="'+t+'\x1e__bu({type:\'rb\'})"><img class="pbO" src="'+r(u)+'TB1w9NvuP7nBKNjSZLeXXbxCFXa-200-200.svg"/></li><li class="pp pbN" title="'+r(d("__ag"))+'" mx-click="'+t+'\x1e__bu({type:\'cb\'})"><img class="pbO" src="'+r(u)+'TB1ylQtuRsmBKNjSZFsXXaXSVXa-200-200.svg"/></li><li class="pp pbN" title="'+r(d("__ah"))+'" mx-click="'+t+'\x1e__bu({type:\'ca\'})"><img class="pbO" src="'+r(u)+'TB1efU6uOMnBKNjSZFCXXX0KFXa-200-200.svg"/></li><li class="pp pbN" title="'+r(d("__af"))+'" mx-click="'+t+'\x1e__bu({type:\'r\'})"><img class="pbO" src="'+r(u)+'TB16QchuRsmBKNjSZFFXXcT9VXa-200-200.svg"/></li><li class="pp pbN" title="'+r(d("__ai"))+'" mx-click="'+t+'\x1e__bu({type:\'c\'})"><img class="pbO" src="'+r(u)+'TB13fs.uHArBKNjSZFLXXc_dVXa-200-200.svg"/></li></ul><ul class="px pbM',c&&(s+=" pbQ"),s+='" style="display:block"><li class="pp pbN" title="'+r(d("_fv"))+'" mx-click="'+t+'\x1e__fu({type:\'ml\'})"><i mxs="pw:_" class="pN pbR">&#xe603;</i></li><li class="pp pbN" title="'+r(d("_fw"))+'" mx-click="'+t+'\x1e__fu({type:\'mr\'})"><i mxs="pw:a" class="pN">&#xe603;</i></li><li class="pp pbN" title="'+r(d("_fx"))+'" mx-click="'+t+'\x1e__fu({type:\'mu\'})"><i mxs="pw:b" class="pN pbT">&#xe603;</i></li><li class="pp pbN" title="'+r(d("_fy"))+'" mx-click="'+t+'\x1e__fu({type:\'md\'})"><i mxs="pw:c" class="pN pbS">&#xe603;</i></li><li class="pp pbN" title="'+r(d("_fz"))+'" mx-click="'+t+'\x1e__fu({type:\'sh\'})"><i mxs="pw:d" class="pN">&#xe672;</i></li><li class="pp pbN" title="'+r(d("_fA"))+'" mx-click="'+t+'\x1e__fu({type:\'sv\'})"><i mxs="pw:e" class="pN pbS">&#xe672;</i></li></ul>'},init:function(e){this.assign(e),this.__q=n.default("#"+this.id)},assign:function(e){return this.updater.set({props:e.props,disabled:e.disabled}),!0},render:function(){this.updater.digest()},"__bu<click>":function(e){var t=this.updater.get();this.updater.get("disabled")||o.default.__fi(t.props,e.params.type)&&this.__q.trigger("change")},"__fu<click>":function(e){var t=this.updater.get();this.updater.get("disabled")||o.default.__ft(t.props,e.params.type)&&this.__q.trigger("change")}})}),define("gallery/mx-cell/size",["$","magix","../../util/converter","../../util/table","../mx-number/index"],function(e,t,i){e("../mx-number/index"),t.__esModule=!0;var r=e("$"),a=e("magix"),l=e("../../util/converter"),s=e("../../util/table");a.default.applyStyle("pn",".pbU{display:block;margin:4px 0}"),t.default=a.default.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s,c="",d=e.read,u=e.col,f=e.disabled;return c+='<div class="pbU pB pu" ',(s=f)&&(c+='readonly="'+r(s)+'" '),c+=' mx-input="'+t+"\x1e__bu({type:'col'})\" mx-view=\"gallery/mx-number/index?fixed=2&min=0&value="+o(d(u.width)),(s=f)&&(c+="&disabled="+o(s)),c+='"></div><div class="pbU pB pu" ',(s=f)&&(c+='readonly="'+r(s)+'" '),c+=' mx-input="'+t+"\x1e__bu({type:'row'})\" mx-view=\"gallery/mx-number/index?fixed=2&min=0&value="+o(d(u.height)),(s=f)&&(c+="&disabled="+o(s)),c+='"></div>'},init:function(e){this.assign(e),this.__q=r.default("#"+this.id)},assign:function(e){var t=e.props,i=t.rows,r=t.rowIndex,n=t.colIndex,o=i[r];o||(o=i[0]);var a=o.cells[n];return a||(a=o.cells[0]),this.updater.set({col:a,props:e.props,read:l.default.__i,disabled:e.disabled}),!0},render:function(){this.updater.digest()},"__bu<input>":function(e){var t=e.params.type,i=l.default.__e(e.value),r=this.updater.get(),n=r.props,o=r.col;"row"==t?o.height=i:"col"==t&&(o.width=i),o.id||(o.id=a.default.guid("td_")),s.default.__h(n,{col:o}),this.__q.trigger("change")}})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.CodeMirror=t()}(this,function(){"use strict";var e=navigator.userAgent,t=navigator.platform,g=/gecko\/\d/i.test(e),i=/MSIE \d/.test(e),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),n=/Edge\/(\d+)/.exec(e),b=i||r||n,w=b&&(i?document.documentMode||6:+(n||r)[1]),x=!n&&/WebKit\//.test(e),o=x&&/Qt\/\d+\.\d+/.test(e),a=!n&&/Chrome\//.test(e),_=/Opera\//.test(e),s=/Apple Computer/.test(navigator.vendor),l=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),c=/PhantomJS/.test(e),d=!n&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),u=/Android/.test(e),f=d||u||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),y=d||/Mac/.test(t),p=/\bCrOS\b/.test(e),h=/win/i.test(t),v=_&&e.match(/Version\/(\d*\.\d*)/);v&&(v=Number(v[1])),v&&15<=v&&(x=!(_=!1));var m=y&&(o||_&&(null==v||v<12.11)),k=g||b&&9<=w;function S(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var C,T=function(e,t){var i=e.className,r=S(t).exec(i);if(r){var n=i.slice(r.index+r[0].length);e.className=i.slice(0,r.index)+(n?r[1]+n:"")}};function A(e){for(var t=e.childNodes.length;0<t;--t)e.removeChild(e.firstChild);return e}function E(e,t){return A(e).appendChild(t)}function N(e,t,i,r){var n=document.createElement(e);if(i&&(n.className=i),r&&(n.style.cssText=r),"string"==typeof t)n.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)n.appendChild(t[o]);return n}function M(e,t,i,r){var n=N(e,t,i,r);return n.setAttribute("role","presentation"),n}function L(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function I(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function D(e,t){var i=e.className;S(t).test(i)||(e.className+=(i?" ":"")+t)}function O(e,t){for(var i=e.split(" "),r=0;r<i.length;r++)i[r]&&!S(i[r]).test(t)&&(t+=" "+i[r]);return t}C=document.createRange?function(e,t,i,r){var n=document.createRange();return n.setEnd(r||e,i),n.setStart(e,t),n}:function(e,t,i){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",t),r};var z=function(e){e.select()};function R(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function P(e,t,i){for(var r in t||(t={}),e)!e.hasOwnProperty(r)||!1===i&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function B(e,t,i,r,n){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=r||0,a=n||0;;){var l=e.indexOf("\t",o);if(l<0||t<=l)return a+(t-o);a+=l-o,a+=i-a%i,o=l+1}}d?z=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:b&&(z=function(e){try{e.select()}catch(e){}});var H=function(){this.id=null};function W(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}H.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var X=30,F={toString:function(){return"CodeMirror.Pass"}},j={scroll:!1},q={origin:"*mouse"},$={origin:"+move"};function U(e,t,i){for(var r=0,n=0;;){var o=e.indexOf("\t",r);-1==o&&(o=e.length);var a=o-r;if(o==e.length||t<=n+a)return r+Math.min(a,t-n);if(n+=o-r,r=o+1,t<=(n+=i-n%i))return r}}var V=[""];function K(e){for(;V.length<=e;)V.push(Y(V)+" ");return V[e]}function Y(e){return e[e.length-1]}function G(e,t){for(var i=[],r=0;r<e.length;r++)i[r]=t(e[r],r);return i}function Q(){}function Z(e,t){var i;return i=Object.create?Object.create(e):(Q.prototype=e,new Q),t&&P(t,i),i}var J=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ee(e){return/\w/.test(e)||"\x80"<e&&(e.toUpperCase()!=e.toLowerCase()||J.test(e))}function te(e,t){return t?!!(-1<t.source.indexOf("\\w")&&ee(e))||t.test(e):ee(e)}function ie(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ne(e){return 768<=e.charCodeAt(0)&&re.test(e)}function oe(e,t,i){for(;(i<0?0<t:t<e.length)&&ne(e.charAt(t));)t+=i;return t}function ae(e,t,i){for(var r=i<t?-1:1;;){if(t==i)return t;var n=(t+i)/2,o=r<0?Math.ceil(n):Math.floor(n);if(o==t)return e(o)?t:i;e(o)?i=o:t=o+r}}function le(e,t,i){var r=this;this.input=i,r.scrollbarFiller=N("div",null,"CodeMirror-scrollbar-filler"),r.scrollbarFiller.setAttribute("cm-not-content","true"),r.gutterFiller=N("div",null,"CodeMirror-gutter-filler"),r.gutterFiller.setAttribute("cm-not-content","true"),r.lineDiv=M("div",null,"CodeMirror-code"),r.selectionDiv=N("div",null,null,"position: relative; z-index: 1"),r.cursorDiv=N("div",null,"CodeMirror-cursors"),r.measure=N("div",null,"CodeMirror-measure"),r.lineMeasure=N("div",null,"CodeMirror-measure"),r.lineSpace=M("div",[r.measure,r.lineMeasure,r.selectionDiv,r.cursorDiv,r.lineDiv],null,"position: relative; outline: none");var n=M("div",[r.lineSpace],"CodeMirror-lines");r.mover=N("div",[n],null,"position: relative"),r.sizer=N("div",[r.mover],"CodeMirror-sizer"),r.sizerWidth=null,r.heightForcer=N("div",null,null,"position: absolute; height: "+X+"px; width: 1px;"),r.gutters=N("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=N("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=N("div",[r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),b&&w<8&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),x||g&&f||(r.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(r.wrapper):e(r.wrapper)),r.viewFrom=r.viewTo=t.first,r.reportedViewFrom=r.reportedViewTo=t.first,r.view=[],r.renderedView=null,r.externalMeasured=null,r.viewOffset=0,r.lastWrapHeight=r.lastWrapWidth=0,r.updateLineNumbers=null,r.nativeBarWidth=r.barHeight=r.barWidth=0,r.scrollbarsClipped=!1,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.alignWidgets=!1,r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r.shift=!1,r.selForContextMenu=null,r.activeTouch=null,i.init(r)}function se(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var r=0;;++r){var n=i.children[r],o=n.chunkSize();if(t<o){i=n;break}t-=o}return i.lines[t]}function ce(e,i,r){var n=[],o=i.line;return e.iter(i.line,r.line+1,function(e){var t=e.text;o==r.line&&(t=t.slice(0,r.ch)),o==i.line&&(t=t.slice(i.ch)),n.push(t),++o}),n}function de(e,t,i){var r=[];return e.iter(t,i,function(e){r.push(e.text)}),r}function ue(e,t){var i=t-e.height;if(i)for(var r=e;r;r=r.parent)r.height+=i}function fe(e){if(null==e.parent)return null;for(var t=e.parent,i=W(t.lines,e),r=t.parent;r;r=(t=r).parent)for(var n=0;r.children[n]!=t;++n)i+=r.children[n].chunkSize();return i+t.first}function pe(e,t){var i=e.first;e:do{for(var r=0;r<e.children.length;++r){var n=e.children[r],o=n.height;if(t<o){e=n;continue e}t-=o,i+=n.chunkSize()}return i}while(!e.lines);for(var a=0;a<e.lines.length;++a){var l=e.lines[a].height;if(t<l)break;t-=l}return i+a}function he(e,t){return t>=e.first&&t<e.first+e.size}function ge(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function _e(e,t,i){if(void 0===i&&(i=null),!(this instanceof _e))return new _e(e,t,i);this.line=e,this.ch=t,this.sticky=i}function ve(e,t){return e.line-t.line||e.ch-t.ch}function me(e,t){return e.sticky==t.sticky&&0==ve(e,t)}function xe(e){return _e(e.line,e.ch)}function ye(e,t){return ve(e,t)<0?t:e}function be(e,t){return ve(e,t)<0?e:t}function we(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ke(e,t){if(t.line<e.first)return _e(e.first,0);var i,r,n,o=e.first+e.size-1;return t.line>o?_e(o,se(e,o).text.length):(r=se(e,(i=t).line).text.length,null==(n=i.ch)||r<n?_e(i.line,r):n<0?_e(i.line,0):i)}function Se(e,t){for(var i=[],r=0;r<t.length;r++)i[r]=ke(e,t[r]);return i}var Ce=!1,Te=!1;function Ae(e,t,i){this.marker=e,this.from=t,this.to=i}function Ee(e,t){if(e)for(var i=0;i<e.length;++i){var r=e[i];if(r.marker==t)return r}}function Me(e,t){for(var i,r=0;r<e.length;++r)e[r]!=t&&(i||(i=[])).push(e[r]);return i}function Ne(e,t){if(t.full)return null;var i=he(e,t.from.line)&&se(e,t.from.line).markedSpans,r=he(e,t.to.line)&&se(e,t.to.line).markedSpans;if(!i&&!r)return null;var n=t.from.ch,o=t.to.ch,a=0==ve(t.from,t.to),l=function(e,t,i){var r;if(e)for(var n=0;n<e.length;++n){var o=e[n],a=o.marker;if(null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t)||o.from==t&&"bookmark"==a.type&&(!i||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push(new Ae(a,o.from,l?null:o.to))}}return r}(i,n,a),s=function(e,t,i){var r;if(e)for(var n=0;n<e.length;++n){var o=e[n],a=o.marker;if(null==o.to||(a.inclusiveRight?o.to>=t:o.to>t)||o.from==t&&"bookmark"==a.type&&(!i||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(r||(r=[])).push(new Ae(a,l?null:o.from-t,null==o.to?null:o.to-t))}}return r}(r,o,a),c=1==t.text.length,d=Y(t.text).length+(c?n:0);if(l)for(var u=0;u<l.length;++u){var f=l[u];if(null==f.to){var p=Ee(s,f.marker);p?c&&(f.to=null==p.to?null:p.to+d):f.to=n}}if(s)for(var h=0;h<s.length;++h){var g=s[h];if(null!=g.to&&(g.to+=d),null==g.from)Ee(l,g.marker)||(g.from=d,c&&(l||(l=[])).push(g));else g.from+=d,c&&(l||(l=[])).push(g)}l&&(l=Le(l)),s&&s!=l&&(s=Le(s));var _=[l];if(!c){var v,m=t.text.length-2;if(0<m&&l)for(var x=0;x<l.length;++x)null==l[x].to&&(v||(v=[])).push(new Ae(l[x].marker,null,null));for(var y=0;y<m;++y)_.push(v);_.push(s)}return _}function Le(e){for(var t=0;t<e.length;++t){var i=e[t];null!=i.from&&i.from==i.to&&!1!==i.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ie(e){var t=e.markedSpans;if(t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function De(e,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function Oe(e){return e.inclusiveLeft?-1:0}function ze(e){return e.inclusiveRight?1:0}function Re(e,t){var i=e.lines.length-t.lines.length;if(0!=i)return i;var r=e.find(),n=t.find(),o=ve(r.from,n.from)||Oe(e)-Oe(t);if(o)return-o;var a=ve(r.to,n.to)||ze(e)-ze(t);return a||t.id-e.id}function Pe(e,t){var i,r=Te&&e.markedSpans;if(r)for(var n=void 0,o=0;o<r.length;++o)(n=r[o]).marker.collapsed&&null==(t?n.from:n.to)&&(!i||Re(i,n.marker)<0)&&(i=n.marker);return i}function Be(e){return Pe(e,!0)}function He(e){return Pe(e,!1)}function We(e,t){var i,r=Te&&e.markedSpans;if(r)for(var n=0;n<r.length;++n){var o=r[n];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!i||Re(i,o.marker)<0)&&(i=o.marker)}return i}function Xe(e,t,i,r,n){var o=se(e,t),a=Te&&o.markedSpans;if(a)for(var l=0;l<a.length;++l){var s=a[l];if(s.marker.collapsed){var c=s.marker.find(0),d=ve(c.from,i)||Oe(s.marker)-Oe(n),u=ve(c.to,r)||ze(s.marker)-ze(n);if(!(0<=d&&u<=0||d<=0&&0<=u)&&(d<=0&&(s.marker.inclusiveRight&&n.inclusiveLeft?0<=ve(c.to,i):0<ve(c.to,i))||0<=d&&(s.marker.inclusiveRight&&n.inclusiveLeft?ve(c.from,r)<=0:ve(c.from,r)<0)))return!0}}}function Fe(e){for(var t;t=Be(e);)e=t.find(-1,!0).line;return e}function je(e,t){var i=se(e,t),r=Fe(i);return i==r?t:fe(r)}function qe(e,t){if(t>e.lastLine())return t;var i,r=se(e,t);if(!$e(e,r))return t;for(;i=He(r);)r=i.find(1,!0).line;return fe(r)+1}function $e(e,t){var i=Te&&t.markedSpans;if(i)for(var r=void 0,n=0;n<i.length;++n)if((r=i[n]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Ue(e,t,r))return!0}}function Ue(e,t,i){if(null==i.to){var r=i.marker.find(1,!0);return Ue(e,r.line,Ee(r.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var n=void 0,o=0;o<t.markedSpans.length;++o)if((n=t.markedSpans[o]).marker.collapsed&&!n.marker.widgetNode&&n.from==i.to&&(null==n.to||n.to!=i.from)&&(n.marker.inclusiveLeft||i.marker.inclusiveRight)&&Ue(e,t,n))return!0}function Ve(e){for(var t=0,i=(e=Fe(e)).parent,r=0;r<i.lines.length;++r){var n=i.lines[r];if(n==e)break;t+=n.height}for(var o=i.parent;o;o=(i=o).parent)for(var a=0;a<o.children.length;++a){var l=o.children[a];if(l==i)break;t+=l.height}return t}function Ke(e){if(0==e.height)return 0;for(var t,i=e.text.length,r=e;t=Be(r);){var n=t.find(0,!0);r=n.from.line,i+=n.from.ch-n.to.ch}for(r=e;t=He(r);){var o=t.find(0,!0);i-=r.text.length-o.from.ch,i+=(r=o.to.line).text.length-o.to.ch}return i}function Ye(e){var i=e.display,t=e.doc;i.maxLine=se(t,t.first),i.maxLineLength=Ke(i.maxLine),i.maxLineChanged=!0,t.iter(function(e){var t=Ke(e);t>i.maxLineLength&&(i.maxLineLength=t,i.maxLine=e)})}var Ge=null;function Qe(e,t,i){var r;Ge=null;for(var n=0;n<e.length;++n){var o=e[n];if(o.from<t&&o.to>t)return n;o.to==t&&(o.from!=o.to&&"before"==i?r=n:Ge=n),o.from==t&&(o.from!=o.to&&"before"!=i?r=n:Ge=n)}return null!=r?r:Ge}var Ze=function(){var P="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",B="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";var H=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,W=/[stwN]/,X=/[LRr]/,F=/[Lb1n]/,j=/[1n]/;function q(e,t,i){this.level=e,this.from=t,this.to=i}return function(e,t){var i="ltr"==t?"L":"R";if(0==e.length||"ltr"==t&&!H.test(e))return!1;for(var r,n=e.length,o=[],a=0;a<n;++a)o.push((r=e.charCodeAt(a))<=247?P.charAt(r):1424<=r&&r<=1524?"R":1536<=r&&r<=1785?B.charAt(r-1536):1774<=r&&r<=2220?"r":8192<=r&&r<=8203?"w":8204==r?"b":"L");for(var l=0,s=i;l<n;++l){var c=o[l];"m"==c?o[l]=s:s=c}for(var d=0,u=i;d<n;++d){var f=o[d];"1"==f&&"r"==u?o[d]="n":X.test(f)&&"r"==(u=f)&&(o[d]="R")}for(var p=1,h=o[0];p<n-1;++p){var g=o[p];"+"==g&&"1"==h&&"1"==o[p+1]?o[p]="1":","!=g||h!=o[p+1]||"1"!=h&&"n"!=h||(o[p]=h),h=g}for(var _=0;_<n;++_){var v=o[_];if(","==v)o[_]="N";else if("%"==v){var m=void 0;for(m=_+1;m<n&&"%"==o[m];++m);for(var x=_&&"!"==o[_-1]||m<n&&"1"==o[m]?"1":"N",y=_;y<m;++y)o[y]=x;_=m-1}}for(var b=0,w=i;b<n;++b){var k=o[b];"L"==w&&"1"==k?o[b]="L":X.test(k)&&(w=k)}for(var S=0;S<n;++S)if(W.test(o[S])){var C=void 0;for(C=S+1;C<n&&W.test(o[C]);++C);for(var T="L"==(S?o[S-1]:i),A=T==("L"==(C<n?o[C]:i))?T?"L":"R":i,E=S;E<C;++E)o[E]=A;S=C-1}for(var M,N=[],L=0;L<n;)if(F.test(o[L])){var I=L;for(++L;L<n&&F.test(o[L]);++L);N.push(new q(0,I,L))}else{var D=L,O=N.length;for(++L;L<n&&"L"!=o[L];++L);for(var z=D;z<L;)if(j.test(o[z])){D<z&&N.splice(O,0,new q(1,D,z));var R=z;for(++z;z<L&&j.test(o[z]);++z);N.splice(O,0,new q(2,R,z)),D=z}else++z;D<L&&N.splice(O,0,new q(1,D,L))}return"ltr"==t&&(1==N[0].level&&(M=e.match(/^\s+/))&&(N[0].from=M[0].length,N.unshift(new q(0,0,M[0].length))),1==Y(N).level&&(M=e.match(/\s+$/))&&(Y(N).to-=M[0].length,N.push(new q(0,n-M[0].length,n)))),"rtl"==t?N.reverse():N}}();function Je(e,t){var i=e.order;return null==i&&(i=e.order=Ze(e.text,t)),i}var et=[],tt=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||et).concat(i)}};function it(e,t){return e._handlers&&e._handlers[t]||et}function rt(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var r=e._handlers,n=r&&r[t];if(n){var o=W(n,i);-1<o&&(r[t]=n.slice(0,o).concat(n.slice(o+1)))}}}function nt(e,t){var i=it(e,t);if(i.length)for(var r=Array.prototype.slice.call(arguments,2),n=0;n<i.length;++n)i[n].apply(null,r)}function ot(e,t,i){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),nt(e,i||t.type,e,t),ut(t)||t.codemirrorIgnore}function at(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)-1==W(i,t[r])&&i.push(t[r])}function lt(e,t){return 0<it(e,t).length}function st(e){e.prototype.on=function(e,t){tt(this,e,t)},e.prototype.off=function(e,t){rt(this,e,t)}}function ct(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function dt(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ut(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function ft(e){ct(e),dt(e)}function pt(e){return e.target||e.srcElement}function ht(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),y&&e.ctrlKey&&1==t&&(t=3),t}var gt,_t,vt=function(){if(b&&w<9)return!1;var e=N("div");return"draggable"in e||"dragDrop"in e}();function mt(e){if(null==gt){var t=N("span","\u200b");E(e,N("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(gt=t.offsetWidth<=1&&2<t.offsetHeight&&!(b&&w<8))}var i=gt?N("span","\u200b"):N("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function xt(e){if(null!=_t)return _t;var t=E(e,document.createTextNode("A\u062eA")),i=C(t,0,1).getBoundingClientRect(),r=C(t,1,2).getBoundingClientRect();return A(e),!(!i||i.left==i.right)&&(_t=r.right-i.right<3)}var yt,bt=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,i=[],r=e.length;t<=r;){var n=e.indexOf("\n",t);-1==n&&(n=e.length);var o=e.slice(t,"\r"==e.charAt(n-1)?n-1:n),a=o.indexOf("\r");-1!=a?(i.push(o.slice(0,a)),t+=a+1):(i.push(o),t=n+1)}return i}:function(e){return e.split(/\r\n?|\n/)},wt=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},kt="oncopy"in(yt=N("div"))||(yt.setAttribute("oncopy","return;"),"function"==typeof yt.oncopy),St=null;var Ct={},Tt={};function At(e){if("string"==typeof e&&Tt.hasOwnProperty(e))e=Tt[e];else if(e&&"string"==typeof e.name&&Tt.hasOwnProperty(e.name)){var t=Tt[e.name];"string"==typeof t&&(t={name:t}),(e=Z(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return At("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return At("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Et(e,t){t=At(t);var i=Ct[t.name];if(!i)return Et(e,"text/plain");var r=i(e,t);if(Mt.hasOwnProperty(t.name)){var n=Mt[t.name];for(var o in n)n.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=n[o])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)r[a]=t.modeProps[a];return r}var Mt={};function Nt(e,t){P(t,Mt.hasOwnProperty(e)?Mt[e]:Mt[e]={})}function Lt(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var i={};for(var r in t){var n=t[r];n instanceof Array&&(n=n.concat([])),i[r]=n}return i}function It(e,t){for(var i;e.innerMode&&(i=e.innerMode(t))&&i.mode!=e;)t=i.state,e=i.mode;return i||{mode:e,state:t}}function Dt(e,t,i){return!e.startState||e.startState(t,i)}var Ot=function(e,t,i){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=i};Ot.prototype.eol=function(){return this.pos>=this.string.length},Ot.prototype.sol=function(){return this.pos==this.lineStart},Ot.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ot.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ot.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Ot.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Ot.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Ot.prototype.skipToEnd=function(){this.pos=this.string.length},Ot.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(-1<t)return this.pos=t,!0},Ot.prototype.backUp=function(e){this.pos-=e},Ot.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=B(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?B(this.string,this.lineStart,this.tabSize):0)},Ot.prototype.indentation=function(){return B(this.string,null,this.tabSize)-(this.lineStart?B(this.string,this.lineStart,this.tabSize):0)},Ot.prototype.match=function(e,t,i){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&0<r.index?null:(r&&!1!==t&&(this.pos+=r[0].length),r)}var n=function(e){return i?e.toLowerCase():e};if(n(this.string.substr(this.pos,e.length))==n(e))return!1!==t&&(this.pos+=e.length),!0},Ot.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ot.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Ot.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Ot.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var zt=function(e,t){this.state=e,this.lookAhead=t},Rt=function(e,t,i,r){this.state=t,this.doc=e,this.line=i,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function Pt(t,i,r,e){var s=[t.state.modeGen],n={};Ut(t,i.text,t.doc.mode,r,function(e,t){return s.push(e,t)},n,e);for(var c=r.state,o=function(e){r.baseTokens=s;var o=t.state.overlays[e],a=1,l=0;r.state=!0,Ut(t,i.text,o.mode,r,function(e,t){for(var i=a;l<e;){var r=s[a];e<r&&s.splice(a,1,e,s[a+1],r),a+=2,l=Math.min(e,r)}if(t)if(o.opaque)s.splice(i,a-i,e,"overlay "+t),a=i+2;else for(;i<a;i+=2){var n=s[i+1];s[i+1]=(n?n+" ":"")+"overlay "+t}},n),r.state=c,r.baseTokens=null,r.baseTokenPos=1},a=0;a<t.state.overlays.length;++a)o(a);return{styles:s,classes:n.bgClass||n.textClass?n:null}}function Bt(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=Ht(e,fe(t)),n=t.text.length>e.options.maxHighlightLength&&Lt(e.doc.mode,r.state),o=Pt(e,t,r);n&&(r.state=n),t.stateAfter=r.save(!n),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Ht(i,r,e){var t=i.doc,n=i.display;if(!t.mode.startState)return new Rt(t,!0,r);var o=function(e,t,i){for(var r,n,o=e.doc,a=i?-1:t-(e.doc.mode.innerMode?1e3:100),l=t;a<l;--l){if(l<=o.first)return o.first;var s=se(o,l-1),c=s.stateAfter;if(c&&(!i||l+(c instanceof zt?c.lookAhead:0)<=o.modeFrontier))return l;var d=B(s.text,null,e.options.tabSize);(null==n||d<r)&&(n=l-1,r=d)}return n}(i,r,e),a=o>t.first&&se(t,o-1).stateAfter,l=a?Rt.fromSaved(t,a,o):new Rt(t,Dt(t.mode),o);return t.iter(o,r,function(e){Wt(i,e.text,l);var t=l.line;e.stateAfter=t==r-1||t%5==0||t>=n.viewFrom&&t<n.viewTo?l.save():null,l.nextLine()}),e&&(t.modeFrontier=l.line),l}function Wt(e,t,i,r){var n=e.doc.mode,o=new Ot(t,e.options.tabSize,i);for(o.start=o.pos=r||0,""==t&&Xt(n,i.state);!o.eol();)Ft(n,o,i.state),o.start=o.pos}function Xt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var i=It(e,t);return i.mode.blankLine?i.mode.blankLine(i.state):void 0}}function Ft(e,t,i,r){for(var n=0;n<10;n++){r&&(r[0]=It(e,i).mode);var o=e.token(t,i);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}Rt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Rt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Rt.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},Rt.fromSaved=function(e,t,i){return t instanceof zt?new Rt(e,Lt(e.mode,t.state),i,t.lookAhead):new Rt(e,Lt(e.mode,t),i)},Rt.prototype.save=function(e){var t=!1!==e?Lt(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new zt(t,this.maxLookAhead):t};var jt=function(e,t,i){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=i};function qt(e,t,i,r){var n,o,a=e.doc,l=a.mode,s=se(a,(t=ke(a,t)).line),c=Ht(e,t.line,i),d=new Ot(s.text,e.options.tabSize,c);for(r&&(o=[]);(r||d.pos<t.ch)&&!d.eol();)d.start=d.pos,n=Ft(l,d,c.state),r&&o.push(new jt(d,n,Lt(a.mode,c.state)));return r?o:new jt(d,n,c.state)}function $t(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var r=i[1]?"bgClass":"textClass";null==t[r]?t[r]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+i[2])}return e}function Ut(e,t,i,r,n,o,a){var l=i.flattenSpans;null==l&&(l=e.options.flattenSpans);var s,c=0,d=null,u=new Ot(t,e.options.tabSize,r),f=e.options.addModeClass&&[null];for(""==t&&$t(Xt(i,r.state),o);!u.eol();){if(s=u.pos>e.options.maxHighlightLength?(l=!1,a&&Wt(e,t,r,u.pos),u.pos=t.length,null):$t(Ft(i,u,r.state,f),o),f){var p=f[0].name;p&&(s="m-"+(s?p+" "+s:p))}if(!l||d!=s){for(;c<u.start;)n(c=Math.min(u.start,c+5e3),d);d=s}u.start=u.pos}for(;c<u.pos;){var h=Math.min(u.pos,c+5e3);n(h,d),c=h}}var Vt=function(e,t,i){this.text=e,De(this,t),this.height=i?i(this):1};Vt.prototype.lineNo=function(){return fe(this)},st(Vt);var Kt={},Yt={};function Gt(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?Yt:Kt;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function Qt(e,t){var i=M("span",null,null,x?"padding-right: .1px":null),r={pre:M("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:(b||x)&&e.getOption("lineWrapping")};t.measure={};for(var n=0;n<=(t.rest?t.rest.length:0);n++){var o=n?t.rest[n-1]:t.line,a=void 0;r.pos=0,r.addToken=Jt,xt(e.display.measure)&&(a=Je(o,e.doc.direction))&&(r.addToken=ei(r.addToken,a)),r.map=[],ii(o,r,Bt(e,o,t!=e.display.externalMeasured&&fe(o))),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=O(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=O(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(mt(e.display.measure))),0==n?(t.measure.map=r.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(r.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(x){var l=r.content.lastChild;(/\bcm-tab\b/.test(l.className)||l.querySelector&&l.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return nt(e,"renderLine",e,t.line,r.pre),r.pre.className&&(r.textClass=O(r.pre.className,r.textClass||"")),r}function Zt(e){var t=N("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Jt(e,t,i,r,n,o,a){if(t){var l,s=e.splitSpaces?function(e,t){if(1<e.length&&!/  /.test(e))return e;for(var i=t,r="",n=0;n<e.length;n++){var o=e.charAt(n);" "!=o||!i||n!=e.length-1&&32!=e.charCodeAt(n+1)||(o="\xa0"),r+=o,i=" "==o}return r}(t,e.trailingSpace):t,c=e.cm.state.specialChars,d=!1;if(c.test(t)){l=document.createDocumentFragment();for(var u=0;;){c.lastIndex=u;var f=c.exec(t),p=f?f.index-u:t.length-u;if(p){var h=document.createTextNode(s.slice(u,u+p));b&&w<9?l.appendChild(N("span",[h])):l.appendChild(h),e.map.push(e.pos,e.pos+p,h),e.col+=p,e.pos+=p}if(!f)break;u+=p+1;var g=void 0;if("\t"==f[0]){var _=e.cm.options.tabSize,v=_-e.col%_;(g=l.appendChild(N("span",K(v),"cm-tab"))).setAttribute("role","presentation"),g.setAttribute("cm-text","\t"),e.col+=v}else"\r"==f[0]||"\n"==f[0]?(g=l.appendChild(N("span","\r"==f[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",f[0]):((g=e.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),b&&w<9?l.appendChild(N("span",[g])):l.appendChild(g)),e.col+=1;e.map.push(e.pos,e.pos+1,g),e.pos++}}else e.col+=t.length,l=document.createTextNode(s),e.map.push(e.pos,e.pos+t.length,l),b&&w<9&&(d=!0),e.pos+=t.length;if(e.trailingSpace=32==s.charCodeAt(t.length-1),i||r||n||d||a){var m=i||"";r&&(m+=r),n&&(m+=n);var x=N("span",[l],m,a);return o&&(x.title=o),e.content.appendChild(x)}e.content.appendChild(l)}}function ei(u,f){return function(e,t,i,r,n,o,a){i=i?i+" cm-force-border":"cm-force-border";for(var l=e.pos,s=l+t.length;;){for(var c=void 0,d=0;d<f.length&&!((c=f[d]).to>l&&c.from<=l);d++);if(c.to>=s)return u(e,t,i,r,n,o,a);u(e,t.slice(0,c.to-l),i,r,null,o,a),r=null,t=t.slice(c.to-l),l=c.to}}}function ti(e,t,i,r){var n=!r&&i.widgetNode;n&&e.map.push(e.pos,e.pos+t,n),!r&&e.cm.display.input.needsContentAttribute&&(n||(n=e.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",i.id)),n&&(e.cm.display.input.setUneditable(n),e.content.appendChild(n)),e.pos+=t,e.trailingSpace=!1}function ii(e,t,i){var r=e.markedSpans,n=e.text,o=0;if(r)for(var a,l,s,c,d,u,f,p=n.length,h=0,g=1,_="",v=0;;){if(v==h){s=c=d=u=l="",f=null,v=1/0;for(var m=[],x=void 0,y=0;y<r.length;++y){var b=r[y],w=b.marker;"bookmark"==w.type&&b.from==h&&w.widgetNode?m.push(w):b.from<=h&&(null==b.to||b.to>h||w.collapsed&&b.to==h&&b.from==h)?(null!=b.to&&b.to!=h&&v>b.to&&(v=b.to,c=""),w.className&&(s+=" "+w.className),w.css&&(l=(l?l+";":"")+w.css),w.startStyle&&b.from==h&&(d+=" "+w.startStyle),w.endStyle&&b.to==v&&(x||(x=[])).push(w.endStyle,b.to),w.title&&!u&&(u=w.title),w.collapsed&&(!f||Re(f.marker,w)<0)&&(f=b)):b.from>h&&v>b.from&&(v=b.from)}if(x)for(var k=0;k<x.length;k+=2)x[k+1]==v&&(c+=" "+x[k]);if(!f||f.from==h)for(var S=0;S<m.length;++S)ti(t,0,m[S]);if(f&&(f.from||0)==h){if(ti(t,(null==f.to?p+1:f.to)-h,f.marker,null==f.from),null==f.to)return;f.to==h&&(f=!1)}}if(p<=h)break;for(var C=Math.min(p,v);;){if(_){var T=h+_.length;if(!f){var A=C<T?_.slice(0,C-h):_;t.addToken(t,A,a?a+s:s,d,h+A.length==v?c:"",u,l)}if(C<=T){_=_.slice(C-h),h=C;break}h=T,d=""}_=n.slice(o,o=i[g++]),a=Gt(i[g++],t.cm.options)}}else for(var E=1;E<i.length;E+=2)t.addToken(t,n.slice(o,o=i[E]),Gt(i[E+1],t.cm.options))}function ri(e,t,i){this.line=t,this.rest=function(e){for(var t,i;t=He(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}(t),this.size=this.rest?fe(Y(this.rest))-i+1:1,this.node=this.text=null,this.hidden=$e(e,t)}function ni(e,t,i){for(var r,n=[],o=t;o<i;o=r){var a=new ri(e.doc,se(e.doc,o),o);r=o+a.size,n.push(a)}return n}var oi=null;var ai=null;function li(e,t){var i=it(e,t);if(i.length){var r,n=Array.prototype.slice.call(arguments,2);oi?r=oi.delayedCallbacks:ai?r=ai:(r=ai=[],setTimeout(si,0));for(var o=function(e){r.push(function(){return i[e].apply(null,n)})},a=0;a<i.length;++a)o(a)}}function si(){var e=ai;ai=null;for(var t=0;t<e.length;++t)e[t]()}function ci(e,t,i,r){for(var n=0;n<t.changes.length;n++){var o=t.changes[n];"text"==o?fi(e,t):"gutter"==o?hi(e,t,i,r):"class"==o?pi(e,t):"widget"==o&&gi(e,t,r)}t.changes=null}function di(e){return e.node==e.text&&(e.node=N("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),b&&w<8&&(e.node.style.zIndex=2)),e.node}function ui(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):Qt(e,t)}function fi(e,t){var i=t.text.className,r=ui(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,pi(e,t)):i&&(t.text.className=i)}function pi(e,t){!function(e,t){var i=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(i&&(i+=" CodeMirror-linebackground"),t.background)i?t.background.className=i:(t.background.parentNode.removeChild(t.background),t.background=null);else if(i){var r=di(t);t.background=r.insertBefore(N("div",null,i),r.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?di(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var i=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=i||""}function hi(e,t,i,r){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var n=di(t);t.gutterBackground=N("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),n.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var a=di(t),l=t.gutter=N("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(e.display.input.setUneditable(l),a.insertBefore(l,t.text),t.line.gutterClass&&(l.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(N("div",ge(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var s=0;s<e.options.gutters.length;++s){var c=e.options.gutters[s],d=o.hasOwnProperty(c)&&o[c];d&&l.appendChild(N("div",[d],"CodeMirror-gutter-elt","left: "+r.gutterLeft[c]+"px; width: "+r.gutterWidth[c]+"px"))}}}function gi(e,t,i){t.alignable&&(t.alignable=null);for(var r=t.node.firstChild,n=void 0;r;r=n)n=r.nextSibling,"CodeMirror-linewidget"==r.className&&t.node.removeChild(r);_i(e,t,i)}function _i(e,t,i){if(vi(e,t.line,t,i,!0),t.rest)for(var r=0;r<t.rest.length;r++)vi(e,t.rest[r],t,i,!1)}function vi(e,t,i,r,n){if(t.widgets)for(var o=di(i),a=0,l=t.widgets;a<l.length;++a){var s=l[a],c=N("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),mi(s,c,i,r),e.display.input.setUneditable(c),n&&s.above?o.insertBefore(c,i.gutter||i.text):o.appendChild(c),li(s,"redraw")}}function mi(e,t,i,r){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var n=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(n-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=n+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function xi(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!L(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),E(t.display.measure,N("div",[e.node],null,i))}return e.height=e.node.parentNode.offsetHeight}function yi(e,t){for(var i=pt(t);i!=e.wrapper;i=i.parentNode)if(!i||1==i.nodeType&&"true"==i.getAttribute("cm-ignore-events")||i.parentNode==e.sizer&&i!=e.mover)return!0}function bi(e){return e.lineSpace.offsetTop}function wi(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function ki(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=E(e.measure,N("pre","x")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(e.cachedPaddingH=r),r}function Si(e){return X-e.display.nativeBarWidth}function Ci(e){return e.display.scroller.clientWidth-Si(e)-e.display.barWidth}function Ti(e){return e.display.scroller.clientHeight-Si(e)-e.display.barHeight}function Ai(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var n=0;n<e.rest.length;n++)if(fe(e.rest[n])>i)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function Ei(e,t,i,r){return Li(e,Ni(e,t),i,r)}function Mi(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[ar(e,t)];var i=e.display.externalMeasured;return i&&t>=i.lineN&&t<i.lineN+i.size?i:void 0}function Ni(e,t){var i=fe(t),r=Mi(e,i);r&&!r.text?r=null:r&&r.changes&&(ci(e,r,i,tr(e)),e.curOp.forceUpdate=!0),r||(r=function(e,t){var i=fe(t=Fe(t)),r=e.display.externalMeasured=new ri(e.doc,t,i);r.lineN=i;var n=r.built=Qt(e,r);return r.text=n.pre,E(e.display.lineMeasure,n.pre),r}(e,t));var n=Ai(r,t,i);return{line:t,view:r,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function Li(e,t,i,r,n){t.before&&(i=-1);var o,a=i+(r||"");return t.cache.hasOwnProperty(a)?o=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(!function(e,t,i){var r=e.options.lineWrapping,n=r&&Ci(e);if(!t.measure.heights||r&&t.measure.width!=n){var o=t.measure.heights=[];if(r){t.measure.width=n;for(var a=t.text.firstChild.getClientRects(),l=0;l<a.length-1;l++){var s=a[l],c=a[l+1];2<Math.abs(s.bottom-c.bottom)&&o.push((s.bottom+c.top)/2-i.top)}}o.push(i.bottom-i.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,i,r){var n,o=Oi(t.map,i,r),a=o.node,l=o.start,s=o.end,c=o.collapse;if(3==a.nodeType){for(var d=0;d<4;d++){for(;l&&ne(t.line.text.charAt(o.coverStart+l));)--l;for(;o.coverStart+s<o.coverEnd&&ne(t.line.text.charAt(o.coverStart+s));)++s;if((n=b&&w<9&&0==l&&s==o.coverEnd-o.coverStart?a.parentNode.getBoundingClientRect():zi(C(a,l,s).getClientRects(),r)).left||n.right||0==l)break;s=l,l-=1,c="right"}b&&w<11&&(n=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=St)return St;var t=E(e,N("span","x")),i=t.getBoundingClientRect(),r=C(t,0,1).getBoundingClientRect();return St=1<Math.abs(i.left-r.left)}(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*r,bottom:t.bottom*r}}(e.display.measure,n))}else{var u;0<l&&(c=r="right"),n=e.options.lineWrapping&&1<(u=a.getClientRects()).length?u["right"==r?u.length-1:0]:a.getBoundingClientRect()}if(b&&w<9&&!l&&(!n||!n.left&&!n.right)){var f=a.parentNode.getClientRects()[0];n=f?{left:f.left,right:f.left+er(e.display),top:f.top,bottom:f.bottom}:Di}for(var p=n.top-t.rect.top,h=n.bottom-t.rect.top,g=(p+h)/2,_=t.view.measure.heights,v=0;v<_.length-1&&!(g<_[v]);v++);var m=v?_[v-1]:0,x=_[v],y={left:("right"==c?n.right:n.left)-t.rect.left,right:("left"==c?n.left:n.right)-t.rect.left,top:m,bottom:x};n.left||n.right||(y.bogus=!0);e.options.singleCursorHeightPerLine||(y.rtop=p,y.rbottom=h);return y}(e,t,i,r)).bogus||(t.cache[a]=o)),{left:o.left,right:o.right,top:n?o.rtop:o.top,bottom:n?o.rbottom:o.bottom}}var Ii,Di={left:0,right:0,top:0,bottom:0};function Oi(e,t,i){for(var r,n,o,a,l,s,c=0;c<e.length;c+=3)if(l=e[c],s=e[c+1],t<l?(n=0,o=1,a="left"):t<s?o=(n=t-l)+1:(c==e.length-3||t==s&&e[c+3]>t)&&(n=(o=s-l)-1,s<=t&&(a="right")),null!=n){if(r=e[c+2],l==s&&i==(r.insertLeft?"left":"right")&&(a=i),"left"==i&&0==n)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)r=e[2+(c-=3)],a="left";if("right"==i&&n==s-l)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)r=e[(c+=3)+2],a="right";break}return{node:r,start:n,end:o,collapse:a,coverStart:l,coverEnd:s}}function zi(e,t){var i=Di;if("left"==t)for(var r=0;r<e.length&&(i=e[r]).left==i.right;r++);else for(var n=e.length-1;0<=n&&(i=e[n]).left==i.right;n--);return i}function Ri(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Pi(e){e.display.externalMeasure=null,A(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Ri(e.display.view[t])}function Bi(e){Pi(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Hi(){return a&&u?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Wi(){return a&&u?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Xi(e){var t=0;if(e.widgets)for(var i=0;i<e.widgets.length;++i)e.widgets[i].above&&(t+=xi(e.widgets[i]));return t}function Fi(e,t,i,r,n){if(!n){var o=Xi(t);i.top+=o,i.bottom+=o}if("line"==r)return i;r||(r="local");var a=Ve(t);if("local"==r?a+=bi(e.display):a-=e.display.viewOffset,"page"==r||"window"==r){var l=e.display.lineSpace.getBoundingClientRect();a+=l.top+("window"==r?0:Wi());var s=l.left+("window"==r?0:Hi());i.left+=s,i.right+=s}return i.top+=a,i.bottom+=a,i}function ji(e,t,i){if("div"==i)return t;var r=t.left,n=t.top;if("page"==i)r-=Hi(),n-=Wi();else if("local"==i||!i){var o=e.display.sizer.getBoundingClientRect();r+=o.left,n+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:n-a.top}}function qi(e,t,i,r,n){return r||(r=se(e.doc,t.line)),Fi(e,r,Ei(e,r,t.ch,n),i)}function $i(r,e,n,o,a,l){function s(e,t){var i=Li(r,a,e,t?"right":"left",l);return t?i.left=i.right:i.right=i.left,Fi(r,o,i,n)}o=o||se(r.doc,e.line),a||(a=Ni(r,o));var c=Je(o,r.doc.direction),t=e.ch,i=e.sticky;if(t>=o.text.length?(t=o.text.length,i="before"):t<=0&&(t=0,i="after"),!c)return s("before"==i?t-1:t,"before"==i);function d(e,t,i){return s(i?e-1:e,1==c[t].level!=i)}var u=Qe(c,t,i),f=Ge,p=d(t,u,"before"==i);return null!=f&&(p.other=d(t,f,"before"!=i)),p}function Ui(e,t){var i=0;t=ke(e.doc,t),e.options.lineWrapping||(i=er(e.display)*t.ch);var r=se(e.doc,t.line),n=Ve(r)+bi(e.display);return{left:i,right:i,top:n,bottom:n+r.height}}function Vi(e,t,i,r,n){var o=_e(e,t,i);return o.xRel=n,r&&(o.outside=!0),o}function Ki(e,t,i){var r=e.doc;if((i+=e.display.viewOffset)<0)return Vi(r.first,0,null,!0,-1);var n=pe(r,i),o=r.first+r.size-1;if(o<n)return Vi(r.first+r.size-1,se(r,o).text.length,null,!0,1);t<0&&(t=0);for(var a=se(r,n);;){var l=Zi(e,a,n,t,i),s=We(a,l.ch+(0<l.xRel?1:0));if(!s)return l;var c=s.find(1);if(c.line==n)return c;a=se(r,n=c.line)}}function Yi(t,e,i,r){r-=Xi(e);var n=e.text.length,o=ae(function(e){return Li(t,i,e-1).bottom<=r},n,0);return{begin:o,end:n=ae(function(e){return Li(t,i,e).top>r},o,n)}}function Gi(e,t,i,r){return i||(i=Ni(e,t)),Yi(e,t,i,Fi(e,t,Li(e,i,r),"line").top)}function Qi(e,t,i,r){return!(e.bottom<=i)&&(e.top>i||(r?e.left:e.right)>t)}function Zi(i,e,t,r,n){n-=Ve(e);var o=Ni(i,e),a=Xi(e),l=0,s=e.text.length,c=!0,d=Je(e,i.doc.direction);if(d){var u=(i.options.lineWrapping?function(e,t,i,r,n,o,a){var l=Yi(e,t,r,a),s=l.begin,c=l.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var d=null,u=null,f=0;f<n.length;f++){var p=n[f];if(!(p.from>=c||p.to<=s)){var h=1!=p.level,g=Li(e,r,h?Math.min(c,p.to)-1:Math.max(s,p.from)).right,_=g<o?o-g+1e9:g-o;(!d||_<u)&&(d=p,u=_)}}d||(d=n[n.length-1]);d.from<s&&(d={from:s,to:d.to,level:d.level});d.to>c&&(d={from:d.from,to:c,level:d.level});return d}:function(r,n,o,a,l,s,c){var e=ae(function(e){var t=l[e],i=1!=t.level;return Qi($i(r,_e(o,i?t.to:t.from,i?"before":"after"),"line",n,a),s,c,!0)},0,l.length-1),t=l[e];if(0<e){var i=1!=t.level,d=$i(r,_e(o,i?t.from:t.to,i?"after":"before"),"line",n,a);Qi(d,s,c,!0)&&d.top>c&&(t=l[e-1])}return t})(i,e,t,o,d,r,n);l=(c=1!=u.level)?u.from:u.to-1,s=c?u.to:u.from-1}var f,p,h=null,g=null,_=ae(function(e){var t=Li(i,o,e);return t.top+=a,t.bottom+=a,!!Qi(t,r,n,!1)&&(t.top<=n&&t.left<=r&&(h=e,g=t),!0)},l,s),v=!1;if(g){var m=r-g.left<g.right-r,x=m==c;_=h+(x?0:1),p=x?"after":"before",f=m?g.left:g.right}else{c||_!=s&&_!=l||_++,p=0==_?"after":_==e.text.length?"before":Li(i,o,_-(c?1:0)).bottom+a<=n==c?"after":"before";var y=$i(i,_e(t,_,p),"line",e,o);f=y.left,v=n<y.top||n>=y.bottom}return Vi(t,_=oe(e.text,_,1),p,v,r-f)}function Ji(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Ii){Ii=N("pre");for(var t=0;t<49;++t)Ii.appendChild(document.createTextNode("x")),Ii.appendChild(N("br"));Ii.appendChild(document.createTextNode("x"))}E(e.measure,Ii);var i=Ii.offsetHeight/50;return 3<i&&(e.cachedTextHeight=i),A(e.measure),i||1}function er(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=N("span","xxxxxxxxxx"),i=N("pre",[t]);E(e.measure,i);var r=t.getBoundingClientRect(),n=(r.right-r.left)/10;return 2<n&&(e.cachedCharWidth=n),n||10}function tr(e){for(var t=e.display,i={},r={},n=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a)i[e.options.gutters[a]]=o.offsetLeft+o.clientLeft+n,r[e.options.gutters[a]]=o.clientWidth;return{fixedPos:ir(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function ir(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function rr(r){var n=Ji(r.display),o=r.options.lineWrapping,a=o&&Math.max(5,r.display.scroller.clientWidth/er(r.display)-3);return function(e){if($e(r.doc,e))return 0;var t=0;if(e.widgets)for(var i=0;i<e.widgets.length;i++)e.widgets[i].height&&(t+=e.widgets[i].height);return o?t+(Math.ceil(e.text.length/a)||1)*n:t+n}}function nr(e){var t=e.doc,i=rr(e);t.iter(function(e){var t=i(e);t!=e.height&&ue(e,t)})}function or(e,t,i,r){var n=e.display;if(!i&&"true"==pt(t).getAttribute("cm-not-content"))return null;var o,a,l=n.lineSpace.getBoundingClientRect();try{o=t.clientX-l.left,a=t.clientY-l.top}catch(t){return null}var s,c=Ki(e,o,a);if(r&&1==c.xRel&&(s=se(e.doc,c.line).text).length==c.ch){var d=B(s,s.length,e.options.tabSize)-s.length;c=_e(c.line,Math.max(0,Math.round((o-ki(e.display).left)/er(e.display))-d))}return c}function ar(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var i=e.display.view,r=0;r<i.length;r++)if((t-=i[r].size)<0)return r}function lr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function sr(e,t){void 0===t&&(t=!0);for(var i=e.doc,r={},n=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),a=0;a<i.sel.ranges.length;a++)if(t||a!=i.sel.primIndex){var l=i.sel.ranges[a];if(!(l.from().line>=e.display.viewTo||l.to().line<e.display.viewFrom)){var s=l.empty();(s||e.options.showCursorWhenSelecting)&&cr(e,l.head,n),s||ur(e,l,o)}}return r}function cr(e,t,i){var r=$i(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),n=i.appendChild(N("div","\xa0","CodeMirror-cursor"));if(n.style.left=r.left+"px",n.style.top=r.top+"px",n.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px",r.other){var o=i.appendChild(N("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function dr(e,t){return e.top-t.top||e.left-t.left}function ur(a,e,t){var i=a.display,r=a.doc,n=document.createDocumentFragment(),o=ki(a.display),T=o.left,A=Math.max(i.sizerWidth,Ci(a)-i.sizer.offsetLeft)-o.right,E="ltr"==r.direction;function M(e,t,i,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),n.appendChild(N("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==i?A-e:i)+"px;\n                             height: "+(r-t)+"px"))}function l(i,m,x){var y,b,o=se(r,i),w=o.text.length;function k(e,t){return qi(a,_e(i,e),"div",o,t)}function S(e,t,i){var r=Gi(a,o,null,e),n="ltr"==t==("after"==i)?"left":"right";return k("after"==i?r.begin:r.end-(/\s/.test(o.text.charAt(r.end-1))?2:1),n)[n]}var C=Je(o,r.direction);return function(e,t,i,r){if(!e)return r(t,i,"ltr",0);for(var n=!1,o=0;o<e.length;++o){var a=e[o];(a.from<i&&a.to>t||t==i&&a.to==t)&&(r(Math.max(a.from,t),Math.min(a.to,i),1==a.level?"rtl":"ltr",o),n=!0)}n||r(t,i,"ltr")}(C,m||0,null==x?w:x,function(e,t,i,r){var n="ltr"==i,o=k(e,n?"left":"right"),a=k(t-1,n?"right":"left"),l=null==m&&0==e,s=null==x&&t==w,c=0==r,d=!C||r==C.length-1;if(a.top-o.top<=3){var u=(E?s:l)&&d,f=(E?l:s)&&c?T:(n?o:a).left,p=u?A:(n?a:o).right;M(f,o.top,p-f,o.bottom)}else{var h,g,_,v;v=n?(h=E&&l&&c?T:o.left,g=E?A:S(e,i,"before"),_=E?T:S(t,i,"after"),E&&s&&d?A:a.right):(h=E?S(e,i,"before"):T,g=!E&&l&&c?A:o.right,_=!E&&s&&d?T:a.left,E?S(t,i,"after"):A),M(h,o.top,g-h,o.bottom),o.bottom<a.top&&M(T,o.bottom,null,a.top),M(_,a.top,v-_,a.bottom)}(!y||dr(o,y)<0)&&(y=o),dr(a,y)<0&&(y=a),(!b||dr(o,b)<0)&&(b=o),dr(a,b)<0&&(b=a)}),{start:y,end:b}}var s=e.from(),c=e.to();if(s.line==c.line)l(s.line,s.ch,c.ch);else{var d=se(r,s.line),u=se(r,c.line),f=Fe(d)==Fe(u),p=l(s.line,s.ch,f?d.text.length+1:null).end,h=l(c.line,f?0:null,c.ch).start;f&&(p.top<h.top-2?(M(p.right,p.top,null,p.bottom),M(T,h.top,h.left,h.bottom)):M(p.right,p.top,h.left-p.right,p.bottom)),p.bottom<h.top&&M(T,p.bottom,null,h.top)}t.appendChild(n)}function fr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",0<e.options.cursorBlinkRate?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function pr(e){e.state.focused||(e.display.input.focus(),gr(e))}function hr(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,_r(e))},100)}function gr(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(nt(e,"focus",e,t),e.state.focused=!0,D(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),x&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),fr(e))}function _r(e,t){e.state.delayingBlurEvent||(e.state.focused&&(nt(e,"blur",e,t),e.state.focused=!1,T(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function vr(e){for(var t=e.display,i=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var n=t.view[r],o=void 0;if(!n.hidden){if(b&&w<8){var a=n.node.offsetTop+n.node.offsetHeight;o=a-i,i=a}else{var l=n.node.getBoundingClientRect();o=l.bottom-l.top}var s=n.line.height-o;if(o<2&&(o=Ji(t)),(.005<s||s<-.005)&&(ue(n.line,o),mr(n.line),n.rest))for(var c=0;c<n.rest.length;c++)mr(n.rest[c])}}}function mr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var i=e.widgets[t],r=i.node.parentNode;r&&(i.height=r.offsetHeight)}}function xr(e,t,i){var r=i&&null!=i.top?Math.max(0,i.top):e.scroller.scrollTop;r=Math.floor(r-bi(e));var n=i&&null!=i.bottom?i.bottom:r+e.wrapper.clientHeight,o=pe(t,r),a=pe(t,n);if(i&&i.ensure){var l=i.ensure.from.line,s=i.ensure.to.line;l<o?a=pe(t,Ve(se(t,o=l))+e.wrapper.clientHeight):Math.min(s,t.lastLine())>=a&&(o=pe(t,Ve(se(t,s))-e.wrapper.clientHeight),a=s)}return{from:o,to:Math.max(a,o+1)}}function yr(e){var t=e.display,i=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=ir(t)-t.scroller.scrollLeft+e.doc.scrollLeft,n=t.gutters.offsetWidth,o=r+"px",a=0;a<i.length;a++)if(!i[a].hidden){e.options.fixedGutter&&(i[a].gutter&&(i[a].gutter.style.left=o),i[a].gutterBackground&&(i[a].gutterBackground.style.left=o));var l=i[a].alignable;if(l)for(var s=0;s<l.length;s++)l[s].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=r+n+"px")}}function br(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=ge(e.options,t.first+t.size-1),r=e.display;if(i.length==r.lineNumChars)return!1;var n=r.measure.appendChild(N("div",[N("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=n.firstChild.offsetWidth,a=n.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a)+1,r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?i.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",ln(e),!0}function wr(e,t){var i=e.display,r=Ji(e.display);t.top<0&&(t.top=0);var n=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:i.scroller.scrollTop,o=Ti(e),a={};t.bottom-t.top>o&&(t.bottom=t.top+o);var l=e.doc.height+wi(i),s=t.top<r,c=t.bottom>l-r;if(t.top<n)a.scrollTop=s?0:t.top;else if(t.bottom>n+o){var d=Math.min(t.top,(c?l:t.bottom)-o);d!=n&&(a.scrollTop=d)}var u=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:i.scroller.scrollLeft,f=Ci(e)-(e.options.fixedGutter?i.gutters.offsetWidth:0),p=t.right-t.left>f;return p&&(t.right=t.left+f),t.left<10?a.scrollLeft=0:t.left<u?a.scrollLeft=Math.max(0,t.left-(p?0:10)):t.right>f+u-3&&(a.scrollLeft=t.right+(p?0:10)-f),a}function kr(e,t){null!=t&&(Tr(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Sr(e){Tr(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Cr(e,t,i){null==t&&null==i||Tr(e),null!=t&&(e.curOp.scrollLeft=t),null!=i&&(e.curOp.scrollTop=i)}function Tr(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Ar(e,Ui(e,t.from),Ui(e,t.to),t.margin))}function Ar(e,t,i,r){var n=wr(e,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-r,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+r});Cr(e,n.scrollLeft,n.scrollTop)}function Er(e,t){Math.abs(e.doc.scrollTop-t)<2||(g||an(e,{top:t}),Mr(e,t,!0),g&&an(e),en(e,100))}function Mr(e,t,i){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||i)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Nr(e,t,i,r){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r||(e.doc.scrollLeft=t,yr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Lr(e){var t=e.display,i=t.gutters.offsetWidth,r=Math.round(e.doc.height+wi(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:r,scrollHeight:r+Si(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}var Ir=function(e,t,i){this.cm=i;var r=this.vert=N("div",[N("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=N("div",[N("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=n.tabIndex=-1,e(r),e(n),tt(r,"scroll",function(){r.clientHeight&&t(r.scrollTop,"vertical")}),tt(n,"scroll",function(){n.clientWidth&&t(n.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,b&&w<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Ir.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var n=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+n)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=i?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(i?r:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&0<e.clientHeight&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?r:0,bottom:t?r:0}},Ir.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Ir.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Ir.prototype.zeroWidthHack=function(){var e=y&&!l?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new H,this.disableVert=new H},Ir.prototype.enableZeroWidthBar=function(i,r,n){i.style.pointerEvents="auto",r.set(1e3,function e(){var t=i.getBoundingClientRect();("vert"==n?document.elementFromPoint(t.right-1,(t.top+t.bottom)/2):document.elementFromPoint((t.right+t.left)/2,t.bottom-1))!=i?i.style.pointerEvents="none":r.set(1e3,e)})},Ir.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Dr=function(){};function Or(e,t){t||(t=Lr(e));var i=e.display.barWidth,r=e.display.barHeight;zr(e,t);for(var n=0;n<4&&i!=e.display.barWidth||r!=e.display.barHeight;n++)i!=e.display.barWidth&&e.options.lineWrapping&&vr(e),zr(e,Lr(e)),i=e.display.barWidth,r=e.display.barHeight}function zr(e,t){var i=e.display,r=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=r.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=r.bottom)+"px",i.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=r.bottom+"px",i.scrollbarFiller.style.width=r.right+"px"):i.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=r.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}Dr.prototype.update=function(){return{bottom:0,right:0}},Dr.prototype.setScrollLeft=function(){},Dr.prototype.setScrollTop=function(){},Dr.prototype.clear=function(){};var Rr={native:Ir,null:Dr};function Pr(i){i.display.scrollbars&&(i.display.scrollbars.clear(),i.display.scrollbars.addClass&&T(i.display.wrapper,i.display.scrollbars.addClass)),i.display.scrollbars=new Rr[i.options.scrollbarStyle](function(e){i.display.wrapper.insertBefore(e,i.display.scrollbarFiller),tt(e,"mousedown",function(){i.state.focused&&setTimeout(function(){return i.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,t){"horizontal"==t?Nr(i,e):Er(i,e)},i),i.display.scrollbars.addClass&&D(i.display.wrapper,i.display.scrollbars.addClass)}var Br=0;function Hr(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Br},t=e.curOp,oi?oi.ops.push(t):t.ownsGroup=oi={ops:[t],delayedCallbacks:[]}}function Wr(e){!function(e,t){var i=e.ownsGroup;if(i)try{!function(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i].call(null);for(var r=0;r<e.ops.length;r++){var n=e.ops[r];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++].call(null,n.cm)}}while(i<t.length)}(i)}finally{oi=null,t(i)}}(e.curOp,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,i=0;i<t.length;i++)Xr(t[i]);for(var r=0;r<t.length;r++)(n=t[r]).updatedDisplay=n.mustUpdate&&nn(n.cm,n.update);var n;for(var o=0;o<t.length;o++)Fr(t[o]);for(var a=0;a<t.length;a++)jr(t[a]);for(var l=0;l<t.length;l++)qr(t[l])}(e)})}function Xr(e){var t,i,r=e.cm,n=r.display;!(i=(t=r).display).scrollbarsClipped&&i.scroller.offsetWidth&&(i.nativeBarWidth=i.scroller.offsetWidth-i.scroller.clientWidth,i.heightForcer.style.height=Si(t)+"px",i.sizer.style.marginBottom=-i.nativeBarWidth+"px",i.sizer.style.borderRightWidth=Si(t)+"px",i.scrollbarsClipped=!0),e.updateMaxLine&&Ye(r),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&r.options.lineWrapping,e.update=e.mustUpdate&&new rn(r,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Fr(e){var t=e.cm,i=t.display;e.updatedDisplay&&vr(t),e.barMeasure=Lr(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Ei(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+Si(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-Ci(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=i.input.prepareSelection())}function jr(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Nr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var i=e.focus&&e.focus==I();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,i),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Or(t,e.barMeasure),e.updatedDisplay&&sn(t,e.barMeasure),e.selectionChanged&&fr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),i&&pr(e.cm)}function qr(e){var t=e.cm,i=t.display,r=t.doc;(e.updatedDisplay&&on(t,e.update),null==i.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(i.wheelStartX=i.wheelStartY=null),null!=e.scrollTop&&Mr(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Nr(t,e.scrollLeft,!0,!0),e.scrollToPos)&&function(e,t){if(!ot(e,"scrollCursorIntoView")){var i=e.display,r=i.sizer.getBoundingClientRect(),n=null;if(t.top+r.top<0?n=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),null!=n&&!c){var o=N("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-i.viewOffset-bi(e.display))+"px;\n                         height: "+(t.bottom-t.top+Si(e)+i.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(n),e.display.lineSpace.removeChild(o)}}}(t,function(e,t,i,r){var n;null==r&&(r=0),e.options.lineWrapping||t!=i||(i="before"==(t=t.ch?_e(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?_e(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var a=!1,l=$i(e,t),s=i&&i!=t?$i(e,i):l,c=wr(e,n={left:Math.min(l.left,s.left),top:Math.min(l.top,s.top)-r,right:Math.max(l.left,s.left),bottom:Math.max(l.bottom,s.bottom)+r}),d=e.doc.scrollTop,u=e.doc.scrollLeft;if(null!=c.scrollTop&&(Er(e,c.scrollTop),1<Math.abs(e.doc.scrollTop-d)&&(a=!0)),null!=c.scrollLeft&&(Nr(e,c.scrollLeft),1<Math.abs(e.doc.scrollLeft-u)&&(a=!0)),!a)break}return n}(t,ke(r,e.scrollToPos.from),ke(r,e.scrollToPos.to),e.scrollToPos.margin));var n=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(n)for(var a=0;a<n.length;++a)n[a].lines.length||nt(n[a],"hide");if(o)for(var l=0;l<o.length;++l)o[l].lines.length&&nt(o[l],"unhide");i.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&nt(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function $r(e,t){if(e.curOp)return t();Hr(e);try{return t()}finally{Wr(e)}}function Ur(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Hr(e);try{return t.apply(e,arguments)}finally{Wr(e)}}}function Vr(e){return function(){if(this.curOp)return e.apply(this,arguments);Hr(this);try{return e.apply(this,arguments)}finally{Wr(this)}}}function Kr(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Hr(e);try{return t.apply(this,arguments)}finally{Wr(e)}}}function Yr(e,t,i,r){null==t&&(t=e.doc.first),null==i&&(i=e.doc.first+e.doc.size),r||(r=0);var n=e.display;if(r&&i<n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>t)&&(n.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=n.viewTo)Te&&je(e.doc,t)<n.viewTo&&Qr(e);else if(i<=n.viewFrom)Te&&qe(e.doc,i+r)>n.viewFrom?Qr(e):(n.viewFrom+=r,n.viewTo+=r);else if(t<=n.viewFrom&&i>=n.viewTo)Qr(e);else if(t<=n.viewFrom){var o=Zr(e,i,i+r,1);o?(n.view=n.view.slice(o.index),n.viewFrom=o.lineN,n.viewTo+=r):Qr(e)}else if(i>=n.viewTo){var a=Zr(e,t,t,-1);a?(n.view=n.view.slice(0,a.index),n.viewTo=a.lineN):Qr(e)}else{var l=Zr(e,t,t,-1),s=Zr(e,i,i+r,1);l&&s?(n.view=n.view.slice(0,l.index).concat(ni(e,l.lineN,s.lineN)).concat(n.view.slice(s.index)),n.viewTo+=r):Qr(e)}var c=n.externalMeasured;c&&(i<c.lineN?c.lineN+=r:t<c.lineN+c.size&&(n.externalMeasured=null))}function Gr(e,t,i){e.curOp.viewChanged=!0;var r=e.display,n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var o=r.view[ar(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==W(a,i)&&a.push(i)}}}function Qr(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Zr(e,t,i,r){var n,o=ar(e,t),a=e.display.view;if(!Te||i==e.doc.first+e.doc.size)return{index:o,lineN:i};for(var l=e.display.viewFrom,s=0;s<o;s++)l+=a[s].size;if(l!=t){if(0<r){if(o==a.length-1)return null;n=l+a[o].size-t,o++}else n=l-t;t+=n,i+=n}for(;je(e.doc,i)!=i;){if(o==(r<0?0:a.length-1))return null;i+=r*a[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:i}}function Jr(e){for(var t=e.display.view,i=0,r=0;r<t.length;r++){var n=t[r];n.hidden||n.node&&!n.changes||++i}return i}function en(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,R(tn,e))}function tn(s){var c=s.doc;if(!(c.highlightFrontier>=s.display.viewTo)){var d=+new Date+s.options.workTime,u=Ht(s,c.highlightFrontier),f=[];c.iter(u.line,Math.min(c.first+c.size,s.display.viewTo+500),function(e){if(u.line>=s.display.viewFrom){var t=e.styles,i=e.text.length>s.options.maxHighlightLength?Lt(c.mode,u.state):null,r=Pt(s,e,u,!0);i&&(u.state=i),e.styles=r.styles;var n=e.styleClasses,o=r.classes;o?e.styleClasses=o:n&&(e.styleClasses=null);for(var a=!t||t.length!=e.styles.length||n!=o&&(!n||!o||n.bgClass!=o.bgClass||n.textClass!=o.textClass),l=0;!a&&l<t.length;++l)a=t[l]!=e.styles[l];a&&f.push(u.line),e.stateAfter=u.save(),u.nextLine()}else e.text.length<=s.options.maxHighlightLength&&Wt(s,e.text,u),e.stateAfter=u.line%5==0?u.save():null,u.nextLine();if(+new Date>d)return en(s,s.options.workDelay),!0}),c.highlightFrontier=u.line,c.modeFrontier=Math.max(c.modeFrontier,u.line),f.length&&$r(s,function(){for(var e=0;e<f.length;e++)Gr(s,f[e],"text")})}}var rn=function(e,t,i){var r=e.display;this.viewport=t,this.visible=xr(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Ci(e),this.force=i,this.dims=tr(e),this.events=[]};function nn(e,t){var i=e.display,r=e.doc;if(t.editorIsHidden)return Qr(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==Jr(e))return!1;br(e)&&(Qr(e),t.dims=tr(e));var n=r.first+r.size,o=Math.max(t.visible.from-e.options.viewportMargin,r.first),a=Math.min(n,t.visible.to+e.options.viewportMargin);i.viewFrom<o&&o-i.viewFrom<20&&(o=Math.max(r.first,i.viewFrom)),i.viewTo>a&&i.viewTo-a<20&&(a=Math.min(n,i.viewTo)),Te&&(o=je(e.doc,o),a=qe(e.doc,a));var l,s,c,d,u=o!=i.viewFrom||a!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;s=o,c=a,0==(d=(l=e).display).view.length||s>=d.viewTo||c<=d.viewFrom?(d.view=ni(l,s,c),d.viewFrom=s):(d.viewFrom>s?d.view=ni(l,s,d.viewFrom).concat(d.view):d.viewFrom<s&&(d.view=d.view.slice(ar(l,s))),d.viewFrom=s,d.viewTo<c?d.view=d.view.concat(ni(l,d.viewTo,c)):d.viewTo>c&&(d.view=d.view.slice(0,ar(l,c)))),d.viewTo=c,i.viewOffset=Ve(se(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var f=Jr(e);if(!u&&0==f&&!t.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var p=function(e){if(e.hasFocus())return null;var t=I();if(!t||!L(e.display.lineDiv,t))return null;var i={activeElt:t};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&L(e.display.lineDiv,r.anchorNode)&&(i.anchorNode=r.anchorNode,i.anchorOffset=r.anchorOffset,i.focusNode=r.focusNode,i.focusOffset=r.focusOffset)}return i}(e);return 4<f&&(i.lineDiv.style.display="none"),function(i,e,t){var r=i.display,n=i.options.lineNumbers,o=r.lineDiv,a=o.firstChild;function l(e){var t=e.nextSibling;return x&&y&&i.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),t}for(var s=r.view,c=r.viewFrom,d=0;d<s.length;d++){var u=s[d];if(u.hidden);else if(u.node&&u.node.parentNode==o){for(;a!=u.node;)a=l(a);var f=n&&null!=e&&e<=c&&u.lineNumber;u.changes&&(-1<W(u.changes,"gutter")&&(f=!1),ci(i,u,c,t)),f&&(A(u.lineNumber),u.lineNumber.appendChild(document.createTextNode(ge(i.options,c)))),a=u.node.nextSibling}else{var p=(_=c,v=t,void 0,m=ui(h=i,g=u),g.text=g.node=m.pre,m.bgClass&&(g.bgClass=m.bgClass),m.textClass&&(g.textClass=m.textClass),pi(h,g),hi(h,g,_,v),_i(h,g,v),g.node);o.insertBefore(p,a)}c+=u.size}var h,g,_,v,m;for(;a;)a=l(a)}(e,i.updateLineNumbers,t.dims),4<f&&(i.lineDiv.style.display=""),i.renderedView=i.view,function(e){if(e&&e.activeElt&&e.activeElt!=I()&&(e.activeElt.focus(),e.anchorNode&&L(document.body,e.anchorNode)&&L(document.body,e.focusNode))){var t=window.getSelection(),i=document.createRange();i.setEnd(e.anchorNode,e.anchorOffset),i.collapse(!1),t.removeAllRanges(),t.addRange(i),t.extend(e.focusNode,e.focusOffset)}}(p),A(i.cursorDiv),A(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,u&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,en(e,400)),!(i.updateLineNumbers=null)}function on(e,t){for(var i=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Ci(e)||(i&&null!=i.top&&(i={top:Math.min(e.doc.height+wi(e.display)-Ti(e),i.top)}),t.visible=xr(e.display,e.doc,i),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&nn(e,t);r=!1){vr(e);var n=Lr(e);lr(e),Or(e,n),sn(e,n),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function an(e,t){var i=new rn(e,t);if(nn(e,i)){vr(e),on(e,i);var r=Lr(e);lr(e),Or(e,r),sn(e,r),i.finish()}}function ln(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function sn(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Si(e)+"px"}function cn(e){var t=e.display.gutters,i=e.options.gutters;A(t);for(var r=0;r<i.length;++r){var n=i[r],o=t.appendChild(N("div",null,"CodeMirror-gutter "+n));"CodeMirror-linenumbers"==n&&((e.display.lineGutter=o).style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",ln(e)}function dn(e){var t=W(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):-1<t&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}rn.prototype.signal=function(e,t){lt(e,t)&&this.events.push(arguments)},rn.prototype.finish=function(){for(var e=0;e<this.events.length;e++)nt.apply(null,this.events[e])};var un=0,fn=null;function pn(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta),{x:t,y:i}}function hn(e){var t=pn(e);return t.x*=fn,t.y*=fn,t}function gn(e,t){var i=pn(t),r=i.x,n=i.y,o=e.display,a=o.scroller,l=a.scrollWidth>a.clientWidth,s=a.scrollHeight>a.clientHeight;if(r&&l||n&&s){if(n&&y&&x)e:for(var c=t.target,d=o.view;c!=a;c=c.parentNode)for(var u=0;u<d.length;u++)if(d[u].node==c){e.display.currentWheelTarget=c;break e}if(r&&!g&&!_&&null!=fn)return n&&s&&Er(e,Math.max(0,a.scrollTop+n*fn)),Nr(e,Math.max(0,a.scrollLeft+r*fn)),(!n||n&&s)&&ct(t),void(o.wheelStartX=null);if(n&&null!=fn){var f=n*fn,p=e.doc.scrollTop,h=p+o.wrapper.clientHeight;f<0?p=Math.max(0,p+f-50):h=Math.min(e.doc.height,h+f+50),an(e,{top:p,bottom:h})}un<20&&(null==o.wheelStartX?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=r,o.wheelDY=n,setTimeout(function(){if(null!=o.wheelStartX){var e=a.scrollLeft-o.wheelStartX,t=a.scrollTop-o.wheelStartY,i=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,i&&(fn=(fn*un+i)/(un+1),++un)}},200)):(o.wheelDX+=r,o.wheelDY+=n))}}b?fn=-.53:g?fn=15:a?fn=-.7:s&&(fn=-1/3);var _n=function(e,t){this.ranges=e,this.primIndex=t};_n.prototype.primary=function(){return this.ranges[this.primIndex]},_n.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],r=e.ranges[t];if(!me(i.anchor,r.anchor)||!me(i.head,r.head))return!1}return!0},_n.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new vn(xe(this.ranges[t].anchor),xe(this.ranges[t].head));return new _n(e,this.primIndex)},_n.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},_n.prototype.contains=function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var r=this.ranges[i];if(0<=ve(t,r.from())&&ve(e,r.to())<=0)return i}return-1};var vn=function(e,t){this.anchor=e,this.head=t};function mn(e,t){var i=e[t];e.sort(function(e,t){return ve(e.from(),t.from())}),t=W(e,i);for(var r=1;r<e.length;r++){var n=e[r],o=e[r-1];if(0<=ve(o.to(),n.from())){var a=be(o.from(),n.from()),l=ye(o.to(),n.to()),s=o.empty()?n.from()==n.head:o.from()==o.head;r<=t&&--t,e.splice(--r,2,new vn(s?l:a,s?a:l))}}return new _n(e,t)}function xn(e,t){return new _n([new vn(e,t||e)],0)}function yn(e){return e.text?_e(e.from.line+e.text.length-1,Y(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function bn(e,t){if(ve(e,t.from)<0)return e;if(ve(e,t.to)<=0)return yn(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=yn(t).ch-t.to.ch),_e(i,r)}function wn(e,t){for(var i=[],r=0;r<e.sel.ranges.length;r++){var n=e.sel.ranges[r];i.push(new vn(bn(n.anchor,t),bn(n.head,t)))}return mn(i,e.sel.primIndex)}function kn(e,t,i){return e.line==t.line?_e(i.line,e.ch-t.ch+i.ch):_e(i.line+(e.line-t.line),e.ch)}function Sn(e){e.doc.mode=Et(e.options,e.doc.modeOption),Cn(e)}function Cn(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,en(e,100),e.state.modeGen++,e.curOp&&Yr(e)}function Tn(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Y(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function An(e,r,t,n){function o(e){return t?t[e]:null}function i(e,t,i){!function(e,t,i,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Ie(e),De(e,i);var n=r?r(e):1;n!=e.height&&ue(e,n)}(e,t,i,n),li(e,"change",e,r)}function a(e,t){for(var i=[],r=e;r<t;++r)i.push(new Vt(c[r],o(r),n));return i}var l=r.from,s=r.to,c=r.text,d=se(e,l.line),u=se(e,s.line),f=Y(c),p=o(c.length-1),h=s.line-l.line;if(r.full)e.insert(0,a(0,c.length)),e.remove(c.length,e.size-c.length);else if(Tn(e,r)){var g=a(0,c.length-1);i(u,u.text,p),h&&e.remove(l.line,h),g.length&&e.insert(l.line,g)}else if(d==u)if(1==c.length)i(d,d.text.slice(0,l.ch)+f+d.text.slice(s.ch),p);else{var _=a(1,c.length-1);_.push(new Vt(f+d.text.slice(s.ch),p,n)),i(d,d.text.slice(0,l.ch)+c[0],o(0)),e.insert(l.line+1,_)}else if(1==c.length)i(d,d.text.slice(0,l.ch)+c[0]+u.text.slice(s.ch),o(0)),e.remove(l.line+1,h);else{i(d,d.text.slice(0,l.ch)+c[0],o(0)),i(u,f+u.text.slice(s.ch),p);var v=a(1,c.length-1);1<h&&e.remove(l.line+1,h-1),e.insert(l.line+1,v)}li(e,"change",e,r)}function En(e,l,s){!function e(t,i,r){if(t.linked)for(var n=0;n<t.linked.length;++n){var o=t.linked[n];if(o.doc!=i){var a=r&&o.sharedHist;s&&!a||(l(o.doc,a),e(o.doc,t,a))}}}(e,null,!0)}function Mn(e,t){if(t.cm)throw new Error("This document is already in use.");nr((e.doc=t).cm=e),Sn(e),Nn(e),e.options.lineWrapping||Ye(e),e.options.mode=t.modeOption,Yr(e)}function Nn(e){("rtl"==e.doc.direction?D:T)(e.display.lineDiv,"CodeMirror-rtl")}function Ln(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function In(e,t){var i={from:xe(t.from),to:yn(t),text:ce(e,t.from,t.to)};return Pn(e,i,t.from.line,t.to.line+1),En(e,function(e){return Pn(e,i,t.from.line,t.to.line+1)},!0),i}function Dn(e){for(;e.length;){if(!Y(e).ranges)break;e.pop()}}function On(e,t,i,r){var n=e.history;n.undone.length=0;var o,a,l,s=+new Date;if((n.lastOp==r||n.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&n.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=(l=n).lastOp==r?(Dn(l.done),Y(l.done)):l.done.length&&!Y(l.done).ranges?Y(l.done):1<l.done.length&&!l.done[l.done.length-2].ranges?(l.done.pop(),Y(l.done)):void 0))a=Y(o.changes),0==ve(t.from,t.to)&&0==ve(t.from,a.to)?a.to=yn(t):o.changes.push(In(e,t));else{var c=Y(n.done);for(c&&c.ranges||Rn(e.sel,n.done),o={changes:[In(e,t)],generation:n.generation},n.done.push(o);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift()}n.done.push(i),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=s,n.lastOp=n.lastSelOp=r,n.lastOrigin=n.lastSelOrigin=t.origin,a||nt(e,"historyAdded")}function zn(e,t,i,r){var n,o,a,l,s,c=e.history,d=r&&r.origin;i==c.lastSelOp||d&&c.lastSelOrigin==d&&(c.lastModTime==c.lastSelTime&&c.lastOrigin==d||(n=e,o=d,a=Y(c.done),l=t,"*"==(s=o.charAt(0))||"+"==s&&a.ranges.length==l.ranges.length&&a.somethingSelected()==l.somethingSelected()&&new Date-n.history.lastSelTime<=(n.cm?n.cm.options.historyEventDelay:500)))?c.done[c.done.length-1]=t:Rn(t,c.done),c.lastSelTime=+new Date,c.lastSelOrigin=d,c.lastSelOp=i,r&&!1!==r.clearRedo&&Dn(c.undone)}function Rn(e,t){var i=Y(t);i&&i.ranges&&i.equals(e)||t.push(e)}function Pn(t,i,e,r){var n=i["spans_"+t.id],o=0;t.iter(Math.max(t.first,e),Math.min(t.first+t.size,r),function(e){e.markedSpans&&((n||(n=i["spans_"+t.id]={}))[o]=e.markedSpans),++o})}function Bn(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function Hn(e,t){var i=function(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var r=[],n=0;n<t.text.length;++n)r.push(Bn(i[n]));return r}(e,t),r=Ne(e,t);if(!i)return r;if(!r)return i;for(var n=0;n<i.length;++n){var o=i[n],a=r[n];if(o&&a)e:for(var l=0;l<a.length;++l){for(var s=a[l],c=0;c<o.length;++c)if(o[c].marker==s.marker)continue e;o.push(s)}else a&&(i[n]=a)}return i}function Wn(e,t,i){for(var r=[],n=0;n<e.length;++n){var o=e[n];if(o.ranges)r.push(i?_n.prototype.deepCopy.call(o):o);else{var a=o.changes,l=[];r.push({changes:l});for(var s=0;s<a.length;++s){var c=a[s],d=void 0;if(l.push({from:c.from,to:c.to,text:c.text}),t)for(var u in c)(d=u.match(/^spans_(\d+)$/))&&-1<W(t,Number(d[1]))&&(Y(l)[u]=c[u],delete c[u])}}}return r}function Xn(e,t,i,r){if(r){var n=e.anchor;if(i){var o=ve(t,n)<0;o!=ve(i,n)<0?(n=t,t=i):o!=ve(t,i)<0&&(t=i)}return new vn(n,t)}return new vn(i||t,t)}function Fn(e,t,i,r,n){null==n&&(n=e.cm&&(e.cm.display.shift||e.extend)),Vn(e,new _n([Xn(e.sel.primary(),t,i,n)],0),r)}function jn(e,t,i){for(var r=[],n=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)r[o]=Xn(e.sel.ranges[o],t[o],null,n);Vn(e,mn(r,e.sel.primIndex),i)}function qn(e,t,i,r){var n=e.sel.ranges.slice(0);n[t]=i,Vn(e,mn(n,e.sel.primIndex),r)}function $n(e,t,i,r){Vn(e,xn(t,i),r)}function Un(e,t,i){var r=e.history.done,n=Y(r);n&&n.ranges?Kn(e,r[r.length-1]=t,i):Vn(e,t,i)}function Vn(e,t,i){Kn(e,t,i),zn(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function Kn(e,t,i){var r,n,o,a;(lt(e,"beforeSelectionChange")||e.cm&&lt(e.cm,"beforeSelectionChange"))&&(r=e,o=i,a={ranges:(n=t).ranges,update:function(e){this.ranges=[];for(var t=0;t<e.length;t++)this.ranges[t]=new vn(ke(r,e[t].anchor),ke(r,e[t].head))},origin:o&&o.origin},nt(r,"beforeSelectionChange",r,a),r.cm&&nt(r.cm,"beforeSelectionChange",r.cm,a),t=a.ranges!=n.ranges?mn(a.ranges,a.ranges.length-1):n),Yn(e,Qn(e,t,i&&i.bias||(ve(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),i&&!1===i.scroll||!e.cm||Sr(e.cm)}function Yn(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,at(e.cm)),li(e,"cursorActivity",e))}function Gn(e){Yn(e,Qn(e,e.sel,null,!1))}function Qn(e,t,i,r){for(var n,o=0;o<t.ranges.length;o++){var a=t.ranges[o],l=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],s=Jn(e,a.anchor,l&&l.anchor,i,r),c=Jn(e,a.head,l&&l.head,i,r);(n||s!=a.anchor||c!=a.head)&&(n||(n=t.ranges.slice(0,o)),n[o]=new vn(s,c))}return n?mn(n,t.primIndex):t}function Zn(e,t,i,r,n){var o=se(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var l=o.markedSpans[a],s=l.marker;if((null==l.from||(s.inclusiveLeft?l.from<=t.ch:l.from<t.ch))&&(null==l.to||(s.inclusiveRight?l.to>=t.ch:l.to>t.ch))){if(n&&(nt(s,"beforeCursorEnter"),s.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!s.atomic)continue;if(i){var c=s.find(r<0?1:-1),d=void 0;if((r<0?s.inclusiveRight:s.inclusiveLeft)&&(c=eo(e,c,-r,c&&c.line==t.line?o:null)),c&&c.line==t.line&&(d=ve(c,i))&&(r<0?d<0:0<d))return Zn(e,c,t,r,n)}var u=s.find(r<0?-1:1);return(r<0?s.inclusiveLeft:s.inclusiveRight)&&(u=eo(e,u,r,u.line==t.line?o:null)),u?Zn(e,u,t,r,n):null}}return t}function Jn(e,t,i,r,n){var o=r||1,a=Zn(e,t,i,o,n)||!n&&Zn(e,t,i,o,!0)||Zn(e,t,i,-o,n)||!n&&Zn(e,t,i,-o,!0);return a||(e.cantEdit=!0,_e(e.first,0))}function eo(e,t,i,r){return i<0&&0==t.ch?t.line>e.first?ke(e,_e(t.line-1)):null:0<i&&t.ch==(r||se(e,t.line)).text.length?t.line<e.first+e.size-1?_e(t.line+1,0):null:new _e(t.line,t.ch+i)}function to(e){e.setSelection(_e(e.firstLine(),0),_e(e.lastLine()),j)}function io(n,e,t){var o={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return o.canceled=!0}};return t&&(o.update=function(e,t,i,r){e&&(o.from=ke(n,e)),t&&(o.to=ke(n,t)),i&&(o.text=i),void 0!==r&&(o.origin=r)}),nt(n,"beforeChange",n,o),n.cm&&nt(n.cm,"beforeChange",n.cm,o),o.canceled?null:{from:o.from,to:o.to,text:o.text,origin:o.origin}}function ro(e,t,i){if(e.cm){if(!e.cm.curOp)return Ur(e.cm,ro)(e,t,i);if(e.cm.state.suppressEdits)return}if(!(lt(e,"beforeChange")||e.cm&&lt(e.cm,"beforeChange"))||(t=io(e,t,!0))){var r=Ce&&!i&&function(e,t,i){var r=null;if(e.iter(t.line,i.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var i=e.markedSpans[t].marker;!i.readOnly||r&&-1!=W(r,i)||(r||(r=[])).push(i)}}),!r)return null;for(var n=[{from:t,to:i}],o=0;o<r.length;++o)for(var a=r[o],l=a.find(0),s=0;s<n.length;++s){var c=n[s];if(!(ve(c.to,l.from)<0||0<ve(c.from,l.to))){var d=[s,1],u=ve(c.from,l.from),f=ve(c.to,l.to);(u<0||!a.inclusiveLeft&&!u)&&d.push({from:c.from,to:l.from}),(0<f||!a.inclusiveRight&&!f)&&d.push({from:l.to,to:c.to}),n.splice.apply(n,d),s+=d.length-3}}return n}(e,t.from,t.to);if(r)for(var n=r.length-1;0<=n;--n)no(e,{from:r[n].from,to:r[n].to,text:n?[""]:t.text,origin:t.origin});else no(e,t)}}function no(e,i){if(1!=i.text.length||""!=i.text[0]||0!=ve(i.from,i.to)){var t=wn(e,i);On(e,i,t,e.cm?e.cm.curOp.id:NaN),lo(e,i,t,Ne(e,i));var r=[];En(e,function(e,t){t||-1!=W(r,e.history)||(fo(e.history,i),r.push(e.history)),lo(e,i,null,Ne(e,i))})}}function oo(n,o,e){var t=n.cm&&n.cm.state.suppressEdits;if(!t||e){for(var a,i=n.history,r=n.sel,l="undo"==o?i.done:i.undone,s="undo"==o?i.undone:i.done,c=0;c<l.length&&(a=l[c],e?!a.ranges||a.equals(n.sel):a.ranges);c++);if(c!=l.length){for(i.lastOrigin=i.lastSelOrigin=null;;){if(!(a=l.pop()).ranges){if(t)return void l.push(a);break}if(Rn(a,s),e&&!a.equals(n.sel))return void Vn(n,a,{clearRedo:!1});r=a}var d=[];Rn(r,s),s.push({changes:d,generation:i.generation}),i.generation=a.generation||++i.maxGeneration;for(var u=lt(n,"beforeChange")||n.cm&&lt(n.cm,"beforeChange"),f=function(e){var i=a.changes[e];if(i.origin=o,u&&!io(n,i,!1))return l.length=0,{};d.push(In(n,i));var t=e?wn(n,i):Y(l);lo(n,i,t,Hn(n,i)),!e&&n.cm&&n.cm.scrollIntoView({from:i.from,to:yn(i)});var r=[];En(n,function(e,t){t||-1!=W(r,e.history)||(fo(e.history,i),r.push(e.history)),lo(e,i,null,Hn(e,i))})},p=a.changes.length-1;0<=p;--p){var h=f(p);if(h)return h.v}}}}function ao(e,t){if(0!=t&&(e.first+=t,e.sel=new _n(G(e.sel.ranges,function(e){return new vn(_e(e.anchor.line+t,e.anchor.ch),_e(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){Yr(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,r=i.viewFrom;r<i.viewTo;r++)Gr(e.cm,r,"gutter")}}function lo(e,t,i,r){if(e.cm&&!e.cm.curOp)return Ur(e.cm,lo)(e,t,i,r);if(t.to.line<e.first)ao(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var n=t.text.length-1-(e.first-t.from.line);ao(e,n),t={from:_e(e.first,0),to:_e(t.to.line+n,t.to.ch),text:[Y(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:_e(o,se(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=ce(e,t.from,t.to),i||(i=wn(e,t)),e.cm?function(e,t,i){var r=e.doc,n=e.display,o=t.from,a=t.to,l=!1,s=o.line;e.options.lineWrapping||(s=fe(Fe(se(r,o.line))),r.iter(s,a.line+1,function(e){if(e==n.maxLine)return l=!0}));-1<r.sel.contains(t.from,t.to)&&at(e);An(r,t,i,rr(e)),e.options.lineWrapping||(r.iter(s,o.line+t.text.length,function(e){var t=Ke(e);t>n.maxLineLength&&(n.maxLine=e,n.maxLineLength=t,n.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0));(function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var i=e.first,r=t-1;i<r;r--){var n=se(e,r).stateAfter;if(n&&(!(n instanceof zt)||r+n.lookAhead<t)){i=r+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,i)}})(r,o.line),en(e,400);var c=t.text.length-(a.line-o.line)-1;t.full?Yr(e):o.line!=a.line||1!=t.text.length||Tn(e.doc,t)?Yr(e,o.line,a.line+1,c):Gr(e,o.line,"text");var d=lt(e,"changes"),u=lt(e,"change");if(u||d){var f={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};u&&li(e,"change",e,f),d&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}(e.cm,t,r):An(e,t,r),Kn(e,i,j)}}function so(e,t,i,r,n){var o;(r||(r=i),ve(r,i)<0)&&(i=(o=[r,i])[0],r=o[1]);"string"==typeof t&&(t=e.splitLines(t)),ro(e,{from:i,to:r,text:t,origin:n})}function co(e,t,i,r){i<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function uo(e,t,i,r){for(var n=0;n<e.length;++n){var o=e[n],a=!0;if(o.ranges){o.copied||((o=e[n]=o.deepCopy()).copied=!0);for(var l=0;l<o.ranges.length;l++)co(o.ranges[l].anchor,t,i,r),co(o.ranges[l].head,t,i,r)}else{for(var s=0;s<o.changes.length;++s){var c=o.changes[s];if(i<c.from.line)c.from=_e(c.from.line+r,c.from.ch),c.to=_e(c.to.line+r,c.to.ch);else if(t<=c.to.line){a=!1;break}}a||(e.splice(0,n+1),n=0)}}}function fo(e,t){var i=t.from.line,r=t.to.line,n=t.text.length-(r-i)-1;uo(e.done,i,r,n),uo(e.undone,i,r,n)}function po(e,t,i,r){var n=t,o=t;return"number"==typeof t?o=se(e,we(e,t)):n=fe(t),null==n?null:(r(o,n)&&e.cm&&Gr(e.cm,n,i),o)}function ho(e){this.lines=e,this.parent=null;for(var t=0,i=0;i<e.length;++i)e[i].parent=this,t+=e[i].height;this.height=t}function go(e){this.children=e;for(var t=0,i=0,r=0;r<e.length;++r){var n=e[r];t+=n.chunkSize(),i+=n.height,n.parent=this}this.size=t,this.height=i,this.parent=null}vn.prototype.from=function(){return be(this.anchor,this.head)},vn.prototype.to=function(){return ye(this.anchor,this.head)},vn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},ho.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i,r=e,n=e+t;r<n;++r){var o=this.lines[r];this.height-=o.height,(i=o).parent=null,Ie(i),li(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r)t[r].parent=this},iterN:function(e,t,i){for(var r=e+t;e<r;++e)if(i(this.lines[e]))return!0}},go.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var r=this.children[i],n=r.chunkSize();if(e<n){var o=Math.min(t,n-e),a=r.height;if(r.removeInner(e,o),this.height-=a-r.height,n==o&&(this.children.splice(i--,1),r.parent=null),0==(t-=o))break;e=0}else e-=n}if(this.size-t<25&&(1<this.children.length||!(this.children[0]instanceof ho))){var l=[];this.collapse(l),this.children=[new ho(l)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var r=0;r<this.children.length;++r){var n=this.children[r],o=n.chunkSize();if(e<=o){if(n.insertInner(e,t,i),n.lines&&50<n.lines.length){for(var a=n.lines.length%25+25,l=a;l<n.lines.length;){var s=new ho(n.lines.slice(l,l+=25));n.height-=s.height,this.children.splice(++r,0,s),s.parent=this}n.lines=n.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new go(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var i=W(e.parent.children,e);e.parent.children.splice(i+1,0,t)}else{var r=new go(e.children);(r.parent=e).children=[r,t],e=r}t.parent=e.parent}while(10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var r=0;r<this.children.length;++r){var n=this.children[r],o=n.chunkSize();if(e<o){var a=Math.min(t,o-e);if(n.iterN(e,a,i))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var _o=function(e,t,i){if(i)for(var r in i)i.hasOwnProperty(r)&&(this[r]=i[r]);this.doc=e,this.node=t};function vo(e,t,i){Ve(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&kr(e,i)}_o.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,r=fe(i);if(null!=r&&t){for(var n=0;n<t.length;++n)t[n]==this&&t.splice(n--,1);t.length||(i.widgets=null);var o=xi(this);ue(i,Math.max(0,i.height-o)),e&&($r(e,function(){vo(e,i,-o),Gr(e,r,"widget")}),li(e,"lineWidgetCleared",e,this,r))}},_o.prototype.changed=function(){var e=this,t=this.height,i=this.doc.cm,r=this.line;this.height=null;var n=xi(this)-t;n&&($e(this.doc,r)||ue(r,r.height+n),i&&$r(i,function(){i.curOp.forceUpdate=!0,vo(i,r,n),li(i,"lineWidgetChanged",i,e,fe(r))}))},st(_o);var mo=0,xo=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++mo};function yo(t,r,n,e,i){if(e&&e.shared)return function(e,i,r,n,o){(n=P(n)).shared=!1;var a=[yo(e,i,r,n,o)],l=a[0],s=n.widgetNode;return En(e,function(e){s&&(n.widgetNode=s.cloneNode(!0)),a.push(yo(e,ke(e,i),ke(e,r),n,o));for(var t=0;t<e.linked.length;++t)if(e.linked[t].isParent)return;l=Y(a)}),new bo(a,l)}(t,r,n,e,i);if(t.cm&&!t.cm.curOp)return Ur(t.cm,yo)(t,r,n,e,i);var o=new xo(t,i),a=ve(r,n);if(e&&P(e,o,!1),0<a||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=M("span",[o.replacedWith],"CodeMirror-widget"),e.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),e.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Xe(t,r.line,r,n,o)||r.line!=n.line&&Xe(t,n.line,r,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");Te=!0}o.addToHistory&&On(t,{from:r,to:n,origin:"markText"},t.sel,NaN);var l,s=r.line,c=t.cm;if(t.iter(s,n.line+1,function(e){var t,i;c&&o.collapsed&&!c.options.lineWrapping&&Fe(e)==c.display.maxLine&&(l=!0),o.collapsed&&s!=r.line&&ue(e,0),t=e,i=new Ae(o,s==r.line?r.ch:null,s==n.line?n.ch:null),t.markedSpans=t.markedSpans?t.markedSpans.concat([i]):[i],i.marker.attachLine(t),++s}),o.collapsed&&t.iter(r.line,n.line+1,function(e){$e(t,e)&&ue(e,0)}),o.clearOnEnter&&tt(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(Ce=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++mo,o.atomic=!0),c){if(l&&(c.curOp.updateMaxLine=!0),o.collapsed)Yr(c,r.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var d=r.line;d<=n.line;d++)Gr(c,d,"text");o.atomic&&Gn(c.doc),li(c,"markerAdded",c,o)}return o}xo.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Hr(e),lt(this,"clear")){var i=this.find();i&&li(this,"clear",i.from,i.to)}for(var r=null,n=null,o=0;o<this.lines.length;++o){var a=this.lines[o],l=Ee(a.markedSpans,this);e&&!this.collapsed?Gr(e,fe(a),"text"):e&&(null!=l.to&&(n=fe(a)),null!=l.from&&(r=fe(a))),a.markedSpans=Me(a.markedSpans,l),null==l.from&&this.collapsed&&!$e(this.doc,a)&&e&&ue(a,Ji(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var c=Fe(this.lines[s]),d=Ke(c);d>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=d,e.display.maxLineChanged=!0)}null!=r&&e&&this.collapsed&&Yr(e,r,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Gn(e.doc)),e&&li(e,"markerCleared",e,this,r,n),t&&Wr(e),this.parent&&this.parent.clear()}},xo.prototype.find=function(e,t){var i,r;null==e&&"bookmark"==this.type&&(e=1);for(var n=0;n<this.lines.length;++n){var o=this.lines[n],a=Ee(o.markedSpans,this);if(null!=a.from&&(i=_e(t?o:fe(o),a.from),-1==e))return i;if(null!=a.to&&(r=_e(t?o:fe(o),a.to),1==e))return r}return i&&{from:i,to:r}},xo.prototype.changed=function(){var o=this,a=this.find(-1,!0),l=this,s=this.doc.cm;a&&s&&$r(s,function(){var e=a.line,t=fe(a.line),i=Mi(s,t);if(i&&(Ri(i),s.curOp.selectionChanged=s.curOp.forceUpdate=!0),s.curOp.updateMaxLine=!0,!$e(l.doc,e)&&null!=l.height){var r=l.height;l.height=null;var n=xi(l)-r;n&&ue(e,e.height+n)}li(s,"markerChanged",s,o)})},xo.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=W(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},xo.prototype.detachLine=function(e){if(this.lines.splice(W(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},st(xo);var bo=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};function wo(e){return e.findMarks(_e(e.first,0),e.clipPos(_e(e.lastLine())),function(e){return e.parent})}function ko(o){for(var e=function(e){var t=o[e],i=[t.primary.doc];En(t.primary.doc,function(e){return i.push(e)});for(var r=0;r<t.markers.length;r++){var n=t.markers[r];-1==W(i,n.doc)&&(n.parent=null,t.markers.splice(r--,1))}},t=0;t<o.length;t++)e(t)}bo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();li(this,"clear")}},bo.prototype.find=function(e,t){return this.primary.find(e,t)},st(bo);var So=0,Co=function(e,t,i,r,n){if(!(this instanceof Co))return new Co(e,t,i,r,n);null==i&&(i=0),go.call(this,[new ho([new Vt("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var o=_e(i,0);this.sel=xn(o),this.history=new Ln(null),this.id=++So,this.modeOption=t,this.lineSep=r,this.direction="rtl"==n?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),An(this,{from:o,to:o,text:e}),Vn(this,xn(o),j)};Co.prototype=Z(go.prototype,{constructor:Co,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,r=0;r<t.length;++r)i+=t[r].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=de(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Kr(function(e){var t=_e(this.first,0),i=this.first+this.size-1;ro(this,{from:t,to:_e(i,se(this,i).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Cr(this.cm,0,0),Vn(this,xn(t),j)}),replaceRange:function(e,t,i,r){so(this,e,t=ke(this,t),i=i?ke(this,i):t,r)},getRange:function(e,t,i){var r=ce(this,ke(this,e),ke(this,t));return!1===i?r:r.join(i||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(he(this,e))return se(this,e)},getLineNumber:function(e){return fe(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=se(this,e)),Fe(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ke(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Kr(function(e,t,i){$n(this,ke(this,"number"==typeof e?_e(e,t||0):e),null,i)}),setSelection:Kr(function(e,t,i){$n(this,ke(this,e),ke(this,t||e),i)}),extendSelection:Kr(function(e,t,i){Fn(this,ke(this,e),t&&ke(this,t),i)}),extendSelections:Kr(function(e,t){jn(this,Se(this,e),t)}),extendSelectionsBy:Kr(function(e,t){jn(this,Se(this,G(this.sel.ranges,e)),t)}),setSelections:Kr(function(e,t,i){if(e.length){for(var r=[],n=0;n<e.length;n++)r[n]=new vn(ke(this,e[n].anchor),ke(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Vn(this,mn(r,t),i)}}),addSelection:Kr(function(e,t,i){var r=this.sel.ranges.slice(0);r.push(new vn(ke(this,e),ke(this,t||e))),Vn(this,mn(r,r.length-1),i)}),getSelection:function(e){for(var t,i=this.sel.ranges,r=0;r<i.length;r++){var n=ce(this,i[r].from(),i[r].to());t=t?t.concat(n):n}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],i=this.sel.ranges,r=0;r<i.length;r++){var n=ce(this,i[r].from(),i[r].to());!1!==e&&(n=n.join(e||this.lineSeparator())),t[r]=n}return t},replaceSelection:function(e,t,i){for(var r=[],n=0;n<this.sel.ranges.length;n++)r[n]=e;this.replaceSelections(r,t,i||"+input")},replaceSelections:Kr(function(e,t,i){for(var r=[],n=this.sel,o=0;o<n.ranges.length;o++){var a=n.ranges[o];r[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:i}}for(var l=t&&"end"!=t&&function(e,t,i){for(var r=[],n=_e(e.first,0),o=n,a=0;a<t.length;a++){var l=t[a],s=kn(l.from,n,o),c=kn(yn(l),n,o);if(n=l.to,o=c,"around"==i){var d=e.sel.ranges[a],u=ve(d.head,d.anchor)<0;r[a]=new vn(u?c:s,u?s:c)}else r[a]=new vn(s,s)}return new _n(r,e.sel.primIndex)}(this,r,t),s=r.length-1;0<=s;s--)ro(this,r[s]);l?Un(this,l):this.cm&&Sr(this.cm)}),undo:Kr(function(){oo(this,"undo")}),redo:Kr(function(){oo(this,"redo")}),undoSelection:Kr(function(){oo(this,"undo",!0)}),redoSelection:Kr(function(){oo(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){this.history=new Ln(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Wn(this.history.done),undone:Wn(this.history.undone)}},setHistory:function(e){var t=this.history=new Ln(this.history.maxGeneration);t.done=Wn(e.done.slice(0),null,!0),t.undone=Wn(e.undone.slice(0),null,!0)},setGutterMarker:Kr(function(e,i,r){return po(this,e,"gutter",function(e){var t=e.gutterMarkers||(e.gutterMarkers={});return!(t[i]=r)&&ie(t)&&(e.gutterMarkers=null),!0})}),clearGutter:Kr(function(t){var i=this;this.iter(function(e){e.gutterMarkers&&e.gutterMarkers[t]&&po(i,e,"gutter",function(){return e.gutterMarkers[t]=null,ie(e.gutterMarkers)&&(e.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!he(this,e))return null;if(!(e=se(this,t=e)))return null}else if(null==(t=fe(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Kr(function(e,i,r){return po(this,e,"gutter"==i?"gutter":"class",function(e){var t="text"==i?"textClass":"background"==i?"bgClass":"gutter"==i?"gutterClass":"wrapClass";if(e[t]){if(S(r).test(e[t]))return!1;e[t]+=" "+r}else e[t]=r;return!0})}),removeLineClass:Kr(function(e,o,a){return po(this,e,"gutter"==o?"gutter":"class",function(e){var t="text"==o?"textClass":"background"==o?"bgClass":"gutter"==o?"gutterClass":"wrapClass",i=e[t];if(!i)return!1;if(null==a)e[t]=null;else{var r=i.match(S(a));if(!r)return!1;var n=r.index+r[0].length;e[t]=i.slice(0,r.index)+(r.index&&n!=i.length?" ":"")+i.slice(n)||null}return!0})}),addLineWidget:Kr(function(e,t,i){return n=e,o=new _o(r=this,t,i),(a=r.cm)&&o.noHScroll&&(a.display.alignWidgets=!0),po(r,n,"widget",function(e){var t=e.widgets||(e.widgets=[]);if(null==o.insertAt?t.push(o):t.splice(Math.min(t.length-1,Math.max(0,o.insertAt)),0,o),o.line=e,a&&!$e(r,e)){var i=Ve(e)<r.scrollTop;ue(e,e.height+xi(o)),i&&kr(a,o.height),a.curOp.forceUpdate=!0}return!0}),a&&li(a,"lineWidgetAdded",a,o,"number"==typeof n?n:fe(n)),o;var r,n,o,a}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return yo(this,ke(this,e),ke(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){var i={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return yo(this,e=ke(this,e),e,i,"bookmark")},findMarksAt:function(e){var t=[],i=se(this,(e=ke(this,e)).line).markedSpans;if(i)for(var r=0;r<i.length;++r){var n=i[r];(null==n.from||n.from<=e.ch)&&(null==n.to||n.to>=e.ch)&&t.push(n.marker.parent||n.marker)}return t},findMarks:function(n,o,a){n=ke(this,n),o=ke(this,o);var l=[],s=n.line;return this.iter(n.line,o.line+1,function(e){var t=e.markedSpans;if(t)for(var i=0;i<t.length;i++){var r=t[i];null!=r.to&&s==n.line&&n.ch>=r.to||null==r.from&&s!=n.line||null!=r.from&&s==o.line&&r.from>=o.ch||a&&!a(r.marker)||l.push(r.marker.parent||r.marker)}++s}),l},getAllMarks:function(){var r=[];return this.iter(function(e){var t=e.markedSpans;if(t)for(var i=0;i<t.length;++i)null!=t[i].from&&r.push(t[i].marker)}),r},posFromIndex:function(i){var r,n=this.first,o=this.lineSeparator().length;return this.iter(function(e){var t=e.text.length+o;if(i<t)return r=i,!0;i-=t,++n}),ke(this,_e(n,r))},indexFromPos:function(e){var t=(e=ke(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+i}),t},copy:function(e){var t=new Co(de(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<i&&(i=e.to);var r=new Co(de(this,t,i),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var i=0;i<t.length;i++){var r=t[i],n=r.find(),o=e.clipPos(n.from),a=e.clipPos(n.to);if(ve(o,a)){var l=yo(e,o,a,r.primary,r.primary.type);r.markers.push(l),l.parent=r}}}(r,wo(this)),r},unlinkDoc:function(e){if(e instanceof wa&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),ko(wo(this));break}}if(e.history==this.history){var i=[e.id];En(e,function(e){return i.push(e.id)},!0),e.history=new Ln(null),e.history.done=Wn(this.history.done,i),e.history.undone=Wn(this.history.undone,i)}},iterLinkedDocs:function(e){En(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):bt(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Kr(function(e){var t;("rtl"!=e&&(e="ltr"),e!=this.direction)&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&$r(t=this.cm,function(){Nn(t),Yr(t)}))})}),Co.prototype.eachLine=Co.prototype.iter;var To=0;function Ao(e){var n=this;if(Eo(n),!ot(n,e)&&!yi(n.display,e)){ct(e),b&&(To=+new Date);var o=or(n,e,!0),t=e.dataTransfer.files;if(o&&!n.isReadOnly())if(t&&t.length&&window.FileReader&&window.File)for(var a=t.length,l=Array(a),s=0,i=function(e,i){if(!n.options.allowDropFileTypes||-1!=W(n.options.allowDropFileTypes,e.type)){var r=new FileReader;r.onload=Ur(n,function(){var e=r.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),l[i]=e,++s==a){var t={from:o=ke(n.doc,o),to:o,text:n.doc.splitLines(l.join(n.doc.lineSeparator())),origin:"paste"};ro(n.doc,t),Un(n.doc,xn(o,yn(t)))}}),r.readAsText(e)}},r=0;r<a;++r)i(t[r],r);else{if(n.state.draggingText&&-1<n.doc.sel.contains(o))return n.state.draggingText(e),void setTimeout(function(){return n.display.input.focus()},20);try{var c=e.dataTransfer.getData("Text");if(c){var d;if(n.state.draggingText&&!n.state.draggingText.copy&&(d=n.listSelections()),Kn(n.doc,xn(o,o)),d)for(var u=0;u<d.length;++u)so(n.doc,"",d[u].anchor,d[u].head,"drag");n.replaceSelection(c,"around","paste"),n.display.input.focus()}}catch(e){}}}}function Eo(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Mo(e){if(document.getElementsByClassName)for(var t=document.getElementsByClassName("CodeMirror"),i=0;i<t.length;i++){var r=t[i].CodeMirror;r&&e(r)}}var No=!1;function Lo(){var e;No||(tt(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Mo(Io)},100))}),tt(window,"blur",function(){return Mo(_r)}),No=!0)}function Io(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Do={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Oo=0;Oo<10;Oo++)Do[Oo+48]=Do[Oo+96]=String(Oo);for(var zo=65;zo<=90;zo++)Do[zo]=String.fromCharCode(zo);for(var Ro=1;Ro<=12;Ro++)Do[Ro+111]=Do[Ro+63235]="F"+Ro;var Po={};function Bo(e){var t,i,r,n,o=e.split(/-(?!$)/);e=o[o.length-1];for(var a=0;a<o.length-1;a++){var l=o[a];if(/^(cmd|meta|m)$/i.test(l))n=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else{if(!/^s(hift)?$/i.test(l))throw new Error("Unrecognized modifier name: "+l);r=!0}}return t&&(e="Alt-"+e),i&&(e="Ctrl-"+e),n&&(e="Cmd-"+e),r&&(e="Shift-"+e),e}function Ho(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if("..."==r){delete e[i];continue}for(var n=G(i.split(" "),Bo),o=0;o<n.length;o++){var a=void 0,l=void 0;a=o==n.length-1?(l=n.join(" "),r):(l=n.slice(0,o+1).join(" "),"...");var s=t[l];if(s){if(s!=a)throw new Error("Inconsistent bindings for "+l)}else t[l]=a}delete e[i]}for(var c in t)e[c]=t[c];return e}function Wo(e,t,i,r){var n=(t=qo(t)).call?t.call(e,r):t[e];if(!1===n)return"nothing";if("..."===n)return"multi";if(null!=n&&i(n))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Wo(e,t.fallthrough,i,r);for(var o=0;o<t.fallthrough.length;o++){var a=Wo(e,t.fallthrough[o],i,r);if(a)return a}}}function Xo(e){var t="string"==typeof e?e:Do[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Fo(e,t,i){var r=e;return t.altKey&&"Alt"!=r&&(e="Alt-"+e),(m?t.metaKey:t.ctrlKey)&&"Ctrl"!=r&&(e="Ctrl-"+e),(m?t.ctrlKey:t.metaKey)&&"Cmd"!=r&&(e="Cmd-"+e),!i&&t.shiftKey&&"Shift"!=r&&(e="Shift-"+e),e}function jo(e,t){if(_&&34==e.keyCode&&e.char)return!1;var i=Do[e.keyCode];return null!=i&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(i=e.code),Fo(i,e,t))}function qo(e){return"string"==typeof e?Po[e]:e}function $o(t,e){for(var i=t.doc.sel.ranges,r=[],n=0;n<i.length;n++){for(var o=e(i[n]);r.length&&ve(o.from,Y(r).to)<=0;){var a=r.pop();if(ve(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}$r(t,function(){for(var e=r.length-1;0<=e;e--)so(t.doc,"",r[e].from,r[e].to,"+delete");Sr(t)})}function Uo(e,t,i){var r=oe(e.text,t+i,i);return r<0||r>e.text.length?null:r}function Vo(e,t,i){var r=Uo(e,t.ch,i);return null==r?null:new _e(t.line,r,i<0?"after":"before")}function Ko(e,t,i,r,n){if(e){var o=Je(i,t.doc.direction);if(o){var a,l=n<0?Y(o):o[0],s=n<0==(1==l.level)?"after":"before";if(0<l.level||"rtl"==t.doc.direction){var c=Ni(t,i);a=n<0?i.text.length-1:0;var d=Li(t,c,a).top;a=ae(function(e){return Li(t,c,e).top==d},n<0==(1==l.level)?l.from:l.to-1,a),"before"==s&&(a=Uo(i,a,1))}else a=n<0?l.to:l.from;return new _e(r,a,s)}}return new _e(r,n<0?i.text.length:0,n<0?"before":"after")}Po.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Po.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Po.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Po.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Po.default=y?Po.macDefault:Po.pcDefault;var Yo={selectAll:to,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),j)},killLine:function(i){return $o(i,function(e){if(e.empty()){var t=se(i.doc,e.head.line).text.length;return e.head.ch==t&&e.head.line<i.lastLine()?{from:e.head,to:_e(e.head.line+1,0)}:{from:e.head,to:_e(e.head.line,t)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){return $o(t,function(e){return{from:_e(e.from().line,0),to:ke(t.doc,_e(e.to().line+1,0))}})},delLineLeft:function(e){return $o(e,function(e){return{from:_e(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(i){return $o(i,function(e){var t=i.charCoords(e.head,"div").top+5;return{from:i.coordsChar({left:0,top:t},"div"),to:e.from()}})},delWrappedLineRight:function(r){return $o(r,function(e){var t=r.charCoords(e.head,"div").top+5,i=r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:t},"div");return{from:e.from(),to:i}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(_e(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(_e(e.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(e){return Go(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(e){return Qo(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(e){return function(e,t){var i=se(e.doc,t),r=function(e){for(var t;t=He(e);)e=t.find(1,!0).line;return e}(i);r!=i&&(t=fe(r));return Ko(!0,e,i,t,-1)}(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(i){return i.extendSelectionsBy(function(e){var t=i.cursorCoords(e.head,"div").top+5;return i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:t},"div")},$)},goLineLeft:function(i){return i.extendSelectionsBy(function(e){var t=i.cursorCoords(e.head,"div").top+5;return i.coordsChar({left:0,top:t},"div")},$)},goLineLeftSmart:function(r){return r.extendSelectionsBy(function(e){var t=r.cursorCoords(e.head,"div").top+5,i=r.coordsChar({left:0,top:t},"div");return i.ch<r.getLine(i.line).search(/\S/)?Qo(r,e.head):i},$)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),r=e.options.tabSize,n=0;n<i.length;n++){var o=i[n].from(),a=B(e.getLine(o.line),o.ch,r);t.push(K(r-a%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(a){return $r(a,function(){for(var e=a.listSelections(),t=[],i=0;i<e.length;i++)if(e[i].empty()){var r=e[i].head,n=se(a.doc,r.line).text;if(n)if(r.ch==n.length&&(r=new _e(r.line,r.ch-1)),0<r.ch)r=new _e(r.line,r.ch+1),a.replaceRange(n.charAt(r.ch-1)+n.charAt(r.ch-2),_e(r.line,r.ch-2),r,"+transpose");else if(r.line>a.doc.first){var o=se(a.doc,r.line-1).text;o&&(r=new _e(r.line,1),a.replaceRange(n.charAt(0)+a.doc.lineSeparator()+o.charAt(o.length-1),_e(r.line-1,o.length-1),r,"+transpose"))}t.push(new vn(r,r))}a.setSelections(t)})},newlineAndIndent:function(r){return $r(r,function(){for(var e=r.listSelections(),t=e.length-1;0<=t;t--)r.replaceRange(r.doc.lineSeparator(),e[t].anchor,e[t].head,"+input");e=r.listSelections();for(var i=0;i<e.length;i++)r.indentLine(e[i].from().line,null,!0);Sr(r)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Go(e,t){var i=se(e.doc,t),r=Fe(i);return r!=i&&(t=fe(r)),Ko(!0,e,r,t,1)}function Qo(e,t){var i=Go(e,t.line),r=se(e.doc,i.line),n=Je(r,e.doc.direction);if(n&&0!=n[0].level)return i;var o=Math.max(0,r.text.search(/\S/)),a=t.line==i.line&&t.ch<=o&&t.ch;return _e(i.line,a?0:o,i.sticky)}function Zo(e,t,i){if("string"==typeof t&&!(t=Yo[t]))return!1;e.display.input.ensurePolled();var r=e.display.shift,n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),n=t(e)!=F}finally{e.display.shift=r,e.state.suppressEdits=!1}return n}var Jo=new H;function ea(e,t,i,r){var n=e.state.keySeq;if(n){if(Xo(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Jo.set(50,function(){e.state.keySeq==n&&(e.state.keySeq=null,e.display.input.reset())}),ta(e,n+" "+t,i,r))return!0}return ta(e,t,i,r)}function ta(e,t,i,r){var n=function(e,t,i){for(var r=0;r<e.state.keyMaps.length;r++){var n=Wo(t,e.state.keyMaps[r],i,e);if(n)return n}return e.options.extraKeys&&Wo(t,e.options.extraKeys,i,e)||Wo(t,e.options.keyMap,i,e)}(e,t,r);return"multi"==n&&(e.state.keySeq=t),"handled"==n&&li(e,"keyHandled",e,t,i),"handled"!=n&&"multi"!=n||(ct(i),fr(e)),!!n}function ia(t,e){var i=jo(e,!0);return!!i&&(e.shiftKey&&!t.state.keySeq?ea(t,"Shift-"+i,e,function(e){return Zo(t,e,!0)})||ea(t,i,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return Zo(t,e)}):ea(t,i,e,function(e){return Zo(t,e)}))}var ra=null;function na(e){if(this.curOp.focus=I(),!ot(this,e)){b&&w<11&&27==e.keyCode&&(e.returnValue=!1);var t=e.keyCode;this.display.shift=16==t||e.shiftKey;var i=ia(this,e);_&&(ra=i?t:null,!i&&88==t&&!kt&&(y?e.metaKey:e.ctrlKey)&&this.replaceSelection("",null,"cut")),18!=t||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function i(e){18!=e.keyCode&&e.altKey||(T(t,"CodeMirror-crosshair"),rt(document,"keyup",i),rt(document,"mouseover",i))}D(t,"CodeMirror-crosshair"),tt(document,"keyup",i),tt(document,"mouseover",i)}(this)}}function oa(e){16==e.keyCode&&(this.doc.sel.shift=!1),ot(this,e)}function aa(e){if(!(yi(this.display,e)||ot(this,e)||e.ctrlKey&&!e.altKey||y&&e.metaKey)){var t=e.keyCode,i=e.charCode;if(_&&t==ra)return ra=null,void ct(e);if(!_||e.which&&!(e.which<10)||!ia(this,e)){var r,n=String.fromCharCode(null==i?t:i);if("\b"!=n)if(!ea(r=this,"'"+n+"'",e,function(e){return Zo(r,e,!0)}))this.display.input.onKeyPress(e)}}}var la,sa,ca=function(e,t,i){this.time=e,this.pos=t,this.button=i};function da(e){var t=this,i=t.display;if(!(ot(t,e)||i.activeTouch&&i.input.supportsTouch()))if(i.input.ensurePolled(),i.shift=e.shiftKey,yi(i,e))x||(i.scroller.draggable=!1,setTimeout(function(){return i.scroller.draggable=!0},100));else if(!pa(t,e)){var r,n,o,a=or(t,e),l=ht(e),s=a?(r=a,n=l,o=+new Date,sa&&sa.compare(o,r,n)?(la=sa=null,"triple"):la&&la.compare(o,r,n)?(sa=new ca(o,r,n),la=null,"double"):(la=new ca(o,r,n),sa=null,"single")):"single";window.focus(),1==l&&t.state.selectingText&&t.state.selectingText(e),a&&function(i,e,r,t,n){var o="Click";"double"==t?o="Double"+o:"triple"==t&&(o="Triple"+o);return ea(i,Fo(o=(1==e?"Left":2==e?"Middle":"Right")+o,n),n,function(e){if("string"==typeof e&&(e=Yo[e]),!e)return!1;var t=!1;try{i.isReadOnly()&&(i.state.suppressEdits=!0),t=e(i,r)!=F}finally{i.state.suppressEdits=!1}return t})}(t,l,a,s,e)||(1==l?a?function(e,t,i,r){b?setTimeout(R(pr,e),0):e.curOp.focus=I();var n,o=function(e,t,i){var r=e.getOption("configureMouse"),n=r?r(e,t,i):{};if(null==n.unit){var o=p?i.shiftKey&&i.metaKey:i.altKey;n.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}(null==n.extend||e.doc.extend)&&(n.extend=e.doc.extend||i.shiftKey);null==n.addNew&&(n.addNew=y?i.metaKey:i.ctrlKey);null==n.moveOnDrag&&(n.moveOnDrag=!(y?i.altKey:i.ctrlKey));return n}(e,i,r),a=e.doc.sel;e.options.dragDrop&&vt&&!e.isReadOnly()&&"single"==i&&-1<(n=a.contains(t))&&(ve((n=a.ranges[n]).from(),t)<0||0<t.xRel)&&(0<ve(n.to(),t)||t.xRel<0)?function(t,i,r,n){var o=t.display,a=!1,l=Ur(t,function(e){x&&(o.scroller.draggable=!1),t.state.draggingText=!1,rt(o.wrapper.ownerDocument,"mouseup",l),rt(o.wrapper.ownerDocument,"mousemove",s),rt(o.scroller,"dragstart",c),rt(o.scroller,"drop",l),a||(ct(e),n.addNew||Fn(t.doc,r,null,null,n.extend),x||b&&9==w?setTimeout(function(){o.wrapper.ownerDocument.body.focus(),o.input.focus()},20):o.input.focus())}),s=function(e){a=a||10<=Math.abs(i.clientX-e.clientX)+Math.abs(i.clientY-e.clientY)},c=function(){return a=!0};x&&(o.scroller.draggable=!0);(t.state.draggingText=l).copy=!n.moveOnDrag,o.scroller.dragDrop&&o.scroller.dragDrop();tt(o.wrapper.ownerDocument,"mouseup",l),tt(o.wrapper.ownerDocument,"mousemove",s),tt(o.scroller,"dragstart",c),tt(o.scroller,"drop",l),hr(t),setTimeout(function(){return o.input.focus()},20)}(e,r,t,o):function(_,e,v,m){var a=_.display,x=_.doc;ct(e);var y,b,w=x.sel,t=w.ranges;m.addNew&&!m.extend?(b=x.sel.contains(v),y=-1<b?t[b]:new vn(v,v)):(y=x.sel.primary(),b=x.sel.primIndex);if("rectangle"==m.unit)m.addNew||(y=new vn(v,v)),v=or(_,e,!0,!0),b=-1;else{var i=ua(_,v,m.unit);y=m.extend?Xn(y,i.anchor,i.head,m.extend):i}m.addNew?-1==b?(b=t.length,Vn(x,mn(t.concat([y]),b),{scroll:!1,origin:"*mouse"})):1<t.length&&t[b].empty()&&"char"==m.unit&&!m.extend?(Vn(x,mn(t.slice(0,b).concat(t.slice(b+1)),0),{scroll:!1,origin:"*mouse"}),w=x.sel):qn(x,b,y,q):(Vn(x,new _n([y],b=0),q),w=x.sel);var k=v;function l(e){if(0!=ve(k,e))if(k=e,"rectangle"==m.unit){for(var t=[],i=_.options.tabSize,r=B(se(x,v.line).text,v.ch,i),n=B(se(x,e.line).text,e.ch,i),o=Math.min(r,n),a=Math.max(r,n),l=Math.min(v.line,e.line),s=Math.min(_.lastLine(),Math.max(v.line,e.line));l<=s;l++){var c=se(x,l).text,d=U(c,o,i);o==a?t.push(new vn(_e(l,d),_e(l,d))):c.length>d&&t.push(new vn(_e(l,d),_e(l,U(c,a,i))))}t.length||t.push(new vn(v,v)),Vn(x,mn(w.ranges.slice(0,b).concat(t),b),{origin:"*mouse",scroll:!1}),_.scrollIntoView(e)}else{var u,f=y,p=ua(_,e,m.unit),h=f.anchor;h=0<ve(p.anchor,h)?(u=p.head,be(f.from(),p.anchor)):(u=p.anchor,ye(f.to(),p.head));var g=w.ranges.slice(0);g[b]=function(e,t){var i=t.anchor,r=t.head,n=se(e.doc,i.line);if(0==ve(i,r)&&i.sticky==r.sticky)return t;var o=Je(n);if(!o)return t;var a=Qe(o,i.ch,i.sticky),l=o[a];if(l.from!=i.ch&&l.to!=i.ch)return t;var s,c=a+(l.from==i.ch==(1!=l.level)?0:1);if(0==c||c==o.length)return t;if(r.line!=i.line)s=0<(r.line-i.line)*("ltr"==e.doc.direction?1:-1);else{var d=Qe(o,r.ch,r.sticky),u=d-a||(r.ch-i.ch)*(1==l.level?-1:1);s=d==c-1||d==c?u<0:0<u}var f=o[c+(s?-1:0)],p=s==(1==f.level),h=p?f.from:f.to,g=p?"after":"before";return i.ch==h&&i.sticky==g?t:new vn(new _e(i.line,h,g),r)}(_,new vn(ke(x,h),u)),Vn(x,mn(g,b),q)}}var s=a.wrapper.getBoundingClientRect(),c=0;function r(e){_.state.selectingText=!1,c=1/0,ct(e),a.input.focus(),rt(a.wrapper.ownerDocument,"mousemove",n),rt(a.wrapper.ownerDocument,"mouseup",o),x.history.lastSelOrigin=null}var n=Ur(_,function(e){0!==e.buttons&&ht(e)?function e(t){var i=++c;var r=or(_,t,!0,"rectangle"==m.unit);if(!r)return;if(0!=ve(r,k)){_.curOp.focus=I(),l(r);var n=xr(a,x);(r.line>=n.to||r.line<n.from)&&setTimeout(Ur(_,function(){c==i&&e(t)}),150)}else{var o=t.clientY<s.top?-20:t.clientY>s.bottom?20:0;o&&setTimeout(Ur(_,function(){c==i&&(a.scroller.scrollTop+=o,e(t))}),50)}}(e):r(e)}),o=Ur(_,r);_.state.selectingText=o,tt(a.wrapper.ownerDocument,"mousemove",n),tt(a.wrapper.ownerDocument,"mouseup",o)}(e,r,t,o)}(t,a,s,e):pt(e)==i.scroller&&ct(e):2==l?(a&&Fn(t.doc,a),setTimeout(function(){return i.input.focus()},20)):3==l&&(k?ha(t,e):hr(t)))}}function ua(e,t,i){if("char"==i)return new vn(t,t);if("word"==i)return e.findWordAt(t);if("line"==i)return new vn(_e(t.line,0),ke(e.doc,_e(t.line+1,0)));var r=i(e,t);return new vn(r.from,r.to)}function fa(e,t,i,r){var n,o;if(t.touches)n=t.touches[0].clientX,o=t.touches[0].clientY;else try{n=t.clientX,o=t.clientY}catch(t){return!1}if(n>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&ct(t);var a=e.display,l=a.lineDiv.getBoundingClientRect();if(o>l.bottom||!lt(e,i))return ut(t);o-=l.top-a.viewOffset;for(var s=0;s<e.options.gutters.length;++s){var c=a.gutters.childNodes[s];if(c&&c.getBoundingClientRect().right>=n)return nt(e,i,e,pe(e.doc,o),e.options.gutters[s],t),ut(t)}}function pa(e,t){return fa(e,t,"gutterClick",!0)}function ha(e,t){var i,r;yi(e.display,t)||(r=t,lt(i=e,"gutterContextMenu")&&fa(i,r,"gutterContextMenu",!1))||(ot(e,t,"contextmenu")||e.display.input.onContextMenu(t))}function ga(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Bi(e)}ca.prototype.compare=function(e,t,i){return this.time+400>e&&0==ve(t,this.pos)&&i==this.button};var _a={toString:function(){return"CodeMirror.Init"}},va={},ma={};function xa(e){cn(e),Yr(e),yr(e)}function ya(e,t,i){if(!t!=!(i&&i!=_a)){var r=e.display.dragFunctions,n=t?tt:rt;n(e.display.scroller,"dragstart",r.start),n(e.display.scroller,"dragenter",r.enter),n(e.display.scroller,"dragover",r.over),n(e.display.scroller,"dragleave",r.leave),n(e.display.scroller,"drop",r.drop)}}function ba(e){e.options.lineWrapping?(D(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(T(e.display.wrapper,"CodeMirror-wrap"),Ye(e)),nr(e),Yr(e),Bi(e),setTimeout(function(){return Or(e)},100)}function wa(e,t){var i=this;if(!(this instanceof wa))return new wa(e,t);this.options=t=t?P(t):{},P(va,t,!1),dn(t);var r=t.value;"string"==typeof r?r=new Co(r,t.mode,null,t.lineSeparator,t.direction):t.mode&&(r.modeOption=t.mode),this.doc=r;var n=new wa.inputStyles[t.inputStyle](this),o=this.display=new le(e,r,n);for(var a in cn(o.wrapper.CodeMirror=this),ga(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Pr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new H,keySeq:null,specialChars:null},t.autofocus&&!f&&o.input.focus(),b&&w<11&&setTimeout(function(){return i.display.input.reset(!0)},20),function(n){var o=n.display;tt(o.scroller,"mousedown",Ur(n,da)),tt(o.scroller,"dblclick",b&&w<11?Ur(n,function(e){if(!ot(n,e)){var t=or(n,e);if(t&&!pa(n,e)&&!yi(n.display,e)){ct(e);var i=n.findWordAt(t);Fn(n.doc,i.anchor,i.head)}}}):function(e){return ot(n,e)||ct(e)});k||tt(o.scroller,"contextmenu",function(e){return ha(n,e)});var i,r={end:0};function a(){o.activeTouch&&(i=setTimeout(function(){return o.activeTouch=null},1e3),(r=o.activeTouch).end=+new Date)}function l(e,t){if(null==t.left)return!0;var i=t.left-e.left,r=t.top-e.top;return 400<i*i+r*r}tt(o.scroller,"touchstart",function(e){if(!ot(n,e)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(e)&&!pa(n,e)){o.input.ensurePolled(),clearTimeout(i);var t=+new Date;o.activeTouch={start:t,moved:!1,prev:t-r.end<=300?r:null},1==e.touches.length&&(o.activeTouch.left=e.touches[0].pageX,o.activeTouch.top=e.touches[0].pageY)}}),tt(o.scroller,"touchmove",function(){o.activeTouch&&(o.activeTouch.moved=!0)}),tt(o.scroller,"touchend",function(e){var t=o.activeTouch;if(t&&!yi(o,e)&&null!=t.left&&!t.moved&&new Date-t.start<300){var i,r=n.coordsChar(o.activeTouch,"page");i=!t.prev||l(t,t.prev)?new vn(r,r):!t.prev.prev||l(t,t.prev.prev)?n.findWordAt(r):new vn(_e(r.line,0),ke(n.doc,_e(r.line+1,0))),n.setSelection(i.anchor,i.head),n.focus(),ct(e)}a()}),tt(o.scroller,"touchcancel",a),tt(o.scroller,"scroll",function(){o.scroller.clientHeight&&(Er(n,o.scroller.scrollTop),Nr(n,o.scroller.scrollLeft,!0),nt(n,"scroll",n))}),tt(o.scroller,"mousewheel",function(e){return gn(n,e)}),tt(o.scroller,"DOMMouseScroll",function(e){return gn(n,e)}),tt(o.wrapper,"scroll",function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),o.dragFunctions={enter:function(e){ot(n,e)||ft(e)},over:function(e){ot(n,e)||(!function(e,t){var i=or(e,t);if(i){var r=document.createDocumentFragment();cr(e,i,r),e.display.dragCursor||(e.display.dragCursor=N("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),E(e.display.dragCursor,r)}}(n,e),ft(e))},start:function(e){return function(e,t){if(b&&(!e.state.draggingText||+new Date-To<100))ft(t);else if(!ot(e,t)&&!yi(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!s)){var i=N("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",_&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),_&&i.parentNode.removeChild(i)}}(n,e)},drop:Ur(n,Ao),leave:function(e){ot(n,e)||Eo(n)}};var e=o.input.getField();tt(e,"keyup",function(e){return oa.call(n,e)}),tt(e,"keydown",Ur(n,na)),tt(e,"keypress",Ur(n,aa)),tt(e,"focus",function(e){return gr(n,e)}),tt(e,"blur",function(e){return _r(n,e)})}(this),Lo(),Hr(this),this.curOp.forceUpdate=!0,Mn(this,r),t.autofocus&&!f||this.hasFocus()?setTimeout(R(gr,this),20):_r(this),ma)ma.hasOwnProperty(a)&&ma[a](i,t[a],_a);br(this),t.finishInit&&t.finishInit(this);for(var l=0;l<ka.length;++l)ka[l](i);Wr(this),x&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}wa.defaults=va,wa.optionHandlers=ma;var ka=[];function Sa(e,t,i,r){var n,o=e.doc;null==i&&(i="add"),"smart"==i&&(o.mode.indent?n=Ht(e,t).state:i="prev");var a=e.options.tabSize,l=se(o,t),s=B(l.text,null,a);l.stateAfter&&(l.stateAfter=null);var c,d=l.text.match(/^\s*/)[0];if(r||/\S/.test(l.text)){if("smart"==i&&((c=o.mode.indent(n,l.text.slice(d.length),l.text))==F||150<c)){if(!r)return;i="prev"}}else c=0,i="not";"prev"==i?c=t>o.first?B(se(o,t-1).text,null,a):0:"add"==i?c=s+e.options.indentUnit:"subtract"==i?c=s-e.options.indentUnit:"number"==typeof i&&(c=s+i),c=Math.max(0,c);var u="",f=0;if(e.options.indentWithTabs)for(var p=Math.floor(c/a);p;--p)f+=a,u+="\t";if(f<c&&(u+=K(c-f)),u!=d)return so(o,u,_e(t,0),_e(t,d.length),"+input"),!(l.stateAfter=null);for(var h=0;h<o.sel.ranges.length;h++){var g=o.sel.ranges[h];if(g.head.line==t&&g.head.ch<d.length){var _=_e(t,d.length);qn(o,h,new vn(_,_));break}}}wa.defineInitHook=function(e){return ka.push(e)};var Ca=null;function Ta(e){Ca=e}function Aa(e,t,i,r,n){var o=e.doc;e.display.shift=!1,r||(r=o.sel);var a,l=e.state.pasteIncoming||"paste"==n,s=bt(t),c=null;if(l&&1<r.ranges.length)if(Ca&&Ca.text.join("\n")==t){if(r.ranges.length%Ca.text.length==0){c=[];for(var d=0;d<Ca.text.length;d++)c.push(o.splitLines(Ca.text[d]))}}else s.length==r.ranges.length&&e.options.pasteLinesPerSelection&&(c=G(s,function(e){return[e]}));for(var u=r.ranges.length-1;0<=u;u--){var f=r.ranges[u],p=f.from(),h=f.to();f.empty()&&(i&&0<i?p=_e(p.line,p.ch-i):e.state.overwrite&&!l?h=_e(h.line,Math.min(se(o,h.line).text.length,h.ch+Y(s).length)):Ca&&Ca.lineWise&&Ca.text.join("\n")==t&&(p=h=_e(p.line,0))),a=e.curOp.updateInput;var g={from:p,to:h,text:c?c[u%c.length]:s,origin:n||(l?"paste":e.state.cutIncoming?"cut":"+input")};ro(e.doc,g),li(e,"inputRead",e,g)}t&&!l&&Ma(e,t),Sr(e),e.curOp.updateInput=a,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function Ea(e,t){var i=e.clipboardData&&e.clipboardData.getData("Text");if(i)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||$r(t,function(){return Aa(t,i,0,null,"paste")}),!0}function Ma(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var i=e.doc.sel,r=i.ranges.length-1;0<=r;r--){var n=i.ranges[r];if(!(100<n.head.ch||r&&i.ranges[r-1].head.line==n.head.line)){var o=e.getModeAt(n.head),a=!1;if(o.electricChars){for(var l=0;l<o.electricChars.length;l++)if(-1<t.indexOf(o.electricChars.charAt(l))){a=Sa(e,n.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(se(e.doc,n.head.line).text.slice(0,n.head.ch))&&(a=Sa(e,n.head.line,"smart"));a&&li(e,"electricInput",e,n.head.line)}}}function Na(e){for(var t=[],i=[],r=0;r<e.doc.sel.ranges.length;r++){var n=e.doc.sel.ranges[r].head.line,o={anchor:_e(n,0),head:_e(n+1,0)};i.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:i}}function La(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function Ia(){var e=N("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=N("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return x?e.style.width="1000px":e.setAttribute("wrap","off"),d&&(e.style.border="1px solid black"),La(e),t}function Da(r,n,o,e,a){var t=n,i=o,l=se(r,n.line);function s(e){var t,i;if(null==(t=a?function(t,i,l,e){var s=Je(i,t.doc.direction);if(!s)return Vo(i,l,e);l.ch>=i.text.length?(l.ch=i.text.length,l.sticky="before"):l.ch<=0&&(l.ch=0,l.sticky="after");var r=Qe(s,l.ch,l.sticky),n=s[r];if("ltr"==t.doc.direction&&n.level%2==0&&(0<e?n.to>l.ch:n.from<l.ch))return Vo(i,l,e);var o,c=function(e,t){return Uo(i,e instanceof _e?e.ch:e,t)},a=function(e){return t.options.lineWrapping?(o=o||Ni(t,i),Gi(t,i,o,e)):{begin:0,end:i.text.length}},d=a("before"==l.sticky?c(l,-1):l.ch);if("rtl"==t.doc.direction||1==n.level){var u=1==n.level==e<0,f=c(l,u?1:-1);if(null!=f&&(u?f<=n.to&&f<=d.end:f>=n.from&&f>=d.begin)){var p=u?"before":"after";return new _e(l.line,f,p)}}var h=function(e,t,i){for(var r=function(e,t){return t?new _e(l.line,c(e,1),"before"):new _e(l.line,e,"after")};0<=e&&e<s.length;e+=t){var n=s[e],o=0<t==(1!=n.level),a=o?i.begin:c(i.end,-1);if(n.from<=a&&a<n.to)return r(a,o);if(a=o?n.from:c(n.to,-1),i.begin<=a&&a<i.end)return r(a,o)}},g=h(r+e,e,d);if(g)return g;var _=0<e?d.end:c(d.begin,-1);return null==_||0<e&&_==i.text.length||!(g=h(0<e?0:s.length-1,e,a(_)))?null:g}(r.cm,l,n,o):Vo(l,n,o))){if(e||(i=n.line+o)<r.first||i>=r.first+r.size||(n=new _e(i,n.ch,n.sticky),!(l=se(r,i))))return!1;n=Ko(a,r.cm,l,n.line,o)}else n=t;return!0}if("char"==e)s();else if("column"==e)s(!0);else if("word"==e||"group"==e)for(var c=null,d="group"==e,u=r.cm&&r.cm.getHelper(n,"wordChars"),f=!0;!(o<0)||s(!f);f=!1){var p=l.text.charAt(n.ch)||"\n",h=te(p,u)?"w":d&&"\n"==p?"n":!d||/\s/.test(p)?null:"p";if(!d||f||h||(h="s"),c&&c!=h){o<0&&(o=1,s(),n.sticky="after");break}if(h&&(c=h),0<o&&!s(!f))break}var g=Jn(r,n,t,i,!0);return me(t,g)&&(g.hitSide=!0),g}function Oa(e,t,i,r){var n,o,a=e.doc,l=t.left;if("page"==r){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),c=Math.max(s-.5*Ji(e.display),3);n=(0<i?t.bottom:t.top)+i*c}else"line"==r&&(n=0<i?t.bottom+3:t.top-3);for(;(o=Ki(e,l,n)).outside;){if(i<0?n<=0:n>=a.height){o.hitSide=!0;break}n+=5*i}return o}var za=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new H,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ra(e,t){var i=Mi(e,t.line);if(!i||i.hidden)return null;var r=se(e.doc,t.line),n=Ai(i,r,t.line),o=Je(r,e.doc.direction),a="left";o&&(a=Qe(o,t.ch)%2?"right":"left");var l=Oi(n.map,t.ch,a);return l.offset="right"==l.collapse?l.end:l.start,l}function Pa(e,t){return t&&(e.bad=!0),e}function Ba(e,t,i){var r;if(t==e.display.lineDiv){if(!(r=e.display.lineDiv.childNodes[i]))return Pa(e.clipPos(_e(e.display.viewTo-1)),!0);t=null,i=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var n=0;n<e.display.view.length;n++){var o=e.display.view[n];if(o.node==r)return Ha(o,t,i)}}function Ha(c,e,t){var i=c.text.firstChild,r=!1;if(!e||!L(i,e))return Pa(_e(fe(c.line),0),!0);if(e==i&&(r=!0,e=i.childNodes[t],t=0,!e)){var n=c.rest?Y(c.rest):c.line;return Pa(_e(fe(n),n.text.length),r)}var o=3==e.nodeType?e:null,a=e;for(o||1!=e.childNodes.length||3!=e.firstChild.nodeType||(o=e.firstChild,t&&(t=o.nodeValue.length));a.parentNode!=i;)a=a.parentNode;var d=c.measure,u=d.maps;function l(e,t,i){for(var r=-1;r<(u?u.length:0);r++)for(var n=r<0?d.map:u[r],o=0;o<n.length;o+=3){var a=n[o+2];if(a==e||a==t){var l=fe(r<0?c.line:c.rest[r]),s=n[o]+i;return(i<0||a!=e)&&(s=n[o+(i?1:0)]),_e(l,s)}}}var s=l(o,a,t);if(s)return Pa(s,r);for(var f=a.nextSibling,p=o?o.nodeValue.length-t:0;f;f=f.nextSibling){if(s=l(f,f.firstChild,0))return Pa(_e(s.line,s.ch-p),r);p+=f.textContent.length}for(var h=a.previousSibling,g=t;h;h=h.previousSibling){if(s=l(h,h.firstChild,-1))return Pa(_e(s.line,s.ch+g),r);g+=h.textContent.length}}za.prototype.init=function(e){var t=this,a=this,l=a.cm,s=a.div=e.lineDiv;function i(e){if(!ot(l,e)){if(l.somethingSelected())Ta({lineWise:!1,text:l.getSelections()}),"cut"==e.type&&l.replaceSelection("",null,"cut");else{if(!l.options.lineWiseCopyCut)return;var t=Na(l);Ta({lineWise:!0,text:t.text}),"cut"==e.type&&l.operation(function(){l.setSelections(t.ranges,0,j),l.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var i=Ca.text.join("\n");if(e.clipboardData.setData("Text",i),e.clipboardData.getData("Text")==i)return void e.preventDefault()}var r=Ia(),n=r.firstChild;l.display.lineSpace.insertBefore(r,l.display.lineSpace.firstChild),n.value=Ca.text.join("\n");var o=document.activeElement;z(n),setTimeout(function(){l.display.lineSpace.removeChild(r),o.focus(),o==s&&a.showPrimarySelection()},50)}}La(s,l.options.spellcheck),tt(s,"paste",function(e){ot(l,e)||Ea(e,l)||w<=11&&setTimeout(Ur(l,function(){return t.updateFromDOM()}),20)}),tt(s,"compositionstart",function(e){t.composing={data:e.data,done:!1}}),tt(s,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:!1})}),tt(s,"compositionend",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),tt(s,"touchstart",function(){return a.forceCompositionEnd()}),tt(s,"input",function(){t.composing||t.readFromDOMSoon()}),tt(s,"copy",i),tt(s,"cut",i)},za.prototype.prepareSelection=function(){var e=sr(this.cm,!1);return e.focus=this.cm.state.focused,e},za.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},za.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},za.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),r=i.from(),n=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||n.line<t.display.viewFrom)e.removeAllRanges();else{var o=Ba(t,e.anchorNode,e.anchorOffset),a=Ba(t,e.focusNode,e.focusOffset);if(!o||o.bad||!a||a.bad||0!=ve(be(o,a),r)||0!=ve(ye(o,a),n)){var l=t.display.view,s=r.line>=t.display.viewFrom&&Ra(t,r)||{node:l[0].measure.map[2],offset:0},c=n.line<t.display.viewTo&&Ra(t,n);if(!c){var d=l[l.length-1].measure,u=d.maps?d.maps[d.maps.length-1]:d.map;c={node:u[u.length-1],offset:u[u.length-2]-u[u.length-3]}}if(s&&c){var f,p=e.rangeCount&&e.getRangeAt(0);try{f=C(s.node,s.offset,c.offset,c.node)}catch(e){}f&&(!g&&t.state.focused?(e.collapse(s.node,s.offset),f.collapsed||(e.removeAllRanges(),e.addRange(f))):(e.removeAllRanges(),e.addRange(f)),p&&null==e.anchorNode?e.addRange(p):g&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},za.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},za.prototype.showMultipleSelections=function(e){E(this.cm.display.cursorDiv,e.cursors),E(this.cm.display.selectionDiv,e.selection)},za.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},za.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return L(this.div,t)},za.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},za.prototype.blur=function(){this.div.blur()},za.prototype.getField=function(){return this.div},za.prototype.supportsTouch=function(){return!0},za.prototype.receivedFocus=function(){var t=this;this.selectionInEditor()?this.pollSelection():$r(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))})},za.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},za.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(u&&a&&this.cm.options.gutters.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var i=Ba(t,e.anchorNode,e.anchorOffset),r=Ba(t,e.focusNode,e.focusOffset);i&&r&&$r(t,function(){Vn(t.doc,xn(i,r),j),(i.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}}},za.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,i,r=this.cm,n=r.display,o=r.doc.sel.primary(),a=o.from(),l=o.to();if(0==a.ch&&a.line>r.firstLine()&&(a=_e(a.line-1,se(r.doc,a.line-1).length)),l.ch==se(r.doc,l.line).text.length&&l.line<r.lastLine()&&(l=_e(l.line+1,0)),a.line<n.viewFrom||l.line>n.viewTo-1)return!1;i=a.line==n.viewFrom||0==(e=ar(r,a.line))?(t=fe(n.view[0].line),n.view[0].node):(t=fe(n.view[e].line),n.view[e-1].node.nextSibling);var s,c,d=ar(r,l.line);if(c=d==n.view.length-1?(s=n.viewTo-1,n.lineDiv.lastChild):(s=fe(n.view[d+1].line)-1,n.view[d+1].node.previousSibling),!i)return!1;for(var u=r.doc.splitLines(function(s,e,t,c,d){var i="",u=!1,f=s.doc.lineSeparator(),p=!1;function h(){u&&(i+=f,p&&(i+=f),u=p=!1)}function g(e){e&&(h(),i+=e)}function _(e){if(1==e.nodeType){var t=e.getAttribute("cm-text");if(t)return void g(t);var i,r=e.getAttribute("cm-marker");if(r){var n=s.findMarks(_e(c,0),_e(d+1,0),(l=+r,function(e){return e.id==l}));return void(n.length&&(i=n[0].find(0))&&g(ce(s.doc,i.from,i.to).join(f)))}if("false"==e.getAttribute("contenteditable"))return;var o=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;o&&h();for(var a=0;a<e.childNodes.length;a++)_(e.childNodes[a]);/^(pre|p)$/i.test(e.nodeName)&&(p=!0),o&&(u=!0)}else 3==e.nodeType&&g(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var l}for(;_(e),e!=t;)e=e.nextSibling,p=!1;return i}(r,i,c,t,s)),f=ce(r.doc,_e(t,0),_e(s,se(r.doc,s).text.length));1<u.length&&1<f.length;)if(Y(u)==Y(f))u.pop(),f.pop(),s--;else{if(u[0]!=f[0])break;u.shift(),f.shift(),t++}for(var p=0,h=0,g=u[0],_=f[0],v=Math.min(g.length,_.length);p<v&&g.charCodeAt(p)==_.charCodeAt(p);)++p;for(var m=Y(u),x=Y(f),y=Math.min(m.length-(1==u.length?p:0),x.length-(1==f.length?p:0));h<y&&m.charCodeAt(m.length-h-1)==x.charCodeAt(x.length-h-1);)++h;if(1==u.length&&1==f.length&&t==a.line)for(;p&&p>a.ch&&m.charCodeAt(m.length-h-1)==x.charCodeAt(x.length-h-1);)p--,h++;u[u.length-1]=m.slice(0,m.length-h).replace(/^\u200b+/,""),u[0]=u[0].slice(p).replace(/\u200b+$/,"");var b=_e(t,p),w=_e(s,f.length?Y(f).length-h:0);return 1<u.length||u[0]||ve(b,w)?(so(r.doc,u,b,w,"+input"),!0):void 0},za.prototype.ensurePolled=function(){this.forceCompositionEnd()},za.prototype.reset=function(){this.forceCompositionEnd()},za.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},za.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},za.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||$r(this.cm,function(){return Yr(e.cm)})},za.prototype.setUneditable=function(e){e.contentEditable="false"},za.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Ur(this.cm,Aa)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},za.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},za.prototype.onContextMenu=function(){},za.prototype.resetPosition=function(){},za.prototype.needsContentAttribute=!0;var Wa,Xa,Fa,ja=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new H,this.hasSelection=!1,this.composing=null};ja.prototype.init=function(t){var e=this,i=this,r=this.cm;this.createField(t);var n=this.textarea;function o(e){if(!ot(r,e)){if(r.somethingSelected())Ta({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var t=Na(r);Ta({lineWise:!0,text:t.text}),"cut"==e.type?r.setSelections(t.ranges,null,j):(i.prevInput="",n.value=t.text.join("\n"),z(n))}"cut"==e.type&&(r.state.cutIncoming=!0)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),d&&(n.style.width="0px"),tt(n,"input",function(){b&&9<=w&&e.hasSelection&&(e.hasSelection=null),i.poll()}),tt(n,"paste",function(e){ot(r,e)||Ea(e,r)||(r.state.pasteIncoming=!0,i.fastPoll())}),tt(n,"cut",o),tt(n,"copy",o),tt(t.scroller,"paste",function(e){yi(t,e)||ot(r,e)||(r.state.pasteIncoming=!0,i.focus())}),tt(t.lineSpace,"selectstart",function(e){yi(t,e)||ct(e)}),tt(n,"compositionstart",function(){var e=r.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:e,range:r.markText(e,r.getCursor("to"),{className:"CodeMirror-composing"})}}),tt(n,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},ja.prototype.createField=function(e){this.wrapper=Ia(),this.textarea=this.wrapper.firstChild},ja.prototype.prepareSelection=function(){var e=this.cm,t=e.display,i=e.doc,r=sr(e);if(e.options.moveInputWithCursor){var n=$i(e,i.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+a.top-o.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+a.left-o.left))}return r},ja.prototype.showSelection=function(e){var t=this.cm.display;E(t.cursorDiv,e.cursors),E(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},ja.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var i=t.getSelection();this.textarea.value=i,t.state.focused&&z(this.textarea),b&&9<=w&&(this.hasSelection=i)}else e||(this.prevInput=this.textarea.value="",b&&9<=w&&(this.hasSelection=null))}},ja.prototype.getField=function(){return this.textarea},ja.prototype.supportsTouch=function(){return!1},ja.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!f||I()!=this.textarea))try{this.textarea.focus()}catch(e){}},ja.prototype.blur=function(){this.textarea.blur()},ja.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ja.prototype.receivedFocus=function(){this.slowPoll()},ja.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},ja.prototype.fastPoll=function(){var t=!1,i=this;i.pollingFast=!0,i.polling.set(20,function e(){i.poll()||t?(i.pollingFast=!1,i.slowPoll()):(t=!0,i.polling.set(60,e))})},ja.prototype.poll=function(){var e=this,t=this.cm,i=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||wt(i)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var n=i.value;if(n==r&&!t.somethingSelected())return!1;if(b&&9<=w&&this.hasSelection===n||y&&/[\uf700-\uf7ff]/.test(n))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=n.charCodeAt(0);if(8203!=o||r||(r="\u200b"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var a=0,l=Math.min(r.length,n.length);a<l&&r.charCodeAt(a)==n.charCodeAt(a);)++a;return $r(t,function(){Aa(t,n.slice(a),r.length-a,null,e.composing?"*compose":null),1e3<n.length||-1<n.indexOf("\n")?i.value=e.prevInput="":e.prevInput=n,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ja.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ja.prototype.onKeyPress=function(){b&&9<=w&&(this.hasSelection=null),this.fastPoll()},ja.prototype.onContextMenu=function(e){var i=this,r=i.cm,n=r.display,o=i.textarea,t=or(r,e),a=n.scroller.scrollTop;if(t&&!_){r.options.resetSelectionOnContextMenu&&-1==r.doc.sel.contains(t)&&Ur(r,Vn)(r.doc,xn(t),j);var l=o.style.cssText,s=i.wrapper.style.cssText;i.wrapper.style.cssText="position: absolute";var c,d=i.wrapper.getBoundingClientRect();if(o.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-d.top-5)+"px; left: "+(e.clientX-d.left-5)+"px;\n      z-index: 1000; background: "+(b?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",x&&(c=window.scrollY),n.input.focus(),x&&window.scrollTo(null,c),n.input.reset(),r.somethingSelected()||(o.value=i.prevInput=" "),i.contextMenuPending=!0,n.selForContextMenu=r.doc.sel,clearTimeout(n.detectingSelectAll),b&&9<=w&&f(),k){ft(e);var u=function(){rt(window,"mouseup",u),setTimeout(p,20)};tt(window,"mouseup",u)}else setTimeout(p,50)}function f(){if(null!=o.selectionStart){var e=r.somethingSelected(),t="\u200b"+(e?o.value:"");o.value="\u21da",o.value=t,i.prevInput=e?"":"\u200b",o.selectionStart=1,o.selectionEnd=t.length,n.selForContextMenu=r.doc.sel}}function p(){if(i.contextMenuPending=!1,i.wrapper.style.cssText=s,o.style.cssText=l,b&&w<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=a),null!=o.selectionStart){(!b||b&&w<9)&&f();var e=0,t=function(){n.selForContextMenu==r.doc.sel&&0==o.selectionStart&&0<o.selectionEnd&&"\u200b"==i.prevInput?Ur(r,to)(r):e++<10?n.detectingSelectAll=setTimeout(t,500):(n.selForContextMenu=null,n.input.reset())};n.detectingSelectAll=setTimeout(t,200)}}},ja.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},ja.prototype.setUneditable=function(){},ja.prototype.needsContentAttribute=!1,function(n){var o=n.optionHandlers;function e(e,t,r,i){n.defaults[e]=t,r&&(o[e]=i?function(e,t,i){i!=_a&&r(e,t,i)}:r)}n.defineOption=e,n.Init=_a,e("value","",function(e,t){return e.setValue(t)},!0),e("mode",null,function(e,t){e.doc.modeOption=t,Sn(e)},!0),e("indentUnit",2,Sn,!0),e("indentWithTabs",!1),e("smartIndent",!0),e("tabSize",4,function(e){Cn(e),Bi(e),Yr(e)},!0),e("lineSeparator",null,function(e,r){if(e.doc.lineSep=r){var n=[],o=e.doc.first;e.doc.iter(function(e){for(var t=0;;){var i=e.text.indexOf(r,t);if(-1==i)break;t=i+r.length,n.push(_e(o,i))}o++});for(var t=n.length-1;0<=t;t--)so(e.doc,r,n[t],_e(n[t].line,n[t].ch+r.length))}}),e("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,i){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),i!=_a&&e.refresh()}),e("specialCharPlaceholder",Zt,function(e){return e.refresh()},!0),e("electricChars",!0),e("inputStyle",f?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),e("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),e("rtlMoveVisually",!h),e("wholeLineUpdateBefore",!0),e("theme","default",function(e){ga(e),xa(e)},!0),e("keyMap","default",function(e,t,i){var r=qo(t),n=i!=_a&&qo(i);n&&n.detach&&n.detach(e,r),r.attach&&r.attach(e,n||null)}),e("extraKeys",null),e("configureMouse",null),e("lineWrapping",!1,ba,!0),e("gutters",[],function(e){dn(e.options),xa(e)},!0),e("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?ir(e.display)+"px":"0",e.refresh()},!0),e("coverGutterNextToScrollbar",!1,function(e){return Or(e)},!0),e("scrollbarStyle","native",function(e){Pr(e),Or(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),e("lineNumbers",!1,function(e){dn(e.options),xa(e)},!0),e("firstLineNumber",1,xa,!0),e("lineNumberFormatter",function(e){return e},xa,!0),e("showCursorWhenSelecting",!1,lr,!0),e("resetSelectionOnContextMenu",!0),e("lineWiseCopyCut",!0),e("pasteLinesPerSelection",!0),e("readOnly",!1,function(e,t){"nocursor"==t&&(_r(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),e("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),e("dragDrop",!0,ya),e("allowDropFileTypes",null),e("cursorBlinkRate",530),e("cursorScrollMargin",0),e("cursorHeight",1,lr,!0),e("singleCursorHeightPerLine",!0,lr,!0),e("workTime",100),e("workDelay",100),e("flattenSpans",!0,Cn,!0),e("addModeClass",!1,Cn,!0),e("pollInterval",100),e("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),e("historyEventDelay",1250),e("viewportMargin",10,function(e){return e.refresh()},!0),e("maxHighlightLength",1e4,Cn,!0),e("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),e("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),e("autofocus",null),e("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0)}(wa),Xa=(Wa=wa).optionHandlers,Fa=Wa.helpers={},Wa.prototype={constructor:Wa,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var i=this.options,r=i[e];i[e]==t&&"mode"!=e||(i[e]=t,Xa.hasOwnProperty(e)&&Ur(this,Xa[e])(this,t,r),nt(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](qo(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,i=0;i<t.length;++i)if(t[i]==e||t[i].name==e)return t.splice(i,1),!0},addOverlay:Vr(function(e,t){var i=e.token?e:Wa.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");!function(e,t,i){for(var r=0,n=i(t);r<e.length&&i(e[r])<=n;)r++;e.splice(r,0,t)}(this.state.overlays,{mode:i,modeSpec:e,opaque:t&&t.opaque,priority:t&&t.priority||0},function(e){return e.priority}),this.state.modeGen++,Yr(this)}),removeOverlay:Vr(function(e){for(var t=this.state.overlays,i=0;i<t.length;++i){var r=t[i].modeSpec;if(r==e||"string"==typeof e&&r.name==e)return t.splice(i,1),this.state.modeGen++,void Yr(this)}}),indentLine:Vr(function(e,t,i){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),he(this.doc,e)&&Sa(this,e,t,i)}),indentSelection:Vr(function(e){for(var t=this.doc.sel.ranges,i=-1,r=0;r<t.length;r++){var n=t[r];if(n.empty())n.head.line>i&&(Sa(this,n.head.line,e,!0),i=n.head.line,r==this.doc.sel.primIndex&&Sr(this));else{var o=n.from(),a=n.to(),l=Math.max(i,o.line);i=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var s=l;s<i;++s)Sa(this,s,e);var c=this.doc.sel.ranges;0==o.ch&&t.length==c.length&&0<c[r].from().ch&&qn(this.doc,r,new vn(o,c[r].to()),j)}}}),getTokenAt:function(e,t){return qt(this,e,t)},getLineTokens:function(e,t){return qt(this,_e(e),t,!0)},getTokenTypeAt:function(e){e=ke(this.doc,e);var t,i=Bt(this,se(this.doc,e.line)),r=0,n=(i.length-1)/2,o=e.ch;if(0==o)t=i[2];else for(;;){var a=r+n>>1;if((a?i[2*a-1]:0)>=o)n=a;else{if(!(i[2*a+1]<o)){t=i[2*a+2];break}r=a+1}}var l=t?t.indexOf("overlay "):-1;return l<0?t:0==l?null:t.slice(0,l-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?Wa.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!Fa.hasOwnProperty(t))return i;var r=Fa[t],n=this.getModeAt(e);if("string"==typeof n[t])r[n[t]]&&i.push(r[n[t]]);else if(n[t])for(var o=0;o<n[t].length;o++){var a=r[n[t][o]];a&&i.push(a)}else n.helperType&&r[n.helperType]?i.push(r[n.helperType]):r[n.name]&&i.push(r[n.name]);for(var l=0;l<r._global.length;l++){var s=r._global[l];s.pred(n,this)&&-1==W(i,s.val)&&i.push(s.val)}return i},getStateAfter:function(e,t){var i=this.doc;return Ht(this,(e=we(i,null==e?i.first+i.size-1:e))+1,t).state},cursorCoords:function(e,t){var i=this.doc.sel.primary();return $i(this,null==e?i.head:"object"==typeof e?ke(this.doc,e):e?i.from():i.to(),t||"page")},charCoords:function(e,t){return qi(this,ke(this.doc,e),t||"page")},coordsChar:function(e,t){return Ki(this,(e=ji(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=ji(this,{top:e,left:0},t||"page").top,pe(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,i){var r,n=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:o<e&&(e=o,n=!0),r=se(this.doc,e)}else r=e;return Fi(this,r,{top:0,left:0},t||"page",i||n).top+(n?this.doc.height-Ve(r):0)},defaultTextHeight:function(){return Ji(this.display)},defaultCharWidth:function(){return er(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,i,r,n){var o,a,l,s=this.display,c=(e=$i(this,ke(this.doc,e))).bottom,d=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),"over"==r)c=e.top;else if("above"==r||"near"==r){var u=Math.max(s.wrapper.clientHeight,this.doc.height),f=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>u)&&e.top>t.offsetHeight?c=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=u&&(c=e.bottom),d+t.offsetWidth>f&&(d=f-t.offsetWidth)}t.style.top=c+"px",t.style.left=t.style.right="","right"==n?(d=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==n?d=0:"middle"==n&&(d=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=d+"px"),i&&(o=this,a={left:d,top:c,right:d+t.offsetWidth,bottom:c+t.offsetHeight},null!=(l=wr(o,a)).scrollTop&&Er(o,l.scrollTop),null!=l.scrollLeft&&Nr(o,l.scrollLeft))},triggerOnKeyDown:Vr(na),triggerOnKeyPress:Vr(aa),triggerOnKeyUp:oa,triggerOnMouseDown:Vr(da),execCommand:function(e){if(Yo.hasOwnProperty(e))return Yo[e].call(null,this)},triggerElectric:Vr(function(e){Ma(this,e)}),findPosH:function(e,t,i,r){var n=1;t<0&&(n=-1,t=-t);for(var o=ke(this.doc,e),a=0;a<t&&!(o=Da(this.doc,o,n,i,r)).hitSide;++a);return o},moveH:Vr(function(t,i){var r=this;this.extendSelectionsBy(function(e){return r.display.shift||r.doc.extend||e.empty()?Da(r.doc,e.head,t,i,r.options.rtlMoveVisually):t<0?e.from():e.to()},$)}),deleteH:Vr(function(i,r){var e=this.doc.sel,n=this.doc;e.somethingSelected()?n.replaceSelection("",null,"+delete"):$o(this,function(e){var t=Da(n,e.head,i,r,!1);return i<0?{from:t,to:e.head}:{from:e.head,to:t}})}),findPosV:function(e,t,i,r){var n=1,o=r;t<0&&(n=-1,t=-t);for(var a=ke(this.doc,e),l=0;l<t;++l){var s=$i(this,a,"div");if(null==o?o=s.left:s.left=o,(a=Oa(this,s,n,i)).hitSide)break}return a},moveV:Vr(function(r,n){var o=this,a=this.doc,l=[],s=!this.display.shift&&!a.extend&&a.sel.somethingSelected();if(a.extendSelectionsBy(function(e){if(s)return r<0?e.from():e.to();var t=$i(o,e.head,"div");null!=e.goalColumn&&(t.left=e.goalColumn),l.push(t.left);var i=Oa(o,t,r,n);return"page"==n&&e==a.sel.primary()&&kr(o,qi(o,i,"div").top-t.top),i},$),l.length)for(var e=0;e<a.sel.ranges.length;e++)a.sel.ranges[e].goalColumn=l[e]}),findWordAt:function(e){var t=se(this.doc,e.line).text,i=e.ch,r=e.ch;if(t){var n=this.getHelper(e,"wordChars");"before"!=e.sticky&&r!=t.length||!i?++r:--i;for(var o=t.charAt(i),a=te(o,n)?function(e){return te(e,n)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!te(e)};0<i&&a(t.charAt(i-1));)--i;for(;r<t.length&&a(t.charAt(r));)++r}return new vn(_e(e.line,i),_e(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?D(this.display.cursorDiv,"CodeMirror-overwrite"):T(this.display.cursorDiv,"CodeMirror-overwrite"),nt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==I()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Vr(function(e,t){Cr(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Si(this)-this.display.barHeight,width:e.scrollWidth-Si(this)-this.display.barWidth,clientHeight:Ti(this),clientWidth:Ci(this)}},scrollIntoView:Vr(function(e,t){var i,r;null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:_e(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?(r=e,Tr(i=this),i.curOp.scrollToPos=r):Ar(this,e.from,e.to,e.margin)}),setSize:Vr(function(e,t){var i=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&Pi(this);var n=this.display.viewFrom;this.doc.iter(n,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Gr(i,n,"widget");break}++n}),this.curOp.forceUpdate=!0,nt(this,"refresh",this)}),operation:function(e){return $r(this,e)},startOperation:function(){return Hr(this)},endOperation:function(){return Wr(this)},refresh:Vr(function(){var e=this.display.cachedTextHeight;Yr(this),this.curOp.forceUpdate=!0,Bi(this),Cr(this,this.doc.scrollLeft,this.doc.scrollTop),ln(this),(null==e||.5<Math.abs(e-Ji(this.display)))&&nr(this),nt(this,"refresh",this)}),swapDoc:Vr(function(e){var t=this.doc;return t.cm=null,Mn(this,e),Bi(this),this.display.input.reset(),Cr(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,li(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},st(Wa),Wa.registerHelper=function(e,t,i){Fa.hasOwnProperty(e)||(Fa[e]=Wa[e]={_global:[]}),Fa[e][t]=i},Wa.registerGlobalHelper=function(e,t,i,r){Wa.registerHelper(e,t,r),Fa[e]._global.push({pred:i,val:r})};var qa,$a="iter insert remove copy getEditor constructor".split(" ");for(var Ua in Co.prototype)Co.prototype.hasOwnProperty(Ua)&&W($a,Ua)<0&&(wa.prototype[Ua]=function(e){return function(){return e.apply(this.doc,arguments)}}(Co.prototype[Ua]));return st(Co),wa.inputStyles={textarea:ja,contenteditable:za},wa.defineMode=function(e){wa.defaults.mode||"null"==e||(wa.defaults.mode=e),function(e,t){2<arguments.length&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Ct[e]=t}.apply(this,arguments)},wa.defineMIME=function(e,t){Tt[e]=t},wa.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),wa.defineMIME("text/plain","null"),wa.defineExtension=function(e,t){wa.prototype[e]=t},wa.defineDocExtension=function(e,t){Co.prototype[e]=t},wa.fromTextArea=function(t,e){if((e=e?P(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var i=I();e.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}function r(){t.value=l.getValue()}var n;if(t.form&&(tt(t.form,"submit",r),!e.leaveSubmitMethodAlone)){var o=t.form;n=o.submit;try{var a=o.submit=function(){r(),o.submit=n,o.submit(),o.submit=a}}catch(e){}}e.finishInit=function(e){e.save=r,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,r(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(rt(t.form,"submit",r),"function"==typeof t.form.submit&&(t.form.submit=n))}},t.style.display="none";var l=wa(function(e){return t.parentNode.insertBefore(e,t.nextSibling)},e);return l},(qa=wa).off=rt,qa.on=tt,qa.wheelEventPixels=hn,qa.Doc=Co,qa.splitLines=bt,qa.countColumn=B,qa.findColumn=U,qa.isWordChar=ee,qa.Pass=F,qa.signal=nt,qa.Line=Vt,qa.changeEnd=yn,qa.scrollbarModel=Rr,qa.Pos=_e,qa.cmpPos=ve,qa.modes=Ct,qa.mimeModes=Tt,qa.resolveMode=At,qa.getMode=Et,qa.modeExtensions=Mt,qa.extendMode=Nt,qa.copyState=Lt,qa.startState=Dt,qa.innerMode=It,qa.commands=Yo,qa.keyMap=Po,qa.keyName=jo,qa.isModifierKey=Xo,qa.lookupKey=Wo,qa.normalizeKeyMap=Ho,qa.StringStream=Ot,qa.SharedTextMarker=bo,qa.TextMarker=xo,qa.LineWidget=_o,qa.e_preventDefault=ct,qa.e_stopPropagation=dt,qa.e_stop=ft,qa.addClass=D,qa.contains=L,qa.rmClass=T,qa.keyNames=Do,wa.version="5.39.2",wa}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(g){"use strict";g.multiplexingMode=function(f){var p=Array.prototype.slice.call(arguments,1);function h(e,t,i,r){if("string"==typeof t){var n=e.indexOf(t,i);return r&&-1<n?n+t.length:n}var o=t.exec(i?e.slice(i):e);return o?o.index+i+(r?o[0].length:0):-1}return{startState:function(){return{outer:g.startState(f),innerActive:null,inner:null}},copyState:function(e){return{outer:g.copyState(f,e.outer),innerActive:e.innerActive,inner:e.innerActive&&g.copyState(e.innerActive.mode,e.inner)}},token:function(e,t){if(t.innerActive){var i=t.innerActive;o=e.string;if(!i.close&&e.sol())return t.innerActive=t.inner=null,this.token(e,t);if((l=i.close?h(o,i.close,e.pos,i.parseDelimiters):-1)==e.pos&&!i.parseDelimiters)return e.match(i.close),t.innerActive=t.inner=null,i.delimStyle&&i.delimStyle+" "+i.delimStyle+"-close";-1<l&&(e.string=o.slice(0,l));var r=i.mode.token(e,t.inner);return-1<l&&(e.string=o),l==e.pos&&i.parseDelimiters&&(t.innerActive=t.inner=null),i.innerStyle&&(r=r?r+" "+i.innerStyle:i.innerStyle),r}for(var n=1/0,o=e.string,a=0;a<p.length;++a){var l,s=p[a];if((l=h(o,s.open,e.pos))==e.pos){s.parseDelimiters||e.match(s.open),t.innerActive=s;var c=0;if(f.indent){var d=f.indent(t.outer,"");d!==g.Pass&&(c=d)}return t.inner=g.startState(s.mode,c),s.delimStyle&&s.delimStyle+" "+s.delimStyle+"-open"}-1!=l&&l<n&&(n=l)}n!=1/0&&(e.string=o.slice(0,n));var u=f.token(e,t.outer);return n!=1/0&&(e.string=o),u},indent:function(e,t){var i=e.innerActive?e.innerActive.mode:f;return i.indent?i.indent(e.innerActive?e.inner:e.outer,t):g.Pass},blankLine:function(e){var t=e.innerActive?e.innerActive.mode:f;if(t.blankLine&&t.blankLine(e.innerActive?e.inner:e.outer),e.innerActive)"\n"===e.innerActive.close&&(e.innerActive=e.inner=null);else for(var i=0;i<p.length;++i){var r=p[i];"\n"===r.open&&(e.innerActive=r,e.inner=g.startState(r.mode,t.indent?t.indent(e.outer,""):0))}},electricChars:f.electricChars,innerMode:function(e){return e.inner?{state:e.inner,mode:e.innerActive.mode}:{state:e.outer,mode:f}}}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(k){"use strict";var S={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},C={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};k.defineMode("xml",function(e,t){var a,o,l=e.indentUnit,s={},i=t.htmlMode?S:C;for(var r in i)s[r]=i[r];for(var r in t)s[r]=t[r];function c(t,i){function e(e){return(i.tokenize=e)(t,i)}var r=t.next();return"<"==r?t.eat("!")?t.eat("[")?t.match("CDATA[")?e(n("atom","]]>")):null:t.match("--")?e(n("comment","--\x3e")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),e(function r(n){return function(e,t){for(var i;null!=(i=e.next());){if("<"==i)return t.tokenize=r(n+1),t.tokenize(e,t);if(">"==i){if(1!=n)return t.tokenize=r(n-1),t.tokenize(e,t);t.tokenize=c;break}}return"meta"}}(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),i.tokenize=n("meta","?>"),"meta"):(a=t.eat("/")?"closeTag":"openTag",i.tokenize=d,"tag bracket"):"&"!=r?(t.eatWhile(/[^&<]/),null):(t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"))?"atom":"error"}function d(e,t){var i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=c,a=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return a="equals",null;if("<"!=i)return/[\'\"]/.test(i)?(t.tokenize=(r=i,(n=function(e,t){for(;!e.eol();)if(e.next()==r){t.tokenize=d;break}return"string"}).isInAttribute=!0,n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word");t.tokenize=c,t.state=h,t.tagName=t.tagStart=null;var r,n,o=t.tokenize(e,t);return o?o+" tag error":"tag error"}function n(i,r){return function(e,t){for(;!e.eol();){if(e.match(r)){t.tokenize=c;break}e.next()}return i}}function u(e,t,i){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=i,(s.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function f(e){e.context&&(e.context=e.context.prev)}function p(e,t){for(var i;;){if(!e.context)return;if(i=e.context.tagName,!s.contextGrabbers.hasOwnProperty(i)||!s.contextGrabbers[i].hasOwnProperty(t))return;f(e)}}function h(e,t,i){return"openTag"==e?(i.tagStart=t.column(),g):"closeTag"==e?_:h}function g(e,t,i){return"word"==e?(i.tagName=t.current(),o="tag",x):s.allowMissingTagName&&"endTag"==e?(o="tag bracket",x(e,t,i)):(o="error",g)}function _(e,t,i){if("word"!=e)return s.allowMissingTagName&&"endTag"==e?(o="tag bracket",v(e,t,i)):(o="error",m);var r=t.current();return i.context&&i.context.tagName!=r&&s.implicitlyClosed.hasOwnProperty(i.context.tagName)&&f(i),i.context&&i.context.tagName==r||!1===s.matchClosing?(o="tag",v):(o="tag error",m)}function v(e,t,i){return"endTag"!=e?(o="error",v):(f(i),h)}function m(e,t,i){return o="error",v(e,0,i)}function x(e,t,i){if("word"==e)return o="attribute",y;if("endTag"!=e&&"selfcloseTag"!=e)return o="error",x;var r=i.tagName,n=i.tagStart;return i.tagName=i.tagStart=null,"selfcloseTag"==e||s.autoSelfClosers.hasOwnProperty(r)?p(i,r):(p(i,r),i.context=new u(i,r,n==i.indented)),h}function y(e,t,i){return"equals"==e?b:(s.allowMissing||(o="error"),x(e,0,i))}function b(e,t,i){return"string"==e?w:"word"==e&&s.allowUnquoted?(o="string",x):(o="error",x(e,0,i))}function w(e,t,i){return"string"==e?w:x(e,0,i)}return c.isInText=!0,{startState:function(e){var t={tokenize:c,state:h,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;a=null;var i=t.tokenize(e,t);return(i||a)&&"comment"!=i&&(o=null,t.state=t.state(a||i,e,t),o&&(i="error"==o?i+" error":o)),i},indent:function(e,t,i){var r=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+l;if(r&&r.noIndent)return k.Pass;if(e.tokenize!=d&&e.tokenize!=c)return i?i.match(/^(\s*)/)[0].length:0;if(e.tagName)return!1!==s.multilineTagIndentPastTag?e.tagStart+e.tagName.length+2:e.tagStart+l*(s.multilineTagIndentFactor||1);if(s.alignCDATA&&/<!\[CDATA\[/.test(t))return 0;var n=t&&/^<(\/)?([\w_:\.-]*)/.exec(t);if(n&&n[1])for(;r;){if(r.tagName==n[2]){r=r.prev;break}if(!s.implicitlyClosed.hasOwnProperty(r.tagName))break;r=r.prev}else if(n)for(;r;){var o=s.contextGrabbers[r.tagName];if(!o||!o.hasOwnProperty(n[2]))break;r=r.prev}for(;r&&r.prev&&!r.startOfLine;)r=r.prev;return r?r.indent+l:e.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:s.htmlMode?"html":"xml",helperType:s.htmlMode?"html":"xml",skipAttribute:function(e){e.state==b&&(e.state=x)}}}),k.defineMIME("text/xml","xml"),k.defineMIME("application/xml","xml"),k.mimeModes.hasOwnProperty("text/html")||k.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(Ve){"use strict";Ve.defineMode("javascript",function(e,u){var r,n,f=e.indentUnit,p=u.statementIndent,a=u.jsonld,l=u.json||a,c=u.typescript,d=u.wordCharacters||/[\w$\xa1-\uffff]/,s=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),i=e("keyword b"),r=e("keyword c"),n=e("keyword d"),o=e("operator"),a={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:i,do:i,try:i,finally:i,return:n,break:n,continue:n,new:e("new"),delete:r,void:r,throw:r,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:o,typeof:o,instanceof:o,true:a,false:a,null:a,undefined:a,NaN:a,Infinity:a,this:e("this"),class:e("class"),super:e("atom"),yield:r,export:e("export"),import:e("import"),extends:r,await:r}}(),h=/[+\-*&%=<>!?|~^@]/,g=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function _(e,t,i){return r=e,n=i,t}function v(e,t){var n,i=e.next();if('"'==i||"'"==i)return t.tokenize=(n=i,function(e,t){var i,r=!1;if(a&&"@"==e.peek()&&e.match(g))return t.tokenize=v,_("jsonld-keyword","meta");for(;null!=(i=e.next())&&(i!=n||r);)r=!r&&"\\"==i;return r||(t.tokenize=v),_("string","string")}),t.tokenize(e,t);if("."==i&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return _("number","number");if("."==i&&e.match(".."))return _("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(i))return _(i);if("="==i&&e.eat(">"))return _("=>","operator");if("0"==i&&e.match(/^(?:x[\da-f]+|o[0-7]+|b[01]+)n?/i))return _("number","number");if(/\d/.test(i))return e.match(/^\d*(?:n|(?:\.\d*)?(?:[eE][+\-]?\d+)?)?/),_("number","number");if("/"==i)return e.eat("*")?(t.tokenize=m)(e,t):e.eat("/")?(e.skipToEnd(),_("comment","comment")):Ue(e,t,1)?(function(e){for(var t,i=!1,r=!1;null!=(t=e.next());){if(!i){if("/"==t&&!r)return;"["==t?r=!0:r&&"]"==t&&(r=!1)}i=!i&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),_("regexp","string-2")):(e.eat("="),_("operator","operator",e.current()));if("`"==i)return(t.tokenize=x)(e,t);if("#"==i)return e.skipToEnd(),_("error","error");if(h.test(i))return">"==i&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=i&&"="!=i||e.eat("="):/[<>*+\-]/.test(i)&&(e.eat(i),">"==i&&e.eat(i))),_("operator","operator",e.current());if(d.test(i)){e.eatWhile(d);var r=e.current();if("."!=t.lastType){if(s.propertyIsEnumerable(r)){var o=s[r];return _(o.type,o.style,r)}if("async"==r&&e.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return _("async","keyword",r)}return _("variable","variable",r)}}function m(e,t){for(var i,r=!1;i=e.next();){if("/"==i&&r){t.tokenize=v;break}r="*"==i}return _("comment","comment")}function x(e,t){for(var i,r=!1;null!=(i=e.next());){if(!r&&("`"==i||"$"==i&&e.eat("{"))){t.tokenize=v;break}r=!r&&"\\"==i}return _("quasi","string-2",e.current())}var y="([{}])";function o(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var i=e.string.indexOf("=>",e.start);if(!(i<0)){if(c){var r=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,i));r&&(i=r.index)}for(var n=0,o=!1,a=i-1;0<=a;--a){var l=e.string.charAt(a),s=y.indexOf(l);if(0<=s&&s<3){if(!n){++a;break}if(0==--n){"("==l&&(o=!0);break}}else if(3<=s&&s<6)++n;else if(d.test(l))o=!0;else{if(/["'\/]/.test(l))return;if(o&&!n){++a;break}}}o&&!n&&(t.fatArrowAt=a)}}var b={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function w(e,t,i,r,n,o){this.indented=e,this.column=t,this.type=i,this.prev=n,this.info=o,null!=r&&(this.align=r)}function k(e,t){for(var i=e.localVars;i;i=i.next)if(i.name==t)return!0;for(var r=e.context;r;r=r.prev)for(i=r.vars;i;i=i.next)if(i.name==t)return!0}var S={state:null,column:null,marked:null,cc:null};function C(){for(var e=arguments.length-1;0<=e;e--)S.cc.push(arguments[e])}function T(){return C.apply(null,arguments),!0}function A(e,t){for(var i=t;i;i=i.next)if(i.name==e)return!0;return!1}function i(e){var t=S.state;if(S.marked="def",t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var i=function e(t,i){{if(i){if(i.block){var r=e(t,i.prev);return r?r==i.prev?i:new M(r,i.vars,!0):null}return A(t,i.vars)?i:new M(i.prev,new N(t,i.vars),!1)}return null}}(e,t.context);if(null!=i)return void(t.context=i)}else if(!A(e,t.localVars))return void(t.localVars=new N(e,t.localVars));u.globalVars&&!A(e,t.globalVars)&&(t.globalVars=new N(e,t.globalVars))}function E(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function M(e,t,i){this.prev=e,this.vars=t,this.block=i}function N(e,t){this.name=e,this.next=t}var t=new N("this",new N("arguments",null));function L(){S.state.context=new M(S.state.context,S.state.localVars,!1),S.state.localVars=t}function I(){S.state.context=new M(S.state.context,S.state.localVars,!0),S.state.localVars=null}function D(){S.state.localVars=S.state.context.vars,S.state.context=S.state.context.prev}function O(r,n){var e=function(){var e=S.state,t=e.indented;if("stat"==e.lexical.type)t=e.lexical.indented;else for(var i=e.lexical;i&&")"==i.type&&i.align;i=i.prev)t=i.indented;e.lexical=new w(t,S.stream.column(),r,null,e.lexical,n)};return e.lex=!0,e}function z(){var e=S.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function R(i){return function e(t){return t==i?T():";"==i||"}"==t||")"==t||"]"==t?C():T(e)}}function P(e,t){return"var"==e?T(O("vardef",t),ve,R(";"),z):"keyword a"==e?T(O("form"),X,P,z):"keyword b"==e?T(O("form"),P,z):"keyword d"==e?S.stream.match(/^\s*$/,!1)?T():T(O("stat"),j,R(";"),z):"debugger"==e?T(R(";")):"{"==e?T(O("}"),I,oe,z,D):";"==e?T():"if"==e?("else"==S.state.lexical.info&&S.state.cc[S.state.cc.length-1]==z&&S.state.cc.pop()(),T(O("form"),X,P,z,ke)):"function"==e?T(Me):"for"==e?T(O("form"),Se,P,z):"class"==e||c&&"interface"==t?(S.marked="keyword",T(O("form"),Ie,z)):"variable"==e?c&&"declare"==t?(S.marked="keyword",T(P)):c&&("module"==t||"enum"==t||"type"==t)&&S.stream.match(/^\s*\w/,!1)?(S.marked="keyword","enum"==t?T(qe):"type"==t?T(ce,R("operator"),ce,R(";")):T(O("form"),me,R("{"),O("}"),oe,z,z)):c&&"namespace"==t?(S.marked="keyword",T(O("form"),H,oe,z)):c&&"abstract"==t?(S.marked="keyword",T(P)):T(O("stat"),Z):"switch"==e?T(O("form"),X,R("{"),O("}","switch"),I,oe,z,z,D):"case"==e?T(H,R(":")):"default"==e?T(R(":")):"catch"==e?T(O("form"),L,B,P,z,D):"export"==e?T(O("stat"),Re,z):"import"==e?T(O("stat"),Be,z):"async"==e?T(P):"@"==t?T(H,P):C(O("stat"),H,R(";"),z)}function B(e){if("("==e)return T(Ne,R(")"))}function H(e,t){return F(e,t,!1)}function W(e,t){return F(e,t,!0)}function X(e){return"("!=e?C():T(O(")"),H,R(")"),z)}function F(e,t,i){if(S.state.fatArrowAt==S.stream.start){var r=i?Y:K;if("("==e)return T(L,O(")"),re(Ne,")"),z,R("=>"),r,D);if("variable"==e)return C(L,me,R("=>"),r,D)}var n,o=i?$:q;return b.hasOwnProperty(e)?T(o):"function"==e?T(Me,o):"class"==e||c&&"interface"==t?(S.marked="keyword",T(O("form"),Le,z)):"keyword c"==e||"async"==e?T(i?W:H):"("==e?T(O(")"),j,R(")"),z,o):"operator"==e||"spread"==e?T(i?W:H):"["==e?T(O("]"),je,z,o):"{"==e?ne(ee,"}",null,o):"quasi"==e?C(U,o):"new"==e?T((n=i,function(e){return"."==e?T(n?Q:G):"variable"==e&&c?T(he,n?$:q):C(n?W:H)})):"import"==e?T(H):T()}function j(e){return e.match(/[;\}\)\],]/)?C():C(H)}function q(e,t){return","==e?T(H):$(e,t,!1)}function $(e,t,i){var r=0==i?q:$,n=0==i?H:W;return"=>"==e?T(L,i?Y:K,D):"operator"==e?/\+\+|--/.test(t)||c&&"!"==t?T(r):c&&"<"==t&&S.stream.match(/^([^>]|<.*?>)*>\s*\(/,!1)?T(O(">"),re(ce,">"),z,r):"?"==t?T(H,R(":"),n):T(n):"quasi"==e?C(U,r):";"!=e?"("==e?ne(W,")","call",r):"."==e?T(J,r):"["==e?T(O("]"),j,R("]"),z,r):c&&"as"==t?(S.marked="keyword",T(ce,r)):"regexp"==e?(S.state.lastType=S.marked="operator",S.stream.backUp(S.stream.pos-S.stream.start-1),T(n)):void 0:void 0}function U(e,t){return"quasi"!=e?C():"${"!=t.slice(t.length-2)?T(U):T(H,V)}function V(e){if("}"==e)return S.marked="string-2",S.state.tokenize=x,T(U)}function K(e){return o(S.stream,S.state),C("{"==e?P:H)}function Y(e){return o(S.stream,S.state),C("{"==e?P:W)}function G(e,t){if("target"==t)return S.marked="keyword",T(q)}function Q(e,t){if("target"==t)return S.marked="keyword",T($)}function Z(e){return":"==e?T(z,P):C(q,R(";"),z)}function J(e){if("variable"==e)return S.marked="property",T()}function ee(e,t){if("async"==e)return S.marked="property",T(ee);if("variable"==e||"keyword"==S.style){return S.marked="property","get"==t||"set"==t?T(te):(c&&S.state.fatArrowAt==S.stream.start&&(i=S.stream.match(/^\s*:\s*/,!1))&&(S.state.fatArrowAt=S.stream.pos+i[0].length),T(ie));var i}else{if("number"==e||"string"==e)return S.marked=a?"property":S.style+" property",T(ie);if("jsonld-keyword"==e)return T(ie);if(c&&E(t))return S.marked="keyword",T(ee);if("["==e)return T(H,ae,R("]"),ie);if("spread"==e)return T(W,ie);if("*"==t)return S.marked="keyword",T(ee);if(":"==e)return C(ie)}}function te(e){return"variable"!=e?C(ie):(S.marked="property",T(Me))}function ie(e){return":"==e?T(W):"("==e?C(Me):void 0}function re(r,n,o){function a(e,t){if(o?-1<o.indexOf(e):","==e){var i=S.state.lexical;return"call"==i.info&&(i.pos=(i.pos||0)+1),T(function(e,t){return e==n||t==n?C():C(r)},a)}return e==n||t==n?T():T(R(n))}return function(e,t){return e==n||t==n?T():C(r,a)}}function ne(e,t,i){for(var r=3;r<arguments.length;r++)S.cc.push(arguments[r]);return T(O(t,i),re(e,t),z)}function oe(e){return"}"==e?T():C(P,oe)}function ae(e,t){if(c){if(":"==e)return T(ce);if("?"==t)return T(ae)}}function le(e){if(c&&":"==e)return S.stream.match(/^\s*\w+\s+is\b/,!1)?T(H,se,ce):T(ce)}function se(e,t){if("is"==t)return S.marked="keyword",T()}function ce(e,t){return"keyof"==t||"typeof"==t?(S.marked="keyword",T("keyof"==t?ce:W)):"variable"==e||"void"==t?(S.marked="type",T(pe)):"string"==e||"number"==e||"atom"==e?T(pe):"["==e?T(O("]"),re(ce,"]",","),z,pe):"{"==e?T(O("}"),re(ue,"}",",;"),z,pe):"("==e?T(re(fe,")"),de):"<"==e?T(re(ce,">"),ce):void 0}function de(e){if("=>"==e)return T(ce)}function ue(e,t){return"variable"==e||"keyword"==S.style?(S.marked="property",T(ue)):"?"==t?T(ue):":"==e?T(ce):"["==e?T(H,ae,R("]"),ue):void 0}function fe(e,t){return"variable"==e&&S.stream.match(/^\s*[?:]/,!1)||"?"==t?T(fe):":"==e?T(ce):C(ce)}function pe(e,t){return"<"==t?T(O(">"),re(ce,">"),z,pe):"|"==t||"."==e||"&"==t?T(ce):"["==e?T(R("]"),pe):"extends"==t||"implements"==t?(S.marked="keyword",T(ce)):void 0}function he(e,t){if("<"==t)return T(O(">"),re(ce,">"),z,pe)}function ge(){return C(ce,_e)}function _e(e,t){if("="==t)return T(ce)}function ve(e,t){return"enum"==t?(S.marked="keyword",T(qe)):C(me,ae,be,we)}function me(e,t){return c&&E(t)?(S.marked="keyword",T(me)):"variable"==e?(i(t),T()):"spread"==e?T(me):"["==e?ne(ye,"]"):"{"==e?ne(xe,"}"):void 0}function xe(e,t){return"variable"!=e||S.stream.match(/^\s*:/,!1)?("variable"==e&&(S.marked="property"),"spread"==e?T(me):"}"==e?C():T(R(":"),me,be)):(i(t),T(be))}function ye(){return C(me,be)}function be(e,t){if("="==t)return T(W)}function we(e){if(","==e)return T(ve)}function ke(e,t){if("keyword b"==e&&"else"==t)return T(O("form","else"),P,z)}function Se(e,t){return"await"==t?T(Se):"("==e?T(O(")"),Ce,R(")"),z):void 0}function Ce(e){return"var"==e?T(ve,R(";"),Ae):";"==e?T(Ae):"variable"==e?T(Te):C(H,R(";"),Ae)}function Te(e,t){return"in"==t||"of"==t?(S.marked="keyword",T(H)):T(q,Ae)}function Ae(e,t){return";"==e?T(Ee):"in"==t||"of"==t?(S.marked="keyword",T(H)):C(H,R(";"),Ee)}function Ee(e){")"!=e&&T(H)}function Me(e,t){return"*"==t?(S.marked="keyword",T(Me)):"variable"==e?(i(t),T(Me)):"("==e?T(L,O(")"),re(Ne,")"),z,le,P,D):c&&"<"==t?T(O(">"),re(ge,">"),z,Me):void 0}function Ne(e,t){return"@"==t&&T(H,Ne),"spread"==e?T(Ne):c&&E(t)?(S.marked="keyword",T(Ne)):C(me,ae,be)}function Le(e,t){return"variable"==e?Ie(e,t):De(e,t)}function Ie(e,t){if("variable"==e)return i(t),T(De)}function De(e,t){return"<"==t?T(O(">"),re(ge,">"),z,De):"extends"==t||"implements"==t||c&&","==e?("implements"==t&&(S.marked="keyword"),T(c?ce:H,De)):"{"==e?T(O("}"),Oe,z):void 0}function Oe(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||c&&E(t))&&S.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(S.marked="keyword",T(Oe)):"variable"==e||"keyword"==S.style?(S.marked="property",T(c?ze:Me,Oe)):"["==e?T(H,ae,R("]"),c?ze:Me,Oe):"*"==t?(S.marked="keyword",T(Oe)):";"==e?T(Oe):"}"==e?T():"@"==t?T(H,Oe):void 0}function ze(e,t){return"?"==t?T(ze):":"==e?T(ce,be):"="==t?T(W):C(Me)}function Re(e,t){return"*"==t?(S.marked="keyword",T(Fe,R(";"))):"default"==t?(S.marked="keyword",T(H,R(";"))):"{"==e?T(re(Pe,"}"),Fe,R(";")):C(P)}function Pe(e,t){return"as"==t?(S.marked="keyword",T(R("variable"))):"variable"==e?C(W,Pe):void 0}function Be(e){return"string"==e?T():"("==e?C(H):C(He,We,Fe)}function He(e,t){return"{"==e?ne(He,"}"):("variable"==e&&i(t),"*"==t&&(S.marked="keyword"),T(Xe))}function We(e){if(","==e)return T(He,We)}function Xe(e,t){if("as"==t)return S.marked="keyword",T(He)}function Fe(e,t){if("from"==t)return S.marked="keyword",T(H)}function je(e){return"]"==e?T():C(re(W,"]"))}function qe(){return C(O("form"),me,R("{"),O("}"),re($e,"}"),z,z)}function $e(){return C(me,be)}function Ue(e,t,i){return t.tokenize==v&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(i||0)))}return z.lex=D.lex=!0,{startState:function(e){var t={tokenize:v,lastType:"sof",cc:[],lexical:new w((e||0)-f,0,"block",!1),localVars:u.localVars,context:u.localVars&&new M(null,null,!1),indented:e||0};return u.globalVars&&"object"==typeof u.globalVars&&(t.globalVars=u.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),o(e,t)),t.tokenize!=m&&e.eatSpace())return null;var i=t.tokenize(e,t);return"comment"==r?i:(t.lastType="operator"!=r||"++"!=n&&"--"!=n?r:"incdec",function(e,t,i,r,n){var o=e.cc;for(S.state=e,S.stream=n,S.marked=null,S.cc=o,S.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((o.length?o.pop():l?H:P)(i,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return S.marked?S.marked:"variable"==i&&k(e,r)?"variable-2":t}}(t,i,r,n,e))},indent:function(e,t){if(e.tokenize==m)return Ve.Pass;if(e.tokenize!=v)return 0;var i,r=t&&t.charAt(0),n=e.lexical;if(!/^\s*else\b/.test(t))for(var o=e.cc.length-1;0<=o;--o){var a=e.cc[o];if(a==z)n=n.prev;else if(a!=ke)break}for(;("stat"==n.type||"form"==n.type)&&("}"==r||(i=e.cc[e.cc.length-1])&&(i==q||i==$)&&!/^[,\.=+\-*:?[\(]/.test(t));)n=n.prev;p&&")"==n.type&&"stat"==n.prev.type&&(n=n.prev);var l,s,c=n.type,d=r==c;return"vardef"==c?n.indented+("operator"==e.lastType||","==e.lastType?n.info.length+1:0):"form"==c&&"{"==r?n.indented:"form"==c?n.indented+f:"stat"==c?n.indented+(s=t,"operator"==(l=e).lastType||","==l.lastType||h.test(s.charAt(0))||/[,.]/.test(s.charAt(0))?p||f:0):"switch"!=n.info||d||0==u.doubleIndentSwitch?n.align?n.column+(d?0:1):n.indented+(d?0:f):n.indented+(/^(?:case|default)\b/.test(t)?f:2*f)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:l?null:"/*",blockCommentEnd:l?null:"*/",blockCommentContinue:l?null:" * ",lineComment:l?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:l?"json":"javascript",jsonldMode:a,jsonMode:l,expressionAllowed:Ue,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=H&&t!=W||e.cc.pop()}}}),Ve.registerHelper("wordChars","javascript",/[\w$]/),Ve.defineMIME("text/javascript","javascript"),Ve.defineMIME("text/ecmascript","javascript"),Ve.defineMIME("application/javascript","javascript"),Ve.defineMIME("application/x-javascript","javascript"),Ve.defineMIME("application/ecmascript","javascript"),Ve.defineMIME("application/json",{name:"javascript",json:!0}),Ve.defineMIME("application/x-json",{name:"javascript",json:!0}),Ve.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),Ve.defineMIME("text/typescript",{name:"javascript",typescript:!0}),Ve.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}(function(h){"use strict";var n={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};var o={};function g(e,t){var i,r=e.match(o[i=t]||(o[i]=new RegExp("\\s+"+i+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*")));return r?/^\s*(.*?)\s*$/.exec(r[2])[1]:""}function _(e,t){return new RegExp((t?"^":"")+"</s*"+e+"s*>","i")}function a(e,t){for(var i in e)for(var r=t[i]||(t[i]=[]),n=e[i],o=n.length-1;0<=o;o--)r.unshift(n[o])}h.defineMode("htmlmixed",function(d,e){var u=h.getMode(d,{name:"xml",htmlMode:!0,multilineTagIndentFactor:e.multilineTagIndentFactor,multilineTagIndentPastTag:e.multilineTagIndentPastTag}),f={},t=e&&e.tags,i=e&&e.scriptTypes;if(a(n,f),t&&a(t,f),i)for(var r=i.length-1;0<=r;r--)f.script.unshift(["type",i[r].matches,i[r].mode]);function p(e,t){var i,r=u.token(e,t.htmlState),n=/\btag\b/.test(r);if(n&&!/[<>\s\/]/.test(e.current())&&(i=t.htmlState.tagName&&t.htmlState.tagName.toLowerCase())&&f.hasOwnProperty(i))t.inTag=i+" ";else if(t.inTag&&n&&/>$/.test(e.current())){var o=/^([\S]+) (.*)/.exec(t.inTag);t.inTag=null;var a=">"==e.current()&&function(e,t){for(var i=0;i<e.length;i++){var r=e[i];if(!r[0]||r[1].test(g(t,r[0])))return r[2]}}(f[o[1]],o[2]),l=h.getMode(d,a),s=_(o[1],!0),c=_(o[1],!1);t.token=function(e,t){return e.match(s,!1)?(t.token=p,t.localState=t.localMode=null,null):(i=e,r=c,n=t.localMode.token(e,t.localState),o=i.current(),-1<(a=o.search(r))?i.backUp(o.length-a):o.match(/<\/?$/)&&(i.backUp(o.length),i.match(r,!1)||i.match(o)),n);var i,r,n,o,a},t.localMode=l,t.localState=h.startState(l,u.indent(t.htmlState,""))}else t.inTag&&(t.inTag+=e.current(),e.eol()&&(t.inTag+=" "));return r}return{startState:function(){return{token:p,inTag:null,localMode:null,localState:null,htmlState:h.startState(u)}},copyState:function(e){var t;return e.localState&&(t=h.copyState(e.localMode,e.localState)),{token:e.token,inTag:e.inTag,localMode:e.localMode,localState:t,htmlState:h.copyState(u,e.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(e,t,i){return!e.localMode||/^\s*<\//.test(t)?u.indent(e.htmlState,t):e.localMode.indent?e.localMode.indent(e.localState,t,i):h.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||u}}}},"xml","javascript","css"),h.defineMIME("text/html","htmlmixed")}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../../addon/mode/multiplex")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../../addon/mode/multiplex"],e):e(CodeMirror)}(function(r){"use strict";r.defineMode("htmlembedded",function(e,t){var i=t.closeComment||"--%>";return r.multiplexingMode(r.getMode(e,"htmlmixed"),{open:t.openComment||"<%--",close:i,delimStyle:"comment",mode:{token:function(e){return e.skipTo(i)||e.skipToEnd(),"comment"}}},{open:t.open||t.scriptStartRegex||"<%",close:t.close||t.scriptEndRegex||"%>",mode:r.getMode(e,t.scriptingModeSpec)})},"htmlmixed"),r.defineMIME("application/x-ejs",{name:"htmlembedded",scriptingModeSpec:"javascript"}),r.defineMIME("application/x-aspx",{name:"htmlembedded",scriptingModeSpec:"text/x-csharp"}),r.defineMIME("application/x-jsp",{name:"htmlembedded",scriptingModeSpec:"text/x-java"}),r.defineMIME("application/x-erb",{name:"htmlembedded",scriptingModeSpec:"ruby"})}),define("gallery/mx-codemirror/index",["magix","$"],function(e,t,i){t.__esModule=!0;var r=e("magix"),n=e("$");r.default.applyStyle("po",'.CodeMirror{font-family:monospace;height:300px;color:#000;direction:ltr;height:500px;border:1px solid #e6e6e6;border-radius:4px}.CodeMirror-lines{padding:4px 0}.CodeMirror pre{padding:0 4px}.CodeMirror-gutter-filler,.CodeMirror-scrollbar-filler{background-color:#fff}.CodeMirror-gutters{border-right:1px solid #ddd;background-color:#f7f7f7;white-space:nowrap}.CodeMirror-linenumber{padding:0 3px 0 5px;min-width:20px;text-align:right;color:#999;white-space:nowrap}.CodeMirror-guttermarker{color:#000}.CodeMirror-guttermarker-subtle{color:#999}.CodeMirror-cursor{border-left:1px solid #000;border-right:none;width:0}.CodeMirror div.CodeMirror-secondarycursor{border-left:1px solid silver}.cm-fat-cursor .CodeMirror-cursor{width:auto;border:0!important;background:#7e7}.cm-fat-cursor div.CodeMirror-cursors{z-index:1}.cm-fat-cursor-mark{background-color:rgba(20,255,20,.5)}.cm-animate-fat-cursor,.cm-fat-cursor-mark{-webkit-animation:blink 1.06s steps(1) infinite;animation:blink 1.06s steps(1) infinite}.cm-animate-fat-cursor{width:auto;border:0;background-color:#7e7}@-webkit-keyframes blink{50%{background-color:transparent}}@keyframes blink{50%{background-color:transparent}}.cm-tab{display:inline-block;text-decoration:inherit}.CodeMirror-rulers{position:absolute;left:0;right:0;top:-50px;bottom:-20px;overflow:hidden}.CodeMirror-ruler{border-left:1px solid #ccc;top:0;bottom:0;position:absolute}.cm-s-default .cm-header{color:#00f}.cm-s-default .cm-quote{color:#090}.cm-negative{color:#d44}.cm-positive{color:#292}.cm-header,.cm-strong{font-weight:700}.cm-em{font-style:italic}.cm-link{text-decoration:underline}.cm-strikethrough{text-decoration:line-through}.cm-s-default .cm-keyword{color:#708}.cm-s-default .cm-atom{color:#219}.cm-s-default .cm-number{color:#164}.cm-s-default .cm-def{color:#00f}.cm-s-default .cm-variable-2{color:#05a}.cm-s-default .cm-type,.cm-s-default .cm-variable-3{color:#085}.cm-s-default .cm-comment{color:#a50}.cm-s-default .cm-string{color:#a11}.cm-s-default .cm-string-2{color:#f50}.cm-s-default .cm-meta,.cm-s-default .cm-qualifier{color:#555}.cm-s-default .cm-builtin{color:#30a}.cm-s-default .cm-bracket{color:#997}.cm-s-default .cm-tag{color:#170}.cm-s-default .cm-attribute{color:#00c}.cm-s-default .cm-hr{color:#999}.cm-s-default .cm-link{color:#00c}.cm-invalidchar,.cm-s-default .cm-error{color:red}.CodeMirror-composing{border-bottom:2px solid}div.CodeMirror span.CodeMirror-matchingbracket{color:#0b0}div.CodeMirror span.CodeMirror-nonmatchingbracket{color:#a22}.CodeMirror-matchingtag{background:rgba(255,150,0,.3)}.CodeMirror-activeline-background{background:#e8f2ff}.CodeMirror{position:relative;overflow:hidden;background:#fff}.CodeMirror-scroll{overflow:scroll!important;margin-bottom:-30px;margin-right:-30px;padding-bottom:30px;height:100%;outline:none;position:relative}.CodeMirror-sizer{position:relative;border-right:30px solid transparent}.CodeMirror-gutter-filler,.CodeMirror-hscrollbar,.CodeMirror-scrollbar-filler,.CodeMirror-vscrollbar{position:absolute;z-index:6;display:none}.CodeMirror-vscrollbar{right:0;top:0;overflow-x:hidden;overflow-y:scroll}.CodeMirror-hscrollbar{bottom:0;left:0;overflow-y:hidden;overflow-x:scroll}.CodeMirror-scrollbar-filler{right:0;bottom:0}.CodeMirror-gutter-filler{left:0;bottom:0}.CodeMirror-gutters{position:absolute;left:0;top:0;min-height:100%;z-index:3}.CodeMirror-gutter{white-space:normal;height:100%;display:inline-block;vertical-align:top;margin-bottom:-30px}.CodeMirror-gutter-wrapper{position:absolute;z-index:4;background:none!important;border:none!important}.CodeMirror-gutter-background{position:absolute;top:0;bottom:0;z-index:4}.CodeMirror-gutter-elt{position:absolute;cursor:default;z-index:4}.CodeMirror-gutter-wrapper ::selection{background-color:transparent}.CodeMirror-gutter-wrapper ::-moz-selection{background-color:transparent}.CodeMirror-lines{cursor:text;min-height:1px}.CodeMirror pre{border-radius:0;border-width:0;background:transparent;font-family:inherit;font-size:inherit;margin:0;white-space:pre;word-wrap:normal;line-height:inherit;color:inherit;z-index:2;position:relative;overflow:visible;-webkit-tap-highlight-color:transparent;-webkit-font-variant-ligatures:contextual;font-variant-ligatures:contextual}.CodeMirror-wrap pre{word-wrap:break-word;white-space:pre-wrap;word-break:normal}.CodeMirror-linebackground{position:absolute;left:0;right:0;top:0;bottom:0;z-index:0}.CodeMirror-linewidget{position:relative;z-index:2;padding:.1px}.CodeMirror-rtl pre{direction:rtl}.CodeMirror-code{outline:none}.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber,.CodeMirror-scroll,.CodeMirror-sizer{box-sizing:content-box}.CodeMirror-measure{position:absolute;width:100%;height:0;overflow:hidden;visibility:hidden}.CodeMirror-cursor{position:absolute;pointer-events:none}.CodeMirror-measure pre{position:static}div.CodeMirror-cursors{visibility:hidden;position:relative;z-index:3}.CodeMirror-focused div.CodeMirror-cursors,div.CodeMirror-dragcursors{visibility:visible}.CodeMirror-selected{background:#d9d9d9}.CodeMirror-focused .CodeMirror-selected{background:#d7d4f0}.CodeMirror-crosshair{cursor:crosshair}.CodeMirror-line::selection,.CodeMirror-line>span::selection,.CodeMirror-line>span>span::selection{background:#d7d4f0}.CodeMirror-line::-moz-selection,.CodeMirror-line>span::-moz-selection,.CodeMirror-line>span>span::-moz-selection{background:#d7d4f0}.cm-searching{background-color:#ffa;background-color:rgba(255,255,0,.4)}.cm-force-border{padding-right:.1px}@media print{.CodeMirror div.CodeMirror-cursors{visibility:hidden}}.cm-tab-wrap-hack:after{content:""}span.CodeMirror-selectedtext{background:none}.CodeMirror:hover{border-color:#ccc}.CodeMirror-focus,.CodeMirror-focus:hover{border-color:#06f}'),t.default=r.default.View.extend({render:function(){var t=CodeMirror.fromTextArea(r.default.node(this.id),{lineNumbers:!0,mode:"application/x-ejs",lineWrapping:!0}),i=n.default("#"+this.id);t.on("blur",function(e){n.default(t.display.wrapper).removeClass("CodeMirror-focus"),i.trigger({type:"change",value:e.getValue()})}),t.on("focus",function(){n.default(t.display.wrapper).addClass("CodeMirror-focus")}),this.on("destroy",function(){t.toTextArea()})}})}),define("gallery/mx-dialog/alert",["magix","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix"),n=e("../../i18n/index");i.exports=r.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.title,d=e.body,u=e.i18n;return s+='<div mxa="py:_" class="pK"><h4>'+r(c)+'</h4></div><div mxa="py:a" class="pL" style="word-break:break-all;">'+r(d)+'</div><div mxa="py:b" class="pM pw"><button mxa="py:c" mx-click="'+t+'\x1e__Q();" class="pz pA pq" type="button">'+r(u("_fG"))+"</button></div>"},init:function(e){this.__fB=e.dialog,this.__fC=e.body,this.__fD=e.title||n.default("__fE"),this.__fF=e.enterCallback},render:function(){this.updater.digest({body:this.__fC,title:this.__fD})},"__Q<click>":function(){this.__fB.close(),this.__fF&&r.toTry(this.__fF)}})}),define("gallery/mx-dialog/confirm",["magix","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix"),n=e("../../i18n/index");i.exports=r.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.title,d=e.body,u=e.i18n;return s+='<div mxa="pz:_" class="pK"><h4>'+r(c)+'</h4></div><div mxa="pz:a" class="pL" style="word-break:break-all;">'+r(d)+'</div><div mxa="pz:b" class="pM pw"><button mxa="pz:c" type="button" mx-click="'+t+'\x1e__R()" class="pz pq">'+r(u("_T"))+'</button><button mxa="pz:d" type="button" mx-click="'+t+'\x1e__Q()" class="pz pA pd pq">'+r(u("_fG"))+"</button></div>"},init:function(e){this.__fB=e.dialog,this.__fC=e.body,this.__fD=e.title||n.default("__fE"),this.__fF=e.enterCallback,this.__fH=e.cancelCallback},render:function(){this.updater.digest({body:this.__fC,title:this.__fD})},"__Q<click>":function(){this.__fB.close(),this.__fF&&r.toTry(this.__fF)},"__R<click>":function(){this.__fB.close(),this.__fH&&r.toTry(this.__fH)}})}),define("gallery/mx-dialog/index",["magix","$","./alert","./confirm"],function(e,t,i){var s=e("magix");e("./alert"),e("./confirm"),s.applyStyle("pp",".pbV{position:absolute}.pbW{position:relative;background-color:#fff;border-radius:4px;border:1px solid #e6e6e6}.pbX{position:absolute;cursor:pointer;opacity:.2;z-index:1;top:7px;right:10px}.pbX:focus,.pbX:hover{opacity:.5}.pbY{font-size:22px;font-weight:400}.pbZ{position:fixed;top:0;right:0;left:0;bottom:0;background-color:#000;opacity:.2;display:none}.pc_{-webkit-filter:blur(3px);filter:blur(3px)}.pca{-webkit-animation:pc .3s;animation:pc .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.pcb{position:absolute;right:10px;top:0;width:1px;height:0}.pcc{padding:80px 0}@-webkit-keyframes pc{0%{opacity:0}to{opacity:.2}}@keyframes pc{0%{opacity:0}to{opacity:.2}}.pcd{-webkit-animation:pd .2s;animation:pd .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pd{0%{opacity:.2}to{opacity:0}}@keyframes pd{0%{opacity:.2}to{opacity:0}}.pce{margin-bottom:50px;min-height:60px}.pcf{position:fixed;width:100%;height:100%;overflow:auto;left:0;top:0}.pcg{-webkit-animation:pe .3s;animation:pe .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pe{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}@keyframes pe{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}.pch{-webkit-animation:pf .2s;animation:pf .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes pf{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}@keyframes pf{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}");var l=e("$"),c=l(window),r=500,n=[];i.exports=s.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.zIndex,d=e.viewId,u=e.left,f=e.top,p=e.width,h=e.closable;return s+='<div class="pbZ pca" style="display:block;z-index:'+r(c-1)+'" id="mask_'+r(d)+'"></div><div mxv class="pcf" style="z-index:'+r(c)+';"><div mxv class="pbV pcg" data-spm-protocol="i" id="body_'+r(d)+'" style="left:'+r(u)+"px;top:"+r(f)+"px;width:"+r(p)+'px;"><input id="focus_'+r(d)+'" class="pcb"/><span class="p_ pbY pbX '+r(h?"":"pv")+'" mx-click="'+t+'\x1e__fJ()">&#xe67f;</span><div class="pbW pce" id="cnt_'+r(d)+'"><div mxs="pA:_" class="pI pcc"><span class="pJ"></span></div></div></div></div>'},init:function(e){var t=this,i=l("#app");t.on("destroy",function(){!function(e){for(var t=n.length-1;0<=t;t--)if(n[t].id==e.id){n.splice(t,1);break}}(t),500==(r-=2)&&i.removeClass("pc_"),l("#"+t.id).trigger("close").remove()}),s.has(e,"closable")||(e.closable=!0),t.updater.set(e),500==r&&i.addClass("pc_"),r+=2,n.push(t)},render:function(){var e=this,t=e.updater,i=t.get();t.set({zIndex:r,viewId:e.id}).digest(),l("#"+e.id).show(),l("#focus_"+e.id).focus(),e.owner.mountVframe("cnt_"+e.id,i.view,i),setTimeout(e.wrapAsync(function(){l("#body_"+e.id).removeClass("pcg"),l("#mask_"+e.id).removeClass("pca")}),300)},__fI:function(e){s.Vframe.get("cnt_"+this.id).invoke("fire",["unload",e])},"__fJ<click>":function(){l("#"+this.id).trigger("dlg_close")},"$doc<keyup>":function(e){if(27==e.keyCode){var t=n[n.length-1];if(t==this&&t.updater.get("closable"))l("#"+t.id).trigger("dlg_close")}}},{__fK:function(i,e){var r=s.guid("dlg_");l(document.body).append('<div id="'+r+'" style="display:none" />');var n,o=i.owner.mountVframe(r,"gallery/mx-dialog/index",e),a=l("#"+r);return a.on("dlg_close",function(){if(!a.data("closing")&&!n){var e=function(){a.data("closing",1),l("#body_"+r).addClass("pch"),l("#mask_"+r).addClass("pcd"),setTimeout(function(){i.owner&&i.owner.unmountVframe(r)},200)},t={prevent:function(){n=1},resolve:function(){t.p=1,n=0,e()},reject:function(){t.p=1,n=0}};o.invoke("__fI",[t]),n||t.p||e()}})},alert:function(e,t,i){this.confirm(e,t,null,i,"alert")},confirm:function(e,t,i,r,n){this.mxDialog("gallery/mx-dialog/"+(n||"confirm"),{body:e,cancelCallback:i,enterCallback:t,title:r,modal:!0,width:370,closable:!1,left:(c.width()-370)/2,top:Math.max((c.height()-220)/2,0)})},mxDialog:function(i,r){var n,o,a=this,l={view:i};return s.use(i,a.wrapAsync(function(e){var t="$dlg_"+i;a[t]||(a[t]=1,s.mix(l,e.dialogOptions),s.mix(l,r),l.width||(l.width=500),l.left||(l.left=(c.width()-l.width)/2),l.top||(l.top=100),l.dialog={close:function(){n&&n.trigger("dlg_close")}},(n=a.__fK(a,l)).on("close",function(){delete a[t],o&&o()}))})),{close:function(){n&&n.trigger("dlg_close")},whenClose:function(e){o=e}}}})}),define("gallery/mx-dragdrop/index",["$"],function(e,t,i){var o=e("$"),a=o(window),l=o(document),r=window.getComputedStyle,s=function(e){(e=window.getSelection)?e().removeAllRanges():(e=window.document.selection)&&(e.empty?e.empty():e=null)},c=function(e){e.preventDefault()},d="mousemove touchmove",u="mouseup touchend",f="keydown mousewheel DOMMouseScroll";i.exports={ctor:function(){var e=this;e.on("destroy",function(){e.__fL()})},__fL:function(e){var t=this.__fM;if(t){delete this.__fM,l.off(d,this.__fN).off(u,this.__fO).off(f,c),a.off("blur",this.__fO);var i=t.__fP,r=t.__fQ,n=t.__fR;o(i).off("losecapture",this.__fO),i.setCapture&&i.releaseCapture(),n&&r(e)}},dragdrop:function(e,t,i){var r=this;if(r.__fL(),e){s(),e.setCapture&&e.setCapture(),r.__fM={__fQ:i,__fP:e,__fR:o.isFunction(i)};var n=o.isFunction(t);r.__fS=0,r.__fO=function(e){r.__fS=1,r.__fL(e)},r.__fN=function(e){n&&t(e)},l.on(d,r.__fN).on(u,r.__fO).on(f,c),a.on("blur",r.__fO),o(e).on("losecapture",r.__fO)}},fromPoint:function(e,t){var i=null;if(document.elementFromPoint)for(!c.__fT&&r&&(c.__fT=!0,c.__fU=null!==document.elementFromPoint(-1,-1)),c.__fU&&(e+=a.scrollLeft(),t+=a.scrollTop()),i=document.elementFromPoint(e,t);i&&3==i.nodeType;)i=i.parentNode;return i},clear:s}}),define("gallery/mx-dragsort/index",["magix","../mx-dragdrop/index","../mx-runner/index","$"],function(e,t,i){var s=e("magix"),c=e("../mx-dragdrop/index"),r=e("../mx-runner/index"),d=e("$");s.applyStyle("pq",'.pci{left:-1000px;top:0;background:#06f;pointer-events:none}.pci,.pcj{position:absolute;z-index:4000}.pcj{width:26px;height:26px}.pck{background:#06f}.pcl{background:#e94f4f}.pcj:after{font-size:20px;line-height:26px;color:#fff;position:absolute;left:0;right:0;top:0;bottom:0;text-align:center}.pck:after{content:"\u2713"}.pcl:after{content:"\u2717"}');var u=s.guid("dbar_"),n=s.guid("pt_"),f=d(window),p=d(document),h={__fV:function(){d("#"+u).length||d('<div class="pci" id="'+u+'"/>').appendTo("body")},__fW:function(e){e.child&&(d(e.child).css({opacity:.4}),this.__fV())},__aW:function(e){e&&e.child&&d(e.child).css({opacity:1}),this.__fX(),this.__fY()},__fX:function(){d("#"+u).css({left:-1e5})},__fZ:function(e,t){var i=d("#"+u),r=!1;2&e.anchor&&(2&t?(i.css({height:2,width:e.bound.width,top:e.bound.y-1,left:e.bound.x}),r=!0):8&t&&(i.css({height:2,width:e.bound.width,top:e.bound.y+e.bound.height-1,left:e.bound.x}),r=!0)),!r&&1&e.anchor&&(1&t?i.css({height:e.bound.height,width:2,top:e.bound.y,left:e.bound.x-1}):4&t&&i.css({height:e.bound.height,width:2,top:e.bound.y,left:e.bound.x+e.bound.width-1}))},__ga:function(e){e.atPlace&&e.child!=e.hover?(3==e.anchor?e.__g_&&this.__fZ(e,e.side):e.__ga&&this.__fZ(e,e.position),this.__gb(!0)):(this.__fX(),this.__gb())},__gc:function(e){var t=d("#"+n);t.length||(t=d('<div class="pcj" id="'+n+'"/>')).appendTo("body");var i=Math.max(0,Math.min(e.pageX+10,p.width()-t.width())),r=Math.max(0,Math.min(e.pageY+18,p.height()-t.height()));t.css({left:i,top:r,display:"block"})},__gb:function(e){var t=d("#"+n);e?t.removeClass("pcl").addClass("pck"):t.addClass("pcl").removeClass("pck")},__fY:function(){d("#"+n).hide()}};i.exports=s.View.extend({mixins:[c],init:function(e){var t=this,i=d("#"+t.id);i.on("mousedown",e.selector,function(e){e.preventDefault(),t.__fW(e)}),t.on("destroy",function(){i.off("mousedown")});var r=[(t.__q=i).get(0)];e.drops&&(r=r.concat(e.drops.split(","))),t.__gd=r;var n=e.horizonal+""=="true",o=e.vertical+""=="true";n||o||(o=!0);var a=0;n&&(a|=1),o&&(a|=2),t.__ge=a;var l=!0;s.has(e,"sort")&&(l=e.sort+""=="true"),t.__gf=l},__gg:function(e){for(var t=0,i=this.__gd;t<i.length;t++){var r=i[t];if(s.inside(e,r))return s.node(r)}return null},__gi:function(e,t){var i=null;if(t||(t=this.__gg(e)),!this.__gf&&this.__gh)return{child:this.__gh,zone:t};for(;t!=e;){if(e.parentNode==t){i=e;break}e=e.parentNode}return!t||t.firstChild||i||(i=t),i&&"false"===i.getAttribute("ds-draggable")&&(i=null),{child:i,zone:t}},__gk:function(e,t){var i=0,r=0,n=-1,o=-1,a=-1,l=-1,s=!1;if(t.pageX>=e.x&&t.pageX<=e.x+e.width&&t.pageY>=e.y&&t.pageY<=e.y+e.height&&(i|=t.pageX<=e.x+e.width/2?1:4,n=t.pageX-e.x,a=e.x+e.width-t.pageX,i|=t.pageY<=e.y+e.height/2?2:8,o=t.pageY-e.y,l=e.y+e.height-t.pageY,s=!0),s){var c=Math.min(n,o,a,l);-1<c&&(c==n?r=1:c==o?r=2:c==a?r=4:c==l&&(r=8))}var d=this.__gj;return d&&d.zone===d.hover&&(i=2,r=1),{position:i,atPlace:s,side:r}},__fW:function(e){if(1===e.which){var t=this,i=t.__gi(e.target);i.child&&(t.__gh=i.child,t.__gl=i.zone,t.__q.trigger({type:"dragbegin",dragNode:i.child,dragZone:i.zone}),h.__fW(i),t.dragdrop(i.zone,function(e){t.__gm(e)},function(e){t.__aW(e)}))}},__gp:function(e,t,i){var r=this.__gk(e,t),n=r.side!=this.__gn,o=r.position!=this.__go;(n||o)&&(this.__gn=r.side,this.__go=r.position,i.__g_=n,i.__ga=o,i.side=r.side,i.position=r.position,i.atPlace=r.atPlace,i.anchor=this.__ge,h.__ga(i))},__gm:function(e){var t=c.fromPoint(e.clientX,e.clientY),i=this;if(h.__gc(e),i.__gq=e,i.__gr=!0,i.__gs(),i.__gt(),i.__gu||i.__gv||!t)return delete i.__gw,delete i.__gn,void delete i.__go;if(i.__gw!=t){if(t.id===u)return;i.__gw=t,delete i.__gn;var r=i.__gg(t);if(r){r!=i.__gx&&(i.__gx=r,i.__q.trigger({type:"enterzone",zone:r,changePointer:h.__gb}));var n=i.__gi(t,r);if(!n.child)return;var o=d(n.child),a=o.offset(),l={x:a.left,y:a.top,width:o.outerWidth(),height:o.outerHeight()};a=(o=d(n.zone)).offset(),i.__gy={x:a.left,y:a.top,scrollX:o.prop("scrollLeft"),scrollY:o.prop("scrollTop"),maxWidth:o.prop("scrollWidth"),maxHeight:o.prop("scrollHeight"),width:o.width(),height:o.height()},i.__gp(i.__gz=l,e,i.__gj={child:i.__gh,bound:l,zone:n.zone,hover:n.child})}else i.__gx&&(i.__q.trigger({type:"leavezone",zone:i.__gx,changePointer:h.__gb}),delete i.__gx)}else i.__gz&&s.inside(t,i.__gj.zone)?i.__gp(i.__gz,e,i.__gj):(delete i.__gn,delete i.__go,i.__gf&&(h.__fX(),h.__gb()))},__aW:function(){var e=this;e.__gA(),e.__gB(),h.__aW({child:e.__gh});var t=e.__go,i=e.__gn,r=e.__gr,n=e.__gj,o=e.__gh;if(r&&(t||i)){var a=n.zone,l=e.__ge,s=3===l?i:t;if(1&l&&1&s||2&s&&2&l)n.hover==a?a.appendChild(o):a.insertBefore(o,n.hover);else if(8&s&&2&l||4&s&&1&l){for(var c=n.hover.nextSibling;c&&1!=c.nodeType;)c=c.nextSibling;a.insertBefore(o,c),c||(a.scrollTop=a.scrollHeight)}}n&&e.__q.trigger({type:"dragfinish",moved:r,dragNode:o,dragZone:e.__gl,dropNode:n.hover,dropZone:n.zone,outZone:!e.__gx}),delete e.__gh,delete e.__gl,delete e.__gw,delete e.__gj,delete e.__gz,delete e.__go,delete e.__gn,delete e.__gq,delete e.__gv,delete e.__gx,delete e.__gy,delete e.__gu,delete e.__gr},__gs:function(){var o=this;o.__gC||(o.__gC=function(){var e=o.__gy;if(e&&(e.maxWidth>e.width+5||e.maxHeight>e.height+5)){var t=o.__gj.zone,i=0,r=0,n=o.__gq;n.pageX>e.x&&n.pageY>e.y&&n.pageX<e.x+e.width&&n.pageY<e.y+e.height?(n.pageX-e.x<20&&0<e.scrollX?i=-Math.min(7,e.scrollX):e.x+e.width-n.pageX<20&&e.scrollX+e.width<e.maxWidth&&(i=Math.min(7,e.maxWidth-e.scrollX-e.width)),n.pageY-e.y<20&&0<e.scrollY?r=-Math.min(7,e.scrollY):e.y+e.height-n.pageY<20&&e.scrollY+e.height<e.maxHeight&&(r=Math.min(7,e.maxHeight-e.scrollY-e.height)),i||r?(o.__gu=!0,o.__gD=!0,t.scrollTop+=r,t.scrollLeft+=i,e.scrollX+=i,e.scrollY+=r,delete o.__gr,h.__fX(),h.__gb()):(delete o.__gu,delete o.__gD)):(delete o.__gu,delete o.__gD)}},r.__dA(30,o.__gC))},__gt:function(){var c=this;c.__gE||(c.__gE=function(){if(!c.__gD){var e=0,t=0,i=c.__gq,r=f.scrollTop(),n=f.height(),o=p.height(),a=p.width(),l=f.width(),s=f.scrollLeft();i.pageX-s<20&&0<s?e=-Math.min(7,s):s+l-i.pageX<20&&s+l<a&&(e=Math.min(7,a-l-s)),i.pageY-r<20&&0<r?t=-Math.min(7,r):r+n-i.pageY<20&&r+n<o&&(t=Math.min(7,o-n-r)),e||t?(c.__gv=!0,i.pageX+=e,i.pageY+=t,window.scrollBy(e,t),delete c.__gr,h.__fX(),h.__gc(i),h.__gb()):delete c.__gv}},r.__dA(30,c.__gE))},__gA:function(){this.__gC&&(r.__dD(this.__gC),delete this.__gC,delete this.__gD)},__gB:function(){this.__gE&&(r.__dD(this.__gE),delete this.__gE)}})}),define("gallery/mx-dropdown/index",["magix","$","../mx-monitor/index"],function(e,t,i){var h=e("magix"),g=e("$"),o=e("../mx-monitor/index");h.applyStyle("pr",'[mx-view*="/mx-dropdown/"]{outline:0;position:relative;width:140px;background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;display:inline-block;vertical-align:middle;height:25px}[mx-view*="/mx-dropdown/"]:hover{border-color:#ccc}.pcm{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 30px 0 4px}.pcn{cursor:not-allowed;background-color:#fbfbfb}.pcn:hover{border-color:#e6e6e6}.pcn .pcm{cursor:not-allowed}.pco{position:absolute;right:0;top:-1.5px;font-size:28px;color:#ccc;transition:top .3s,-webkit-transform .3s;transition:transform .3s,top .3s;transition:transform .3s,top .3s,-webkit-transform .3s}.pcp .pco{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:-3px}.pcp,.pcp:hover,[mx-view*="/mx-dropdown/"][tabindex="0"]:focus{border-color:#06f}.pcq{height:23px;line-height:23px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.pcr{color:#999}.pcs{position:absolute;top:100%;left:-1px;right:-1px;margin-top:5px;border-radius:4px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.pcp .pcs{display:block}.pct{overflow:auto;max-height:196px;padding:4px 0}.pcu{display:block;width:100%;padding:9px 9px 4px}.pcv{padding:0;width:100%}.pcw{color:#ccc;position:absolute;left:15px;top:16px}.pcx{padding-left:28px;height:28px;line-height:28px;width:100%}.pcy{padding:0 4px;margin:2px 0}.pcz{cursor:pointer;color:#666;display:block;width:100%;padding:0 4px;height:26px;line-height:26px;border-radius:4px}.pcz:hover{color:#333;background-color:#f0f0f0}.pcA,.pcA:active,.pcA:focus,.pcA:hover{color:#fff;background-color:#06f}'),i.exports=h.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.i18n,d=e.selectedText,u=e.selected,f=e.rList,p=e.searchbox,h=e.keyword,g=e.viewId,_=e.list,v=e.textKey,m=e.valueKey;if(s+='<div class="pcm" mx-click="'+t+'\x1e__gF()" title="'+r(c(d))+'"><span class="pcq',""===u&&(s+=" pcr"),s+='">'+r(c(d))+'</span><span mxs="pB:_" class="p_ pco">&#xe692;</span></div><div mxv mxa="pB:_" class="pcs">',f){s+=" ",p&&(s+='<div mxv mxa="pB:a" class="pcu"><label mxv mxa="pB:b" class="pcv"><span mxs="pB:a" class="p_ pcw">&#xe608;</span><input placeholder="'+r(c("_gW"))+'" mx-keyup="'+t+'\x1e__dh()" mx-paste="'+t+'\x1e__dh()" mx-change="'+t+'\x1e__gV()" mx-focusin="'+t+'\x1e__gV()" mx-focusout="'+t+'\x1e__gV()" class="pB pcx" value="'+r(h)+'"/></label></div>'),s+='<ul class="pct" id="list_'+r(g)+'">';var x=void 0,y=void 0;s+=" ";for(var b=0,w=_;b<w.length;b++){var k=w[b];s+=" ",y=v&&m?(s+=" ",x=c(k[v]),k[m]):(s+=" ",x=k),s+=" ",s+='<li title="'+r(x)+'" class="pcy">',s+='<span class="pcz py',y+""==u+""&&(s+=" pcA"),s+='" mx-click="'+t+"\x1e__gU({item:'"+a(i,k)+"'})\">"+r(x)+"</span></li>"}s+="</ul>"}return s+="</div>"},init:function(e){var t=this;o.__cr();var i=g("#"+t.id);i.on("keydown",function(e){13==e.keyCode&&t["__gF<click>"]()}),t.on("destroy",function(){i.off("keydown"),o.__cs(t),o.__ct()}),t.updater.set({viewId:t.id}),t.__q=i,t.__gG=!e.list,t.assign(e,{node:i})},assign:function(e,t){var i=t.node,r=t.inner,n=this;n.__gH=e.list;var o=n.__gI=e.selected,a=n.__gJ=e.textKey||"",l=n.__gK=e.valueKey||"",s=n.__gL=e.emptyText||"";if(n.__gM=e.searchbox+""=="true",n.__gN=e.disabled+""=="true",n.__gG){i=i?g(i).children():g(r);var c,d=[];i.each(function(e,t){t=g(t),c="true"==t.attr("group"),d.push({group:c,text:t.text(),value:c?h.guid():t.attr("value")})}),a=n.__gJ="text",l=n.__gK="value",n.__gH=d}var u=n.__gH,f=h.toMap(u,l);if(s)if(a&&l){if(!f[""]){var p={};p[a]=s,p[l]="",u.unshift(p),f[""]=p}}else f[s]||(u.unshift(s),f[s]=s);return o||!s||a||l||(o=s),o&&f[o]||(o=f[o]||u[0],a&&l&&(o=o[l])),n.__gI=o,n.__gO=a&&l?f[o][a]:o,!0},__cu:function(e){return h.inside(e,this.id)},render:function(){this.__q[this.__gN?"addClass":"removeClass"]("pcn").prop("tabindex",this.__gN?-1:0),this.__gP(!0)},__al:function(){this.__q.hasClass("pcp")&&(this.__q.removeClass("pcp").trigger("focusout"),o.__cs(this))},__ak:function(){if(!this.__q.hasClass("pcp")){this.updater.get("rList")||this.updater.digest({rList:!0}),this.__q.addClass("pcp").trigger("focusin");var e=g("#list_"+this.id),t=e.find(".pcA").position(),i=e.height(),r=e.prop("scrollTop");if(t.top<0||t.top>i){var n=t.top-i+r+i/2;e.prop("scrollTop",n)}o.__cx(this)}},__gP:function(e){var t=this.__gI;this.updater.digest({textKey:this.__gJ,valueKey:this.__gK,selected:t,searchbox:this.__gM,selectedText:this.__gO,list:this.__gH.slice()}),this.__q.val(t),e||this.__gQ(t)},__gR:function(o,a){var l=this;clearTimeout(l.__dg);var s=l.__gH,c=[],d=0,u=s.length,f=l.__gJ,p=l.__gK;if(o){var h=function(){if(d<u){for(var e=Math.min(d+400,u),t=d,i=void 0,r=void 0,n=void 0;t<e;t++)n=r=i=s[t],f&&p&&(r=i[f],n=i[p]),(0<=(r+"").indexOf(o)||0<=(n+"").indexOf(o))&&c.push(i);d=e,l.__dg=setTimeout(l.wrapAsync(h),20)}else a(c)};h()}else a(s)},__gQ:function(e,t){var i=this.updater,r=this.__gK,n=this.__gJ,o=this.__gI,a=e,l=e;if(n&&r&&(l=e[n],a=e[r]),!t||o!==a){i.set({selected:this.__gI=a});var s=g.Event("change",{item:e,keys:{text:n,value:r},value:r?e[r]:e,text:n?e[n]:e});s.isDefaultPrevented()?i.set({selected:o}):i.digest({selected:a,selectedText:l}),this.__q.val(r?e[r]:e).trigger(s)}},"__gF<click>":function(){var e=this.__q;e.hasClass("pcp")?this.__al():e.hasClass("pcn")||this.__ak()},"__dh<keyup,paste>":function(e){var t=this;e.stopPropagation(),clearTimeout(t.__gS);var i=g.trim(e.eventTarget.value);t.__gS=setTimeout(t.wrapAsync(function(){i!=t.__gT&&t.__gR(t.__gT=i,function(e){t.updater.digest({list:e})})}),300)},"__gU<click>":function(e){this.__gQ(e.params.item,!0),this.__al()},"__gV<change,focusin,focusout>":function(e){e.stopPropagation()}})}),define("gallery/mx-font/align",["magix"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix");r.default.applyStyle("pm",".pbM{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.pbN{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.pbN:hover{background:#ccc}.pbO{width:16px;margin:2px}.pbP,.pbP:hover{background:#06f;color:#fff}.pbQ,.pbQ .pbN{cursor:not-allowed;opacity:.7}.pbQ .pbN,.pbQ .pbN:hover{background:#e9e9e9}.pbQ .pbP,.pbQ .pbP:hover{background:#6aa5ff}.pbR{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.pbS{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.pbT{-webkit-transform:rotate(270deg);transform:rotate(270deg)}"),t.default=r.default.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.disabled,d=e.i18n,u=e.value;return s+='<ul class="px pbM',c&&(s+=" pbQ"),s+='"><li title="'+r(d("_gY"))+'" class="pp pbN pN',"left"==u[0]&&(s+=" pbP"),s+='" mx-click="'+t+"\x1e__bu({i:0,v:'left'})\">&#xe687;</li><li title=\""+r(d("_gZ"))+'" class="pp pbN pN',"center"==u[0]&&(s+=" pbP"),s+='" mx-click="'+t+"\x1e__bu({i:0,v:'center'})\">&#xe68a;</li><li title=\""+r(d("_h_"))+'" class="pp pbN pN',"right"==u[0]&&(s+=" pbP"),s+='" mx-click="'+t+"\x1e__bu({i:0,v:'right'})\">&#xe686;</li><li title=\""+r(d("_ha"))+'" class="pp pbN pN',"top"==u[1]&&(s+=" pbP"),s+='" mx-click="'+t+"\x1e__bu({i:1,v:'top'})\">&#xe614;</li><li title=\""+r(d("_hb"))+'" class="pp pbN pN',"middle"==u[1]&&(s+=" pbP"),s+='" mx-click="'+t+"\x1e__bu({i:1,v:'middle'})\">&#xe613;</li><li title=\""+r(d("_hc"))+'" class="pp pbN pN',"bottom"==u[1]&&(s+=" pbP"),s+='" mx-click="'+t+"\x1e__bu({i:1,v:'bottom'})\">&#xe612;</li></ul>"},init:function(e){this.assign(e)},assign:function(e){return this.__gX=e.value,this.updater.set({value:e.value,disabled:e.disabled}),!0},render:function(){this.updater.digest()},"__bu<click>":function(e){if(!this.updater.get("disabled")){var t=this.__gX,i=e.params,r=i.i,n=i.v;t[r]=n,this.__gX=t,this.updater.digest({value:t}),$("#"+this.id).trigger({type:"input",value:t})}}})}),define("gallery/mx-font/lineheight",["magix","$","../mx-number/index","../mx-dropdown/index"],function(e,t,i){e("../mx-number/index"),e("../mx-dropdown/index"),t.__esModule=!0;var r=e("magix"),o=e("$");r.default.applyStyle("ps",".pcB{width:80px;border-radius:4px 0 0 4px;z-index:1}.pcC{width:61px;margin-left:-1px;border-radius:0 4px 4px 0}.pcC:focus{z-index:2}"),t.default=r.default.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s,c="",d=e.disabled,u=e.min,f=e.value;return c+='<div mxv="value" class="pcB pB pu" ',(s=d)&&(c+='readonly="'+r(s)+'" '),c+=' mx-input="'+t+"\x1e__an({from:'number'})\" mx-view=\"gallery/mx-number/index?",(s=d)&&(c+="disabled="+o(s)),(s=u)&&(c+="&min="+o(s)),c+="&value="+a(i,f[0])+'&empty=true"></div><div mxv="disabled,value" class="pcC" mx-change="'+t+"\x1e__an({from:'dropdown'})\" mx-view=\"gallery/mx-dropdown/index?",(s=d)&&(c+="disabled="+a(i,s)),c+="&selected="+a(i,f[1])+'"><i mxs="pD:_" value="mm" class="pv">mm</i><i mxs="pD:a" value="%" class="pv">%</i></div>'},init:function(e){this.assign(e)},assign:function(e){return this.__gX=e.value,this.updater.set({value:e.value,min:e.min,disabled:e.disabled}),!0},render:function(){this.updater.digest()},"__an<input,change>":function(e){e.stopPropagation();var t,i=e.params.from,r=e.value,n=this.__gX;t="number"==i?[r,n[1]]:[n[0],r],o.default("#"+this.id).trigger({type:"input",value:this.__gX=t})}})}),define("gallery/mx-font/style",["magix","$"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix"),n=e("$");r.default.applyStyle("pm",".pbM{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.pbN{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.pbN:hover{background:#ccc}.pbO{width:16px;margin:2px}.pbP,.pbP:hover{background:#06f;color:#fff}.pbQ,.pbQ .pbN{cursor:not-allowed;opacity:.7}.pbQ .pbN,.pbQ .pbN:hover{background:#e9e9e9}.pbQ .pbP,.pbQ .pbP:hover{background:#6aa5ff}.pbR{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.pbS{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.pbT{-webkit-transform:rotate(270deg);transform:rotate(270deg)}"),t.default=r.default.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.disabled,d=e.i18n,u=e.value;return s+='<ul class="px pbM',c&&(s+=" pbQ"),s+='"><li title="'+r(d("_hd"))+'" class="pp pbN pN',u[0]&&(s+=" pbP"),s+='" mx-click="'+t+"\x1e__bu({key:'italic'})\">&#xe65f;</li><li title=\""+r(d("_he"))+'" class="pp pbN pN',u[1]&&(s+=" pbP"),s+='" mx-click="'+t+"\x1e__bu({key:'underline'})\">&#xe62e;</li></ul>"},init:function(e){this.assign(e)},assign:function(e){return this.__gX=e.value,this.updater.set({value:e.value,disabled:e.disabled}),!0},render:function(){this.updater.digest()},"__bu<click>":function(e){if(!this.updater.get("disabled")){var t=this.__gX;t="italic"==e.params.key?t[0]?["",t[1]]:["italic",t[1]]:t[1]?[t[0],""]:[t[0],"underline"],this.__gX=t,this.updater.digest({value:t}),n.default("#"+this.id).trigger({type:"input",value:t})}}})}),define("gallery/mx-menu/index",["magix","$","../mx-monitor/index"],function(e,t,i){var o=e("magix"),f=e("$"),p=e("../mx-monitor/index");o.Vframe;o.applyStyle("pt",".pcD{transition:margin-left .25s;z-index:90000}.pcE{background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;cursor:default;padding:4px 0;box-shadow:0 2px 4px 0 rgba(0,0,0,.1)}.pcF{height:26px;line-height:26px;cursor:default;border-radius:4px;padding:0 12px;margin:0 4px}.pcG{color:#fff;background-color:#06f}.pcH{height:1px;background:#eee;margin:4px 0}.pcI{color:#ccc;cursor:not-allowed}"),i.exports=o.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.width,d=e.list,u=e.disabled,f=e.textKey;s+='<div style="width:'+r(c)+'px;position:absolute;left:-10000px;top:-10000px" class="pcD" mx-contextmenu="'+t+'\x1e__cd()"><ul mxa="pF:_" class="pcE px">';for(var p=0,h=d.length;p<h;p++){var g=d[p];s+=" ",g.spliter?s+='<li mxs="pF:_" class="pcH"></li>':(s+='<li class="py pcF ',u[g.id]&&(s+=" pcI"),s+='" ',u[g.id]||(s+=' mx-mouseover="'+t+'\x1e__hn()" mx-mouseout="'+t+'\x1e__hn();" mx-click="'+t+"\x1e__gU({item:'"+a(i,g)+"'})\" "),s+=' title="'+r(g[f])+'">'+r(g[f])+"</li>"),s+=" "}return s+="</ul></div>"},init:function(e){var t=this;t.assign(e),p.__cr(),t.on("destroy",function(){p.__cs(t),p.__ct(),t.__cb&&!e.cnt&&f("#"+t.id).remove()})},assign:function(e){var t=e.width||340,i=e.valueKey||"id",r=e.textKey||"text";return this.__gH=e.list,this.__hf=f(e.offset),this.__hg=f(e.scroller),this.__hh=t,this.__hi=i,this.__hj=r,this.__hk=e.disabled||{},this.__hl=e.picked,!0},render:function(){this.updater.digest({disabled:this.__hk,list:this.__gH,width:this.__hh,valueKey:this.__hi,textKey:this.__hj})},__cu:function(e){return o.inside(e,this.id)},__ak:function(e){if(!this.__hm){this.__hm=1;var t=f("#"+this.id+" div"),i=this.__hf,r=i.offset(),n=r.left,o=r.top,a=i.width()+this.__hg.prop("scrollLeft"),l=i.height(),s=-1,c=-1,d=t.outerWidth(),u=t.outerHeight();a<(s=e.pageX-n)+d&&(s-=d)<0&&(s=0),l<(c=e.pageY-o)+u&&(c-=u)<0&&(c=0),t.css({left:s,top:c}),p.__cx(this)}},__al:function(){this.__hm&&(this.__hm=!1,f("#"+this.id+" div").css({left:-1e4}),p.__cs(this))},"__hn<mouseover,mouseout>":function(e){o.inside(e.relatedTarget,e.eventTarget)||f(e.eventTarget)["mouseout"==e.type?"removeClass":"addClass"]("pcG")},"__gU<click>":function(e){var t=f("#"+this.id),i={type:"pick",item:e.params.item};t.trigger(i),this.__al();var r=this.__hl;r&&r(i.item)},"__cd<contextmenu>":function(e){e.preventDefault()}},{show:function(e,t,i){var r="ctx_"+i.listKey,n=o.Vframe.get(r);n?(n.invoke("assign",[i]),n.invoke("render"),n.invoke("__ak",[t])):(f(i.cnt||"body").append('<div id="'+r+'" />'),(n=e.owner.mountVframe(r,"gallery/mx-menu/index",i)).invoke("__ak",[t]))}})}),define("gallery/mx-monitor/index",["$"],function(e,t,i){var r=e("$"),n=0,o=[],a=r(document),l=r(window),s=function(e){for(var t=o.length;t--;){var i=o[t];if(i.__ho)o.splice(t,1);else{var r=i.__hp;"resize"!=e.type&&r.__cu(e.target)||r.__al()}}},c=function(e){var t=o[e.id];t&&(t.__ho=!0),delete o[e.id]};i.exports={__cx:function(e){c(e);var t={__hp:e};o.push(t),o[e.id]=t},__cs:c,__cr:function(){n||(a.on("mousedown keyup",s),l.on("resize",s)),n++},__ct:function(){0<n&&(--n||(a.off("mousedown keyup",s),l.off("resize",s)))}}}),define("gallery/mx-number/index",["magix","$"],function(e,t,i){var o=e("magix"),r=e("$");o.applyStyle("pu",'.pcJ{width:100%;border:none;height:100%;background-color:transparent;color:#333;display:block}.pcK,.pcL{width:20px;height:50%;position:absolute;right:1px;border:2px solid #fff;border-radius:4px;cursor:pointer}.pcK:hover,.pcL:hover{background-color:#f0f0f0}.pcL{top:1px}.pcK{bottom:1px}.pcM:after{width:0;height:0;position:absolute;top:0;right:0;bottom:0;left:0;border-left:4px solid transparent;border-right:4px solid transparent;content:"";display:block;margin:auto}.pcK:after{border-top:4px solid #ccc}.pcL:after{border-bottom:4px solid #ccc}[mx-view*="/mx-number/"][readonly=true]{background-color:#fbfbfb;cursor:not-allowed}[mx-view*="/mx-number/"][readonly=true]:hover{border-color:#e6e6e6}[mx-view*="/mx-number/"][readonly=true] .pcK,[mx-view*="/mx-number/"][readonly=true] .pcL{cursor:not-allowed;border-color:transparent}[mx-view*="/mx-number/"][readonly=true] .pcK:hover,[mx-view*="/mx-number/"][readonly=true] .pcL:hover{background-color:transparent}[mx-view*="/mx-number/"][readonly=true] .pcL:hover:after{border-bottom-color:#ccc}[mx-view*="/mx-number/"][readonly=true] .pcK:hover:after{border-top-color:#ccc}'),i.exports=o.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.value,d=e.disabled;return s+='<input class="pcJ" mx-focusin="'+t+'\x1e__hE()" mx-focusout="'+t+'\x1e__hG()" value="'+r(c)+'" mx-change="'+t+'\x1e__hD()" mx-keydown="'+t+'\x1e__hL()" ',d&&(s+=" disabled"),s+=' autocomplete="off" mx-input="'+t+'\x1e__hM()"/><span mxs="pG:_" class="pcL pcM px" mx-click="'+t+'\x1e__hz({i:true})" mx-mousedown="'+t+'\x1e__hK({i:true})" mx-contextmenu="'+t+'\x1e__cd()"></span><span mxs="pG:a" class="pcK pcM px" mx-click="'+t+'\x1e__hz()" mx-mousedown="'+t+'\x1e__hK()" mx-contextmenu="'+t+'\x1e__cd()"></span>'},init:function(e){var t=r("#"+this.id);this.__q=t,this.assign(e)},assign:function(e){var t=this,i=e.value;void 0===i&&(i=""),""!==i&&(i=+i);var r=t.__hq!==i,n=t.__hr;return t.__hq=i,t.__hs=+e.step||1,t.__ht=e.empty+""=="true",t.__hr=e.disabled+""=="true",t.__hu=o.has(e,"max")?+e.max:Number.MAX_VALUE,t.__hv=o.has(e,"min")?+e.min:-Number.MAX_VALUE,t.__hw=+e.ratio||10,t.__hx=e.fixed||0,r||n!=t.__hr},render:function(){this.updater.digest({value:this.__hq,disabled:this.__hr}),this.fix()},fix:function(){var e=this.__hq;""!==e&&(e=e.toFixed(this.__hx)),this.__hy=this.__q.find("input"),this.__hy.val(e)},val:function(e,t){var i=this;if(""!==e||!i.__ht){if((e=+e)||0===e){var r=i.__hu,n=i.__hv,o=i.__hs;r<e?e=r:e<n&&(e=n),e!==i.__hq&&(e=(e=o<1?Math.round(e/o)*o:e).toFixed(i.__hx),t||i.__hy.val(e),e=+e,i.__q.prop("value",i.__hq=e).trigger({type:"input",value:e}))}return i.__hq}i.__q.prop("value",i.__hq=e).trigger({type:"input",value:e})},__hz:function(e,t){var i=this.__hq;""===i&&(i=0);var r=this.__hs,n=i;t&&(r*=this.__hw),e?n+=r:n-=r,this.val(n)},__hA:function(){var e=this.__hy[0];e&&(e.focus(),e.selectionStart=e.selectionEnd=e.value.length)},__hC:function(){this.__q.addClass("pD"),o.has(this,"__hB")||(this.__hB=this.__hq)},"__hD<change>":function(e){e.stopPropagation();var t=e.eventTarget,i=t.value;if(""===i&&this.__ht)return t.value=this.__hq="",void this.__q.prop("value","");var r=Number(i);(r||0===r)&&this.val(r),r=(r=this.__hq)||0===r?r.toFixed(this.__hx):"",t.value=r},"__hE<focusin>":function(){this.__hC()},"__hG<focusout>":function(){this.__hF||(this.__q.removeClass("pD"),this.__hB!=this.__hq&&(this.fix(),this.__q.trigger({type:"change",value:this.__hq})),delete this.__hB)},"__hz<click>":function(e){this.__hr||this.__hH||(this.__hz(e.params.i,e.shiftKey),this.__hA())},"__hK<mousedown>":function(e){var t=this;t.__hr||(t.__hF=!0,t.__hC(),t.__hI=setTimeout(t.wrapAsync(function(){t.__hJ=setInterval(t.wrapAsync(function(){t.__hH=!0,t.__hz(e.params.i),t.__hA()}),50)}),300))},"__hL<keydown>":function(e){if(38==e.keyCode||40==e.keyCode){e.preventDefault();if(!this.__hr){var t=e.eventTarget.value;if(""===t)this.__hq="";else{var i=Number(t);(i||0===i)&&i!=this.__hq&&(this.__hq=i)}this.__hz(38==e.keyCode,e.shiftKey)}}},"__cd<contextmenu>":function(e){e.preventDefault()},"__hM<input>":function(e){e.stopPropagation();var t=e.eventTarget;this.val(t.value,!0)},"$doc<mouseup>":function(){var e=this;clearTimeout(e.__hI),clearInterval(e.__hJ),delete e.__hF,setTimeout(e.wrapAsync(function(){delete e.__hH}),0)}})}),define("gallery/mx-picture/index",["magix","$"],function(e,t,i){var r=e("magix"),n=e("$");r.applyStyle("pv",".pcN{min-height:500px}.pcO{width:100px;height:100px;margin:5px;overflow:hidden;border:1px solid #ccc;cursor:pointer}.pcO:hover{border-color:#999}.pcP{width:100%;height:100%;background-position:50%;background-repeat:no-repeat;background-size:contain}.pcQ{color:#797575;width:100px;margin:0 5px;height:25px}.pcR{width:140px;height:80px;float:left;background-position:50%;background-repeat:no-repeat;background-size:contain;border:1px solid #ccc}.pcS{height:34px;border:2px dashed #ccc;outline:none;transition:all .3s;line-height:34px;margin-top:1px;text-align:center;font-size:14px;cursor:default;margin-left:40px;width:460px;border-radius:4px}.pcT,.pcS:focus{border-color:#06f}.pcU{position:absolute;left:0;top:0;right:0;bottom:0;width:100%;height:100%;cursor:pointer;opacity:0;font-size:100px}.pcV{position:relative;overflow:hidden;cursor:pointer;height:35px;line-height:25px;margin-right:13px;width:110px}.pcW{width:250px;height:35px;font-size:14px}.pcX{font-size:16px}"),i.exports=r.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.disabled,d=e.i18n,u=e.pic;return s+="<div><button ",c&&(s+="disabled"),s+=' type="button" class="pz pO" mx-click="'+t+'\x1e__hN()">'+r(d("_hO"))+'</button><div mxa="pH:_" class="pw pa"><div class="pcR pu" ',u&&(s+=" style=\"background-image:url('"+r(u)+"')\" "),s+="></div></div></div>"},init:function(e){this.assign(e),this.__q=n("#"+this.id)},assign:function(e){return this.updater.set({lang:e.lang,pic:e.pic,disabled:e.disabled+""=="true"}),!0},render:function(){this.updater.digest()},"__hN<click>":function(){var t=this;t.mxDialog("gallery/mx-picture/list",{width:945,done:function(e){t.updater.digest({pic:e.src}),t.__q.trigger({type:"change",pic:e})}})}})}),define("gallery/mx-picture/list",["magix","$","../../i18n/index","../../service/index"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix"),a=e("$"),l=e("../../i18n/index"),n=e("../../service/index");r.applyStyle("pv",".pcN{min-height:500px}.pcO{width:100px;height:100px;margin:5px;overflow:hidden;border:1px solid #ccc;cursor:pointer}.pcO:hover{border-color:#999}.pcP{width:100%;height:100%;background-position:50%;background-repeat:no-repeat;background-size:contain}.pcQ{color:#797575;width:100px;margin:0 5px;height:25px}.pcR{width:140px;height:80px;float:left;background-position:50%;background-repeat:no-repeat;background-size:contain;border:1px solid #ccc}.pcS{height:34px;border:2px dashed #ccc;outline:none;transition:all .3s;line-height:34px;margin-top:1px;text-align:center;font-size:14px;cursor:default;margin-left:40px;width:460px;border-radius:4px}.pcT,.pcS:focus{border-color:#06f}.pcU{position:absolute;left:0;top:0;right:0;bottom:0;width:100%;height:100%;cursor:pointer;opacity:0;font-size:100px}.pcV{position:relative;overflow:hidden;cursor:pointer;height:35px;line-height:25px;margin-right:13px;width:110px}.pcW{width:250px;height:35px;font-size:14px}.pcX{font-size:16px}"),i.exports=r.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.i18n,d=e.keyword,u=e.list,f=e.error;s+='<div mxa="pI:_" class="pK"><b mxa="pI:a" class="pd">'+r(c("_ib"))+'</b></div><div mxv mxa="pI:b" class="pL"><div mxv mxa="pI:c" class="pw pk pj"><input class="pB pcW pp" placeholder="'+r(c("_ic"))+'" mx-input="'+t+'\x1e__dh()" value="'+r(d)+'"/><div mxa="pI:d" class="pcS pp" mx-paste="'+t+'\x1e__hV()" mx-drop="'+t+'\x1e__hX()" tabindex="0" mx-dragenter="'+t+'\x1e__ia()" mx-dragleave="'+t+'\x1e__i_()">'+r(c("_id"))+'<i mxs="pI:_" class="pr ph pd">/</i>'+r(c("_ie"))+'</div><div mxv mxa="pI:e" class="pr pz pcV pA pq">'+r(c("_if"))+'<input mxs="pI:a" class="pcU" accept="image/*" type="file" mx-change="'+t+'\x1e__hY()" multiple="multiple"/></div></div><div mxa="pI:f" class="pw pcN pa">';var p=0;s+=" ";for(var h=0,g=u.length;h<g;h++){var _=u[h];s+=" ",(!d||-1<_.title.indexOf(d))&&(s+=" ",p=1,s+='<div class="pp" title="'+r(_.title)+'"><div class="pcO" mx-click="'+t+"\x1e__hR({src:'"+r(l(_.src))+'\'})"><div class="pcP" style="background-image:url(\''+r(_.src)+'\')"></div></div><div mxa="pI:g" class="po pcQ py">'+r(_.title)+"</div></div>"),s+=" "}return s+=" ",!p&&d&&(s+='<div mxa="pI:h" class="po pb pcX">'+r(c("_ig",d))+"</div>"),s+=" ",f&&(s+='<div mxa="pI:i" class="po pb pcX">'+r(f.msg)+"</div>"),s+="</div></div>"},mixins:[n.default],init:function(e){this.__hP=e.done,this.__fB=e.dialog},render:function(){var i=this;i.fetch({name:"__hQ",params:{biz_id:r.config("bizId")}},function(e,t){i.updater.digest({keyword:"",list:t.get("data",[]),error:e})})},"__R<click>":function(){this.__fB.close()},"__Q<click>":function(){var i=this,r=a("#"+this.id+" input").val().trim(),n=new Image,o=this.__hP;n.onerror=function(){i.alert(l.default("__bl"))},n.onload=function(){var e=n.width,t=n.height;i.__fB.close(),o({src:r,width:e,height:t})},n.src=r},"__hR<click>":function(e){var i=this,r=new Image,n=i.__hP,o=e.params.src;r.onerror=function(){i.alert(l.default("__bl"))},r.onload=function(){var e=r.width,t=r.height;i.__fB.close(),n({src:o,width:e,height:t})},r.src=o},"__dh<input>":function(e){clearTimeout(this.__dg);var t=this.updater;t.set({keyword:e.eventTarget.value}),this.__dg=setTimeout(this.wrapAsync(function(){t.digest()}),300)},__hT:function(e){var t=this;this.request().all({name:"__hS",files:e},function(e){e?t.alert(e.msg):t.render()})},"__hV<paste>":function(e){e.preventDefault();var t=e.originalEvent.clipboardData,i=[];if(t&&t.items)for(var r=0,n=t.items;r<n.length;r++){var o=n[r];0===o.type.indexOf("image/")&&i.push(o.getAsFile())}i.length?this.__hT(i):this.alert(l.default("__hU"))},"__hX<drop>":function(e){this.__hW(e.eventTarget);var t=e.originalEvent.dataTransfer.files;this.__hT(t)},"__hY<change>":function(e){var t=e.eventTarget,i=t.files;this.__hT(i),t.outerHTML=t.outerHTML},__hW:function(e){this.__hZ||a(e).removeClass("pcT")},"__i_<dragleave>":function(e){this.__hW(e.eventTarget)},"__ia<dragenter>":function(e){var t=document.activeElement==e.eventTarget;t||(a(e.eventTarget).addClass("pcT"),this.__hZ=t)}})}),define("gallery/mx-runner/fx",["magix","./index"],function(e,t,i){var r=e("magix"),n=e("./index"),o=function(e){return e},a=Date.now||function(){return(new Date).getTime()},l=r.Base.extend({ctor:function(e,i){var r=this;r.__ih&&!i||(i=i||o,r.__ih=function(e,t){return e+(t-e)*i(r.__ii/r.__ij)}),r.__ik=[],r.__il=e},__iq:function(e,t){this.__ho||(this.__ik.push({__im:e,__in:t}),this.__io||this.__ip())},__ip:function(){var e=this,t=e.__ik.shift();t?(e.__ij=t.__im,e.__ir=t.__in,e.__is=a(),e.__io||n.__dA(e.__il,e.__io=function(t){e.__ii=Date.now()-e.__is,e.__ii>e.__ij&&(e.__ii=e.__ij,t=1);try{e.__ir(e.__ih)}catch(e){t=e}t&&e.__ip()})):e.__gV()},__gV:function(){this.__io&&(n.__dD(this.__io),delete this.__io,this.fire("stop"))},destroy:function(){this.__gV(),this.__ik=[],this.__ho=1}});i.exports={__iu:function(){var e=new l;return this.capture(r.guid("__it"),e),e}}}),define("gallery/mx-runner/index",["magix"],function(e,t,i){var a=e("magix"),l=window.requestAnimationFrame||function(e){return setTimeout(e,16)},s=window.cancelAnimationFrame||clearTimeout,c=Date.now||function(){return(new Date).getTime()};i.exports={__ik:[],__dA:function(e,t){this.__ik.push({i:e||15,f:t,n:c()}),this.__ip()},__dD:function(e){for(var t=this.__ik,i=void 0,r=0;r<t.length;r++)if(!(i=t[r]).r&&i.f==e){i.r=1;break}},__ip:function(){var n=this;if(!n.__iv){var o=function(){for(var e=n.__ik,t=0,i=void 0,r=void 0;t<e.length;t++)(i=e[t]).r?e.splice(t--,1):(r=c())-i.n>=i.i&&(i.n=r,a.toTry(i.f));e.length?n.__iv=l(o):(s(n.__iv),delete n.__iv)};n.__iv=l(o)}}}}),define("cainiao/const",[],function(e,t,i){"use strict";t.__esModule=!0,t.default={ELEMENT_CTRL_SPACE:3,RESIZER_SIZE:3,EDITOR_NAME_SPACE:"http://cloudprint.cainiao.com/schema/editor",XSI_NAME_SPACE:"http://www.w3.org/2001/XMLSchema-instance",SCHEMA_LOCATION_NAME_SPACE:"http://cloudprint.cainiao.com/print http://cloudprint-docs-resource.oss-cn-shanghai.aliyuncs.com/lpml_schema.xsd",CLOUD_PRINT_NAME_SPACE:"http://cloudprint.cainiao.com/print",PAGE_WIDTH_MAX:1200,PAGE_WIDTH_MIN:1,PAGE_HEIGHT_MAX:1200,PAGE_HEIGHT_MIN:1,PAGE_WIDTH_DEFAULT:793.7,PAGE_HEIGHT_DEFAULT:1122.51,SCALE_DEFAULT:1,SCALE_MAX:5,SCALE_MIN:.5,SCALE_STEP:.25,LINE_TYPES:[{text:"___",value:"solid"},{text:"__a",value:"dashed"},{text:"__b",value:"dotted"}],FONT_FAMILIES:[{value:"SimSun",text:"__c"},{value:"SimHei",text:"__d"},{value:"Arial",text:"Arial"},{value:"Times New Roman",text:"Times New Roman"},{value:"Tahoma",text:"Tahoma"},{value:"webdings",text:"webdings"},{value:"Arial Black",text:"Arial Black"},{value:"Arial Narrow",text:"Arial Narrow"},{value:"Arial Unicode MS",text:"Arial Unicode MS"}],FONT_WEIGHTS:["normal","bold","light"],DIRECTIONS:["ltr","rtl"],QRCODES:[{text:"qrcode",value:"qrcode"},{text:"pdf417",value:"pdf417"},{text:"Maxicode",value:"maxicode"},{text:"Data Matrix",value:"datamatrix"}],QRCODES_MAXICODE_SCHEMA:[2,3,4,5,6],BARCODES:[{value:"code128",text:"code128"},{value:"code93",text:"code93"},{value:"code39",text:"code39"},{value:"upca",text:"UPC-A"},{value:"upce",text:"UPC-E"},{value:"ean8",text:"EAN8"},{value:"ean13",text:"EAN13"},{value:"itf14",text:"ITF14"},{value:"c25inter",text:"Interleaved 2 of 5"}],TABLE_ROWS_HEIGHT:30,TABLE_CELLS_WIDTH:200,HISTORY_MAX:100,AUTO_SAVE:3e4,DROP_STAGE_LOADING:"//img.alicdn.com/tfs/TB1dIR5XpzqK1RjSZFzXXXjrpXa-400-240.gif",PAGES:[{text:"A1",width:594,height:841},{text:"A2",width:420,height:594},{text:"A3",width:297,height:420},{text:"A4",width:210,height:297},{text:"A5",width:148,height:210},{text:"A6",width:105,height:148},{text:"A7",width:74,height:105},{text:"B1",width:707,height:1e3},{text:"B2",width:500,height:707},{text:"B3",width:353,height:500},{text:"B4",width:250,height:353},{text:"B5",width:176,height:250},{text:"B6",width:125,height:176},{text:"B7",width:88,height:125},{text:"C1",width:648,height:917},{text:"C2",width:458,height:648},{text:"C3",width:324,height:458},{text:"C4",width:229,height:324},{text:"C5",width:162,height:229},{text:"C6",width:114,height:162},{text:"C7",width:81,height:114}]}}),define("cainiao/serializer",["./toxml","./tojson"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("./toxml"),n=e("./tojson");t.default={encode:r.default,decode:n.default}}),define("cainiao/tojson",["magix","../util/converter","./const","../element/index","../util/table","$"],function(e,t,i){"use strict";t.__esModule=!0;var T=e("magix"),d=e("../util/converter"),k=e("./const"),A=e("../element/index"),E=e("../util/table"),S=e("$"),M=T.default.State,N=T.default.has,C=T.default.toMap,y=/^<([a-z\d]+)((?:\s+[-A-Za-z\d_:]+(?:="[^"]*")?)*)\s*(\/?)>/,b=/([-A-Za-z\d_:]+)(?:="([^"]*)")?/g,w=/^<\/([a-z\d]+)>/,L=d.default.__e,r=function(e){return"true"===e},a=function(e){return e=Number(e),isNaN(e)?0:e},n=function(e){return a(e)%360},o=1,l=2,s=4,c=8,u=function(e){var t={type:l,convert:L};return e?t.alias=e:(t.min=0,t.max=2800),t},I={page:{splitable:{type:s,parse:r},xmlns:{type:o},"xmlns:xsi":{type:o},"xsi:schemaLocation":{type:o},"xmlns:editor":{type:o,back:k.default.EDITOR_NAME_SPACE},width:{type:l,max:k.default.PAGE_WIDTH_MAX,min:k.default.PAGE_WIDTH_MIN,convert:L},height:{type:l,max:k.default.PAGE_HEIGHT_MAX,min:k.default.PAGE_HEIGHT_MIN,convert:L}},line:{style:{type:o},zIndex:{type:l},startX:u("x"),endX:u("y"),startY:u(),endY:u(),lineWidth:{type:l,min:1},lineColor:{type:o},lineType:{type:c,alias:"type",enums:C(k.default.LINE_TYPES,"value"),back:k.default.LINE_TYPES[0].value}},rect:{style:{type:o},zIndex:{type:l},left:u("x"),top:u("y"),width:u(),height:u(),borderWidth:{type:l,min:0},borderStyle:{alias:"borderType",type:c,enums:C(k.default.LINE_TYPES,"value"),back:k.default.LINE_TYPES[0].value},fillColor:{type:o}},text:{style:{type:o},zIndex:{type:l},left:u("x"),top:u("y"),width:u(),height:u(),orientation:{type:o},rotation:{alias:"rotate",type:l,parse:n},alpha:{type:l,min:0,max:1},fontFamily:{type:c,enums:C(k.default.FONT_FAMILIES,"value"),back:k.default.FONT_FAMILIES[1].value},fontSize:{type:l,min:0},lineHeight:{type:o},letterSpacing:{type:l,min:0},align:{type:c,enums:C(["left","center","right"]),back:"left"},valign:{type:c,enums:C(["top","middle","bottom"]),back:"top"},fontWeight:{type:c,enums:C(k.default.FONT_WEIGHTS),back:k.default.FONT_WEIGHTS[0]},fontColor:{type:o},backgroundColor:{type:o},direction:{type:c,enums:C(k.default.DIRECTIONS),back:k.default.DIRECTIONS[0]},fontItalic:{type:s,parse:r},fontUnderline:{type:s,parse:r}},image:{style:{type:o},zIndex:{type:l},left:u("x"),top:u("y"),width:u(),height:u(),allowFailure:{type:s,parse:r},src:{type:o},rotation:{alias:"rotate",type:l,parse:n},alpha:{type:l,min:0,max:1}},barcode:{style:{type:o},zIndex:{type:l},left:u("x"),top:u("y"),width:u(),height:u(),type:{type:o},ratioMode:{type:o},schema:{type:c,enums:C(k.default.QRCODES_MAXICODE_SCHEMA),back:k.default.QRCODES_MAXICODE_SCHEMA[0]},primary:{type:o},opacity:{alias:"alpha",type:l,min:0,max:1},rotation:{type:l},hideText:{alias:"showText",type:s,parse:function(e){return!r(e)}}},table:{style:{type:o},zIndex:{type:l},left:u("x"),top:u("y"),width:u(),height:u(),borderWidth:{type:l,min:0},cellBorderWidth:{type:l,min:0},colspan:{type:l,min:1},rowspan:{type:l,min:1}}},D=function(e,t,i,r,n){if(N(t,i)){var o=t[i];o.parse&&(r=o.parse(r)),o.type==l?(r=a(r),N(o,"max")&&r>o.max&&(r=o.max),N(o,"min")&&r<o.min&&(r=o.min),o.convert&&(r=o.convert(r))):o.type==c&&(N(o.enums,r)||(r=o.back)),o.alias&&(n[o.alias]=r),n[i]=r}},O=function(e,t,i){var r=e.props;r._layouts=[],r._children=[];for(var n=0,o=[{node:i,key:"_layouts"},{node:t,key:"_children"}];n<o.length;n++)for(var a=o[n],l=!1,s=0,c=a.node.__b;s<c.length;s++){var d=c[s],u=d.__c;"#script"==u?r[a.key].push({tag:"#script",text:d.__d}):l||(l=!0,r[a.key].push({tag:u}))}},f=/([^;:]+):([^;]+)(?=;|$)/g,z=function(e){var r={};return e.replace(f,function(e,t,i){r[t]=i}),r},R=function(e,t,i){for(var r=0,n=e.__i;r<n.length;r++){var o=n[r];D(0,t,o.__g,o.__h,i)}var a=e.__j,l=a.style;if(l){var s=z(l);for(var c in s)D(0,t,c,s[c],i)}var d=a["editor:tip"];d&&(i.tip=d)},P={page:function(e,t){if(1===t.___){var i=I.page,r=M.get("__f"),n={xmlns:k.default.CLOUD_PRINT_NAME_SPACE,"xmlns:xsi":k.default.XSI_NAME_SPACE,"xsi:schemaLocation":k.default.SCHEMA_LOCATION_NAME_SPACE,"xmlns:editor":k.default.EDITOR_NAME_SPACE,width:k.default.PAGE_WIDTH_DEFAULT*r,height:k.default.PAGE_HEIGHT_DEFAULT*r,splitable:!1};R(t,i,n),e.page=n}},line:function(e,t){if(t.__e&&1<t.___){var i=I.line,r="90"==t.__j["editor:_deg_"],n=r?"vline":"hline",o=A.default.byType(n),a=o.getProps(0,0),l=M.get("__f");if(a.width*=l,a.height*=l,R(t,i,a),a.zIndex||(a.zIndex=e.elements.length+1),N(a,"startX")&&N(a,"startY")&&N(a,"endX")&&N(a,"endY")){var s=Math.abs(r?a.endY-a.startY:a.endX-a.startX);a.x=a.startX,a.y=a.startY,a[r?"height":"width"]=s}a[r?"width":"height"]=d.default.__g(a.lineWidth||1);var c={id:T.default.guid("e_"),type:n,ctor:o,props:a};e.elements.push(c)}},rect:function(e,t,i){var r=i[t.__e];if(r&&"layout"==r.__c){var n=A.default.byType("rect"),o=n.getProps(0,0),a=M.get("__f");o.width*=a,o.height*=a;var l=I.rect;R(r,l,o),R(t,l,o),o.fillColor&&(o.fill=!0);var s={id:T.default.guid("e_"),type:"rect",ctor:n,props:o};O(s,t,r),e.elements.push(s)}},text:function(e,t,i){var r=i[t.__e];if(r&&"layout"==r.__c||r&&"td"==r.__c){var n=t.__j,o=n.style,a=!1,l=I.text,s=void 0;o&&(a="vertical"==(s=z(o)).orientation);var c=a?"vtext":"htext",d=A.default.byType(c),u=d.getProps(0,0),f=M.get("__f");u.width*=f,u.height*=f;var p=n["editor:tip"];if(p&&(u.tip=p),"layout"==r.__c){R(r,l,u);var h=i[r.__e];h&&"td"==h.__c&&(u.supportCNStyle=!0)}else d.writeAdapter(!0,u),u.useCNStyle=!0,u.supportCNStyle=!0;if(s)for(var g in s)D(0,l,g,s[g],u);if(!S.default.isArray(u.lineHeight)){var _=u.lineHeight.match(/(\d+)(mm|%|$)/);if(_){var v=Number(_[1]);v<0&&(v=0),u.lineHeight=[v,_[2]||"mm"]}else u.lineHeight=["","mm"]}S.default.isArray(u.align)?u.valign&&S.default.isArray(u.align)&&(u.align[1]=u.valign):u.align=[u.align,u.valign||"top"],u.backgroundColor&&u.fontColor&&(u.color=1),n["editor:_printName_"]&&(u.alias=n["editor:_printName_"]),"true"==n["editor:component"]&&(u.allowEdit=0);var m=["",""];u.fontItalic&&(m[0]="italic"),u.fontUnderline&&(m[1]="underline"),u.fontStyle=m;for(var x=0,y=t.__b;x<y.length;x++){var b=y[x];if("#cdata"==b.__c){u.text=b.__d;break}}var w={id:T.default.guid("e_"),type:c,ctor:d,props:u};"layout"==r.__c&&O(w,t,r),e.elements.push(w)}},image:function(e,t,i){var r=i[t.__e];if(r&&"layout"==r.__c){var n=A.default.byType("image"),o=n.getProps(0,0),a=M.get("__f");o.width*=a,o.height*=a;var l=I.image;R(r,l,o),R(t,l,o);var s={id:T.default.guid("e_"),type:"image",ctor:n,props:o};return O(s,t,r),e.elements.push(s),s}return null},barcode:function(e,t,i){var r=i[t.__e];if(r&&"layout"==r.__c){var n=C(k.default.QRCODES,"value"),o=C(k.default.BARCODES,"value"),a=t.__j,l="qrcode",s=a.type,c=z(a.style||"");N(n,s)?l="qrcode":N(o,s)&&(l="90"==c.rotation?"vcode":"hcode");var d=A.default.byType(l),u=d.getProps(0,0),f=M.get("__f");u.width*=f,u.height*=f;var p=a["editor:tip"];p&&(u.tip=p);var h=I.barcode;R(r,h,u);for(var g=0,_=t.__i;g<_.length;g++){var v=_[g];D(0,h,v.__g,v.__h,u)}for(var m in c)D(0,h,m,c[m],u);for(var x=0,y=t.__b;x<y.length;x++){var b=y[x];if("#cdata"==b.__c){u.text=b.__d;break}}var w={id:T.default.guid("e_"),type:l,ctor:d,props:u};O(w,t,r),e.elements.push(w)}},table:function(e,t,d){var i=d[t.__e];if("layout"==i.__c){var r=A.default.byType("table").getProps(0,0),n=M.get("__f");r.width*=n,r.height*=n;for(var o=0,a=r.rows;o<a.length;o++){var l=a[o];if("tr"==l.type){l.height*=n;for(var s=0,c=l.cells;s<c.length;s++){var u=c[s];"td"==u.type&&(u.width*=n)}}}var f=d[i.__e];f&&"layout"==f.__c?r.splitable=!0:r.splitable=!1;var p=I.table;R(i,p,r),R(t,p,r),N(r,"cellBorderWidth")&&N(r,"borderWidth")&&(r.hideBorder=0===r.borderWidth&&0===r.cellBorderWidth);var h={id:T.default.guid("e_"),type:"table",ctor:A.default.byType("table"),props:r},g=t.__b;if(g){r.rows=[];for(var _=0,v=g;_<v.length;_++){var m=v[_],x=void 0,y=m.__c;if("#script"==y)x={tag:"#script",text:m.__d};else{var b=[],w=m.__b;if(w)for(var k=function(e){var t=e.__c;if("#script"==t)b.push({tag:"#script",text:e.__d});else{var i=-1,r=-1,n=Number(e.__j.width),o=Number(e.__j.rowspan)||1,a=Number(e.__j.colspan)||1;0<=n&&(i=n);var l=Number(e.__j.height);0<=l&&(r=l),i=L(i),r=L(r);var s=[],c=function(e){if(e)for(var t=0,i=e;t<i.length;t++){var r=i[t],n=r.__c,o=P[n];o?o({elements:s},r,d):c(r.__b)}};c(e.__b),b.push({tag:t,width:i,height:r,rowspan:o,colspan:a,children:s})}},S=0,C=w;S<C.length;S++){k(C[S])}x={tag:y,cells:b}}r.rows.push(x)}E.default.__h(r)}O(h,t,i),e.elements.push(h)}},header:function(e,t,i){if(e.setHeader=!0,"page"==i[t.__e].__c){var r=t.__j;r.height&&(e.page.header=L(r.height))}},footer:function(e,t,i){if(e.setFooter=!0,"page"==i[t.__e].__c){var r=t.__j;r.height&&(e.page.footer=L(r.height))}},"#script":function(e,t,i){var r=i[t.__e];r&&("page"==r.__c&&1==r.___||"td"==r.__c&&1<r.___)&&e.elements.push({id:T.default.guid("s_"),type:"#script",text:t.__d})}};t.default=function(e){var t=function(e){var t,i,r,n,o,a,l,s,c,d,u,f=e.length,p=0,h=0,g={___:0,__a:T.default.guid(),__b:[]},_={},v=e,m=[g];for(_[g.__a]=g;p<f;){if(t=1,"<"==v[0])if("?"==v[1])l={__c:"#xml",__d:c=(r=v.indexOf("?>"))<0?v:v.substring(0,r+2),__a:i=T.default.guid(),___:g.___+1,__e:g.__a},_[i]=l,g.__b.push(l),p+=d=c.length,t=0;else if("%"==v[1])l={__c:"#script",__d:c=(r=v.indexOf("%>"))<0?v:v.substring(0,r+2),__a:i=T.default.guid(),___:g.___+1,__e:g.__a},_[i]=l,g.__b.push(l),p+=d=c.length,t=0;else if("!"==v[1])c=(r=v.indexOf("]]>"))<0?v:v.substring(0,r+3),i=T.default.guid(),l={__c:"#cdata",__f:c,__d:c.slice(9,-3),__a:i,___:g.___+1,__e:g.__a},_[i]=l,g.__b.push(l),p+=d=c.length,t=0;else if("/"==v[1]){if(n=v.match(w)){var x=m.pop();if(n[1]!=x.__c)throw new Error('closed tag "'+n[1]+'" umatch opened tag "'+x.__c+'"');g=m[m.length-1],p+=d=n[0].length,t=0}}else(n=v.match(y))&&(o=n[1],p+=d=n[0].length,a=[],s={},n[2].replace(b,function(e,t,i){a.push({__g:t,__h:i||""}),s[t]=i}),u=n[3],i=T.default.guid(),l={__c:o,__i:a,__j:s,__b:[],__k:u,__a:i,___:g.___+1,__e:g.__a},_[i]=l,g.__b.push(l),u||(m.push(l),g=l),t=0);if(t&&(p+=d=(c=(r=v.indexOf("<"))<0?v:v.substring(0,r)).length,c.trim()&&(l={__c:"#text",__d:c,__a:i=T.default.guid(),___:g.___+1,__e:g.__a},g.__b.push(l))),h==p)throw new Error("bad input:"+v);v=v.substring(d),h=p}if(1<m.length)throw new Error("parsing failure:"+m[1].__c+" unclosed!");return{node:g,map:_}}(e),i=t.node,a=t.map,l={page:{},elements:[]},s=function(e){for(var t=0,i=e;t<i.length;t++){var r=i[t],n=r.__c,o=P[n];o&&o(l,r,a),r.__b&&"table"!=n&&s(r.__b)}};return s(i.__b),l.setHeader||(l.page.header=0),l.setFooter||(l.page.footer=0),delete l.setHeader,delete l.setFooter,l}}),define("cainiao/toxml",["../util/converter"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("../util/converter"),C=r.default.__i,o=r.default.__j,T=function(e){for(var t="\n";e--;)t+="\t";return t},n=function(e,t,i){var r=T(t+1),n=T(t+2);return r+'<line style="lineType:'+e.type+";lineColor:#000;lineWidth:"+o(i?e.width:e.height)+";zIndex:"+e.zIndex+'"'+n+'startX="'+C(e.x)+'"'+n+'startY="'+C(e.y)+'"'+n+'endX="'+C(e.x+(i?0:e.width))+'"'+n+'endY="'+C(e.y+(i?e.height:0))+'"'+(i?n+'editor:_deg_="90"':"")+n+'editor:tip="'+e.tip+'">'+r+"</line>"},a=function(e,t,i){var r=e.props,n=r._layouts,o=r._children,a=r.useCNStyle;a&&t--;var l=T(t+1),s=T(t+2),c=T(t+3),d='style="fontFamily:'+r.fontFamily+";";0!=r.rotate&&(d+="rotation:"+r.rotate+";"),1!=r.alpha&&(d+="alpha:"+r.alpha+";"),8!=r.fontSize&&(d+="fontSize:"+r.fontSize+";"),""!==r.lineHeight[0]&&(d+="lineHeight:"+r.lineHeight[0]+("%"==r.lineHeight[1]?"%":"")+";"),r.fontStyle[0]&&(d+="fontItalic:true;"),r.fontStyle[1]&&(d+="fontUnderline:true;"),"left"!=r.align[0]&&(d+="align:"+r.align[0]+";"),"top"!=r.align[1]&&(d+="valign:"+r.align[1]+";"),"normal"!=r.fontWeight&&(d+="fontWeight:"+r.fontWeight+";"),"ltr"!=r.direction&&(d+="direction:"+r.direction+";"),"1"==r.color&&(d+="fontColor:#fff;backgroundColor:#000;"),r.letterSpacing&&(d+="letterSpacing:"+r.letterSpacing+";"),i&&(d+="orientation:vertical;"),d+='"';var u="",f="";r.alias&&(f=c+'editor:_printName_="'+r.alias+'"'),0===r.allowEdit&&(f+=c+'editor:component="true"');var p=s+"<text "+d+f+c+'editor:tip="'+r.tip+'">';if(o&&o.length)for(var h=0,g=o;h<g.length;h++){"#script"==(m=g[h]).tag?p+=c+m.text:"#cdata"==m.tag&&(p+=c+"<![CDATA["+r.text+"]]>")}else p+=c+"<![CDATA["+r.text+"]]>";if(p+=s+"</text>",n&&n.length)for(var _=0,v=n;_<v.length;_++){var m;"#script"==(m=v[_]).tag?u+=s+m.text:"text"==m.tag&&(u+=p)}else u=p;return a?u:l+'<layout editor:_for_="'+Date.now()+'"'+s+'width="'+C(r.width)+'"'+s+'height="'+C(r.height)+'"'+s+'left="'+C(r.x)+'"'+s+'top="'+C(r.y)+'"'+s+'style="zIndex:'+r.zIndex+'">'+u+l+"</layout>"},l=function(e,t,i){var r=e.props,n=r._layouts,o=r._children,a="",l="",s=T(t+1),c=T(t+2),d=T(t+3);l="qrcode"==i?("maxicode"==r.type&&(a=d+'primary="'+r.primary+'"'+d+'schema="'+r.schema+'"'),"opacity:"+r.alpha+";"):"opacity:"+r.alpha+";hideText:"+!r.showText+";rotation:"+("vcode"==i?90:0)+";";var u="",f=c+'<barcode type="'+r.type+'"'+d+'ratioMode="keepRatio"'+d+'style="'+l+'"'+a+d+'editor:tip="'+r.tip+'">';if(o&&o.length)for(var p=0,h=o;p<h.length;p++){"#script"==(v=h[p]).tag?f+=d+v.text:"#cdata"==v.tag&&(f+=d+"<![CDATA["+r.text+"]]>")}else f+=d+"<![CDATA["+r.text+"]]>";if(f+=c+"</barcode>",n&&n.length)for(var g=0,_=n;g<_.length;g++){var v;"#script"==(v=_[g]).tag?u+=c+v.text:"barcode"==v.tag&&(u+=f)}else u=f;return s+'<layout editor:_for_="'+Date.now()+'"'+c+'width="'+C(r.width)+'"'+c+'height="'+C(r.height)+'"'+c+'left="'+C(r.x)+'"'+c+'top="'+C(r.y)+'"'+c+'style="zIndex:'+r.zIndex+'">'+u+s+"</layout>"},A={hline:function(e,t){var i=e.props;return n(i,t,!1)},vline:function(e,t){var i=e.props;return n(i,t,!0)},rect:function(e,t){var i=e.props,r=i._layouts,n=i._children,o="",a=T(t+1),l=T(t+2),s=T(t+3);1!=i.borderWidth&&(o+="borderWidth:"+i.borderWidth+";"),"solid"!=i.borderType&&(o+="borderStyle:"+i.borderType+";"),i.fill&&(o+="fillColor:#000;"),o&&(o=' style="'+o+'"');var c="";o?o+=s+'editor:tip="'+i.tip+'"':o=' editor:tip="'+i.tip+'"';var d=l+"<rect"+o+">";if(n&&n.length){for(var u=0,f=n;u<f.length;u++){"#script"==(g=f[u]).tag&&(d+=s+g.text)}d+=l}if(d+="</rect>",r)for(var p=0,h=r;p<h.length;p++){var g;"#script"==(g=h[p]).tag?c+=l+g.text:"rect"==g.tag&&(c+=d)}else c=d;return a+'<layout editor:_for_="'+Date.now()+'"'+l+'width="'+C(i.width)+'"'+l+'height="'+C(i.height)+'"'+l+'left="'+C(i.x)+'"'+l+'top="'+C(i.y)+'"'+l+'style="zIndex:'+i.zIndex+'">'+c+a+"</layout>"},image:function(e,t){var i=e.props,r=i._layouts,n="",o=T(t+1),a=T(t+2),l=T(t+3);0!=i.rotate&&(n+="rotation:"+i.rotate+";"),1!=i.alpha&&(n+="alpha:"+i.alpha+";"),n&&(n=l+'style="'+n+'"');var s=a+'<image src="'+i.src+'"'+n+" "+l+'allowFailure="false"'+l+'editor:tip="'+i.tip+'"/>',c="";if(r)for(var d=0,u=r;d<u.length;d++){var f=u[d];"#script"==f.tag?c+=a+f.text:"image"==f.tag&&(c+=s)}else c=s;return o+'<layout editor:_for_="'+Date.now()+'"'+a+'width="'+C(i.width)+'"'+a+'height="'+C(i.height)+'"'+a+'left="'+C(i.x)+'"'+a+'top="'+C(i.y)+'"'+a+'style="zIndex:'+i.zIndex+'">'+c+o+"</layout>"},htext:function(e,t){return a(e,t,!1)},vtext:function(e,t){return a(e,t,!0)},qrcode:function(e,t){return l(e,t,"qrcode")},hcode:function(e,t){return l(e,t,"hcode")},vcode:function(e,t){return l(e,t,"vcode")},table:function(e,t){var i=e.props,r=i._layouts,n=T(t+1);i.splitable&&t++;var o=T(t+1),a=T(t+2),l=T(t+3),s=T(t+4),c=a+"<table";i.hideBorder&&(c+=' style="borderWidth:0;cellBorderWidth:0;"'),c+=' editor:tip="'+i.tip+'">';for(var d=0,u=i.rows;d<u.length;d++){var f=u[d];if("#script"==f.tag)c+=""+l+f.text;else if("tr"==f.tag){c+=l+"<tr>";for(var p=0,h=f.cells;p<h.length;p++){if("#script"==(w=h[p]).tag)c+=""+s+w.text;else if("td"==w.tag)if(c+=s+'<td width="'+C(w.width)+'" height="'+C(w.height)+'"',1<w.rowspan&&(c+=' rowspan="'+w.rowspan+'"'),1<w.colspan&&(c+=' colspan="'+w.colspan+'"'),c+=">",w.children&&w.children.length){for(var g=0,_=w.children;g<_.length;g++){var v=_[g],m=A[v.type];m&&(c+=m(v,t+4))}c+=s+"</td>"}else c+="</td>"}c+=l+"</tr>"}}c+=a+"</table>";var x="";if(r)for(var y=0,b=r;y<b.length;y++){var w;"#script"==(w=b[y]).tag?x+=a+w.text:"table"==w.tag&&(x+=c)}else x=c;var k=a+'height="'+C(i.height)+'"';i.splitable&&(k="");var S=o+'<layout editor:_for_="'+Date.now()+'"'+a+'width="'+C(i.width)+'"'+k+a+'left="'+C(i.x)+'"'+a+'top="'+C(i.y)+'"'+a+'style="zIndex:'+i.zIndex+'">'+x+o+"</layout>";return i.splitable?n+'<layout orientation="vertical">'+S+n+"</layout>":S},"#script":function(e,t){return""+T(t+1)+e.text}};t.default=function(e){var t=e.page,i='<?xml version="1.0" encoding="UTF-8"?>\n',r=t.splitable?' splitable="true"':"";i+='<page xmlns="'+t.xmlns+'"\n    xmlns:xsi="'+t["xmlns:xsi"]+'"\n    xsi:schemaLocation="'+t["xsi:schemaLocation"]+'"\n    xmlns:editor="'+t["xmlns:editor"]+'"\n    width="'+C(t.width)+'" height="'+C(t.height)+'"'+r+">",0<t.header&&(i+=T(1)+'<header height="'+C(t.header)+'"></header>');for(var n=0,o=e.elements;n<o.length;n++){var a=o[n];if(!a.props.barred){var l=A[a.type];l&&(i+=l(a,0))}}return 0<t.footer&&(i+=T(1)+'<footer height="'+C(t.footer)+'"></footer>'),i+="\n</page>"}}),define("util/converter",["$","magix"],function(e,t,i){"use strict";t.__esModule=!0;var a=e("$"),r=e("magix"),n=function(e,t){return void 0===t&&(t=2),Number(e.toFixed(t))},o={"<":"&lt;",">":"&gt;","&":"&amp;"};t.default={__iy:function(e){return 0|e.toFixed(0)},__az:n,__i:function(e){var t=r.State.get("__f"),i=.26458333331386*Number(e)/t;return n(i)},__e:function(e){var t=r.State.get("__f");return n(3.7795275593333*Number(e)*t)},__g:function(e){return n(1.3333333333333*e*r.State.get("__f"))},__j:function(e){return n(.75*e/r.State.get("__f"))},__bb:function(e){var t=e.x,i=e.y,r=a.default("#stage_stage").offset();return{x:t-=r.left,y:i-=r.top}},__aC:function(e,t){var i=t.x,r=t.y,n=t.find?e.parents('[data-role="table-cell"]'):e,o=(n=n.length?n.eq(0):a.default("#stage_stage")).offset();return{x:i-=o.left,y:r-=o.top}},__bE:function(e){var t=e.x,i=e.y,r=a.default("#stage_outer"),n=r.offset();return{x:t=t-n.left+r.prop("scrollLeft"),y:i=i-n.top+r.prop("scrollTop")}},__aT:function(e){var t=e.x,i=e.y,r=a.default("#stage_stage").offset(),n=a.default("#stage_outer").offset();return{x:t+=r.left-n.left,y:i+=r.top-n.top}},__bG:function(e){var t=e.x,i=e.y,r=a.default("#stage_stage").offset(),n=a.default("#stage_outer").offset();return{x:t+=n.left-r.left,y:i+=n.top-r.top}},__ez:function(e){return e.replace(/[<>&]/g,function(e){return o[e]}).replace(/ /g,"&nbsp;").replace(/(?:\r\n|\r|\n)/g,"<br />")},__eB:function(e){return e.replace(/&nbsp;/g," ").replace(/<br>/g,"\r\n").replace(/<br \/>/g,"\r\n").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/<div>([\s\S\n]*?)<\/div>/g,"\r\n$1")}}}),define("util/table",["../cainiao/const","magix"],function(e,t,i){"use strict";t.__esModule=!0;var _e=e("../cainiao/const"),r=e("magix"),ve=function(e,t){void 0===t&&(t={});for(var i,r,n={},o=t.startRow,a=t.endRow,l=t.column,s=function(e,t,i){n[e]||(n[e]={}),n[e][t]=i},c=function(e,t,i,r){for(var n={row:e,cell:t},o=t+1;o<t+r;o++)s(e,o,n);for(var a=e+1;a<e+i;a++)for(o=t;o<t+r;o++)s(a,o,n)},d=function(e,t,i){return void 0!==o&&e<o?1:void 0===l?0:!(l==t)&&!(t<l&&l<t+i)},u=0,f=0,p=0,h=[];;){var g=e[u];if(!g||void 0!==a&&a<u)break;var _={row:u,col:f,cell:p},v=void 0;if(r=f,v=n[i=u]?n[i][r]:0)d(u,f,1)||(_.ref=v,h.push(_)),f++;else if(g.cells&&g.cells[p]){var m=g.cells[p],x=m.colspan||1,y=m.rowspan||1;_.rowspan=y,_.colspan=x,(1<y||1<x)&&c(u,f,y,x),d(u,f,x)||(_.data=!0,_.td=g.cells[p],h.push(_)),f++,p++}else 0===u&&(h.$c=f),u++,p=f=0}return h},R=function(e){e.id||(e.id=r.default.guid("td_"))},me=function(e){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i],o=[];if("tr"==n.tag){var a={tag:n.tag,cells:o};if(n.cells)for(var l=0,s=n.cells;l<s.length;l++){var c=s[l];"td"==c.tag&&o.push(c)}t.push(a)}}return t},p=function(e,t,i,r){for(var n=null;;){var o=e[i+=r];if(!o)break;if(o.ref&&(o=o.ref),o.row!=t.row||o.cell!=t.cell){n=o;break}}return n},P=function(e,t){for(var i=0;i<e.length;i++){var r=e[i];if(r.cells)for(var n=0,o=r.cells;n<o.length;n++){var a=o[n];if("td"==a.tag&&a.id==t.id)return i}}return-1},B=function(e,t){var i,r=-1,n=e.cells,o=0;if(n){for(var a=0,l=0;o<n.length;o++){var s=n[o];if("td"==s.tag){if(t==a){r=o,i=s;break}a++,l=o}}-1==r&&(r=t==1+a?l+1:o)}return{index:r,cell:i}},xe=function(e,t){for(var i=-1,r=0,n=0,o=0;n<e.length;n++){if("tr"==e[n].tag){if(r==t){i=n;break}r++,o=n}}return-1==i&&(i=r+1==t?o+1:n),i},b=function(e,t){for(var i={tag:"tr",cells:[]},r=0;r<e;r++)i.cells.push({tag:"td",height:t});return i},N=function(e,t){var i=e.rowIndex,r=e.colIndex,n=e.rows,o=!1;if(t){R(t);for(var a=0;a<n.length;a++){var l=n[a],s=!1;if("tr"==l.tag&&l.cells)for(var c=0;c<l.cells.length;c++){var d=l.cells[c];if("td"==d.tag&&d.id==t.id){i==a&&r==c||(o=!0,e.rowIndex=a,e.colIndex=c),s=!0;break}}if(s)break}}return o},H=function(e,t){if(e<t)return{newCellsSpan:1,updatedSpan:1};var i=Math.floor(e/t);return{newCellsSpan:i,updatedSpan:e-i*t+i}},L=function(e,t){var i=e.rows,r=e.rowIndex,n=e.colIndex,o="left"==t||"right"==t,a=o?function(e,t){var i=e.rows,r=e.rowIndex,n=e.colIndex,o=i[r].cells,a=n,l=null,s=o[a];if("left"==t){for(;0<=--a;)if((v=o[a])&&"td"==v.tag){l=v;break}}else if("right"==t)for(;++a<o.length;)if((v=o[a])&&"td"==v.tag){l=v;break}if(!l)return null;var c="right"==t?s:l,d="right"==t?l:s,u=me(i);R(c),R(d);for(var f=P(u,s),p=-1,h=-1,g=0,_=ve(u,{startRow:f,endRow:f});g<_.length;g++){var v;(v=_[g]).data&&(v.td.id==c.id?p=v.col:v.td.id==d.id&&(h=v.col))}return p+(c.colspan||1)==h?l:null}(e,t):function(e,t){var i=e.rows,r=e.rowIndex,n=e.colIndex,o=me(i),a=i[r].cells[n];R(a);var l=P(o,a);if(!("down"==t&&l==o.length-1||"up"==t&&0===l)){for(var s=a.rowspan||1,c="down"==t?l+s:l,d=ve(o,{endRow:c}),u=-1,f=null,p=0,h=d;p<h.length;p++)(v=h[p]).data&&v.td.id==a.id&&(u=v.col);for(var g=0,_=d;g<_.length;g++){var v;if((v=_[g]).data&&v.col==u){var m=v.rowspan||1;if("down"==t&&v.row==c||"up"==t&&v.row+m==c){f=v.td;break}}}return f}}(e,t);if(a){var l=o?"rowspan":"colspan";return(i[r].cells[n][l]||1)==(a[l]||1)?a:void 0}},k=function(e,t){var i=e.rows,r=e.rowIndex,n=e.colIndex;if(!(r<0||n<0)){var o=i[r].cells[n];R(o);for(var a=me(i),l=ve(a),s=null,c=0;c<l.length;c++){var d=l[c];if(d.data)if(a[d.row].cells[d.cell].id==o.id){if("left"==t){if(0<d.col)(u=p(l,d,c,-1))&&(s=a[u.row].cells[u.cell])}else if("right"==t){if(d.col<l.$c-1)(f=p(l,d,c,1))&&(s=a[f.row].cells[f.cell])}else if("top"==t){var u;(u=p(l,d,c,-l.$c))&&(s=a[u.row].cells[u.cell])}else if("bottom"==t){var f;(f=p(l,d,c,l.$c))&&(s=a[f.row].cells[f.cell])}break}}return s}};t.default={__fi:function(e,t){var i=!1;return"r"==t?i=this.__iz(e):"c"==t?i=this.__iA(e):"rt"==t?i=this.__iB(e,0):"rb"==t?i=this.__iB(e,1):"cb"==t?i=this.__iC(e,0):"ca"==t&&(i=this.__iC(e,1)),i&&this.__h(e,{fsize:e.lockSize}),i},__ft:function(e,t){var i=!1;return"sh"==t?i=this.__iD(e,2):"sv"==t?i=this.__iE(e,2):"ml"==t?i=this.__iF(e,"left"):"mr"==t?i=this.__iF(e,"right"):"mu"==t?i=this.__iF(e,"up"):"md"==t&&(i=this.__iF(e,"down")),i&&this.__h(e),i},__iF:function(e,t){var i=!1,r="left"==t||"right"==t,n=L(e,t);if(n){var o=e.rows,a=e.rowIndex,l=e.colIndex,s=o[a].cells[l],c="right"==t||"down"==t,d=c?s:n,u=c?n:s;r?d.width+=u.width:d.height+=u.height,R(u),R(d);var f=d.children||(d.children=[]),p=u.children;if(p)for(var h=0,g=p;h<g.length;h++){var _=g[h];_.zIndex=f.length+1,f.push(_)}for(var v=P(o,u),m=o[v].cells,x=!1,y=me(o),b=P(y,u),w=m.length;w--;){"td"==(E=m[w]).tag&&(E.id==u.id?m.splice(w,1):x=!0)}var k=r?"colspan":"rowspan",S=s[k]||1,C=n[k]||1;if(d[k]=S+C,!x){for(var T=0,A=ve(y,{endRow:b});T<A.length;T++){var E;if((E=A[T]).data){var M=E.rowspan||1;E.row+M-1>=b&&(E.td.rowspan-=1)}}o.splice(v,1)}N(e,d),i=!0}return i},__iD:function(e,t){var i=e.rows,r=e.rowIndex,n=e.colIndex,o=i[r].cells;if(o){var a=!1,l=o[n],s=l.colspan||1,c=l.rowspan||1,d=l.width/t;if(1<s){l.width=-1;var u=H(s,t),f=u.newCellsSpan,p=u.updatedSpan;l.colspan=p;for(var h=t<s?t-1:s-1,g=0;g<h;g++){var _={tag:"td",width:-1};1<f&&(_.colspan=f),1<c&&(_.rowspan=c),o.splice(n+1,0,_)}a=!0}if(s<t){l.width=d;var v=t-s,m=me(i),x=ve(m);R(l);for(var y=-1,b=0,w=x;b<w.length;b++){if((C=w[b]).data&&C.td.id==l.id){y=C.col;break}}for(var k=0,S=x;k<S.length;k++){var C;if((C=S[k]).data){var T=C.td,A=l.id!=T.id&&C.col==y,E=C.col<y&&C.colspan+C.col>y;(A||E)&&(T.colspan||(T.colspan=1),T.colspan+=v)}}for(g=0;g<v;g++){_={tag:"td",width:d};1<c&&(_.rowspan=c),o.splice(n+1,0,_)}a=!0}return a}},__iE:function(e,t){var i=e.rows,r=e.rowIndex,n=e.colIndex,o=i[r].cells;if(o){var a=!1,l=o[n],s=l.colspan||1,c=l.rowspan||1,d=me(i);R(l);var u=P(d,l),f=l.height/t;if(1<c){l.height=-1;var p=ve(d,{startRow:u,endRow:u+c-1}),h=H(c,t),g=h.newCellsSpan,_=h.updatedSpan;l.rowspan=_;for(var v=-1,m=0,x=p;m<x.length;m++){if((N=x[m]).data&&N.td.id==l.id){v=N.col;break}}for(var y=0,b=p;y<b.length;y++){var w=(N=b[y]).col,k=N.row,S=N.cell;if(u+_<=k&&w===v&&(k+u+_)%g==0){var C=i[O=xe(i,k)],T=B(C,S).index;C.cells.splice(T,0,{tag:"td",colspan:s,height:f,width:S.width,rowspan:g})}}a=!0}if(c<t){l.height=f;for(var A=t-c,E=0,M=p=ve(d,{startRow:0,endRow:u});E<M.length;E++){var N;if((N=M[E]).data){var L=N.td,I=N.rowspan||1;if(L.id!=l.id&&N.row+I>u){var D=I+A;N.td.rowspan=D}}}var O=xe(i,u),z={tag:"tr",cells:[{tag:"td",width:l.width,colspan:s}]};i.splice(O+1,0,z),a=!0}return a}},__iA:function(e){var t=e.rows,i=e.rowIndex,r=e.colIndex,n=t[i].cells;if(n){var o=!1;(o=k(e,"left"))||(o=k(e,"right"));var a=n[r],l=me(t);R(a);var s=ve(l);if(!(s.$c<=1)){for(var c,d=0,u=s;d<u.length;d++){if((h=u[d]).data&&h.td.id==a.id){c=h.col;break}}for(var f=0,p=s;f<p.length;f++){var h;if((h=p[f]).data)if(h.col<=c&&1<h.colspan&&h.col+h.colspan>c)h.td.colspan--;else if(h.col==c){var g=t[xe(t,h.row)].cells;R(h.td);for(var _=g.length;_--;)if(g[_].id==h.td.id){g.splice(_,1);break}}}return o?N(e,o):(e.rowIndex=-1,e.colIndex=-1),!0}}},__iz:function(e){var t=e.rows,i=e.rowIndex,r=e.colIndex,n=t[i].cells;if(n){var o=!1;(o=k(e,"top"))||(o=k(e,"bottom"));var a=n[r],l=me(t);if(!(l.length<=1)){R(a);for(var s,c=P(l,a),d=ve(l,{endRow:c}),u={},f=0,p=d;f<p.length;f++){(v=p[f]).data&&(v.row===c?v.rowspan&&1<v.rowspan&&(u[v.col]={td:v.td,rowspan:v.rowspan-1}):v.row<c&&v.row+v.rowspan>c&&v.td.rowspan--)}d=ve(l,{endRow:c+1,startRow:c+1});for(var h=t[xe(t,c)].cells,g=0,_=d;g<_.length;g++){var v;if(u[(v=_[g]).col]){var m=u[v.col],x=m.td,y=m.rowspan;if(x.children=[],s){R(s);for(var b=h.length;b--;)if(h[b].id==s.id){h.splice(b,0,x);break}}else{t[xe(t,v.row)].cells.unshift(x)}x.rowspan=y,s=x}else s=v.td}var w=xe(t,c);return t.splice(w,1),o?N(e,o):(e.rowIndex=-1,e.colIndex=-1),!0}}},__iB:function(e,t){var i=e.rows,r=e.rowIndex,n=e.colIndex,o=i[r].cells;if(o){var a=o[n],l=me(i);R(a);var s=P(l,a),c=ve(l,{startRow:s,endRow:s}),d=c.$c,u=0===t;if(0===(t+=s)||t===l.length){var f=b(d,a.height),p=xe(i,0===t?t:t+1);return i.splice(p,0,f),u&&e.rowIndex++,!0}for(var h=0,g=0,_=c=ve(l,{endRow:t});g<_.length;g++){var v=_[g];if(v.data){var m=v.row<t,x=v.row+v.rowspan>t;m&&x&&v.td.rowspan++,v.row===t&&(h+=v.colspan||1)}}f=b(h,a.height);var y=xe(i,t);return i.splice(y,0,f),u&&e.rowIndex++,!0}},__iC:function(e,t){var i=e.rows,r=e.rowIndex,n=e.colIndex,o=i[r].cells;if(o){var a=o[n],l=me(i);R(a);for(var s=P(l,a),c=ve(l,{startRow:s,endRow:s}),d=c.$c,u=0===t,f=0,p=c;f<p.length;f++){var h=p[f];if(h.data&&h.td.id==a.id){t=h.col+t;break}}if(0===t||t===d){for(var g=0,_=i;g<_.length;g++){if("tr"==(w=_[g]).tag){var v=B(w,0===t?t:t+1).index;w.cells.splice(v,0,{tag:"td",width:a.width})}}return u&&e.colIndex++,!0}for(var m={},x=0,y=c=ve(l,{column:t});x<y.length;x++){var b=y[x];if(1!==m[b.row]){var w=i[xe(i,b.row)],k=B(w,b.cell),S=(v=k.index,k.cell);if(b.col==t)w.cells.splice(v,0,{tag:"td",width:a.width});else if(S&&S.colspan++,(m[b.row]=1)<b.rowspan)for(var C=b.row+1;C<b.row+b.rowspan;C++)m[C]=1}}return u&&e.colIndex++,!0}},__fe:function(e,t){var i=k(e,t);return N(e,i)},__fh:function(e,t,i){for(var r=0,n=0,o=null,a=0,l=e;a<l.length;a++){var s=l[a];if("tr"==s.tag){var c=!1;if(s.cells&&t===r)for(var d=0,u=s.cells;d<u.length;d++){if("td"==u[d].tag){if(i===n){c=!0,o=s.cells[n];break}n++}}if(c)break;r++}}return o},__h:function(e,t){void 0===t&&(t={});for(var i=t.col,r=t.share,n=t.lw,o=t.fsize,a=t.nextRow,l=t.nextCol,s=t.changeType,c=e.rows,d=me(c),u=ve(d),f=[],p=[],h=0,g=u;h<g.length;h++){if((pe=g[h]).data){var _=(pe.colspan||1)-1,v=(pe.rowspan||1)-1;(void 0===p[pe.col]||p[pe.col]>_)&&(p[pe.col]=_),(void 0===f[pe.row]||f[pe.row]>v)&&(f[pe.row]=v)}}for(var m=0,x=u;m<x.length;m++){if((pe=x[m]).data){var y=pe.td;if(1<(_=y.colspan))for(var b=pe.col;b<pe.col+_;b++)y.colspan-=p[b]||0;if(1<(v=y.rowspan)){var w=y.height/v;for(b=pe.row;b<pe.row+v;b++)y.rowspan-=f[b]||0,y.height-=(f[b]||0)*w}}}for(var k={},S={},C=0,T=0,A=0,E=u=ve(d);A<E.length;A++){if((pe=E[A]).col>T&&(T=pe.col),0==pe.col&&(k[pe.row]=(k[pe.row]||0)+(S[pe.row]||0)),pe.data){var M=k[pe.row]||0;for(_=pe.td.colspan||1,v=pe.td.rowspan||1,b=pe.row+1;b<pe.row+v;b++)S[b]=(S[b]||0)+_;k[pe.row]=M+_}}for(var N=0;N<d.length;){var L=T-(M=k[N]||0)+1;if(0<L)for(var I=xe(c,N);0<L;)C=1,c[I].cells.push({tag:"td",width:-1,height:-1}),L--;N++}C&&(d=me(c),u=ve(d));for(var D=[],O=[],z=!1,R=!1,P=0,B=u;P<B.length;P++){if((pe=B[P]).data){var H=pe.cell,W=pe.col,X=d[pe.row].cells[H];pe.colspan&&1!=pe.colspan||(void 0===D[W]||X.width>D[W]&&!z||i&&i.id==X.id)&&(z=z||i&&i.id==X.id,D[W]=X.width),pe.rowspan&&1!=pe.rowspan||(void 0===O[pe.row]||X.height>O[pe.row]&&!R||i&&X.id==i.id)&&(R=R||i&&X.id==i.id,O[pe.row]=X.height)}}for(var F=0,j=u;F<j.length;F++){if((pe=j[F]).data){H=pe.cell;var q=pe.col;if(0<=(X=d[pe.row].cells[H]).width&&1<pe.colspan){var $=0,U=0;for(b=q;b<q+pe.colspan;b++)void 0!==D[b]&&0<=D[b]&&($+=D[b],U++);if(U<pe.colspan){var V=Math.max(X.width-$,0)/(pe.colspan-U);for(b=q;b<q+pe.colspan;b++)(void 0===D[b]||D[b]<0)&&(D[b]=V)}else if($<X.width&&(!i||i.id==X.id)||$>X.width&&i&&i.id==X.id)for(b=q;b<q+pe.colspan;b++)D[b]=0<$?D[b]/$*X.width:X.width/pe.colspan}if(0<=X.height&&1<pe.rowspan){var K=0,Y=0;for(b=pe.row;b<pe.row+pe.rowspan;b++)void 0!==O[b]&&0<=O[b]&&(K+=O[b],Y++);if(Y<pe.rowspan)for(w=Math.max(0,X.height-K)/(pe.rowspan-Y),b=pe.row;b<pe.row+pe.rowspan;b++)(void 0===O[b]||O[b]<0)&&(O[b]=w);else if(K<X.height&&(!i||i.id==X.id)||K>X.height&&i&&i.id==X.id)for(b=pe.row;b<pe.row+pe.rowspan;b++)O[b]=0<K?O[b]/K*X.height:X.height/pe.rowspan}}}if(i&&e.lockSize){if("row"==s){v=i.rowspan||1;O[i.row+v]=a}if("col"==s){_=i.colspan||1;D[i.col+_]=l}}for(var G=0,Q=0,Z=0,J=D;Z<J.length;Z++){0<=(V=J[Z])&&(G+=V,Q++)}for(var ee=0,te=0,ie=0,re=O;ie<re.length;ie++){0<=(w=re[ie])&&(ee+=w,te++)}if(Q<D.length){V=_e.default.TABLE_CELLS_WIDTH;G<e.width&&(V=(e.width-G)/(D.length-Q));for(b=D.length;b--;)D[b]<0&&(D[b]=V)}else if((n||o)&&G>e.width||o&&G<e.width)for(b=D.length;b--;)D[b]=D[b]/G*e.width;if(te<O.length){w=_e.default.TABLE_ROWS_HEIGHT;ee<e.height&&(w=(e.height-ee)/(O.length-te));for(b=O.length;b--;)O[b]<0&&(O[b]=w)}else if(o&&(ee>e.height||ee<e.height))for(b=O.length;b--;)O[b]=O[b]/ee*e.height;for(var ne=G=0,oe=D;ne<oe.length;ne++){G+=V=oe[ne]}for(var ae=ee=0,le=O;ae<le.length;ae++){ee+=w=le[ae]}e.width=G,e.height=ee;var se=!1;if(r){if("x"==r)for(V=G/D.length,b=D.length;b--;)1e-4<Math.abs(D[b]-V)&&(se=!0,D[b]=V);if("y"==r)for(w=ee/O.length,b=O.length;b--;)1e-4<Math.abs(O[b]-w)&&(se=!0,O[b]=w)}for(var ce=null,de=0,ue=0,fe=u;ue<fe.length;ue++){var pe;if((pe=fe[ue]).data){H=pe.cell;var he=pe.row,ge=pe.col;v=(X=d[he].cells[H]).rowspan||1,_=X.colspan||1;X.row=he;for(V=0,w=0,b=X.col=ge;b<ge+_;b++)V+=D[b];for(b=he;b<he+v;b++)w+=O[b];ce&&0<ge&&(ce.ref&&(ce=ce.ref),X.left={row:ce.row,col:ce.cell}),0<he&&((ce=u[de-D.length]).ref&&(ce=ce.ref),X.top={row:ce.row,col:ce.cell}),X.hasRight=!e.lockSize||ge+_<D.length,X.hasBottom=!e.lockSize||he+v<O.length,X.hasTop=0<he,X.width=V,X.height=w}ce=pe,de++}return t&&(t.colWidths=D,t.rowHeights=O),se}}}),define("util/transform",[],function(e,t,i){"use strict";t.__esModule=!0;var n={lt:0,mt:1,rt:2,rm:3,rb:4,mb:5,lb:6,lm:7},r=function(e,t){var i=e.props,r=t.props;return i.zIndex-r.zIndex};t.default={__aD:function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}},__aw:function(e,t){var i=e.x,r=e.y,n=e.width,o=e.height,a=Math.sqrt(Math.pow(n,2)+Math.pow(o,2))/2,l=n?Math.round(180*Math.atan(o/n)/Math.PI):0,s=180-t-l,c=l-t,d=90-t,u=t,f=n/2,p=o/2,h=i+f,g=r+p,_={x:h+a*Math.cos(s*Math.PI/180),y:g-a*Math.sin(s*Math.PI/180)},v={x:h+p*Math.cos(d*Math.PI/180),y:g-p*Math.sin(d*Math.PI/180)},m={x:h+a*Math.cos(c*Math.PI/180),y:g-a*Math.sin(c*Math.PI/180)},x={x:h+f*Math.cos(u*Math.PI/180),y:g+f*Math.sin(u*Math.PI/180)},y={x:h-a*Math.cos(s*Math.PI/180),y:g+a*Math.sin(s*Math.PI/180)},b={x:h-p*Math.sin(u*Math.PI/180),y:g+p*Math.cos(u*Math.PI/180)},w={x:h-a*Math.cos(c*Math.PI/180),y:g+a*Math.sin(c*Math.PI/180)},k={x:h-f*Math.cos(u*Math.PI/180),y:g-f*Math.sin(u*Math.PI/180)},S=Math.min(_.x,m.x,y.x,w.x),C=Math.max(_.x,m.x,y.x,w.x),T=Math.min(_.y,m.y,y.y,w.y),A=Math.max(_.y,m.y,y.y,w.y);return{point:[_,v,m,x,y,b,w,k],width:C-S,height:A-T,left:S,right:C,top:T,bottom:A}},__ax:function(e,t){var i=n[t],r=i-4;return r<0&&(r=i+4),{current:{index:i,point:e[i]},opposite:{index:r,point:e.slice(r,r+1)[0]}}},__iG:function(e,t){var i=e.x,r=e.y,n=e.width,o=e.height,a=e.scale,l={x:0,y:0},s=n*(a.x-1),c=o*(a.y-1),d=n+s,u=o+c,f=i-s/2,p=r-c/2;if(t){var h=[{x:i,y:r},{x:i+n,y:r},{x:i+n,y:r+o},{x:i,y:r+o}],g=[{x:f,y:p},{x:f+d,y:p},{x:f+d,y:p+u},{x:f,y:p+u}];l.x=h[t].x-g[t].x,l.y=h[t].y-g[t].y}return{x:f+l.x,y:p+l.y,width:d,height:u}},__ay:function(e,t,i,r){var n=this.__iG({x:e.x,y:e.y,width:e.width,height:e.height,scale:t}),o=n.width,a=n.height,l=this.__aw(n,e.rotate),s=i.point[r].x-l.point[r].x+l.left,c=i.point[r].y-l.point[r].y+l.top;return{left:s+l.width/2-o/2,top:c+l.height/2-a/2,width:o,height:a}},__iH:function(e){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i];"#script"===n.type||n.props.barred||t.push(n)}return t},__aX:function(e){return this.__iH(e).sort(r)},__bi:function(e,t){var i=e.x,r=e.y,n=e.width,o=e.height;if(0==n)return{x:i,y:r};var a=i+n/2,l=r+o/2,s=Math.sqrt(n*n/2/2+o*o/2/2),c=180*Math.atan(o/n)/Math.PI+t+180;return{x:a+s*Math.cos(c*Math.PI/180),y:l+s*Math.sin(c*Math.PI/180)}}}}),define("i18n/en-us",[],function(e,t,i){"use strict";t.__esModule=!0,t.default={_dR:"Printer Designer",_bn:"Property",_bo:"Component Tree",_bq:"Use Original Size",_br:"Divide Table Width",_bs:"Divide Table Height",_bp:"Type",__bl:"Get image size error. Try again~~",_bd:"Press drag sort element z index",_be:"Delete element",_S:"XML Code",_dS:"Save",_T:"Cancel",_fG:"Confirm",_U:"Apply",__V:"Select All",__W:"Copy",__X:"Cut",__Y:"Paste",__Z:"Move Up",__a_:"Move Down",__aa:"To Top",__ab:"To Bottom",__ac:"Delete",__ad:"Add Rows Above",__ae:"Add Rows Below",__af:"Delete The Rows",__ag:"Add Cols Before",__ah:"Add Cols After",__ai:"Delete The Cols",_cH:"Redo",_cG:"Undo",_cI:"New",_co:"Templates",__cq:"Clear content and set a new page?",_cN:"Align left",_cP:"Align right",_cQ:"Align top",_cS:"Align bottom",_cK:"Stage horizontal centers(use each element center when shift key pressed)",_cJ:"Stage vertical centers(use each element center when shift key pressed)",_cR:"Align vertical centers",_cO:"Align horizontal centers",_cX:"Paper Size",_d_:"Paging Print",_da:"Papers",_dd:"Paper setting",_db:"Zoom-in",_dc:"Zoom-out",_di:"Expand toolbox",_dj:"Shrink toolbox",_dk:"Searching...",_fp:"Left",_fq:"Right",_fr:"Above",_fs:"Below",_gY:"Left",_gZ:"Center",_h_:"Right",_ha:"Top",_hb:"Middle",_hc:"Bottom",_hd:"Italic",_he:"Underline",_hO:"Broswer Images",_ib:"Images",__iw:"Image URL",__fE:"Tip",_gW:"Search...",__dU:"X",__dV:"Y",__eb:"Lock",__ec:"Name",__dY:"Alpha",__eH:"Width",__eI:"Height",__el:"Rotate",__fm:"V-Line",__ed:"H-Line",__ee:"Length",__ef:"Width",__eg:"Style",___:"Solid",__a:"Dashed",__b:"Dotted",__eO:"Rectangle",__eS:"Border",__eR:"Bd-Width",__eT:"Fill",__eP:"Width",__eQ:"Height",__fl:"V-Code",__dT:"H-Code",__eK:"QRCode",__dW:"Width",__dX:"Height",__eL:"Width",__eM:"Height",__dZ:"Content",__ea:"Show Text",__e_:"Category",__eN:"Schema",__eF:"Image",__eG:"Choose",__eJ:"Orig-Size",__eU:"Table",__fb:"Cell Pick",__fd:"Cell Size",__fc:"Op-Cell",__eZ:"Paging",__eY:"Bd-Hidden",__eV:"Width",__eW:"Height",__f_:"Div-Width",__fa:"Div-Height",__eX:"Lock Size",__eh:"H-Text",__fn:"V-Text",__ey:"Alias",__ex:"Content",__ew:"Align",__ev:"Style",__eu:"Direction",__et:"Weight",__eq:"Color",__er:"Default",__es:"White On Black",__ep:"Line Height",__eo:"Lt-Spacing",__en:"Font Size",__em:"Font Family",__ei:"Width",__ej:"Height",__ek:"CN Style",_eE:"Please input text",__c:"Simsun",__d:"Simhei",__fk:"Delete table",_aG:"Press move or use context menu",_fz:"H-Split Cell",_fA:"V-Split Cell",_fy:"Merge Down",_fx:"Merge Up",_fv:"Merge Left",_fw:"Merge Right",_J:"Delete line",_K:"Press move line position",_cL:"Vertical layout(use element center to align when shift key pressed.Average edit zone when ctrl pressed)",_cM:"Horizontal layout(use element center to align when shift key pressed.Average edit zone when ctrl pressed)",_cT:"Same width as select max width",_cU:"Same width as select min width",_cV:"Same height as select max height",_cW:"Same height as select min height",_id:"Paste Image",_ie:"Dragdrop(multiple)",_if:"Click Upload",_ic:"Search images",_ig:'Can not find images title contains "{0}"',__hU:"Not detected images. Please recopy and paste",_cp:"No templates",__dL:"Processing...",__dK:"missing temp_id or biz_id",_aH:"[unsaved {0}]",_aI:"[saving...]",__dI:"Detected unsaved history,recover it?",__dv:"Unsaved,quit?",_cY:"Header",_cZ:"Footer"}}),define("i18n/index",["magix","./zh-cn","./en-us"],function(e,t,i){"use strict";t.__esModule=!0;var a=e("magix"),r=e("./zh-cn"),n=e("./en-us"),l={"zh-cn":r.default,"en-us":n.default},s=a.default.has,c=/\{(\d+)\}/g;t.default=function(e){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];var r=(a.default.config("lang")||navigator.language).toLowerCase();s(l,r)||(r="zh-cn");var n=l[r],o=s(n,e)?n[e]:e;return i.length&&(o=o.replace(c,function(e,t){return t|=0,i.length>t?i[t]:e})),o}}),define("i18n/zh-cn",[],function(e,t,i){"use strict";t.__esModule=!0,t.default={_dR:"\u6253\u5370\u8bbe\u8ba1\u5668",_bn:"\u5c5e\u6027",_bo:"\u7ed3\u6784\u6811",_bp:"\u7c7b\u578b",_bq:"\u4f7f\u7528\u56fe\u7247\u81ea\u8eab\u5bbd\u9ad8",_br:"\u5355\u5143\u683c\u5747\u5206\u5bbd\u5ea6",_bs:"\u5355\u5143\u683c\u5747\u5206\u9ad8\u5ea6",__bl:"\u83b7\u53d6\u56fe\u7247\u5c3a\u5bf8\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff5e\uff5e",_bd:"\u6309\u4e0b\u62d6\u52a8\u6392\u5e8fz\u8f74",_be:"\u5220\u9664\u5143\u7d20",_S:"\u4ee3\u7801",_dS:"\u4fdd\u5b58",_T:"\u53d6\u6d88",_fG:"\u786e\u5b9a",_U:"\u5e94\u7528",__V:"\u5168\u9009",__W:"\u590d\u5236",__X:"\u526a\u5207",__Y:"\u7c98\u8d34",__Z:"\u4e0a\u79fb\u4e00\u5c42",__a_:"\u4e0b\u79fb\u4e00\u5c42",__aa:"\u79fb\u81f3\u9876\u5c42",__ab:"\u79fb\u5230\u5e95\u5c42",__ac:"\u5220\u9664",__ad:"\u4e0a\u65b9\u6dfb\u52a0\u884c",__ae:"\u4e0b\u65b9\u6dfb\u52a0\u884c",__af:"\u5220\u9664\u5f53\u524d\u884c",__ag:"\u524d\u9762\u6dfb\u52a0\u5217",__ah:"\u540e\u9762\u6dfb\u52a0\u5217",__ai:"\u5220\u9664\u5f53\u524d\u5217",_cH:"\u91cd\u505a",_cG:"\u64a4\u9500",_cI:"\u65b0\u5efa",_co:"\u901a\u7528\u6a21\u677f",__cq:"\u786e\u8ba4\u6e05\u7a7a\u65b0\u5efa\uff1f",_cN:"\u5de6\u5bf9\u9f50",_cP:"\u53f3\u5bf9\u9f50",_cQ:"\u4e0a\u5bf9\u9f50",_cS:"\u4e0b\u5bf9\u9f50",_cR:"\u5782\u76f4\u5c45\u4e2d\u5bf9\u9f50",_cO:"\u6c34\u5e73\u5c45\u4e2d\u5bf9\u9f50",_cK:"\u7f16\u8f91\u533a\u6c34\u5e73\u5c45\u4e2d(\u6309\u4e0bshift\u952e\u5219\u4ee5\u5355\u4e2a\u5143\u7d20\u4e2d\u5fc3\u70b9\u5bf9\u9f50)",_cJ:"\u7f16\u8f91\u533a\u5782\u76f4\u5c45\u4e2d(\u6309\u4e0bshift\u952e\u5219\u4ee5\u5355\u4e2a\u5143\u7d20\u4e2d\u5fc3\u70b9\u5bf9\u9f50)",_cX:"\u7eb8\u5f20\u5c3a\u5bf8",_d_:"\u662f\u5426\u5206\u9875",_da:"\u5e38\u7528\u7eb8\u5f20",_dd:"\u7eb8\u5f20\u8bbe\u7f6e",_db:"\u7f29\u5c0f",_dc:"\u653e\u5927",_di:"\u5c55\u5f00\u5de5\u5177\u680f",_dj:"\u6536\u8d77\u5de5\u5177\u680f",_dk:"\u641c\u7d22\u6253\u5370\u9879",_fp:"\u5411\u5de6",_fq:"\u5411\u53f3",_fr:"\u5411\u4e0a",_fs:"\u5411\u4e0b",_gY:"\u5c45\u5de6",_gZ:"\u5c45\u4e2d",_h_:"\u5c45\u53f3",_ha:"\u5c45\u4e0a",_hb:"\u5c45\u4e2d",_hc:"\u5c45\u4e0b",_hd:"\u659c\u4f53",_he:"\u4e0b\u5212\u7ebf",_hO:"\u6d4f\u89c8\u56fe\u5e93",_ib:"\u56fe\u7247\u5e93",__iw:"\u56fe\u7247\u7f51\u7edc\u5730\u5740",__fE:"\u63d0\u793a",_gW:"\u641c\u7d22\u5173\u952e\u8bcd",__dU:"X\u5750\u6807",__dV:"Y\u5750\u6807",__eb:"\u7f16\u8f91\u9501\u5b9a",__ec:"\u7ec4\u4ef6\u6811\u540d\u79f0",__dY:"\u900f\u660e\u5ea6",__eH:"\u5bbd",__eI:"\u9ad8",__el:"\u65cb\u8f6c\u89d2\u5ea6",__fm:"\u6c34\u5e73\u76f4\u7ebf",__ed:"\u5782\u76f4\u76f4\u7ebf",__ee:"\u7ebf\u6761\u957f\u5ea6",__ef:"\u7ebf\u6761\u5bbd\u5ea6",__eg:"\u7ebf\u6761\u6837\u5f0f",___:"\u5b9e\u7ebf",__a:"\u865a\u7ebf",__b:"\u70b9\u7ebf",__eO:"\u77e9\u5f62",__eS:"\u8fb9\u6846\u6837\u5f0f",__eR:"\u8fb9\u6846\u5bbd\u5ea6",__eT:"\u662f\u5426\u586b\u5145",__eP:"\u77e9\u5f62\u5bbd\u5ea6",__eQ:"\u77e9\u5f62\u9ad8\u5ea6",__fl:"\u7eb5\u5411\u6761\u7801",__dT:"\u6a2a\u5411\u6761\u7801",__eK:"\u4e8c\u7ef4\u7801",__dW:"\u6761\u7801\u5bbd\u5ea6",__dX:"\u6761\u7801\u9ad8\u5ea6",__eL:"\u4e8c\u7ef4\u7801\u5bbd\u5ea6",__eM:"\u4e8c\u7ef4\u7801\u9ad8\u5ea6",__dZ:"\u5185\u5bb9",__ea:"\u663e\u793a\u6587\u672c",__e_:"\u7801\u5f0f",__eN:"\u6a21\u5f0f",__eF:"\u56fe\u7247",__eG:"\u9009\u62e9\u56fe\u7247",__eJ:"\u8fd8\u539f\u5bbd\u9ad8",__eU:"\u8868\u683c",__fb:"\u5355\u5143\u683c\u9009\u53d6",__fd:"\u5355\u5143\u683c\u5bbd\u9ad8",__fc:"\u5355\u5143\u683c\u64cd\u4f5c",__eZ:"\u5206\u9875\u6253\u5370",__eY:"\u9690\u85cf\u8fb9\u6846",__eV:"\u8868\u683c\u5bbd",__eW:"\u8868\u683c\u9ad8",__f_:"\u5747\u5206\u5bbd\u5ea6",__fa:"\u5747\u5206\u9ad8\u5ea6",__eX:"\u9501\u5b9a\u5bbd\u9ad8",__eh:"\u6a2a\u5411\u6587\u672c",__fn:"\u7eb5\u5411\u6587\u672c",__ey:"\u6587\u672c\u522b\u540d",__ex:"\u6587\u672c\u5185\u5bb9",__ew:"\u6392\u5217",__ev:"\u6837\u5f0f",__eu:"\u8f93\u51fa\u65b9\u5411",__et:"\u5b57\u4f53\u7c97\u7ec6",__eq:"\u989c\u8272",__er:"\u9ed8\u8ba4",__es:"\u9ed1\u5e95\u767d\u5b57",__ep:"\u884c\u9ad8",__eo:"\u5b57\u95f4\u8ddd",__en:"\u5b57\u53f7",__em:"\u5b57\u4f53",__ei:"\u6587\u672c\u957f\u5ea6",__ej:"\u6587\u672c\u9ad8\u5ea6",__ek:"\u83dc\u9e1f\u903b\u8f91",_eE:"\u8bf7\u8f93\u5165\u6587\u672c",__c:"\u5b8b\u4f53",__d:"\u9ed1\u4f53",__fk:"\u5220\u9664\u8868\u683c",_aG:"\u6309\u4e0b\u62d6\u52a8\u6216\u4f7f\u7528\u53f3\u952e\u83dc\u5355",_fz:"\u6c34\u5e73\u62c6\u5206\u5355\u5143\u683c",_fA:"\u5782\u76f4\u62c6\u5206\u5355\u5143\u683c",_fy:"\u5411\u4e0b\u5408\u5e76\u5355\u5143\u683c",_fx:"\u5411\u4e0a\u5408\u5e76\u5355\u5143\u683c",_fv:"\u5411\u5de6\u5408\u5e76\u5355\u5143\u683c",_fw:"\u5411\u53f3\u5408\u5e76\u5355\u5143\u683c",_J:"\u5220\u9664\u5f53\u524d\u8f85\u52a9\u7ebf",_K:"\u6309\u4e0b\u62d6\u52a8\u53ef\u8c03\u6574\u8f85\u52a9\u7ebf\u4f4d\u7f6e",_cL:"\u5782\u76f4\u5747\u5206\u6392\u5217(\u6309\u4e0bshift\u952e\u5219\u4f7f\u7528\u5143\u7d20\u4e2d\u5fc3\u70b9\u8fdb\u884c\u5747\u5206,\u6309\u4e0bctrl\u5219\u5e73\u5206\u7f16\u8f91\u533a\u9ad8\u5ea6)",_cM:"\u6c34\u5e73\u5747\u5206\u6392\u5217(\u6309\u4e0bshift\u952e\u5219\u4f7f\u7528\u5143\u7d20\u4e2d\u5fc3\u70b9\u8fdb\u884c\u5747\u5206,\u6309\u4e0bctrl\u5219\u5e73\u5206\u7f16\u8f91\u533a\u5bbd\u5ea6)",_cT:"\u6309\u9009\u4e2d\u5143\u7d20\u6700\u5927\u5bbd\u5ea6\u540c\u5bbd",_cU:"\u6309\u9009\u4e2d\u5143\u7d20\u6700\u5c0f\u5bbd\u5ea6\u540c\u5bbd",_cV:"\u6309\u9009\u4e2d\u5143\u7d20\u6700\u5927\u9ad8\u5ea6\u540c\u9ad8",_cW:"\u6309\u9009\u4e2d\u5143\u7d20\u6700\u5c0f\u9ad8\u5ea6\u540c\u9ad8",_id:"\u7c98\u8d34\u56fe\u7247",_ie:"\u62d6\u62fd\uff08\u591a\u4e2a\uff09\u4e0a\u4f20",_if:"\u70b9\u51fb\u4e0a\u4f20",_ic:"\u641c\u7d22\u56fe\u7247\u5e93",_ig:'\u627e\u4e0d\u5230"{0}"\u7684\u56fe\u7247',__hU:"\u672a\u68c0\u6d4b\u5230\u56fe\u7247\uff0c\u8bf7\u91cd\u65b0\u590d\u5236\u7c98\u8d34",_cp:"\u6682\u65e0\u901a\u7528\u6a21\u677f",__dL:"\u6b63\u5728\u5904\u7406...",__dK:'\u7f3a\u5c11\u53c2\u6570"temp_id"\u6216"biz_id"',_aH:"[\u672a\u4fdd\u5b58 {0}]",_aI:"[\u4fdd\u5b58\u4e2d...]",__dI:"\u68c0\u6d4b\u5230\u4e0a\u6b21\u672a\u4fdd\u5b58\u5c31\u9000\u51fa\uff0c\u662f\u5426\u6062\u590d\u5230\u4e0a\u6b21\u7f16\u8f91\u72b6\u6001\uff1f",__dv:"\u5185\u5bb9\u5c1a\u672a\u4fdd\u5b58\uff0c\u786e\u8ba4\u5173\u95ed\uff1f",_cY:"\u9875\u5934",_cZ:"\u9875\u811a"}}),define("service/index",["magix","$"],function(e,t,i){"use strict";t.__esModule=!0;var u=e("magix"),f=e("$"),r=u.default.Service.extend(function(r,n){var e=r.get("method")||"GET",t=r.get("upload"),i=r.get("params"),o={url:r.get("url"),type:e,data:i,dataType:"json",complete:function(e,t){try{if("error"==t)n({msg:e.statusText});else{var i=e.responseJSON;if(!i||"1"!=i.status)return void n({msg:i?i.message||"server error":"data error"});r.set("data",i.data),n()}}catch(e){n({msg:e.message})}}};if(t){for(var a=new FormData,l=u.default.config("uploadImagesKey")||"files",s=0,c=r.get("files")||[];s<c.length;s++){var d=c[s];a.append(l,d)}o.cache=!1,o.processData=!1,o.contentType=!1,o.data=a}f.default.ajax(o)});r.add([{name:"__de",url:u.default.config("getComponentsUrl")},{name:"__hQ",url:u.default.config("getImagesUrl")},{name:"__hS",url:u.default.config("uploadImagesUrl"),method:"POST",upload:!0},{name:"__cn",url:u.default.config("getTemplatesUrl"),cache:12e4},{name:"__dM",url:u.default.config("getContentUrl")},{name:"__dz",url:u.default.config("saveContentUrl"),method:"POST"}]),t.default={ctor:function(){var e=this;e.on("rendercall",function(){delete e.__ix})},request:function(e){e=e||u.default.guid("r");var t=new r;return this.capture(e,t,!0),t},fetch:function(e,t){var i=JSON.stringify(e);this.request(i).all(e,t)},save:function(e,t){var i=this,r=JSON.stringify(e);i.lock(r,function(){i.request(r+"_request").save(e,t)})},lock:function(e,t){this.__ix||(this.__ix={});var i=this.__ix;i[e]||(i[e]=t)()},unlock:function(e){var t=this.__ix;t&&delete t[e]},upload:function(e,i,r){this.request(i).all({name:"upload",files:e},function(e,t){r(i,t.get("data",[]))})}}}),define("element/index",["magix","./hline/designer","./vline/designer","./htext/designer","./vtext/designer","./image/designer","./rect/designer","./qrcode/designer","./hcode/designer","./vcode/designer","./table/designer","../util/table"],function(e,t,i){"use strict";t.__esModule=!0;for(var _=e("magix"),r=e("./hline/designer"),n=e("./vline/designer"),o=e("./htext/designer"),a=e("./vtext/designer"),l=e("./image/designer"),s=e("./rect/designer"),c=e("./qrcode/designer"),d=e("./hcode/designer"),u=e("./vcode/designer"),f=e("./table/designer"),v=e("../util/table"),p=[r.default,n.default,s.default,o.default,a.default,l.default,d.default,u.default,c.default,f.default],h=Object.create(null),g=0,m=p;g<m.length;g++){var x=m[g];h[x.type]=x}t.default={list:p,byType:function(e){return h[e]},byJSON:function(e){var f,p=this,t=[],h={},g=function(e,t){for(var i=0,r=e;i<r.length;i++){var n=r[i];if("#script"==n.type?t.push(n):n.props.barred||(f=_.default.guid("e_"),n.id&&(h[n.id]=n),n.id=f,n.ctor=p.byType(n.type),t.push(n)),"table"==n.type){for(var o=0,a=n.props.rows;o<a.length;o++){var l=a[o];if("tr"==l.tag)for(var s=0,c=l.cells;s<c.length;s++){var d=c[s];if("td"==d.tag&&d.children){var u=[];g(d.children,u),d.children=u}}}v.default.__h(n.props)}}};return g(e,t),{elements:t,map:h}}}}),define("element/hcode/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("../../editor/core/designer"),n=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../cainiao/const"),l=e("../../i18n/index"),s=r.default.prototype;t.default=r.default.extend({init:function(){this.updater.set({elementPath:"element/hcode/index"}),s.init.apply(this,arguments)}},{title:"__dT",type:"hcode",modifier:{resize:!0,resizeX:!0,resizeY:!0,resizeXY:!0},getProps:function(e,t){return{zIndex:0,x:0+e,y:0+t,width:151.18,alpha:1,rotate:0,height:90.71,locked:!1,text:"",showText:!1,type:"code128",tip:l.default("__dT")}},props:[{tip:"__dU",key:"x",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__dV",key:"y",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__dW",key:"width",type:n.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__e},{tip:"__dX",key:"height",type:n.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__e},{tip:"__dY",type:n.default.NUMBER,fixed:1,step:.1,max:1,min:"0",key:"alpha"},{tip:"__dZ",type:n.default.TEXTAREA,styleVTop:1,key:"text"},{tip:"__e_",type:n.default.DROPDOWN,textKey:"text",valueKey:"value",key:"type",items:a.default.BARCODES},{tip:"__ea",type:n.default.BOOLEAN,key:"showText"},{type:n.default.SPLITER},{tip:"__eb",key:"locked",type:n.default.BOOLEAN,role:"free"},{tip:"__ec",key:"tip",role:"free",type:n.default.INPUT}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><rect width="4" height="30" x="10" y="15" style="fill:#fff;"/><rect width="2" height="30" x="16" y="15" style="fill:#fff;"/><rect width="2" height="30" x="20" y="15" style="fill:#fff;"/><rect width="8" height="30" x="24" y="15" style="fill:#fff;"/><rect width="2" height="30" x="35" y="15" style="fill:#fff;"/><rect width="3" height="30" x="39" y="15" style="fill:#fff;"/><rect width="2" height="30" x="43" y="15" style="fill:#fff;"/><rect width="4" height="30" x="46" y="15" style="fill:#fff;"/></svg>'})}),define("element/hcode/index",["magix"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix"),n="https://img.alicdn.com/tfs/",o={upca:n+"TB1VkRRqcUrBKNjSZPxXXX00pXa-190-112.svg",upce:n+"TB1VkRRqcUrBKNjSZPxXXX00pXa-190-112.svg",upca_text:n+"TB1NTQHqlsmBKNjSZFsXXaXSVXa-222-122.svg",upce_text:n+"TB1NTQHqlsmBKNjSZFsXXaXSVXa-222-122.svg",code128:n+"TB1t77KqljTBKNjSZFNXXasFXXa-312-100.svg",code93:n+"TB1t77KqljTBKNjSZFNXXasFXXa-312-100.svg",c25inter:n+"TB1t77KqljTBKNjSZFNXXasFXXa-312-100.svg",code128_text:n+"TB1A_MKqljTBKNjSZFNXXasFXXa-312-122.svg",code93_text:n+"TB1A_MKqljTBKNjSZFNXXasFXXa-312-122.svg",c25inter_text:n+"TB1A_MKqljTBKNjSZFNXXasFXXa-312-122.svg",code39:n+"TB1NXIiqkomBKNjSZFqXXXtqVXa-448-100.svg",code39_text:n+"TB1TdocqiMnBKNjSZFoXXbOSFXa-448-122.svg",ean8:n+"TB1mIuAqlnTBKNjSZPfXXbf1XXa-134-100.svg",ean8_text:n+"TB1rOARqiAnBKNjSZFvXXaTKXXa-134-122.svg",ean13:n+"TB1n8RrqCcqBKNjSZFgXXX_kXXa-190-112.svg",ean13_text:n+"TB1stsuqcj_B1NjSZFHXXaDWpXa-214-122.svg",itf14:n+"TB1Y247qdknBKNjSZKPXXX6OFXa-270-100.svg",itf14_text:n+"TB1PDcUqkUmBKNjSZFOXXab2XXa-270-122.svg"};t.default=r.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.width,d=e.height,u=e.alpha,f=e.x,p=e.y,h=e.zIndex,g=e.codeMap,_=e.type,v=e.showText,m=c<=1||d<=1||0==u;s+='<div style="left:'+r(f)+"px;top:"+r(p)+"px;width:"+r(c)+"px;height:"+r(d)+"px;z-index:"+r(h)+";",m&&(s+="border:dotted 1px #ff000030"),s+='" class="pt">';var x=g[_+(v?"_text":"")];return s+=" ",s+=x?'<img style="width:100%;height:100%;opacity:'+r(u)+';" src="'+r(x)+'">':" \u6682\u4e0d\u652f\u6301"+r(_)+"\u7684\u9884\u89c8 ",s+="</div>"},init:function(e){this.assign(e),this.updater.set({codeMap:o})},assign:function(e){return this.updater.set(e.props),e.forceUpdate},render:function(){this.updater.digest()}})}),define("element/hline/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("../../editor/core/designer"),n=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../cainiao/const"),l=e("../../i18n/index"),s=r.default.prototype;t.default=r.default.extend({init:function(){this.updater.set({elementPath:"element/hline/index"}),s.init.apply(this,arguments)}},{title:"__ed",type:"hline",modifier:{resize:!0,resizeX:!0},getProps:function(e,t){return{zIndex:0,x:0+e,y:0+t,rotate:0,width:75.59,height:1.33,type:"solid",locked:!1,tip:l.default("__ed")}},props:[{tip:"__dU",key:"x",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__dV",key:"y",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__ee",key:"width",type:n.default.NUMBER,min:.01,fixed:2,max:2800,read:o.default.__i,write:o.default.__e},{tip:"__ef",key:"height",type:n.default.NUMBER,min:.01,fixed:2,max:2800,read:o.default.__j,write:o.default.__g},{tip:"__eg",key:"type",type:n.default.DROPDOWN,textKey:"text",valueKey:"value",items:a.default.LINE_TYPES},{type:n.default.SPLITER},{tip:"__eb",key:"locked",type:n.default.BOOLEAN,role:"free"},{tip:"__ec",key:"tip",type:n.default.INPUT,role:"free"}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path d="M 10 29 L 50 29" style="stroke:#fff;stroke-width:2"/></svg>'})}),define("element/hline/index",["magix"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix");t.default=r.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.x,d=e.y,u=e.width,f=e.type,p=e.height,h=e.zIndex;return s+='<div style="left:'+r(c)+"px;top:"+r(d)+"px;width:"+r(u<1?1:u)+"px;border-top:"+r(f)+" "+r(p<1?1:p)+"px #000;z-index:"+r(h)+'" class="pt"></div>'},init:function(e){this.assign(e)},assign:function(e){return this.updater.set(e.props),e.forceUpdate},render:function(){this.updater.digest()}})}),define("element/htext/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("../../editor/core/designer"),n=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../cainiao/const"),l=e("../../i18n/index"),s=function(e,t){return t.height=e?(t._x=t.x,t._y=t.y,t._width=t.width,t._height=t.height,t.x=.76,t.y=.76,t.width=-3.77):(t.x=t._x,t.y=t._y,t.width=t._width,t._height),t.xLocked=e,t.yLocked=e,t.widthLocked=e,t.heightLocked=e,t.zIndex=0,e},c=r.default.prototype;t.default=r.default.extend({init:function(){this.updater.set({elementPath:"element/htext/index"}),c.init.apply(this,arguments)}},{title:"__eh",type:"htext",modifier:{rotate:!0,resize:!0,resizeX:!0,resizeY:!0,resizeXY:!0},writeAdapter:s,getProps:function(e,t){return{zIndex:0,x:e,y:t,width:94.49,height:18.9,locked:!1,rotate:0,alpha:1,supportCNStyle:!1,useCNStyle:!1,fontFamily:"SimHei",fontSize:8,lineHeight:["","mm"],fontStyle:[],align:["left","top"],letterSpacing:0,fontWeight:"normal",text:"",alias:"",direction:"ltr",color:"-1",tip:l.default("__eh"),allowEdit:1}},props:[{tip:"__dU",key:"x",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__dV",key:"y",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__ei",key:"width",type:n.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__e},{tip:"__ej",key:"height",type:n.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__e},{tip:"__ek",key:"useCNStyle",ifKey:"supportCNStyle",ifValue:!0,type:n.default.BOOLEAN,refresh:!0,write:s},{tip:"__el",key:"rotate",type:n.default.NUMBER,min:-360,max:360},{tip:"__dY",key:"alpha",type:n.default.NUMBER,min:"0",max:1,fixed:1,step:.1},{tip:"__em",key:"fontFamily",type:n.default.DROPDOWN,textKey:"text",valueKey:"value",items:a.default.FONT_FAMILIES},{tip:"__en",key:"fontSize",type:n.default.NUMBER,min:"0"},{tip:"__eo",key:"letterSpacing",type:n.default.NUMBER,min:"0"},{tip:"__ep",key:"lineHeight",type:n.default.LINEHEIGHT,min:"0"},{tip:"__eq",key:"color",type:n.default.DROPDOWN,textKey:"text",valueKey:"value",items:[{text:"__er",value:"-1"},{text:"__es",value:1}]},{tip:"__et",key:"fontWeight",type:n.default.DROPDOWN,items:a.default.FONT_WEIGHTS},{tip:"__eu",key:"direction",type:n.default.DROPDOWN,items:a.default.DIRECTIONS},{tip:"__ev",key:"fontStyle",type:n.default.FONTSTYLE},{tip:"__ew",key:"align",type:n.default.FONTALIGN},{tip:"__ex",styleVTop:1,key:"text",type:n.default.TEXTAREA,gtKey:"allowEdit",gtValue:0},{tip:"__ey",key:"alias",type:n.default.INPUT,gtKey:"allowEdit",gtValue:0},{type:n.default.SPLITER},{tip:"__eb",type:n.default.BOOLEAN,key:"locked",role:"free"},{tip:"__ec",key:"tip",type:n.default.INPUT,role:"free"}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path style="stroke:#fff;stroke-width:2" d="M 15 20 L 45 20 M 17 31 L 30 31 M 15 40 L 38 40" /></svg>'})}),define("element/htext/index",["magix","../../util/converter"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),r=e("../../util/converter");t.default=n.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.color,d=e.useCNStyle,u=e.width,f=e.height,p=e.alpha,h=e.x,g=e.y,_=e.rotate,v=e.fontFamily,m=e.fontSize,x=e.scale,y=e.letterSpacing,b=e.lineHeight,w=e.direction,k=e.fontWeight,S=e.fontStyle,C=e.flexMap,T=e.align,A=e.zIndex,E=e.vId,M=e.alias,N=e.toHTML,L=e.text,I=e.i18n,D="1"!=c&&!d&&(u<=1||f<=1||0==p);return s+='<div class="pt" style="left:'+r(h)+"px;top:"+r(g)+"px;transform:rotate("+r(_)+"deg);font-family:'"+r(v)+"';font-size:"+r(m*x)+"pt;letter-spacing:"+r(y)+"pt;",""!==b[0]&&(s+="line-height:"+r(b[0])+r(b[1])+";"),s+="width:",s+=d?"92%":r(u)+"px",s+=";height:",s+=d?"92%":r(f)+"px",s+=";direction:"+r(w)+";",s+="1"==c?"color:#fff;background-color:#000;":"color:#000;background-color:#fff;",s+="font-weight:"+r(k)+";",S[0]&&(s+="font-style:italic;"),S[1]&&(s+="text-decoration:underline;"),s+="overflow:hidden;display:flex;align-items:"+r(C[T[1]])+";justify-content:"+r(C[T[0]])+";z-index:"+r(A)+";cursor:text;",D&&(s+="border:dotted 1px #ff000030"),s+='"><div style="-webkit-user-modify:read-write-plaintext-only;outline:none;cursor:text;opacity:'+r(p)+';" contenteditable="true" data-role="text-element" mx-focusout="'+t+'\x1e__eD()" mx-input="'+t+'\x1e__eC()" id="area_'+r(E)+'">',s+=M?n(N(M)):L?n(N(L)):r(I("_eE")),s+="</div></div>"},init:function(e){this.assign(e),this.updater.set({flexMap:{left:"flex-start",center:"center",right:"flex-end",bottom:"flex-end",top:"flex-start",middle:"center"},toHTML:r.default.__ez})},assign:function(e){return this.__eA=e,this.updater.set(e.props),this.updater.set({scale:n.State.get("__f")}),e.forceUpdate},render:function(){if(this.updater.digest(),this.updater.get("editable")){var e=$("#area_"+this.id);e.focus();var t=document.createRange();t.selectNodeContents(e[0]),t.collapse(!1);var i=window.getSelection();if(0!=i.anchorOffset)return;i.removeAllRanges(),i.addRange(t)}},"__eC<input>":function(e){var t=r.default.__eB(e.eventTarget.innerHTML);this.__eA.props.text=t},"__eD<focusout>":function(e){var t=this.__eA,i=t.id,r=t.props;r.editable=!1,n.State.fire("__aA"),n.State.fire("__am",{data:r,eId:i}),n.State.fire("__D")}})}),define("element/image/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("../../editor/core/designer"),n=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../i18n/index"),l=r.default.prototype;t.default=r.default.extend({init:function(){this.updater.set({elementPath:"element/image/index"}),l.init.apply(this,arguments)}},{title:"__eF",type:"image",modifier:{rotate:!0,resize:!0,resizeX:!0,resizeY:!0,resizeXY:!0},getProps:function(e,t){return{zIndex:0,width:188.98,height:188.98,tip:a.default("__eF"),rotate:0,src:"//img.alicdn.com/tfs/TB1E1OSryAnBKNjSZFvXXaTKXXa-200-200.png",locked:!1,alpha:1,x:e,y:t}},props:[{tip:"__dU",key:"x",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__dV",key:"y",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__eG",key:"src",type:n.default.IMAGE,updateSize:!0},{tip:"__eH",key:"width",max:2800,type:n.default.NUMBER,min:"0",fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__eI",key:"height",type:n.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__e},{tip:"__el",key:"rotate",type:n.default.NUMBER,min:-360,max:360},{tip:"__dY",key:"alpha",type:n.default.NUMBER,min:"0",max:1,fixed:1,step:.1},{tip:"__eJ",type:n.default.ORIGINSIZE},{type:n.default.SPLITER},{tip:"__eb",type:n.default.BOOLEAN,key:"locked",role:"free"},{tip:"__ec",key:"tip",type:n.default.INPUT,role:"free"}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><rect width="32" height="28" x="14" y="16" style="fill:none;stroke-width:2;stroke:#fff" rx="2" ry="2"/><circle cx="22" cy="24" r="4" style="fill:#fff" /><path style="stroke:#fff;stroke-width:2;fill:none" d="M 14 42 L 22 34 L 36 39 L 46 26" /></svg>'})}),define("element/image/index",["magix"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix");t.default=r.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.width,d=e.height,u=e.alpha,f=e.src,p=e.x,h=e.y,g=e.rotate,_=e.zIndex,v=c<=1||d<=1||0==u;return s+='<div style="',s+=f?"width:"+r(c)+"px;height:"+r(d)+"px;":"width:100px;height:100px;",s+="left:"+r(p)+"px;top:"+r(h)+"px;transform:rotate("+r(g)+"deg);z-index:"+r(_)+";",v&&(s+="border:dotted 1px #ff000030"),s+='" class="pt"><img style="width:100%;height:100%;opacity:'+r(u)+';" src="',f&&(s+=r(f)),s+='" ',f||(s+=' alt="\u8bf7\u8bbe\u7f6e\u56fe\u7247" '),s+="/></div>"},init:function(e){this.assign(e)},assign:function(e){return this.updater.set(e.props),e.forceUpdate},render:function(){this.updater.digest()}})}),define("element/qrcode/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("../../editor/core/designer"),n=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../cainiao/const"),l=e("../../i18n/index"),s=r.default.prototype;t.default=r.default.extend({init:function(){this.updater.set({elementPath:"element/qrcode/index"}),s.init.apply(this,arguments)}},{title:"__eK",type:"qrcode",modifier:{resize:!0,resizeXY:!0},getProps:function(e,t){return{zIndex:0,x:0+e,y:0+t,width:113.39,alpha:1,rotate:0,height:113.39,locked:!1,text:"",schema:2,primary:"",type:"qrcode",tip:l.default("__eK")}},props:[{tip:"__dU",key:"x",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__dV",key:"y",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__eL",key:"width",type:n.default.NUMBER,min:"0",max:2800,fixed:2,refresh:!0,sync:"height",read:o.default.__i,write:o.default.__e},{tip:"__eM",key:"height",type:n.default.NUMBER,min:"0",max:2800,sync:"width",fixed:2,refresh:!0,read:o.default.__i,write:o.default.__e},{tip:"__dY",type:n.default.NUMBER,fixed:1,step:.1,max:1,min:"0",key:"alpha"},{tip:"__dZ",type:n.default.TEXTAREA,styleVTop:1,key:"text"},{tip:"__e_",type:n.default.DROPDOWN,textKey:"text",valueKey:"value",key:"type",refresh:!0,items:a.default.QRCODES},{tip:"__eN",type:n.default.DROPDOWN,ifKey:"type",ifValue:"maxicode",key:"schema",items:a.default.QRCODES_MAXICODE_SCHEMA},{tip:"primary",type:n.default.INPUT,key:"primary",ifKey:"type",ifValue:"maxicode"},{type:n.default.SPLITER},{tip:"__eb",key:"locked",type:n.default.BOOLEAN,role:"free"},{tip:"__ec",key:"tip",role:"free",type:n.default.INPUT}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><rect width="16" height="16" x="10" y="10" style="fill:none;stroke-width:2;stroke:#fff"/><rect width="16" height="16" x="34" y="10" style="fill:none;stroke-width:2;stroke:#fff"/><rect width="16" height="16" x="10" y="34" style="fill:none;stroke-width:2;stroke:#fff"/><rect width="6" height="6" x="15" y="15" style="fill:#fff;"/><rect width="6" height="6" x="39" y="15" style="fill:#fff;"/><rect width="6" height="6" x="15" y="39" style="fill:#fff;"/><rect width="4" height="4" x="34" y="34" style="fill:#fff;"/><rect width="4" height="4" x="46" y="34" style="fill:#fff;"/><rect width="4" height="8" x="38" y="38" style="fill:#fff;"/><rect width="4" height="4" x="34" y="46" style="fill:#fff;"/><rect width="5" height="4" x="43" y="46" style="fill:#fff;"/><rect width="4" height="8" x="46" y="42" style="fill:#fff;"/></svg>'})}),define("element/qrcode/index",["magix"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix");t.default=r.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.width,d=e.height,u=e.alpha,f=e.x,p=e.y,h=e.zIndex,g=c<=1||d<=1||0==u;return s+='<div style="left:'+r(f)+"px;top:"+r(p)+"px;width:"+r(c)+"px;height:"+r(d)+"px;z-index:"+r(h)+";",g&&(s+="border:dotted 1px #ff000030"),s+='" class="pt"><img style="width:100%;height:100%;opacity:'+r(u)+';" src="https://img.alicdn.com/tfs/TB1NQQvqlsmBKNjSZFFXXcT9VXa-250-250.svg"></div>'},init:function(e){this.assign(e)},assign:function(e){return this.updater.set(e.props),e.forceUpdate},render:function(){this.updater.digest()}})}),define("element/rect/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("../../editor/core/designer"),n=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../cainiao/const"),l=e("../../i18n/index"),s=r.default.prototype;t.default=r.default.extend({init:function(){this.updater.set({elementPath:"element/rect/index"}),s.init.apply(this,arguments)}},{title:"__eO",type:"rect",modifier:{resize:!0,resizeX:!0,resizeY:!0,resizeXY:!0},getProps:function(e,t){return{zIndex:0,x:0+e,y:0+t,width:98.27,borderWidth:1,borderType:"solid",fill:!1,rotate:0,height:98.27,locked:!1,tip:l.default("__eO")}},props:[{tip:"__dU",key:"x",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__dV",key:"y",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__eP",key:"width",type:n.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__e},{tip:"__eQ",key:"height",type:n.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__e},{tip:"__eR",key:"borderWidth",type:n.default.NUMBER,min:"0"},{tip:"__eS",key:"borderType",type:n.default.DROPDOWN,textKey:"text",valueKey:"value",items:a.default.LINE_TYPES},{tip:"__eT",key:"fill",type:n.default.BOOLEAN},{type:n.default.SPLITER},{tip:"__eb",key:"locked",type:n.default.BOOLEAN,role:"free"},{tip:"__ec",key:"tip",role:"free",type:n.default.INPUT}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><rect width="42" height="28" x="9" y="16" style="fill:none;stroke-width:2;stroke:#fff"/></svg>'})}),define("element/rect/index",["magix"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix");t.default=r.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.borderWidth,d=e.fill,u=e.x,f=e.y,p=e.width,h=e.height,g=e.scale,_=e.borderType,v=e.zIndex,m=!(c||d);if(s+='<div style="left:'+r(u)+"px;top:"+r(f)+"px;width:"+r(p)+"px;height:"+r(h)+"px;",c){p=c*g;s+="border:"+r(_)+" "+r(p<1?1:p)+"px #000;"}return d&&(s+="background-color:#000;"),s+="z-index:"+r(v)+";",m&&(s+="border:dotted 1px #ff000030"),s+='" class="pt"></div>'},init:function(e){this.assign(e)},assign:function(e){return this.updater.set(e.props),this.updater.set({scale:r.State.get("__f")}),e.forceUpdate},render:function(){this.updater.digest()}})}),define("element/table/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index","../../util/table"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("../../editor/core/designer"),n=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../cainiao/const"),l=e("../../i18n/index"),s=e("../../util/table"),c=r.default.prototype;t.default=r.default.extend({init:function(){this.updater.set({elementPath:"element/table/index"}),c.init.apply(this,arguments)}},{title:"__eU",type:"table",modifier:{},getProps:function(e,t){return{zIndex:0,x:0+e,y:0+t,rotate:0,width:3*a.default.TABLE_CELLS_WIDTH,height:2*a.default.TABLE_ROWS_HEIGHT,rowIndex:-1,colIndex:-1,splitable:!0,hideBorder:!1,lockSize:!1,rows:[{tag:"tr",cells:[{tag:"td",height:a.default.TABLE_ROWS_HEIGHT,width:a.default.TABLE_CELLS_WIDTH},{tag:"td",height:a.default.TABLE_ROWS_HEIGHT,width:a.default.TABLE_CELLS_WIDTH},{tag:"td",height:a.default.TABLE_ROWS_HEIGHT,width:a.default.TABLE_CELLS_WIDTH}]},{tag:"tr",cells:[{tag:"td",height:a.default.TABLE_ROWS_HEIGHT,width:a.default.TABLE_CELLS_WIDTH},{tag:"td",height:a.default.TABLE_ROWS_HEIGHT,width:a.default.TABLE_CELLS_WIDTH},{tag:"td",height:a.default.TABLE_ROWS_HEIGHT,width:a.default.TABLE_CELLS_WIDTH}]}],locked:!1,tip:l.default("__eU")}},props:[{tip:"__dU",key:"x",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__dV",key:"y",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__eV",key:"width",type:n.default.LABEL,read:o.default.__i},{tip:"__eW",key:"height",type:n.default.LABEL,read:o.default.__i},{tip:"__eX",key:"lockSize",type:n.default.BOOLEAN,write:function(e,t){return t.lockSize=e,s.default.__h(t),e}},{tip:"__eY",key:"hideBorder",type:n.default.BOOLEAN},{tip:"__eZ",key:"splitable",type:n.default.BOOLEAN},{tip:"__f_",type:n.default.CELLCOLSHARE},{tip:"__fa",type:n.default.CELLROWSHARE},{tip:"__fb",type:n.default.CELLFOCUS,gtKey:"rowIndex",gtValue:-1},{tip:"__fc",styleVTop:1,type:n.default.CELLOPERATE,gtKey:"rowIndex",gtValue:-1},{tip:"__fd",styleVTop:1,type:n.default.CELLSIZE,gtKey:"rowIndex",gtValue:-1},{type:n.default.SPLITER},{tip:"__eb",key:"locked",type:n.default.BOOLEAN,role:"free"},{tip:"__ec",key:"tip",role:"free",type:n.default.INPUT}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path style="stroke:#fff;stroke-width:2;fill:none" d="M 10 14 L 50 14 L 50 46 L 10 46 L 10 14" /><path style="stroke:#fff;stroke-width:1;fill:none" d="M 10 24 L 50 24 M 10 34 L 50 34 M 23 14 L 23 46 M 36 14 L 36 46" /></svg>'})}),define("element/table/index",["magix","$","../../editor/core/workaround","../../gallery/mx-dragdrop/index","../../util/table","../../cainiao/const","../../editor/const/keys","../../util/converter"],function(e,t,i){"use strict";var r;t.__esModule=!0;var b=e("magix"),x=e("$"),y=e("../../editor/core/workaround"),n=e("../../gallery/mx-dragdrop/index"),w=e("../../util/table"),k=e("../../cainiao/const"),o=e("../../editor/const/keys"),S=e("../../util/converter"),a=((r={})[o.default.L]="left",r[o.default.R]="right",r[o.default.U]="top",r[o.default.D]="bottom",r[o.default.T]="top",r[o.default.B]="bottom",r),C={8:"rt",9:"rb",10:"r",11:"cb",12:"ca",13:"c"};b.default.applyStyle("pl",".pbC{border-collapse:collapse;border:1px solid #000;border-spacing:0}.pbD{border-collapse:collapse;border:1px solid #000;position:relative;padding:0}.pbE{overflow:hidden;position:relative;width:100%;height:100%}.pbF,.pbG{border:1px solid #f99;left:-1px;top:-1px;right:-1px;bottom:-1px;position:absolute;pointer-events:none}.pbH{background:#f99;position:absolute;z-index:3;pointer-events:all}.pbI{cursor:ns-resize}.pbJ{cursor:ew-resize}.pbK{left:-20px;top:20px;color:#c3c3c3;cursor:pointer;transition:color .4s}.pbK:hover{color:#000}.pbL{border-style:dotted;border-color:#ececec}.pbF{box-shadow:inset 2px 2px 4px rgba(0,0,0,.2)}"),t.default=b.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.x,d=e.y,u=e.width,f=e.height,p=e.zIndex,h=e.i18n,g=e.hideBorder,_=e.rows,v=e.vId,m=e.rowIndex,x=e.colIndex,y=e.size;s+='<div style="left:'+r(c)+"px;top:"+r(d)+"px;width:"+r(u)+"px;height:"+r(f)+"px;z-index:"+r(p)+'" class="pt"><div class="pt pbK" mx-click="'+t+'\x1e__fk()" title="'+r(h("__fk"))+'"><i mxs="pr:_" class="pN">&#xe600;</i></div><table class="pbC',g&&(s+=" pbL"),s+='">';for(var b=0,w=_.length;b<w;b++){var k=_[b];if(s+=" ","tr"==k.tag){s+="<tr>";for(var S=0,C=k.cells,T=C.length;S<T;S++){var A=C[S];if(s+=" ","td"==A.tag){if(s+='<td class="pbD',g&&(s+=" pbL"),s+='" style="width:'+r(A.width)+"px;height:"+r(A.height)+'px" mx-mousedown="'+t+"\x1e__fg({row:"+r(b)+",col:"+r(S)+'})" mx-contextmenu="'+t+"\x1e__fj({row:"+r(b)+",col:"+r(S)+'})" id="'+r(v)+"_c_"+r(b)+"_"+r(S)+'" ',A.rowspan&&1<A.rowspan&&(s+=' rowspan="'+r(A.rowspan)+'" '),A.colspan&&1<A.colspan&&(s+=' colspan="'+r(A.colspan)+'" '),s+='><div class="pbF pv" id="'+r(v)+"_dashed_"+r(b)+"_"+r(S)+'"></div><div mxa="pr:_" class="pbE" data-role="table-cell">',A.children){s+=" ";for(var E=0,M=A.children,N=M.length;E<N;E++){var L=M[E];s+=" ";var I=L.ctor,D=L.props,O=L.id,z=L.type;s+=" ","#script"!=z&&(s+='<div id="'+r(O)+'" mx-view="element/'+r(I.type)+"/designer?type="+o(z)+"&ctor="+a(i,I)+"&id="+o(O)+"&props="+a(i,D)+'&cell=true" mx-mousedown="'+t+"\x1e__ff({id:'"+r(l(O))+"',ctor:'"+a(i,I)+"',props:'"+a(i,D)+"',type:'"+r(l(z))+"'})\"></div>"),s+=" "}s+=" "}if(s+="</div>",m==b&&x==S){s+='<div mxa="pr:a" class="pbG">';var R=Math.max(0,Math.min(8*y,A.width-2*y));s+=" ";var P=Math.max(0,Math.min(8*y,A.height-2*y));s+=" ",A.top&&(s+='<div style="width:'+r(R)+"px;height:"+r(y)+"px;top:"+r(1-y)+"px;left:"+r((A.width-R)/2|0)+'px;" class="pbH pbI" mx-mousedown="'+t+"\x1e__aB({type:'row',ri:"+r(A.top.row)+",ci:"+r(A.top.col)+'})"></div>'),s+=" ",A.left&&(s+='<div style="width:'+r(y)+"px;height:"+r(P)+"px;left:-"+r(y-1)+"px;top:"+r((A.height-P)/2|0)+'px" class="pbH pbJ" mx-mousedown="'+t+"\x1e__aB({type:'col',ri:"+r(A.left.row)+",ci:"+r(A.left.col)+'})"></div>'),s+=" ",A.hasBottom&&(s+='<div style="width:'+r(R)+"px;height:"+r(y)+"px;left:"+r((A.width-R)/2|0)+"px;bottom:-"+r(y-1)+'px;" class="pbH pbI" mx-mousedown="'+t+"\x1e__aB({type:'row',cell:'"+a(i,A)+"'})\"></div>"),s+=" ",A.hasRight&&(s+='<div style="width:'+r(y)+"px;height:"+r(P)+"px;right:-"+r(y-1)+"px;top:"+r((A.height-P)/2|0)+'px" class="pbH pbJ" mx-mousedown="'+t+"\x1e__aB({type:'col',cell:'"+a(i,A)+"'})\"></div>"),s+="</div>"}s+="</td>"}s+=" "}s+="</tr>"}s+=" "}return s+="</table></div>"},mixins:[n],init:function(i){this.assign(i),this.__q=x.default("#"+this.id);var e=function(e){var t=i.props;w.default.__fe(t,a[e.key])&&(b.State.fire("__am",{data:t,eId:i.id}),b.State.fire("__aA"))};b.State.on("__bO",e),this.on("destroy",function(){b.State.off("__bO",e)})},__at:function(){var e=this,t=this.__eA;t.props.rowIndex=-1,t.props.colIndex=-1,this.assign(t),setTimeout(this.wrapAsync(function(){e.render()}),0)},assign:function(e){var t={};return(this.__eA=e).onlyMove&&(t.rows=1),this.updater.set(e.props,t),this.updater.set({size:k.default.RESIZER_SIZE,scale:b.State.get("__f")}),e.forceUpdate},render:function(){this.updater.digest()},"__ff<mousedown>":function(e){"element_table"!=e.from&&(e.from="element_table",y.StageElements.__bL(e,this))},"__fg<mousedown>":function(e){if("element_table"!=e.from){e.from="element_table";var t=e.params,s=t.row,c=t.col,d=this,u=d.__eA;u.props.rowIndex=s,u.props.colIndex=c,d.assign(u),d.render(),b.State.fire("__aA"),y.StageSelectElements.__bu(u);var f=b.Vframe.get("m_app_stage"),p=S.default.__bE({x:e.pageX,y:e.pageY}),h=x.default(e.eventTarget),g=S.default.__aC(h,{x:e.pageX,y:e.pageY,find:0}),_=!1,v=!1,i=u.props.rows[s].cells[c];i.children||(i.children=[]);var m=y.StageElements.__bF(i);d.dragdrop(e.eventTarget,d.__bf(function(e){if(!v){_=!0;var t=S.default.__bE({x:e.pageX,y:e.pageY});f.invoke("__aV",[p,t]);var i=S.default.__aC(h,{x:e.pageX,y:e.pageY,find:0}),r=Math.abs(p.x-t.x),n=Math.abs(p.y-t.y),o={x:Math.min(g.x,i.x),y:Math.min(g.y,i.y),width:r,height:n},a=y.StageElements.__bH(m,o,{}),l=JSON.stringify(a,["id"]);l!=d.__bI&&(d.__bI=l,a.length?y.StageSelectElements.__bJ(a):(u.props.rowIndex=s,u.props.colIndex=c,d.assign(u),setTimeout(d.wrapAsync(function(){d.render()}),0),y.StageSelectElements.__bu(u)))}},50),function(){_&&(delete d.__bI,v=!0,f.invoke("__aW"))})}},"__aB<mousedown>":function(e){if("element_table"!=e.from){e.from="element_table";var t=this.__eA,u=t.props,f=t.id;if(!u.locked){var i=u.rows,r=e.params,p=r.cell,h=r.type,n=r.ri,o=r.ci;b.State.fire("__av",{cursor:"col"==h?"ew-resize":"ns-resize"}),p||(p=w.default.__fh(i,n,o));var g=e.pageX,_=e.pageY,v=p.height,m=p.width,x=!1;p.id||(p.id=b.default.guid("td_")),b.State.fire("__au",{locked:1});var y={};u.lockSize&&w.default.__h(u,y),this.dragdrop(e.eventTarget,function(e){var t,i=e.pageX-g,r=e.pageY-_,n=0;if(u.lockSize){var o=p.rowspan||1,a=y.rowHeights[p.row+o];(n=a-r)<0?(r=a,n=0):a+v<n&&(n=a+v-1);var l=p.colspan||1,s=y.colWidths[p.col+l];(t=s-i)<0?(i=s,t=0):s+m<t&&(t=s+m)}var c=Math.max(v+r,0),d=Math.max(0,m+i);"row"==h?c!=p.height&&(x=!0,p.height=c):"col"==h&&d!=p.width&&(x=!0,p.width=d),w.default.__h(u,{col:p,changeType:h,nextRow:n,nextCol:t}),b.State.fire("__am",{data:u,eId:f}),b.State.fire("__aA")},function(){x&&b.State.fire("__D"),b.State.fire("__au"),b.State.fire("__av")})}}},"__fj<contextmenu>":function(e){if("element_table"!=e.from){e.from="element_table",e.preventDefault();var i=y.StageSelectElements.__bD(),r=this,t=r.__eA,n=t.id,o=t.props,a=e.params,l=a.row,s=a.col,c=o.rows[l],d=k.default.TABLE_ROWS_HEIGHT,u=k.default.TABLE_CELLS_WIDTH,f=[];if(c&&c.cells[s]){var p=c.cells[s];d=p.height,u=p.width,p.children?f=p.children:p.children=f=[]}for(var h=[],g=0,_=f;g<_.length;g++){var v=_[g];"#script"==v.type||v.props.useCNStyle||h.push(v)}var m=x.default(e.eventTarget).offset();r.__ca={x:e.pageX-m.left,y:e.pageY-m.top},y.StageElements.__cb(r,e,n,h,function(e){if(0==e.id)h.length&&y.StageSelectElements.__bJ(h);else if(1==e.id)y.Clipboard.__bS();else if(14==e.id)y.Clipboard.__bY();else if(2==e.id)y.Clipboard.__bW({coll:f,collType:"td",width:u,height:d},r.__ca),b.State.fire("__D");else if(7==e.id){var t=y.StageElements.__bQ(!0);r.updater.digest({elements:t}),b.State.fire("__D")}else 3<=e.id&&e.id<=6?(y.StageElements.__cc(e.id,i[0],h),r.updater.digest(o),b.State.fire("__D")):8<=e.id&&e.id<=13&&(w.default.__fi(o,C[e.id]),b.State.fire("__aA"),b.State.fire("__am",{data:o,eId:n}),b.State.fire("__D"))})}},"__fk<click>":function(){var e=this.__eA.id;y.StageElements.__b_(e,!1),b.State.fire("__aY"),b.State.fire("__D")}})}),define("element/vcode/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("../../editor/core/designer"),n=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../cainiao/const"),l=e("../../i18n/index"),s=r.default.prototype;t.default=r.default.extend({init:function(){this.updater.set({elementPath:"element/vcode/index"}),s.init.apply(this,arguments)}},{title:"__fl",type:"vcode",modifier:{resize:!0,resizeX:!0,resizeY:!0,resizeXY:!0},getProps:function(e,t){return{zIndex:0,x:0+e,y:0+t,width:151.18,alpha:1,height:90.71,locked:!1,text:"",rotate:90,showText:!1,type:"code128",tip:l.default("__fl")}},props:[{tip:"__dU",key:"x",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__dV",key:"y",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__dW",key:"width",type:n.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__e},{tip:"__dX",key:"height",type:n.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__e},{tip:"__dY",type:n.default.NUMBER,fixed:1,step:.1,max:1,min:"0",key:"alpha"},{tip:"__dZ",type:n.default.TEXTAREA,styleVTop:1,key:"text"},{tip:"__e_",type:n.default.DROPDOWN,textKey:"text",valueKey:"value",key:"type",items:a.default.BARCODES},{tip:"__ea",type:n.default.BOOLEAN,key:"showText"},{type:n.default.SPLITER},{tip:"__eb",key:"locked",type:n.default.BOOLEAN,role:"free"},{tip:"__ec",key:"tip",role:"free",type:n.default.INPUT}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><rect width="30" height="4" x="15" y="10" style="fill:#fff;"/><rect width="30" height="2" x="15" y="16" style="fill:#fff;"/><rect width="30" height="2" x="15" y="20" style="fill:#fff;"/><rect width="30" height="8" x="15" y="24" style="fill:#fff;"/><rect width="30" height="2" x="15" y="35" style="fill:#fff;"/><rect width="30" height="3" x="15" y="39" style="fill:#fff;"/><rect width="30" height="2" x="15" y="43" style="fill:#fff;"/><rect width="30" height="4" x="15" y="46" style="fill:#fff;"/></svg>'})}),define("element/vcode/index",["magix"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix"),n="https://img.alicdn.com/tfs/",o={upca:n+"TB1VkRRqcUrBKNjSZPxXXX00pXa-190-112.svg",upce:n+"TB1VkRRqcUrBKNjSZPxXXX00pXa-190-112.svg",upca_text:n+"TB1NTQHqlsmBKNjSZFsXXaXSVXa-222-122.svg",upce_text:n+"TB1NTQHqlsmBKNjSZFsXXaXSVXa-222-122.svg",code128:n+"TB1t77KqljTBKNjSZFNXXasFXXa-312-100.svg",code93:n+"TB1t77KqljTBKNjSZFNXXasFXXa-312-100.svg",c25inter:n+"TB1t77KqljTBKNjSZFNXXasFXXa-312-100.svg",code128_text:n+"TB1A_MKqljTBKNjSZFNXXasFXXa-312-122.svg",code93_text:n+"TB1A_MKqljTBKNjSZFNXXasFXXa-312-122.svg",c25inter_text:n+"TB1A_MKqljTBKNjSZFNXXasFXXa-312-122.svg",code39:n+"TB1NXIiqkomBKNjSZFqXXXtqVXa-448-100.svg",code39_text:n+"TB1TdocqiMnBKNjSZFoXXbOSFXa-448-122.svg",ean8:n+"TB1mIuAqlnTBKNjSZPfXXbf1XXa-134-100.svg",ean8_text:n+"TB1rOARqiAnBKNjSZFvXXaTKXXa-134-122.svg",ean13:n+"TB1n8RrqCcqBKNjSZFgXXX_kXXa-190-112.svg",ean13_text:n+"TB1stsuqcj_B1NjSZFHXXaDWpXa-214-122.svg",itf14:n+"TB1Y247qdknBKNjSZKPXXX6OFXa-270-100.svg",itf14_text:n+"TB1PDcUqkUmBKNjSZFOXXab2XXa-270-122.svg"};t.default=r.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.width,d=e.height,u=e.alpha,f=e.x,p=e.y,h=e.rotate,g=e.zIndex,_=e.codeMap,v=e.type,m=e.showText,x=c<=1||d<=1||0==u;s+='<div style="left:'+r(f)+"px;top:"+r(p)+"px;width:"+r(c)+"px;height:"+r(d)+"px;transform:rotate("+r(h)+"deg);z-index:"+r(g)+";",x&&(s+="border:dotted 1px #ff000030"),s+='" class="pt">';var y=_[v+(m?"_text":"")];return s+=" ",s+=y?'<img style="width:100%;height:100%;opacity:'+r(u)+';" src="'+r(y)+'">':" \u6682\u4e0d\u652f\u6301"+r(v)+"\u7684\u9884\u89c8 ",s+="</div>"},init:function(e){this.assign(e),this.updater.set({codeMap:o})},assign:function(e){return this.updater.set(e.props),e.forceUpdate},render:function(){this.updater.digest()}})}),define("element/vline/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("../../editor/core/designer"),n=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../cainiao/const"),l=e("../../i18n/index"),s=r.default.prototype;t.default=r.default.extend({init:function(){this.updater.set({elementPath:"element/vline/index"}),s.init.apply(this,arguments)}},{title:"__fm",type:"vline",modifier:{resize:!0,resizeY:!0},getProps:function(e,t){return{zIndex:0,x:0+e,y:0+t,rotate:0,width:1.33,type:"solid",height:75.59,locked:!1,tip:l.default("__fm")}},props:[{tip:"__dU",key:"x",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__dV",key:"y",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__ee",key:"height",type:n.default.NUMBER,min:.01,fixed:2,max:2800,read:o.default.__i,write:o.default.__e},{tip:"__ef",key:"width",type:n.default.NUMBER,min:.01,fixed:2,max:2800,read:o.default.__j,write:o.default.__g},{tip:"__eg",key:"type",type:n.default.DROPDOWN,textKey:"text",valueKey:"value",items:a.default.LINE_TYPES},{type:n.default.SPLITER},{tip:"__eb",key:"locked",type:n.default.BOOLEAN,role:"free"},{tip:"__ec",key:"tip",type:n.default.INPUT,role:"free"}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path d="M 29 10 L 29 50" style="stroke:#fff;stroke-width:2"/></svg>'})}),define("element/vline/index",["magix"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix");t.default=r.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.x,d=e.y,u=e.height,f=e.type,p=e.width,h=e.zIndex;return s+='<div style="left:'+r(c)+"px;top:"+r(d)+"px;height:"+r(u<1?1:u)+"px;border-left:"+r(f)+" "+r(p<1?1:p)+"px #000;z-index:"+r(h)+'" class="pt"></div>'},init:function(e){this.assign(e)},assign:function(e){return this.updater.set(e.props),e.forceUpdate},render:function(){this.updater.digest()}})}),define("element/vtext/designer",["../../editor/core/designer","../../editor/const/props-desc","../../util/converter","../../cainiao/const","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("../../editor/core/designer"),n=e("../../editor/const/props-desc"),o=e("../../util/converter"),a=e("../../cainiao/const"),l=e("../../i18n/index"),s=r.default.prototype,c=function(e,t){return t.height=e?(t._x=t.x,t._y=t.y,t._width=t.width,t._height=t.height,t.x=.76,t.y=.76,t.width=-3.77):(t.x=t._x,t.y=t._y,t.width=t._width,t._height),t.xLocked=e,t.yLocked=e,t.widthLocked=e,t.heightLocked=e,t.zIndex=0,e};t.default=r.default.extend({init:function(){this.updater.set({elementPath:"element/vtext/index"}),s.init.apply(this,arguments)}},{title:"__fn",type:"vtext",modifier:{rotate:!0,resize:!0,resizeX:!0,resizeY:!0,resizeXY:!0},writeAdapter:c,getProps:function(e,t){return{x:e,y:t,zIndex:0,width:22.68,height:128.5,locked:!1,rotate:0,alpha:1,supportCNStyle:!1,useCNStyle:!1,fontFamily:"SimHei",fontSize:8,lineHeight:["","mm"],fontStyle:[],align:["left","top"],letterSpacing:0,fontWeight:"normal",text:"",alias:"",direction:"ltr",color:"-1",tip:l.default("__fn"),allowEdit:1}},props:[{tip:"__dU",key:"x",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__dV",key:"y",type:n.default.NUMBER,fixed:2,read:o.default.__i,write:o.default.__e},{tip:"__ei",key:"width",type:n.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__e},{tip:"__ej",key:"height",type:n.default.NUMBER,min:"0",fixed:2,max:2800,read:o.default.__i,write:o.default.__e},{tip:"__ek",key:"useCNStyle",ifKey:"supportCNStyle",ifValue:!0,type:n.default.BOOLEAN,refresh:!0,write:c},{tip:"__el",key:"rotate",type:n.default.NUMBER,min:-360,max:360},{tip:"__dY",key:"alpha",type:n.default.NUMBER,min:"0",max:1,fixed:1,step:.1},{tip:"__em",key:"fontFamily",type:n.default.DROPDOWN,textKey:"text",valueKey:"value",items:a.default.FONT_FAMILIES},{tip:"__en",key:"fontSize",type:n.default.NUMBER,min:"0"},{tip:"__eo",key:"letterSpacing",type:n.default.NUMBER,min:"0"},{tip:"__ep",key:"lineHeight",type:n.default.LINEHEIGHT,min:"0"},{tip:"__eq",key:"color",type:n.default.DROPDOWN,textKey:"text",valueKey:"value",items:[{text:"__er",value:"-1"},{text:"__es",value:1}]},{tip:"__et",key:"fontWeight",type:n.default.DROPDOWN,items:a.default.FONT_WEIGHTS},{tip:"__eu",key:"direction",type:n.default.DROPDOWN,items:a.default.DIRECTIONS},{tip:"__ev",key:"fontStyle",type:n.default.FONTSTYLE},{tip:"__ew",key:"align",type:n.default.FONTALIGN},{tip:"__ex",key:"text",type:n.default.TEXTAREA,styleVTop:1,gtKey:"allowEdit",gtValue:0},{tip:"__ey",key:"alias",type:n.default.INPUT,gtKey:"allowEdit",gtValue:0},{type:n.default.SPLITER},{tip:"__eb",type:n.default.BOOLEAN,key:"locked",role:"free"},{tip:"__ec",key:"tip",type:n.default.INPUT,role:"free"}],icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><path style="stroke:#fff;stroke-width:2" d="M 20 15 L 20 45 M 31 17 L 31 30 M 40 15 L 40 38" /></svg>'})}),define("element/vtext/index",["magix","../../util/converter"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),r=e("../../util/converter");t.default=n.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.color,d=e.useCNStyle,u=e.width,f=e.height,p=e.alpha,h=e.x,g=e.y,_=e.rotate,v=e.fontFamily,m=e.fontSize,x=e.scale,y=e.letterSpacing,b=e.lineHeight,w=e.direction,k=e.fontWeight,S=e.fontStyle,C=e.flexMap,T=e.align,A=e.zIndex,E=e.vId,M=e.alias,N=e.toHTML,L=e.text,I=e.i18n,D="1"!=c&&!d&&(u<=1||f<=1||0==p);return s+='<div class="pt" style="left:'+r(h)+"px;top:"+r(g)+"px;transform:rotate("+r(_)+"deg);font-family:'"+r(v)+"';font-size:"+r(m*x)+"pt;letter-spacing:"+r(y)+"pt;",""!==b[0]&&(s+="line-height:"+r(b[0])+r(b[1])+";"),s+="width:",s+=d?"92%":r(u)+"px",s+=";height:",s+=d?"92%":r(f)+"px",s+=";direction:"+r(w)+";overflow:hidden;writing-mode:tb-rl;",s+="1"==c?"color:#fff;background-color:#000;":"color:#000;background-color:#fff;",s+="font-weight:"+r(k)+";",S[0]&&(s+="font-style:italic;"),S[1]&&(s+="text-decoration:underline;"),s+="display:flex;align-items:"+r(C[T[1]])+";justify-content:"+r(C[T[0]])+";z-index:"+r(A)+";cursor:text;",D&&(s+="border:dotted 1px #ff000030"),s+='"><div style="-webkit-user-modify:read-write-plaintext-only;outline:none;cursor:text;opacity:'+r(p)+';" contenteditable="true" data-role="text-element" mx-focusout="'+t+'\x1e__eD()" mx-input="'+t+'\x1e__eC()" id="area_'+r(E)+'">',s+=M?n(N(M)):L?n(N(L)):r(I("_eE")),s+="</div></div>"},init:function(e){this.assign(e),this.updater.set({flexMap:{left:"flex-start",center:"center",right:"flex-end",bottom:"flex-end",top:"flex-start",middle:"center"},originMap:{"left,top":"top right","left,middle":"top center","left,bottom":"top left","center,top":"center right","center,middle":"center center","center,bottom":"center left","right,top":"bottom right","right,middle":"bottom center","right,bottom":"bottom left"},toHTML:r.default.__ez})},assign:function(e){return this.__eA=e,this.updater.set(e.props),this.updater.set({scale:n.State.get("__f")}),e.forceUpdate},render:function(){if(this.updater.digest(),this.updater.get("editable")){var e=$("#area_"+this.id);e.focus();var t=document.createRange();t.selectNodeContents(e[0]),t.collapse(!1);var i=window.getSelection();if(0!=i.anchorOffset)return;i.removeAllRanges(),i.addRange(t)}},"__eC<input>":function(e){var t=r.default.__eB(e.eventTarget.innerHTML);this.__eA.props.text=t},"__eD<focusout>":function(e){var t=this.__eA,i=t.id,r=t.props;r.editable=!1,n.State.fire("__aA"),n.State.fire("__am",{data:r,eId:i}),n.State.fire("__D")}})}),define("editor/index",["magix","./const/click-desc","../gallery/mx-dialog/index","../cainiao/const","./core/history","./core/store","../element/index","../i18n/index","./core/cursor","./core/mask","../cainiao/serializer","../service/index","../gallery/mx-runner/index","./core/draft","./core/toolbox","./core/toolbar","./core/axis","./core/stage","./core/property"],function(e,t,i){e("./core/draft"),e("./core/toolbox"),e("./core/toolbar"),e("./core/axis"),e("./core/stage"),e("./core/property"),t.__esModule=!0;var p=e("magix"),r=e("./const/click-desc"),n=e("../gallery/mx-dialog/index"),l=e("../cainiao/const"),s=e("./core/history"),c=e("./core/store"),h=e("../element/index"),o=e("../i18n/index"),a=e("./core/cursor"),d=e("./core/mask"),u=e("../cainiao/serializer"),f=e("../service/index"),g=e("../gallery/mx-runner/index"),_=p.default.mix;p.default.applyStyle("ph",".paI{height:40px;line-height:40px;font-size:16px;padding:0 10px;background:#06f;color:#fff;position:relative;z-index:3000}.paJ{height:calc(100% - 40px)}.paK{width:calc(100% - 475px);height:calc(100% - 45px)}.paL{transition:width .15s}.paM{width:calc(100% - 265px)}.paN{width:calc(100% - 21px);overflow:scroll;height:100%;background-color:#edeef3;transition:all .3s}.paO{box-shadow:inset 1px 1px 6px 2px #dadada}.paN::-webkit-scrollbar{width:10px;height:10px}.paN::-webkit-scrollbar-thumb{background-color:#c2c0c0;min-height:25px;min-width:25px;border:1px solid #e0e0e0}.paN::-webkit-scrollbar-track{background-color:#f7f7f7;border:1px solid #efefef}.paP{line-height:25px;position:relative;z-index:3000}.paQ{outline:none;color:hsla(0,0%,100%,.65);border:1px solid hsla(0,0%,100%,.65);background:transparent;border-radius:4px;height:20px;line-height:16px;font-size:14px;padding:2px 8px;width:60px}.paQ:hover{color:#fff;border:1px solid #fff}.paR{width:235px}.paS{font-size:14px;line-height:45px;height:40px}.paT{margin-left:10px;color:hsla(0,0%,100%,.65);font-size:10px}"),p.default.View.merge(n,{__bf:function(r,n){var o=this;n=n||150;var a,l=Date.now();return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Date.now();clearTimeout(a),n<i-l?(l=i,r.apply(o,e)):a=setTimeout(function(){r.apply(o,e)},n-(i-l))}},__dt:function(e,t,i,r){var n=Math.max(i-(t-e),16);setTimeout(r,n)}});var v=function(e){var t=p.State.get("page"),i=p.State.get("__aJ"),r=p.State.get("__as"),n=p.State.get("__l"),o=p.State.get("__m"),a=h.default.byJSON(e.elements),l=a.elements,s=a.map;e.page&&_(t,e.page),i.length=0,i.push.apply(i,l),r.length=0;var c={};if(e.select)for(var d=0,u=e.select;d<u.length;d++){var f=s[u[d].id];f&&(c[f.id]=1,r.push(f))}n.length=0,e.xLines&&n.push.apply(n,e.xLines),o.length=0,e.yLines&&o.push.apply(o,e.yLines),p.State.set({__f:e.scale||1,__ar:c})},m={id:1,colIndex:1,rowIndex:1,locked:1,lockSize:1,top:1,left:1,hasLeft:1,hasTop:1,hasBottom:1,hasRight:1};t.default=p.default.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.i18n,d=e.name,u=e.lang,f=e.vId,p=e.anim,h=e.collapse;return s+='<div mxa="pk:_" class="paI"><div mxa="pk:a" class="pp paR"><i mxs="pk:_" class="pN pd">&#xe63c;</i>'+r(c("_dR"))+'&trade;</div><div mxa="pk:b" class="pp paS">'+r(d)+'<span mx-view="editor/core/draft?lang='+o(u)+'" id="draft_'+r(f)+'" class="paT"></span></div><div mxa="pk:c" class="pq pe" id="header_btns"><button mxa="pk:d" class="paQ pe" mx-click="'+t+'\x1e__aQ()">'+r(c("_dS"))+'</button><button mxa="pk:e" class="paQ" mx-click="'+t+'\x1e__dQ()">',s+="en-us"==u?"\u4e2d\u6587":"EN",s+='</button></div></div><div mxa="pk:f" class="paJ"><div mx-view="editor/core/toolbox" id="toolbox_'+r(f)+'" class="pn pp px"></div><div class="paK pp',p&&(s+=" paL"),h&&(s+=" paM"),s+='" id="canvas_'+r(f)+'"><div mxs="pk:a" mx-view="editor/core/toolbar" class="paP px"></div><div mx-view="editor/core/axis?cnt='+o(f)+'_stage" class="pu px"></div><div mx-view="editor/core/stage" id="'+r(f)+'_stage" class="paN px paO"></div></div><div mx-view="editor/core/property" id="property_'+r(f)+'" class="pn pq"></div></div>'},mixins:[f.default],init:function(){var t=this;window.onbeforeunload=function(e){if(t.__du())return o.default("__dv")},p.State.on("__aK",function(e){v(e.json)}),p.State.on("__av",function(e){e.cursor?a.default.__ak(e.cursor):a.default.__al()}),p.State.on("__o",function(){t.__dw(!0)}),this.__dw()},__dB:function(){var t=this;if(!this.__dx&&1e3<l.default.AUTO_SAVE){this.__dx=Date.now();var i=p.Vframe.get("draft_"+this.id);this.__dy=function(){var e=Date.now()-t.__dx;(e=l.default.AUTO_SAVE-e)<=0?t.__dz(!0):i.invoke("__an",[{after:Math.round(e/1e3)}])},g.__dA(1e3,this.__dy)}},__dE:function(){clearInterval(this.__dC),g.__dD(this.__dy),delete this.__dx},__dw:function(e){if(this.__dF=p.default.guid("ss"),e){var t=this.__du();if(t){if(!this.__dx)(i=p.Vframe.get("draft_"+this.id))&&i.invoke("__an",[{saving:0,draft:t,after:Math.round(l.default.AUTO_SAVE/1e3)}]);c.default.__aQ(),this.__dB()}else{var i;c.default.__aM(),this.__dE(),(i=p.Vframe.get("draft_"+this.id))&&i.invoke("__an",[{saving:0,draft:0}])}}},__dz:function(r){var n=this;if(this.__du()){var e={page:p.State.get("page"),elements:p.State.get("__aJ")},o=this.__dF,t=u.default.encode(e),a=p.Vframe.get("draft_"+this.id);a&&a.invoke("__an",[{saving:1,draft:0}]);var l=Date.now();this.save({name:"__dz",params:{temp_id:p.default.config("tempId"),content:t}},function(e,t){var i=Date.now();n.__dt(l,i,300,function(){o==n.__dF&&(n.__dE(),e?r||n.alert(e.msg):(a&&a.invoke("__an",[{saving:0,draft:0}]),c.default.__aM(),n.__dG=n.__dH()))})})}},__du:function(){return this.__dG!=this.__dH()},__dH:function(){return JSON.stringify({page:p.State.get("page"),elements:p.State.get("__aJ")},function(e,t){if(!p.default.has(m,e))return t})},__dJ:function(){var i=this,r=c.default.__cl(),e=p.default.config("bizId"),t=p.default.config("tempId");r.success&&r.bizId==e&&r.tempId==t&&this.confirm(o.default("__dI"),function(){v(r),p.State.fire("__n",{keepSelect:1}),p.State.fire("__aY"),p.State.fire("__ap");var e=i.__du;if(e){p.State.fire("__D");var t=p.Vframe.get("draft_"+i.id);t&&t.invoke("__an",[{draft:e}])}},function(){c.default.__aM()})},render:function(){var o=this,e=p.default.parseUrl(location.search).params,t=p.default.config("mock"),i=e.temp_id,r=e.biz_id;t&&(r=i="-1"),i&&r?d.default.__ak("__dL"):d.default.__ak("__dK"),p.default.config({tempId:i,bizId:r});var n={page:{xmlns:l.default.CLOUD_PRINT_NAME_SPACE,"xmlns:xsi":l.default.XSI_NAME_SPACE,"xsi:schemaLocation":l.default.SCHEMA_LOCATION_NAME_SPACE,"xmlns:editor":l.default.EDITOR_NAME_SPACE,width:l.default.PAGE_WIDTH_DEFAULT*l.default.SCALE_DEFAULT,height:l.default.PAGE_HEIGHT_DEFAULT*l.default.SCALE_DEFAULT,header:0,footer:0,splitable:!0},__f:l.default.SCALE_DEFAULT,__cf:null,__aJ:[],__aR:null,__as:[],__ar:{},__l:[],__m:[]};if(p.State.set(n),this.updater.digest({lang:p.default.config("lang")}),i&&r){var a=Date.now();this.fetch({name:"__dM",params:{temp_id:i,biz_id:r}},function(r,n){var e=Date.now();o.__dt(a,e,500,function(){if(r)d.default.__ak(r.msg);else{var e=n.get("data.content",""),t=n.get("data.temp_name","");o.updater.digest({name:t});try{var i=u.default.decode(e);v(i),s.default.__aL(),p.State.fire("__aY"),p.State.fire("__n"),p.State.fire("__ap"),o.__dG=o.__dH(),o.__dJ(),d.default.__al()}catch(e){d.default.__ak(e.message)}}})})}},"$doc<mousedown,mouseup>":function(e){if("mousedown"==e.type)this.__dN=e.pageX,this.__dO=e.pageY;else{var t=e.pageX-this.__dN,i=e.pageY-this.__dO;(5<t||5<i)&&(this.__dP=!0)}},"$doc<click>":function(e){if(this.__dP)delete this.__dP;else if(p.default.inside(e.target,document.body)){var t=r.default.OUTER;if(p.default.inside(e.target,"app")){if(p.default.inside(e.target,"toolbox_list")||p.default.inside(e.target,"toolbox_prelist")||p.default.inside(e.target,"header_btns"))return;p.default.inside(e.target,"canvas_"+this.id)?t=r.default.CANVAS:p.default.inside(e.target,"property_"+this.id)&&(t=r.default.PROPERTY),p.State.fire("__bv",{zone:t})}}},"$doc<drop,dragover>":function(e){e.preventDefault(),"dragover"==e.type?p.State.fire("__bw",{hoverNode:e.target}):p.State.fire("__bw")},"$doc<toolboxtoggle>":function(e){this.updater.digest({anim:!0,collapse:e.collapse})},"__dQ<click>":function(){var e=p.default.config("lang");e="zh-cn"==e?"en-us":"zh-cn",p.default.config({lang:e}),p.State.fire("__p",{lang:e}),this.updater.digest({lang:e})},"__aQ<click>":function(){this.__dz()}})}),define("editor/const/click-desc",[],function(e,t,i){"use strict";t.__esModule=!0,t.default={TOOLBOX:1,CANVAS:2,PROPERTY:4,OTHER:8,OUTER:16}}),define("editor/const/keys",[],function(e,t,i){"use strict";t.__esModule=!0,t.default={UP:38,DOWN:40,LEFT:37,RIGHT:39,DELETE:8,TAB:9,C:67,V:86,A:65,F:70,L:76,N:78,U:85,D:68,R:82,T:84,B:66,X:88,Z:90,Y:89}}),define("editor/const/props-desc",[],function(e,t,i){"use strict";t.__esModule=!0,t.default={LABEL:1,INPUT:2,NUMBER:4,DROPDOWN:8,IMAGE:16,ORIGINSIZE:32,TEXTAREA:64,SPLITER:128,BOOLEAN:256,LINEHEIGHT:512,FONTSTYLE:1024,FONTALIGN:2048,CELLOPERATE:4096,CELLSIZE:8192,CELLFOCUS:16384,CELLCOLSHARE:32768,CELLROWSHARE:65536}}),define("editor/core/axis",["magix","$","../../util/converter","../../gallery/mx-dragdrop/index"],function(e,t,i){"use strict";t.__esModule=!0;var l=e("magix"),h=e("$"),r=e("../../util/converter"),n=e("../../gallery/mx-dragdrop/index"),g=l.default.State,_=r.default.__i;l.default.applyStyle("pa",".pP{height:20px;border-bottom:1px solid #ccc;overflow:hidden;width:100%;background:#fff;z-index:2000;position:relative}.pQ{float:left;width:21px;height:100%;border-right:1px solid #ccc;overflow:hidden}.pR{top:0;width:1px}.pR,.pS{position:absolute;background:#06f;z-index:2000;display:none}.pS{left:0;height:1px}.pT{left:0;top:0;width:21px;height:20px;border-bottom:1px solid #ccc;border-right:1px solid #ccc;z-index:2001}.pT,.pU{position:absolute;background:#fff}.pU{left:5px}.pU,.pV{cursor:default;font-size:10px}.pV{position:absolute;top:-5px;background:#fff;-webkit-transform:rotate(-90deg);transform:rotate(-90deg);-webkit-transform-origin:0 0;transform-origin:0 0}.pW,.pX{position:relative;z-index:1000}.pW{top:20px}.pX{left:20px}.pY{width:4px;border-left:1px solid #06f}.pY,.pZ{position:absolute;pointer-events:none}.pZ{height:1px;background:#06f}.pa_{left:-15px;top:6px;cursor:pointer;pointer-events:all}.pa_,.paa{position:absolute;font-size:10px;color:#666}.paa{left:4px;top:2px;cursor:default}.pab{left:6px;top:-15px;cursor:pointer;pointer-events:all}.pab,.pac{position:absolute;font-size:10px;color:#666}.pac{left:4px;top:2px;cursor:default}.pad{width:25px;top:-1px;height:3px;left:30px;cursor:ns-resize}.pae,.pad{position:absolute;overflow:hidden;background:#0075f7;pointer-events:all}.pae{width:3px;left:-2px;height:25px;top:20px;cursor:ew-resize}"),t.default=l.default.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.scale,d=e.sTop,u=e.vId,f=e.draw,p=e.yHelpers,h=e.toMM,g=e.yStart,_=e.vWidth,v=e.i18n,m=e.sLeft,x=e.xHelpers,y=e.xStart,b=e.vHeight,w=e.width,k=e.xEnd,S=e.height,C=e.yEnd;s+=" ";s+=" ";var T=3.7795275593333*c;s+=" ";var A=15;s+=" ",c<=.5?(s+=" ",A=30,s+=" "):c<1?(s+=" ",A=25,s+=" "):4.5<=c?(s+=" ",A=3,s+=" "):4<=c?(s+=" ",A=4,s+=" "):3.5<=c?(s+=" ",A=5,s+=" "):3<=c?(s+=" ",A=6,s+=" "):2.5<=c?(s+=" ",A=8,s+=" "):2<=c?(s+=" ",A=10,s+=" "):1.5<=c&&(s+=" ",A=12,s+=" "),s+=" ",s+=" ";var E,M=A/5*T;s+=" ",s+=" ";var N="#aaa;";if(s+='<div class="pX" style="top:-'+r(d)+'px" id="'+r(u)+'_y_help">',f){s+=" ";for(var L=0,I=p.length;L<I;L++){var D=p[L];s+=" ";var O=T*(Math.abs(h(g))+D.mm)+20;s+='<div class="pZ" style="width:'+r(_)+"px;top:"+r(O)+'px;"><i class="pN pab" title="'+r(v("_J"))+'" mx-click="'+t+"\x1e__G({type:'y',id:'"+r(l(D.id))+'\'})">&#xe600;</i><span mxa="p_:_" class="pac">'+r(D.mm)+'</span><span class="pad" mx-mousedown="'+t+"\x1e__H({type:'y',id:'"+r(l(D.id))+"',c:"+r(O)+'})" title="'+r(v("_K"))+'"></span></div>'}s+=" "}if(s+='</div><div class="pW" style="left:-'+r(m)+'px" id="'+r(u)+'_x_help">',f){s+=" ";for(var z=0,R=x.length;z<R;z++){D=x[z];s+=" ";O=T*(Math.abs(h(y))+D.mm);s+='<div class="pY" style="height:'+r(b)+"px;left:"+r(O)+'px;"><i class="pN pa_" title="'+r(v("_J"))+'" mx-click="'+t+"\x1e__G({type:'x',id:'"+r(l(D.id))+'\'})">&#xe600;</i><span mxa="p_:a" class="paa">'+r(D.mm)+'</span><span class="pae" mx-mousedown="'+t+"\x1e__H({type:'x',id:'"+r(l(D.id))+"',c:"+r(O)+'})" title="'+r(v("_K"))+'"></span></div>'}s+=" "}if(s+='</div><div mxa="p_:b" mx-mousemove="'+t+'\x1e__z()" mx-mouseout="'+t+'\x1e__A()" mx-click="'+t+'\x1e__E()"><div class="pP" id="'+r(u)+'_x"><div style="width:'+r(w)+'px;height:100%">',f){s+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '+r(w)+' 20" style="cursor:default;">';for(var P=0;P<y;P+=M)s+=" ",s+=" ",s+=(E=h(P))%A==0?'<rect width="1" height="'+r(12)+'" x="'+r(y-P)+'" y="'+r(7)+'" style="fill:'+r(N)+';"/><text x="'+r(y-P+2)+'" y="14" style="font-size:10px;fill:#999;">'+r(0===E?0:-E)+"</text>":'<rect width="1" height="'+r(4)+'" x="'+r(y-P)+'" y="'+r(15)+'" style="fill:'+r(N)+';"/>',s+=" ";s+=" ";for(P=M;P<k;P+=M)s+=" ",s+=" ",s+=(E=h(P))%A==0?'<rect width="1" height="'+r(12)+'" x="'+r(y+P)+'" y="'+r(7)+'" style="fill:'+r(N)+';"/><text x="'+r(y+P+2)+'" y="14" style="font-size:10px;fill:#999;">'+r(E)+"</text>":'<rect width="1" height="'+r(4)+'" x="'+r(y+P)+'" y="'+r(15)+'" style="fill:'+r(N)+';"/>',s+=" ";s+="</svg>"}if(s+='</div></div><div class="pR" id="'+r(u)+'_x_line" style="height:'+r(b+20)+'px"><span mxs="p_:_" class="pU"></span></div></div><div mxa="p_:c" mx-mousemove="'+t+'\x1e__B()" mx-mouseout="'+t+'\x1e__C()" mx-click="'+t+'\x1e__F()"><div class="pQ" style="height:'+r(b)+'px;" id="'+r(u)+'_y"><div style="height:'+r(S)+'px;">',f){s+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 '+r(S)+'" style="cursor:default">';for(P=0;P<g;P+=M)s+=" ",s+=" ",s+=(E=h(P))%A==0?'<rect width="'+r(12)+'" height="1" x="'+r(8)+'" y="'+r(g-P)+'" style="fill:'+r(N)+';"/><text x="14" y="'+r(g-P+2)+'" style="font-size:10px;fill:#999;" transform="rotate(-90,13,'+r(g-P)+')">'+r(0===E?0:-E)+"</text>":'<rect width="'+r(4)+'" height="1" x="'+r(16)+'" y="'+r(g-P)+'" style="fill:'+r(N)+';"/>',s+=" ";s+=" ";for(P=M;P<C;P+=M)s+=" ",s+=" ",s+=(E=h(P))%A==0?'<rect width="'+r(12)+'" height="1" x="'+r(8)+'" y="'+r(g+P)+'" style="fill:'+r(N)+';"/><text x="14" y="'+r(g+P)+'" style="font-size:10px;fill:#999;;" transform="rotate(-90,13,'+r(g+P-2)+')">'+r(E)+"</text>":'<rect width="'+r(4)+'" height="1" x="'+r(16)+'" y="'+r(g+P)+'" style="fill:'+r(N)+';"/>',s+=" ";s+="</svg>"}return s+='</div></div><div class="pS" id="'+r(u)+'_y_line" style="width:'+r(_+20)+'px"><span mxs="p_:a" class="pV"></span></div></div><div mxs="p_:b" class="pT"></div>'},mixins:[n],init:function(e){var t=this,i=h.default("#"+e.cnt);i.on("scroll",function(){t.syncScroll()}),this.__k=i;var r=this.updater,n=function(){r.set({xHelpers:g.get("__l"),yHelpers:g.get("__m")})},o=0,a=function(){clearTimeout(o),o=setTimeout(function(){n(),t.rerender(!0),t.syncScroll()},30)};r.set({sLeft:0,sTop:0}),n(),g.on("__n",a),g.on("__o",a),g.on("__p",a),this.__q=h.default("#"+this.id)},rerender:function(e){var t=this.__k,i=t.prop("scrollWidth")+50,r=t.prop("scrollHeight")+50,n=0,o=0,a=0,l=0,s=10,c=10;if(e){var d=h.default("#stage_stage"),u=h.default("#stage_outer"),f=d.offset(),p=u.offset();o=i-(n=Math.round(f.left-p.left)+20),l=r-(a=Math.round(f.top-p.top)),s=t.height(),c=t.width()}this.updater.digest({toMM:_,scale:g.get("__f"),width:i,height:r,draw:e,xStart:n,xEnd:o,yStart:a,vHeight:s,vWidth:c,yEnd:l}),this.__r=h.default("#"+this.id+"_x"),this.__s=h.default("#"+this.id+"_y"),this.__t=h.default("#"+this.id+"_y_help"),this.__u=h.default("#"+this.id+"_x_help"),this.__v=h.default("#"+this.id+"_x_line"),this.__w=this.__v.find("span"),this.__x=h.default("#"+this.id+"_y_line"),this.__y=this.__x.find("span")},syncScroll:function(){var e=this.__r,t=this.__s,i=this.__t,r=this.__u,n=this.__k,o=n.prop("scrollTop"),a=n.prop("scrollLeft");e.prop("scrollLeft",a),t.prop("scrollTop",o),i.css({top:-o}),r.css({left:-a}),this.updater.set({sLeft:a,sTop:o})},render:function(){var e=this;this.rerender();var t=setInterval(function(){h.default("#stage_stage").length&&(clearInterval(t),e.rerender(!0))},30)},"__z<mousemove>":function(e){var t=this.__q.offset(),i=this.__r,r=e.pageX-t.left,n=this.updater.get("xStart");this.__v.css({display:"block",left:r});var o=_(r-n+i.prop("scrollLeft"));this.__w.html(o)},"__A<mouseout>":function(e){l.default.inside(e.relatedTarget,e.eventTarget)||this.__v.css({display:"none"})},"__B<mousemove>":function(e){var t=this.__q.offset(),i=e.pageY-t.top,r=this.updater.get("yStart"),n=this.__s;this.__x.css({display:"block",top:i});var o=_(i-r-20+n.prop("scrollTop"));this.__y.html(o)},"__C<mouseout>":function(e){l.default.inside(e.relatedTarget,e.eventTarget)||this.__x.css({display:"none"})},"__E<click>":function(e){var t=this.__q.offset(),i=this.__r,r=e.pageX-t.left,n=this.updater.get("xStart"),o=_(r-n+i.prop("scrollLeft")),a=this.updater.get("xHelpers");a.push({mm:o,id:l.default.guid("x_")}),this.updater.digest({xHelpers:a}),g.fire("__D")},"__F<click>":function(e){var t=this.__q.offset(),i=e.pageY-t.top,r=this.updater.get("yStart"),n=this.__s,o=_(i-r-20+n.prop("scrollTop")),a=this.updater.get("yHelpers");a.push({mm:o,id:l.default.guid("x_")}),this.updater.digest({yHelpers:a}),g.fire("__D")},"__G<click>":function(e){for(var t,i=e.params,r=i.type,n=i.id,o=r+"Helpers",a=this.updater,l=a.get(o),s=l.length;s--;){if(l[s].id==n){l.splice(s,1);break}}a.digest(((t={})[o]=l,t)),g.fire("__D")},"__H<mousedown>":function(r){if(r.target==r.eventTarget){for(var n,e=r.params,o=e.type,t=e.id,a=e.c,l=o+"Helpers",s=this.updater,c=s.get(l),i=0,d=c;i<d.length;i++){var u=d[i];if(u.id==t){n=u;break}}if(n){var f=s.get(o+"Start"),p=!1;this.dragdrop(r.target,function(e){var t,i;p=!0,i="x"==o?e.pageX-r.pageX+a:e.pageY-r.pageY+a-20,n.mm=_(i-f),s.digest(((t={})[l]=c,t))},function(){p&&g.fire("__D")})}}},"$win<resize>":function(){this.rerender(!0),this.syncScroll()},"$doc<toolboxtoggle>":function(){var e=this;clearTimeout(e.__I),e.__I=setTimeout(function(){e.rerender(!0),e.syncScroll()},160)}})}),define("editor/core/code",["magix","../../cainiao/serializer","gallery/mx-codemirror/index"],function(e,t,i){e("gallery/mx-codemirror/index"),t.__esModule=!0;var r=e("magix"),n=e("../../cainiao/serializer");r.default.applyStyle("pb",""),t.default=r.default.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.i18n,d=e.xml;return s+='<div mxa="pa:_" class="pK"><b mxa="pa:a" class="pd">'+r(c("_S"))+'</b></div><div mxv mxa="pa:b" class="pL"><textarea mxa="pa:c" class="pC" style="width:100%;height:500px;" mx-view="gallery/mx-codemirror/index" mx-change="'+t+'\x1e__P()">'+r(d)+'</textarea></div><div mxa="pa:d" class="pM pw"><button mxa="pa:e" class="pz pq" mx-click="'+t+'\x1e__R()">'+r(c("_T"))+'</button><button mxa="pa:f" class="pz pA pd pq" mx-click="'+t+'\x1e__Q()">'+r(c("_U"))+"</button></div>"},init:function(e){this.__L=e.stage,this.__M=e.dialog,this.__N=e.enter},render:function(){var e=this.__L,t=n.default.encode(e),i=JSON.stringify(e.page);this.__O=i,this.updater.digest({xml:t})},"__P<change>":function(e){this.updater.set({xml:e.value})},"__Q<click>":function(){var e,t=this,i=t.updater.get("xml");try{e=n.default.decode(i)}catch(e){return void t.alert(e.message)}t.__O!=JSON.stringify(e.page)&&(e.pageChange=!0),this.__N(e),this.__M.close()},"__R<click>":function(){this.__M.close()}})}),define("editor/core/contextmenu",["magix","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var l=e("magix"),s=e("../../i18n/index"),r={spliter:!0},n={id:0,text:"__V",short:" (Ctrl+A)"},o={id:1,text:"__W",short:" (Ctrl+C)"},a={id:14,text:"__X",short:" (Ctrl+X)"},c={id:2,text:"__Y",short:" (Ctrl+V)"},d={id:5,text:"__Z"},u={id:6,text:"__a_"},f={id:3,text:"__aa"},p={id:4,text:"__ab"},h={id:7,text:"__ac",short:" (Delete)"},g={id:8,text:"__ad"},_={id:9,text:"__ae"},v={id:10,text:"__af"},m={id:11,text:"__ag"},x={id:12,text:"__ah"},y={id:13,text:"__ai"},b={},w=function(a){return function(e){a.__aj||(a.__aj=l.default.guid("_m"));var t=e+a.__aj;if(!b[t]){for(var i=[],r=0,n=a;r<n.length;r++){var o=n[r];o.spliter?i.push(o):i.push({id:o.id,text:s.default(o.text)+(o.short||"")})}b[t]=i}return b[t]}};t.Contextmenu={allId:n.id,pasteId:c.id,topId:f.id,upId:d.id,bottomId:p.id,downId:u.id,cutId:a.id,cellBottomId:_.id,cellTopId:g.id,cellLeftId:m.id,cellRightId:x.id,cellDeleteColId:y.id,cellDeleteRowId:v.id,singleElement:w([o,a,h,r,d,f,r,u,p]),multipleElement:w([o,a,h]),stage:w([n,c]),tableCell:w([n,c,r,g,_,v,r,m,x,y])}}),define("editor/core/cursor",["$","magix"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("$"),n=e("magix"),o=n.default.guid("cursor_");n.default.applyStyle("pc",".paf{opacity:0;background:#fff;position:fixed;left:0;right:0;top:0;bottom:0;z-index:10000}"),t.default={__ak:function(e){var t=r.default("#"+o);t.length||(r.default("body").append('<div class="paf" id="'+o+'"/>'),t=r.default("#"+o)),t.css({cursor:e}),t.show()},__al:function(){r.default("#"+o).hide()}}}),define("editor/core/designer",["magix","../../cainiao/const","../../util/converter","../../util/transform","$","../../gallery/mx-dragdrop/index"],function(e,t,i){"use strict";t.__esModule=!0;var O=e("magix"),a=e("../../cainiao/const"),z=e("../../util/converter"),R=e("../../util/transform"),P=e("$"),r=e("../../gallery/mx-dragdrop/index");O.default.applyStyle("pd",".pag{width:24px;height:24px;padding:4px;cursor:move;color:#c3c3c3;transition:color .4s}.pag:hover{color:#000}");var l=O.default.has,B={0:1,2:1,4:1,6:1,1:2,5:2,3:3,7:3},n={},o={};O.State.on("__am",function(e){var t=O.Vframe.get(e.eId);t&&t.invoke("__an",[e.data])}),O.State.on("__p",function(){for(var e in n){var t=O.Vframe.get(e);t&&t.invoke("__ao")}}),O.State.on("__ap",function(){for(var e in o){var t=O.Vframe.get(e);t&&(t.invoke("__aq"),t.invoke("render"))}}),t.default=O.default.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.elementPath,d=e.ctor,u=e.id,f=e.type,p=e.props,h=e.onlyMove,g=e.vId,_=e.i18n,v=e.space,m=e.selected,x=e.count,y=e.size;s+='<div mxv="ctor,props,onlyMove" mx-view="'+r(c)+"?ctor="+a(i,d)+"&id="+o(u)+"&type="+o(f)+"&props="+a(i,p)+"&onlyMove="+a(i,h)+'&forceUpdate=true" id="entity_'+r(g)+'"></div>';var b=p.height;s+=" ";var w=p.width;if(s+=" ","table"==d.type?(s+=" ",b++,s+='<div style="left:'+r(p.x-24)+"px;top:"+r(p.y-6)+"px;z-index:"+r(p.zIndex)+';" class="pt pag" title="'+r(_("_aG"))+'"><i mxs="pb:_" class="pN">&#xe660;</i></div>'):(s+='<div style="width:',p.useCNStyle?s+="calc(92% + "+r(v)+"px)":s+=r(w+2*v)+"px",s+=";height:",p.useCNStyle?s+="calc(92% + "+r(v)+"px)":s+=r(b+2*v)+"px",s+=";left:"+r(p.x-v)+"px;top:"+r(p.y-v)+"px;",p.rotate&&(s+="transform:rotate("+r(p.rotate)+"deg);"),s+="background:#fff;opacity:0.01;z-index:"+r(p.zIndex)+";\ncursor:pointer;","htext"!=d.type&&"vtext"!=d.type||!p.editable||(s+="pointer-events:none;"),s+='" class="pt" ',"htext"!=d.type&&"vtext"!=d.type||(s+=' mx-dblclick="'+t+'\x1e__aF()" '),s+="></div>"),s+=" ",m){s+=" ";var k=p.locked||p.useCNStyle?"red":"#5390ef";if(s+='<div style="',p.rotate&&(s+="transform:rotate("+r(p.rotate)+"deg);"),s+="left:"+r(p.x-v)+"px;top:"+r(p.y-v)+"px;width:",p.useCNStyle?s+="calc(92% + "+r(v)+"px)":s+=r(Math.round(w+2*v))+"px",s+=";height:",p.useCNStyle?s+="calc(92% + "+r(v)+"px)":s+=r(b+2*v)+"px",s+=";border:dotted 1px "+r(k)+";pointer-events:none;z-index:"+r(p.zIndex)+'" class="pt">',!d.modifier.rotate||p.locked||p.useCNStyle||1!=x||(s+='<div style="left:'+r(w+v-1)+"px;top:-"+r(v)+"px;width:"+r(2*y)+"px;height:"+r(2*y)+"px;background:#5390ef;border-radius:"+r(y)+'px;cursor:url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJcEhZcwAACxMAAAsTAQCanBgAAAEIUExURUdwTOnp6QICAv7+/h0dHXJyco2NjQAAAAUFBQAAAKSkpP///////wQEBKqqqr+/v/Hx8f///6ioqAAAAP///6ysrD09Pf///+Li4tXV1be3t0xMTCYmJrKyssjIyPv7+2VlZYGBgfv7+5qams3Nzba2tv///yoqKkdHR5aWlgUFBfz8/PHx8f///////5OTk////7i4uO/v78TExOHh4a2trYiIiMDAwM/Pz0FBQf///2dnZ76+vv///93d3dra2q2trQAAADg4OBMTE3V1dQgICCYmJhwcHEdHR39/f0BAQF1dXTAwMLS0tI+Pj1VVVZaWlmVlZU9PT5ycnJiYmP39/Wlpaefn5+BeE2oAAABBdFJOUwDHBQkNd5QJFgH5p10b+vYeJLcQM6I8O/Lf30kowOaca4uOkEXPQjJQpihot4JyNH/4S9ferlW26mPfK85PkoTcnudyewAAAVlJREFUKM+FkeeWgjAQhQHpCirYe9e1be81AZFm3fb+b7JMotvOnrPzIwnfJcncG4b5p2L5aas1SaRhfZj4wtOi54YODtRxnskV4nueYYMZojVXs6crdsd7SQuQ74Ygb3xUjBGerkUcq4bYPHiyyc5jchUzdhCyqzlTkky5nQRhnQd+7yH0luXJP7clDIJN2nrwkXNHeepGd/F8hrZH8NVY4EWZdlG5FkSjW9IX0K+kCdUG5QoHA6/1B51owWmyLP2KQVHIJEl/hpQadVKxH6AezxB7hZdkkY1PEr2dcLnCZzDztahxy3HfHym/WCKkEqE7B0/LJr0wc2Uhi4ZogFlcyJH4R5Dn+oQIYgA7HJWtt+q1TRSi3aaHCh7ywkiaOSE51D7nqFB+XmertrV7KKyLe1uVV3E4FErLwPW3tm6UPw3JgmbyZmUgiGKz0f+egiwrjCJBccoX/QAYCzizwB7F9QAAAABJRU5ErkJggg==\') 12 12,auto;pointer-events:all" class="pt" mx-mousedown="'+t+'\x1e__aE()"></div>'),s+=" ",p.useCNStyle||(s+='<div class="pt" style="width:5px;height:1px;background:'+r(k)+";left:"+r((w+2*v)/2-3)+"px;top:"+r((b+2*v)/2-1)+'px;"></div><div class="pt" style="width:1px;height:5px;background:'+r(k)+";left:"+r((w+2*v)/2-1)+"px;top:"+r((b+2*v)/2-3)+'px;"></div>'),s+=" ",d.modifier.resize&&1==x){s+=" ";var S=((p.rotate||0)+360)%360;if(s+=" ",d.modifier.resizeX&&!p.locked&&!p.widthLocked){s+=" ";var C=0|Math.max(0,Math.min(8*y,p.height-2*y-2*v));s+=" ",C<2*y&&!d.modifier.resizeY&&(s+=" ",C=2*y,s+=" "),s+='<div style="right:-'+r(Math.round(y/2))+"px;top:"+r((b+2*v-C)/2|0)+"px;width:"+r(y)+"px;height:"+r(C)+"px;background:#5390ef;cursor:",S<=22.5||337.5<S||157.5<S&&S<=202.5?s+="ew":S<=67.5||202.5<S&&S<=247.5?s+="nwse":S<=112.5||247.5<S&&S<=292.5?s+="ns":(S<=157.5||292.5<S&&S<=337.5)&&(s+="nesw"),s+='-resize;pointer-events:all;" class="pt" mx-mousedown="'+t+"\x1e__aB({key:'rm'})\"></div>"}if(s+=" ",d.modifier.resizeY&&!p.locked&&!p.heightLocked){s+=" ";var T=0|Math.max(0,Math.min(8*y,p.width-2*y-2*v));s+=" ",T<2*y&&!d.modifier.resizeX&&(s+=" ",T=2*y,s+=" "),s+='<div style="left:'+r((w+2*v-T)/2|0)+"px;bottom:-"+r(Math.round(y/2))+"px;width:"+r(T)+"px;height:"+r(y)+"px;background:#5390ef;cursor:",S<=22.5||337.5<S||157.5<S&&S<=202.5?s+="ns":S<=67.5||202.5<S&&S<=247.5?s+="nesw":S<=112.5||247.5<S&&S<=292.5?s+="ew":(S<=157.5||292.5<S&&S<=337.5)&&(s+="nwse"),s+='-resize;pointer-events:all;" class="pt" mx-mousedown="'+t+"\x1e__aB({key:'mb'})\"></div>"}if(s+=" ",d.modifier.resizeXY&&!p.locked&&!p.widthLocked&&!p.heightLocked){s+=" ";var A=0|Math.max(2*y,Math.min(4*y,p.width-10*y,p.height-10*y));s+='<div style="right:-2px;bottom:-2px;width:'+r(A)+"px;height:"+r(A)+"px;cursor:",S<=22.5||337.5<S||157.5<S&&S<=202.5?s+="nwse":S<=67.5||202.5<S&&S<=247.5?s+="ns":S<=112.5||247.5<S&&S<=292.5?s+="nesw":(S<=157.5||292.5<S&&S<=337.5)&&(s+="ew"),s+="-resize;pointer-events:all;border-right:solid "+r(y)+"px #5390ef;border-bottom:solid "+r(y)+'px #5390ef" class="pt" mx-mousedown="'+t+"\x1e__aB({key:'rb'})\"></div>"}s+=" "}s+="</div>"}return s},mixins:[r],init:function(e){var t=this;t.assign(e),o[t.id]=1,"table"==e.type?n[t.id]=1:e.cell||"htext"!=e.type&&"vtext"!=e.type||(n[t.id]=1),t.on("destroy",function(){delete o[t.id],delete n[t.id]}),t.__q=P.default("#"+t.id)},__aq:function(){var e=O.State.get("__ar"),t=O.State.get("__as").length,i=this.updater,r=i.get(),n=r.id;if(r.selected){if(!l(e,n)){var o=O.Vframe.get("entity_"+this.id);o&&o.invoke("__at")}}else l(e,n);i.set({selected:l(e,n),count:t})},assign:function(e,t){var i=e.id,r=e.ctor,n=e.props,o=e.type;return this.updater.set({ctor:r,id:i,type:o,onlyMove:t&&t.move,space:a.default.ELEMENT_CTRL_SPACE,size:a.default.RESIZER_SIZE,props:n}),this.__aq(),!0},render:function(){this.updater.digest()},__ao:function(){var e=this.updater,t=e.get("props");e.digest({onlyMove:!1,props:t})},__an:function(e){this.updater.digest({onlyMove:!1,props:e})},"__aB<mousedown>":function(e){var d=this;e.stopPropagation();var t=d.updater.get(),u=t.props,i=t.ctor;if(!u.locked){O.State.fire("__au",{locked:1});var r=P.default(e.eventTarget).css("cursor");r&&O.State.fire("__av",{cursor:r});var f=u.rotate||0,n=e.params.key;f=(f+360)%360,0==u.width&&(u.width=.01),0==u.height&&(u.height=.01);for(var o=u.width,a=u.height,l=u.x,s=u.y,p=0,h=0,g=Number.MAX_VALUE,_=Number.MAX_VALUE,c=0,v=i.props;c<v.length;c++){var m=v[c];"width"==m.key?(O.default.has(m,"max")&&(g=m.max),O.default.has(m,"min")&&(p=m.min)):"height"==m.key&&(O.default.has(m,"max")&&(_=m.max),O.default.has(m,"min")&&(h=m.min))}var x=R.default.__aw(u,f),y=R.default.__ax(x.point,n),b=y.opposite,w=y.current,k=b.index,S=b.point,C=w.point,T=S.x,A=S.y,E=Math.abs(C.x-T),M=Math.abs(C.y-A),N={x:l,y:s,rotate:f,width:o,height:a},L=e.pageX,I=e.pageY,D=!1;d.dragdrop(e.eventTarget,function(e){var t={x:1,y:1};D=!0;var i=M<E,r=1,n=e.pageX-L,o=e.pageY-I;0==k||7==k?i&&90<f&&f<270?n=-n:!i&&180<f&&f<360&&(o=-o):0!=k&&1!=k||(i&&45<f&&f<135?n=-n:!i&&90<f&&f<270&&(o=-o)),(r=i?(n+E)/E:(o+M)/M)<0&&(r=0);var a=B[k];1===a?t.x=t.y=r:2===a?t.y=r:3===a&&(t.x=r);var l=R.default.__ay(N,t,x,k),s=z.default.__az(l.width),c=z.default.__az(l.height);s<p?s=p:g<s&&(s=g),c<h?c=h:_<c&&(c=_),s==u.width&&c==u.height||(u.x=z.default.__az(l.left),u.y=z.default.__az(l.top),u.width=s,u.height=c,d.updater.digest({props:u}),O.State.fire("__aA"))},function(){D&&O.State.fire("__D"),O.State.fire("__au"),O.State.fire("__av")})}},"__aE<mousedown>":function(e){e.stopPropagation();var r=this,n=r.updater.get("props");if(!n.locked){var t=P.default(e.eventTarget).css("cursor");t&&O.State.fire("__av",{cursor:t});var i=z.default.__aC(r.__q,{x:e.pageX,y:e.pageY,find:1}),o=R.default.__aD(n),a=n.rotate,l=Math.atan2(i.y-o.y,i.x-o.x)-a*Math.PI/180,s=!1;O.State.fire("__au",{locked:1}),r.dragdrop(e.eventTarget,function(e){var t=z.default.__aC(r.__q,{x:e.pageX,y:e.pageY,find:1});s=!0;var i=Math.atan2(t.y-o.y,t.x-o.x);i=180*(i-l)/Math.PI,n.rotate=(360+(0|i))%360,r.updater.digest({props:n}),O.State.fire("__aA")},function(){s&&O.State.fire("__D"),O.State.fire("__au"),O.State.fire("__av")})}},"__aF<dblclick>":function(e){var t=this.updater,i=t.get("props");i.allowEdit&&(i.editable=!0,t.digest({props:i}))}})}),define("editor/core/draft",["magix"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix");t.default=r.default.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.draft,d=e.i18n,u=e.after,f=e.saving;return c?s+=r(d("_aH",u)):f&&(s+=r(d("_aI"))),s},init:function(e){this.assign(e)},assign:function(e){return this.updater.set(e),!0},render:function(){this.updater.digest()},__an:function(e){this.updater.digest(e)}})}),define("editor/core/history",["magix","../../cainiao/const"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix"),n=e("../../cainiao/const"),o=[],a=[],l=null,s=-1,c="",d=null,u=function(){return JSON.stringify({page:r.State.get("page"),scale:r.State.get("__f"),elements:r.State.get("__aJ"),select:r.State.get("__as"),xLines:r.State.get("__l"),yLines:r.State.get("__m")})},f=function(e){var t=JSON.parse(e);r.State.fire("__aK",{json:t}),r.State.fire("__o",{history:!0}),r.State.fire("__ap")};t.default={__aL:function(){d||(d=u())},__aM:function(){o.length=0,a.length=0,r.State.fire("__o")},__aN:function(){return{canUndo:o.length,canRedo:a.length}},__aO:function(){if(0<o.length){var e=o.pop();a.push(e);var t=o[o.length-1]||d;f(t)}},__aP:function(){var e=a.pop();e&&(o.push(e),f(e))},__aQ:function(e,t){void 0===e&&(e="_save"),void 0===t&&(t=0);var i=u();e!=c&&l&&(o.push(l),l=null,c=e),a.length=0,t?(l=i,clearTimeout(s),s=setTimeout(function(){o.push(l),l=null},t)):o.push(i),o.length>n.default.HISTORY_MAX&&(d=o.shift()),r.State.fire("__o")}}}),define("editor/core/mask",["$","magix","../../i18n/index"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("$"),n=e("magix"),o=e("../../i18n/index"),a=n.default.guid("mask_");n.default.applyStyle("pe",".pah{opacity:0;background:#000;position:fixed;left:0;right:0;top:0;bottom:0;z-index:10001;transition:opacity .2s}.pai{opacity:.2}.paj{position:fixed;left:50%;top:50%;width:200px;height:30px;line-height:30px;background:#fff;margin-top:-15px;margin-left:-100px;z-index:10002;text-align:center}");var l=0;t.default={__ak:function(e){clearTimeout(l);var t=r.default("#"+a);t.length||(r.default("body").append('<div id="'+a+'"><div class="pah" id="'+a+'_bk"/><div class="paj" id="'+a+'_text"></div></div>'),t=r.default("#"+a)),r.default("#"+a+"_text").html(o.default(e)),r.default("#"+a+"_bk").addClass("pai"),t.show()},__al:function(){l=setTimeout(function(){r.default("#"+a+"_bk").removeClass("pai"),r.default("#"+a).hide()},200)}}}),define("editor/core/modifier",["magix","../../util/converter","../../cainiao/const"],function(e,t,i){"use strict";t.__esModule=!0;var n=e("magix"),o=e("../../util/converter"),r=e("../../cainiao/const");t.default=n.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.hoverElement,d=e.transformProps,u=e.space,f=e.showRect,p=e.rectX,h=e.rectY,g=e.rectWidth,_=e.rectHeight;if(c){s+=" ";var v=c.ctor;s+=" ";var m=d(c.props);s+=" ";var x=m.height;s+=" ","table"==v.type&&(s+=" ",x+=1.5,s+=" "),s+='<div class="pt" style="',m.rotate&&(s+="transform:rotate("+r(m.rotate)+"deg);"),s+="left:"+r(m.x-u)+"px;top:"+r(m.y-u)+"px;width:"+r(m.width+2*u)+"px;height:"+r(x+2*u)+'px;border:solid 1px red;z-index:9998"></div>'}return s+=" ",f&&(s+='<div style="border:dashed 1px #666;pointer-events:none;display:',s+=f?"block":"none",s+=";left:"+r(p)+"px;top:"+r(h)+"px;width:"+r(g)+"px;height:"+r(_)+'px;z-index:9999;" class="pt"><div mxs="pd:_" style="width:100%;height:100%;background:#000;opacity:0.02"></div></div>'),s},init:function(){var e=this;e.updater.set({showRect:!1,space:r.default.ELEMENT_CTRL_SPACE,rectX:0,rectY:0,rectWidth:0,rectHeight:0,hoverElement:n.State.get("__aR"),transformProps:function(e){var t={rotate:e.rotate,width:e.width,height:e.height,x:e.x,y:e.y},i=n.State.get("__aS");i&&(t.x+=i.pos.x,t.y+=i.pos.y,e.useCNStyle&&(t.width=.92*i.width,t.height=.92*i.height));var r=o.default.__aT(t);return t.x=r.x,t.y=r.y,t}}),n.State.on("__aU",function(){e.updater.set({hoverElement:n.State.get("__aR")}),e.render()})},render:function(){this.updater.digest()},__aV:function(e,t){var i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y),n=Math.min(e.x,t.x),o=Math.min(e.y,t.y);this.updater.digest({showRect:!0,rectX:n,rectY:o,rectWidth:i,rectHeight:r})},__aW:function(){this.updater.digest({showRect:!1})}})}),define("editor/core/p-table",["magix","$","../../util/converter","./workaround","../../util/transform","gallery/mx-dragsort/index"],function(e,t,i){e("gallery/mx-dragsort/index"),t.__esModule=!0;var s=e("magix"),c=e("$"),d=e("../../util/converter"),r=e("./workaround"),n=e("../../util/transform");t.default=s.default.View.extend({tmpl:function(e,t,i,r,n,o,a,l){for(var s="",c=e.rows,d=e.sorted,u=e.eId,f=e.i18n,p=0,h=c.length;p<h;p++){var g=c[p];if(s+=" ","tr"==g.tag){s+=" ";for(var _=0,v=g.cells,m=v.length;_<m;_++){var x=v[_];if(s+=" ","td"==x.tag){if(s+=" ",x.children&&x.children.length){s+='<div class="paw" mx-view="gallery/mx-dragsort/index?selector=.pax" mx-dragfinish="'+t+"\x1e__aZ({cell:'"+a(i,x)+"'})\">";var y=d(x.children);s+=" ";for(var b=0,w=y.length;b<w;b++){var k=y[b];s+='<div class="paB pw" title="'+r(k.props.tip)+'" mx-mouseover="'+t+"\x1e__bc({element:'"+a(i,k)+"',cellId:'"+r(l(u))+"_c_"+r(l(p))+"_"+r(l(_))+"',cell:'"+a(i,x)+'\'})" data-eid="'+r(k.id)+'" mx-mouseout="'+t+'\x1e__bc()"><div class="pp pax" title="'+r(f("_bd"))+'">'+n(k.ctor.icon)+'</div><div mxa="pe:_" class="paz pw"><div mxa="pe:a" class="pp">'+r(k.props.tip)+'</div><i title="'+r(f("_be"))+'" class="pN paA pq" mx-click="'+t+"\x1e__ba({id:'"+r(l(k.id))+"'})\">&#xe600;</i></div></div>","table"==k.type&&(s+='<div mx-view="editor/core/p-table?eId='+o(k.id)+"&rows="+a(i,k.props.rows)+'"></div>'),s+=" "}s+="</div>"}s+=" "}s+=" "}s+=" "}s+=" "}return s},init:function(e){this.assign(e),this.updater.set({sorted:function(e){return n.default.__aX(e).reverse()}})},assign:function(e){return this.updater.set(e),!0},render:function(){this.updater.digest()},"__aZ<dragfinish>":function(e){for(var t=c.default(e.eventTarget).children(),i=e.params.cell.children,r=s.default.toMap(i,"id"),n=i.length,o=0,a=t;o<a.length;o++){r[a[o].getAttribute("data-eid")].props.zIndex=n--}this.render(),s.State.fire("__aY"),s.State.fire("__D")},"__ba<click>":function(e){r.StageElements.__b_(e.params.id,!0),this.updater.set({rows:this.updater.get("rows")}).digest(),s.State.set({__aR:null,__aS:null}),s.State.fire("__aU"),s.State.fire("__aY"),s.State.fire("__D")},"__bc<mouseover,mouseout>":function(e){if("p-table"!=e.from&&(e.from="p-table",!s.default.inside(e.relatedTarget,e.eventTarget))){var t=e.params,i=t.element,r=t.cellId,n=t.cell,o=null;if("mouseover"==e.type){var a=c.default("#entity_"+r);if(!a.length)return;var l=a.offset();o={width:n.width,height:n.height,pos:d.default.__bb({x:l.left+1,y:l.top+1})}}s.State.set({__aR:i,__aS:o}),s.State.fire("__aU")}}})}),define("editor/core/property",["magix","../const/props-desc","../../util/transform","../../util/table","../../i18n/index","$","./workaround","gallery/mx-number/index","gallery/mx-dropdown/index","gallery/mx-picture/index","gallery/mx-font/lineheight","gallery/mx-font/style","gallery/mx-font/align","gallery/mx-cell/index","gallery/mx-cell/size","gallery/mx-cell/focus","gallery/mx-dragsort/index","./p-table"],function(e,t,i){e("gallery/mx-number/index"),e("gallery/mx-dropdown/index"),e("gallery/mx-picture/index"),e("gallery/mx-font/lineheight"),e("gallery/mx-font/style"),e("gallery/mx-font/align"),e("gallery/mx-cell/index"),e("gallery/mx-cell/size"),e("gallery/mx-cell/focus"),e("gallery/mx-dragsort/index"),e("./p-table"),t.__esModule=!0;var g=e("magix"),a=e("../const/props-desc"),_=e("../../util/transform"),n=e("../../util/table"),c=e("../../i18n/index"),v=e("$"),r=e("./workaround");g.default.applyStyle("pf",".pak{width:245px;height:100%;background:#edeef3;border-left:1px solid #ccc;position:relative;z-index:3000}.pal{height:calc(100% - 25px);overflow-y:scroll;padding:0 0 100px}.pam{background:#ccc;padding:0 10px;height:25px;line-height:25px;background-image:-webkit-gradient(linear,0 0,0 100%,from(#eee),to(#ccc),color-stop(0,#eee))}.pan{line-height:32px}.pao:hover{background:hsla(0,0%,100%,.67)}.pap{height:1px;line-height:1px;margin:5px 0;background:rgba(0,0,0,.2);background:-webkit-gradient(linear,left top,right top,from(rgba(165,69,243,0)),color-stop(.5,rgba(125,118,132,.33)),to(rgba(165,69,243,0)))}.paq{width:80px;text-align:right;display:inline-block;margin-right:5px;vertical-align:middle}.par{width:25px;height:25px;background:#474761;cursor:move;margin-top:4px;border-radius:4px}.pas{cursor:pointer;width:180px}.pat{width:158px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.pau{margin-top:8px;color:#848282;visibility:hidden}.pas:hover .pau{visibility:visible}.pav{vertical-align:top}.paw{border-top:1px solid #e4e4e4;line-height:20px;margin-left:5px;cursor:default;font-size:12px}.pax{width:16px;height:16px;background:#474761;margin-top:2px;cursor:move}.pay{padding-right:10px}.paz{cursor:pointer;padding-right:20px;margin-left:19px}.paA{font-size:12px;margin-top:4px;color:#848282;visibility:hidden}.paz:hover .paA{visibility:visible}.paB{padding-left:2px}.paB:hover{background:hsla(0,0%,100%,.54)}"),t.default=g.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s,c="",d=e.hasElement,u=e.i18n,f=e.title,p=e.props,h=e.desc,g=e.data,_=e.lang,v=e.elements,m=e.vId;if(c+='<div mxv mxa="pf:_" class="pak"><div mxa="pf:a" class="pam">',c+=r(u(d?"_bn":"_bo")),c+="</div>",d){c+='<ul mxv mxa="pf:b" class="pal"><li mxa="pf:c" class="pan"><span mxa="pf:d" class="paq">'+r(u("_bp"))+":</span>"+r(u(f))+"</li>";for(var x=0,y=p.length;x<y;x++){var b=p[x];c+='<li mxv class="pan',b.type==h.SPLITER&&(c+=" pap"),c+='">',b.type!=h.SPLITER&&(c+=" ",(!b.ifKey&&!b.gtKey||b.ifKey&&g[b.ifKey]==b.ifValue||b.gtKey&&g[b.gtKey]>b.gtValue)&&(c+='<span class="paq',b.styleVTop&&(c+=" pav"),c+='">'+r(u(b.tip))+":</span>",b.type==h.LABEL?c+=" "+r(b.read?b.read(g[b.key]):g[b.key])+" ":b.type==h.INPUT?(c+='<input class="pB" value="'+r(g[b.key])+'" mx-input="'+t+"\x1e__bj({key:'"+r(l(b.key))+"'})\" ",(s=g.locked&&!b.role)&&(c+="disabled"),c+="/>"):b.type==h.TEXTAREA?(c+='<textarea class="pC" mx-input="'+t+"\x1e__bj({key:'"+r(l(b.key))+"'})\" ",(s=g.locked&&!b.role)&&(c+="disabled"),c+=' style="height:100px;">'+r(g[b.key])+"</textarea>"):b.type==h.NUMBER?(c+='<div mxv="data" mx-input="'+t+"\x1e__bj({key:'"+r(l(b.key))+"',read:'value',write:'"+a(i,b.write)+"',sync:'"+a(i,b.sync)+"',refresh:'"+a(i,b.refresh)+"'})\" ",(s=g.locked||g[b.key+"Locked"])&&(c+='readonly="'+r(s)+'" '),c+=' class="pB pu" mx-view="gallery/mx-number/index?value='+a(i,b.read?b.read(g[b.key]):g[b.key]),(s=b.min)&&(c+="&min="+o(s)),(s=b.max)&&(c+="&max="+o(s)),(s=b.step)&&(c+="&step="+o(s)),(s=b.fixed)&&(c+="&fixed="+o(s)),(s=g.locked||g.lockedX||g[b.key+"Locked"])&&(c+="&disabled="+o(s)),c+='"></div>'):b.type==h.DROPDOWN?(c+='<div mx-change="'+t+"\x1e__bj({key:'"+r(l(b.key))+"',read:'value',refresh:'"+a(i,b.refresh)+'\'})" mx-view="gallery/mx-dropdown/index?list='+a(i,b.items),(s=b.textKey)&&(c+="&textKey="+o(s)),(s=b.valueKey)&&(c+="&valueKey="+o(s)),c+="&selected="+o(g[b.key]),(s=g.locked)&&(c+="&disabled="+o(s)),c+='"></div>'):b.type==h.IMAGE?(c+='<div class="pr" mx-change="'+t+"\x1e__bk({key:'"+r(l(b.key))+"',updateSize:"+r(b.updateSize)+'})" mx-view="gallery/mx-picture/index?pic='+o(g[b.key])+"&lang="+o(_),(s=g.locked)&&(c+="&disabled="+o(s)),c+='"></div>'):b.type==h.ORIGINSIZE?(c+="<button ",(s=g.locked)&&(c+="disabled"),c+=' type="button" class="pz pO" mx-click="'+t+'\x1e__bm()">'+r(u("_bq"))+"</button>"):b.type==h.BOOLEAN?(c+='<input type="checkbox" class="pE" mx-change="'+t+"\x1e__bj({key:'"+r(l(b.key))+"',bool:true,write:'"+a(i,b.write)+"',refresh:'"+a(i,b.refresh)+"'})\" ",(s=g[b.key])&&(c+="checked"),c+=" ",(s=g.locked&&!b.role||g.barred)&&(c+="disabled"),c+="/>"):b.type==h.LINEHEIGHT?(c+='<div mxv="data" mx-input="'+t+"\x1e__bj({key:'"+r(l(b.key))+'\',read:\'value\'})" class="pr" mx-view="gallery/mx-font/lineheight?',(s=g.locked)&&(c+="disabled="+o(s)),(s=b.min)&&(c+="&min="+o(s)),c+="&value="+a(i,g[b.key])+'"></div>'):b.type==h.FONTSTYLE?(c+='<div mxv="data" mx-input="'+t+"\x1e__bj({key:'"+r(l(b.key))+'\',read:\'value\'})" class="pr" mx-view="gallery/mx-font/style?',(s=g.locked)&&(c+="disabled="+o(s)),c+="&value="+a(i,g[b.key])+'"></div>'):b.type==h.FONTALIGN?(c+='<div mxv="data" mx-input="'+t+"\x1e__bj({key:'"+r(l(b.key))+'\',read:\'value\'})" class="pr" mx-view="gallery/mx-font/align?',(s=g.locked)&&(c+="disabled="+o(s)),c+="&value="+a(i,g[b.key])+'"></div>'):b.type==h.CELLOPERATE?(c+='<div mxv="data" mx-change="'+t+'\x1e__bg()" class="pr" mx-view="gallery/mx-cell/index?',(s=g.locked)&&(c+="disabled="+o(s)),c+="&props="+a(i,g)+'"></div>'):b.type==h.CELLSIZE?(c+='<div mxv="data" mx-change="'+t+'\x1e__bg()" class="pr" mx-view="gallery/mx-cell/size?',(s=g.locked)&&(c+="disabled="+o(s)),c+="&props="+a(i,g)+'"></div>'):b.type==h.CELLFOCUS?(c+='<div mxv="data" mx-change="'+t+'\x1e__bg({ui:true})" class="pr" mx-view="gallery/mx-cell/focus?',(s=g.locked)&&(c+="disabled="+o(s)),c+="&props="+a(i,g)+'"></div>'):b.type==h.CELLCOLSHARE?(c+="<button ",(s=g.locked)&&(c+="disabled"),c+=' type="button" class="pz pO" mx-click="'+t+"\x1e__bh({type:'x'})\">"+r(u("_br"))+"</button>"):b.type==h.CELLROWSHARE&&(c+="<button ",(s=g.locked)&&(c+="disabled"),c+=' type="button" class="pz pO" mx-click="'+t+"\x1e__bh({type:'y'})\">"+r(u("_bs"))+"</button>"),c+=" "),c+=" "),c+="</li>"}c+="</ul>"}else{c+='<ul mxa="pf:e" mx-view="gallery/mx-dragsort/index?selector=li%20.par" class="px pal" mx-dragfinish="'+t+'\x1e__aZ()">';for(var w=v.length;w--;){c+=" ";var k=v[w];c+='<li class="pan pl pw pao" data-eid="'+r(k.id)+'" id="'+r(m)+"_"+r(k.id)+'"><div class="pw" mx-mouseover="'+t+"\x1e__bc({element:'"+a(i,k)+'\'})" mx-mouseout="'+t+'\x1e__bc()"><div class="par pp pc" title="'+r(u("_bd"))+'">'+n(k.ctor.icon)+'</div><div mxa="pf:f" class="pp pw pas"><div class="pp pat" title="'+r(k.props.tip)+'">'+r(k.props.tip)+'</div><i title="'+r(u("_be"))+'" class="pN pp pau" mx-click="'+t+"\x1e__ba({id:'"+r(l(k.id))+"'})\">&#xe600;</i></div></div>","table"==k.type&&(c+='<div mx-view="editor/core/p-table?eId='+o(k.id)+"&rows="+a(i,k.props.rows)+'" class="pay"></div>'),c+="</li>"}c+="</ul>"}return c+="</div>"},init:function(){var e=this,t=e.__bf(function(){e.render()},100);g.State.on("__ap",t),g.State.on("__aA",t),g.State.on("__p",t)},render:function(){var e=g.State.get("__as"),t=g.default.config("lang");if(this.updater.set({lang:t}),1===e.length){var i=e[0],r=i.ctor,n=i.props,o=i.id;this.updater.digest({hasElement:!0,title:r.title,desc:a.default,props:r.props,data:n,eId:o})}else this.updater.digest({elements:_.default.__aX(g.State.get("__aJ")),hasElement:!1})},"__bg<change>":function(e){var t=this.updater,i=t.get("data"),r=t.get("eId");g.State.fire("__am",{data:i,eId:r}),e.params.ui||(this.render(),g.State.fire("__D"))},"__bh<click>":function(e){var t=this.updater,i=t.get("data"),r=t.get("eId");n.default.__h(i,{share:e.params.type})&&(g.State.fire("__am",{data:i,eId:r}),this.render(),g.State.fire("__D"))},"__bj<input,change>":function(e){var t,i,r=this.updater,n=r.get("data"),o=r.get("eId"),a=e.params,l=a.key,s=a.read,c=a.bool,d=a.write,u=a.refresh,f=a.sync,p="width"==l||"height"==l;if(p&&(t=_.default.__bi(n,n.rotate)),i=c?e.eventTarget.checked:s?e[s]:v.default(e.eventTarget).val(),d&&(i=d(i,n)),f&&(n[f]=i),n[l]=i,p){var h=_.default.__bi(n,n.rotate);n.x+=t.x-h.x,n.y+=t.y-h.y,u=!0}(c||u)&&this.render(),g.State.fire("__am",{data:n,eId:o}),g.State.fire("__D",{key:l,time:500})},"__bk<change>":function(e){var t=this.updater,i=g.State.get("__f"),r=t.get("data"),n=t.get("eId"),o=e.params,a=e.pic;r[o.key]=a.src,o.updateSize&&(r.width=a.width*i,r.height=a.height*i),this.render(),g.State.fire("__am",{data:r,eId:n}),g.State.fire("__D")},"__bm<click>":function(){var t=this,e=this.updater,i=e.get("data"),r=e.get("eId"),n=g.State.get("__f"),o=i.src,a=new Image,l=this,s=_.default.__bi(i,i.rotate);a.onerror=function(){l.alert(c.default("__bl"))},a.onload=function(){i.width=a.width*n,i.height=a.height*n;var e=_.default.__bi(i,i.rotate);i.x+=s.x-e.x,i.y+=s.y-e.y,t.render(),g.State.fire("__am",{data:i,eId:r}),g.State.fire("__D")},a.src=o},"__aZ<dragfinish>":function(e){for(var t=v.default(e.eventTarget).find("li"),i=g.State.get("__aJ"),r=g.default.toMap(i,"id"),n=i.length,o=0,a=t;o<a.length;o++){r[a[o].getAttribute("data-eid")].props.zIndex=n--}this.render(),g.State.fire("__aY"),g.State.fire("__D")},"__ba<click>":function(e){r.StageElements.__b_(e.params.id,!0),this.render(),g.State.set({__aR:null}),g.State.fire("__aU"),g.State.fire("__aY"),g.State.fire("__D")},"__bc<mouseover,mouseout>":function(e){"p-table"!=e.from&&(g.default.inside(e.relatedTarget,e.eventTarget)||(g.State.set({__aR:e.params.element}),g.State.fire("__aU")))}})}),define("editor/core/stage",["magix","$","../const/click-desc","../../gallery/mx-dragdrop/index","../../util/converter","../const/keys","./workaround","./history","../../service/index","../../element/image/designer","../../util/table","../../cainiao/const","./modifier"],function(e,t,i){e("./modifier"),t.__esModule=!0;var Me=e("magix"),Ne=e("$"),n=e("../const/click-desc"),r=e("../../gallery/mx-dragdrop/index"),_=e("../../util/converter"),f=e("../const/keys"),Le=e("./workaround"),p=e("./history"),o=e("../../service/index"),h=e("../../element/image/designer"),Ie=e("../../util/table"),g=e("../../cainiao/const");Me.default.applyStyle("pg",".paC{pointer-events:all}.paD{outline:0;display:flex}.paE{margin:0 auto;flex:0 0 auto;padding:50px 100px}.paF{background:#fff;box-shadow:0 3px 6px 0 rgba(0,0,0,.3);line-height:1.28571}.paG{background:transparent}.paH{background:#fafafa}"),t.default=Me.View.extend({mixins:[r,o.default],tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.vId,d=e.header,u=e.width,f=e.height,p=e.elements,h=e.footer;s+='<div mxa="pg:_" class="paD pu" mx-mousedown="'+t+'\x1e__bK()" id="stage_outer" tabindex="0" mx-keydown="'+t+'\x1e__bZ()" mx-focusout="'+t+'\x1e__cj()" mx-focusin="'+t+'\x1e__ck()" mx-drop="'+t+'\x1e__ci()"><div class="paE" id="cx_'+r(c)+'"><div class="paH" style="height:',s+=0<d?r(d):"0",s+="px;width:"+r(u)+'px;"></div><div class="pu paF" style="width:'+r(u)+"px;height:"+r(f)+'px;" id="stage_stage" mx-contextmenu="'+t+'\x1e__cd()">';for(var g=0,_=p.length;g<_;g++){var v=p[g];s+=" ";var m=v.ctor,x=v.props,y=v.id,b=v.type;s+=" ","#script"!=b&&(s+='<div id="'+r(y)+'" mx-view="element/'+r(m.type)+"/designer?type="+o(b)+"&id="+o(y)+"&ctor="+a(i,m)+"&props="+a(i,x)+'" class="paC" mx-mousedown="'+t+"\x1e__bM({id:'"+r(l(y))+"',ctor:'"+a(i,m)+"',props:'"+a(i,x)+"',type:'"+r(l(b))+"'})\"></div>"),s+=" "}return s+='</div><div class="paH" style="height:',s+=0<h?r(h):"0",s+="px;width:"+r(u)+'px;"></div></div><div mx-view="editor/core/modifier" id="m_'+r(c)+'"></div><div mxs="pg:_" id="outer_cm"></div></div><div mxs="pg:a" class="paG" id="stayBar"></div>'},init:function(){var o=this,t=function(e){var t=Me.State.get("__aJ");if(e&&e.scale){Le.StageElements.__bt(e.from,e.to);var i=Me.State.get("page");i.width=i.width/e.from*e.to,i.height=i.height/e.from*e.to,i.header=i.header/e.from*e.to,i.footer=i.footer/e.from*e.to,o.updater.set({elements:t})}else o.updater.digest({elements:t})};Me.State.on("__D",function(e){e.key?p.default.__aQ(e.key,e.time):p.default.__aQ()}),Me.State.on("__o",function(e){if(e.history){var t=Me.State.get("__aJ");o.updater.set({elements:t}),o.render()}}),Me.State.on("__n",function(e){e.scale?t(e):e.keepSelect||Le.StageSelectElements.__bu(),o.render()}),Me.State.on("__aY",t),Me.State.on("__bv",function(e){e.zone!=n.default.CANVAS&&e.zone!=n.default.PROPERTY&&Le.StageSelectElements.__bu()});var r=null;Me.State.on("__bw",function(e){var t=e.hoverNode;if(Me.default.inside(t,"stage_stage")){var i=Le.StageElements.__bx(t);i&&i.dashed==r||r&&r.addClass("pv"),i&&i.dashed&&i.dashed!=r&&(r=Ne.default(i.dashed)).removeClass("pv")}else t||(r&&r.addClass("pv"),r=null)}),Me.State.on("__by",function(e){if(Me.default.inside(e.dropNode,"stage_stage")){var t=Le.StageElements.__bx(e.dropNode),i=Le.StageElements.__bz(e,!1,t,e.ignoreSnapshot);i&&(o.updater.digest({elements:i}),e.ignoreSnapshot)}}),Me.State.on("__bA",function(){var e=Me.State.get("__f"),t=Ne.default("#stage_stage").offset(),i=80*Math.random()*e,r={pageX:t.left+i+o.__q.prop("scrollLeft"),pageY:t.top+i+o.__q.prop("scrollTop")},n=Le.StageElements.__bz(r,!0);n&&(o.updater.digest({elements:n}),Me.State.fire("__D"))}),Me.State.on("__bB",function(e){o.__bC(e)}),Me.State.on("__au",function(e){var t=Ne.default("#stayBar"),i=Ne.default("#app_stage");if(e.locked){var r=i.prop("scrollWidth"),n=i.prop("scrollHeight"),o=Me.State.get("page");t.css({height:n,width:r,marginTop:-(o.height+100),display:"block"})}else t.hide()}),o.updater.set({elements:Me.State.get("__aJ")}),o.__q=Ne.default("#"+o.id)},render:function(){var e=Me.State.get("page");this.updater.digest({header:e.header,footer:e.footer,width:e.width,height:e.height})},"__bK<mousedown>":function(e){var c=this,t=e.target.id;if("stage_outer"==t||"stage_stage"==t||t=="cx_"+c.id){var d=null;if(e.shiftKey){d={};for(var i=0,r=Le.StageSelectElements.__bD();i<r.length;i++){var n=r[i];d[n.id]=1}}else Le.StageSelectElements.__bu();var u=_.default.__bE({x:e.pageX,y:e.pageY}),f=Me.Vframe.get("m_"+c.id),p=!1,h=!1,g=Le.StageElements.__bF();c.dragdrop(e.eventTarget,c.__bf(function(e){if(!h){p=!0;var t=_.default.__bE({x:e.pageX,y:e.pageY});f.invoke("__aV",[u,t]);var i=Math.abs(u.x-t.x),r=Math.abs(u.y-t.y),n=Math.min(u.x,t.x),o=Math.min(u.y,t.y),a=_.default.__bG({x:n,y:o});a.width=i,a.height=r;var l=Le.StageElements.__bH(g,a,d),s=JSON.stringify(l,["id"]);s!=c.__bI&&(c.__bI=s,Le.StageSelectElements.__bJ(l))}},50),function(){p&&(delete c.__bI,h=!0,f.invoke("__aW"))})}},"__bM<mousedown>":function(e){"element_table"!=e.from&&Le.StageElements.__bL(e,this)},"__bZ<keydown>":function(e){var t=e.target;if("text-element"!=Ne.default(t).data("role")){e.metaKey||e.shiftKey||e.altKey||e.ctrlKey||(e.keyCode==f.default.F?(e.preventDefault(),Le.StageElements.__bN()):e.keyCode!=f.default.L&&e.keyCode!=f.default.R&&e.keyCode!=f.default.U&&e.keyCode!=f.default.D&&e.keyCode!=f.default.T&&e.keyCode!=f.default.B||(e.preventDefault(),Me.State.fire("__bO",{key:e.keyCode})));var i=Le.StageSelectElements.__bD(),r=Me.State.get("__aJ");if(e.keyCode==f.default.TAB)return e.preventDefault(),void Le.StageElements.__bP(e);if(i.length)if(e.ctrlKey||e.metaKey)(e.ctrlKey||e.metaKey)&&e.keyCode==f.default.C&&(e.preventDefault(),Le.Clipboard.__bS());else{e.preventDefault();var n=!1,o=!1;if(e.keyCode==f.default.DELETE)n=!0,Le.StageElements.__bQ();else for(var a=e.shiftKey?10:1,l=0,s=i;l<s.length;l++){var c=s[l];if(c.props.locked||(e.keyCode==f.default.UP?(o=!0,c.props.y-=a):e.keyCode==f.default.DOWN?(o=!0,c.props.y+=a):e.keyCode==f.default.LEFT?(o=!0,c.props.x-=a):e.keyCode==f.default.RIGHT&&(o=!0,c.props.x+=a)),o){var d=Me.Vframe.get(c.id);d&&d.invoke("assign",c)&&d.invoke("render")}}(o||n)&&(n&&(i.length=0),Me.State.fire("__aA"),Me.State.fire("__D",{key:"__bR",time:500})),n&&this.updater.digest({elements:r})}if(e.ctrlKey||e.metaKey)if(e.keyCode==f.default.N)e.preventDefault(),Me.State.fire("__bT");else if(e.keyCode==f.default.V){if(e.preventDefault(),Le.Clipboard.__bU()){var u=Le.StageElements.__bV();Le.Clipboard.__bW(u),Me.State.fire("__D")}}else if(e.keyCode==f.default.A){e.preventDefault(),(u=Le.StageElements.__bV()).coll.length&&Le.StageElements.__bX(u.coll)}else e.keyCode==f.default.X?(e.preventDefault(),Le.Clipboard.__bY()):e.keyCode==f.default.Z?(e.preventDefault(),e.shiftKey?p.default.__aP():p.default.__aO()):e.keyCode==f.default.Y&&(e.preventDefault(),p.default.__aP())}},__bC:function(e){if("align"==e.action){for(var t=Ne.default("#"+this.id).offset(),i=Le.StageSelectElements.__bD(),r=-Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,a=-Number.MAX_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,c=0,d=i;c<d.length;c++){var u=d[c],f=Ne.default("#"+u.id+" [mx-view]>*")[0].getBoundingClientRect();if("right"==e.to)f.right>r&&(r=f.right);else if("left"==e.to)f.left<n&&(n=f.left);else if("top"==e.to)f.top<o&&(o=f.top);else if("bottom"==e.to)f.bottom>a&&(a=f.bottom);else if("vcenter"==e.to){var p=(f.bottom-f.top)/2;f.top+p<l&&(l=f.top+p)}else if("hcenter"==e.to){p=(f.right-f.left)/2;f.left+p<s&&(s=f.left+p)}}r-=t.left,n-=t.left,o-=t.top,a-=t.top,l-=t.top,s-=t.left;for(var h=0,g=0,_=i;g<_.length;g++){u=_[g],f=Ne.default("#"+u.id+" [mx-view]>*")[0].getBoundingClientRect();var v=0;if("right"==e.to)0!=(m=r-(f.right-t.left))&&(v=h=1,u.props.x+=m);else if("left"==e.to){0!=(m=n-(f.left-t.left))&&(v=h=1,u.props.x+=m)}else if("top"==e.to){0!=(m=o-(f.top-t.top))&&(v=h=1,u.props.y+=m)}else if("bottom"==e.to){0!=(m=a-(f.bottom-t.top))&&(v=h=1,u.props.y+=m)}else if("vcenter"==e.to){0!=(m=l-(f.top-t.top+(f.bottom-f.top)/2))&&(v=h=1,u.props.y+=m)}else if("hcenter"==e.to){var m;0!=(m=s-(f.left-t.left+(f.right-f.left)/2))&&(v=h=1,u.props.x+=m)}if(v)(Ee=Me.Vframe.get(u.id))&&Ee.invoke("assign",u)&&Ee.invoke("render")}h&&(Me.State.fire("__aA"),Me.State.fire("__D"))}else if("put"==e.action){for(var x=Le.StageElements.__c_(),y=Me.State.get("page"),b=(h=0,0),w=x;b<w.length;b++){var k=0,S=0;i=(F=w[b]).elements;if("stage"==F.type)k=y.width,S=y.height;else k=(ne=F.table.props.rows[F.row].cells[F.col]).width,S=ne.height;var C=k/2,T=S/2;if(e.shift)for(var A=0,E=i;A<E.length;A++){var M=(u=E[A]).props;v=0;if("hc"==e.to)(R=C-M.width/2)!=M.x&&(M.x=R,v=h=1);else(P=T-M.height/2)!=M.y&&(M.y=P,v=h=1);if(v)(Ee=Me.Vframe.get(u.id))&&Ee.invoke("assign",u)&&Ee.invoke("render")}else{for(var N=Number.MAX_SAFE_INTEGER,L=Number.MAX_SAFE_INTEGER,I=-Number.MAX_SAFE_INTEGER,D=-Number.MAX_SAFE_INTEGER,O=0,z=i;O<z.length;O++){(M=(u=z[O]).props).x<N&&(N=M.x),M.x+M.width>I&&(I=M.x+M.width),M.y<L&&(L=M.y),M.y+M.height>D&&(D=M.y+M.height)}for(var R=C-(N+(I-N)/2),P=T-(L+(D-L)/2),B=0,H=i;B<H.length;B++){M=(u=H[B]).props,v=0;if("hc"==e.to){var W=M.x+R;M.x!=W&&(h=v=1,M.x=W)}else{var X=M.y+P;M.y!=X&&(h=v=1,M.y=X)}if(v)(Ee=Me.Vframe.get(u.id))&&Ee.invoke("assign",u)&&Ee.invoke("render")}}}h&&(Me.State.fire("__aA"),Me.State.fire("__D"))}else if("avg"==e.action){if(1==(x=Le.StageElements.__c_()).length){var F;h=0;if(2<(i=(F=x[0]).elements).length||e.ctrl){for(var j=-Number.MAX_SAFE_INTEGER,q=Number.MAX_SAFE_INTEGER,$=-Number.MAX_SAFE_INTEGER,U=Number.MAX_SAFE_INTEGER,V=[],K=0,Y=i;K<Y.length;K++){var G=(M=(u=Y[K]).props).x+M.width/2,Q=M.y+M.height/2;j<G&&(j=G),G<q&&(q=G),$<Q&&($=Q),Q<U&&(U=Q),V.push({m:u,mx:G,my:Q})}var Z=-1,J=-1,ee=0,te=(V="av"==e.to?V.sort(function(e,t){return e.my-t.my}):V.sort(function(e,t){return e.mx-t.mx})).length,ie=te+1,re=null;if(e.ctrl){var ne;if("stage"==F.type)J=(y=Me.State.get("page")).width,Z=y.height;else J=(ne=F.table.props.rows[F.row].cells[F.col]).width,Z=ne.height;re={props:{x:0,y:0,width:0,height:0}}}else{var oe=V[0],ae=V[V.length-1],le=oe.m.props,se=ae.m.props;Z=se.y-le.y-le.height,J=se.x-le.x-le.width,ee+=1,te-=1,ie-=2,re=oe.m}if(e.shift){e.ctrl&&(j=J,U=q=0,$=Z);for(var ce=($-U)/ie,de=(j-q)/ie,ue=ee;ue<te;ue++){u=V[ue].m,v=0;if("av"==e.to){var fe=re.props.y+re.props.height/2;fe+=ce,fe-=u.props.height/2,u.props.y!=fe&&(v=h=1,u.props.y=fe)}else{var pe=re.props.x+re.props.width/2;pe+=de,pe-=u.props.width/2,u.props.x!=pe&&(v=h=1,u.props.x=pe)}if(v)(Ee=Me.Vframe.get(u.id))&&Ee.invoke("assign",u)&&Ee.invoke("render");re=u}}else{var he=0,ge=0;for(ue=ee;ue<te;ue++){he+=(M=V[ue].m.props).height,ge+=M.width}var _e=(Z-he)/ie,ve=(J-ge)/ie;for(ue=ee;ue<te;ue++){u=V[ue].m,v=0;if("av"==e.to){var me=re.props.y+re.props.height+_e;u.props.y!=me&&(v=h=1,u.props.y=me)}else{var xe=re.props.x+re.props.width+ve;u.props.x!=xe&&(v=h=1,u.props.x=xe)}if(v)(Ee=Me.Vframe.get(u.id))&&Ee.invoke("assign",u)&&Ee.invoke("render");re=u}}h&&(Me.State.fire("__aA"),Me.State.fire("__D"))}}}else if("same"==e.action){i=Le.StageSelectElements.__bD();for(var ye=-Number.MAX_SAFE_INTEGER,be=-Number.MAX_SAFE_INTEGER,we=Number.MAX_SAFE_INTEGER,ke=Number.MAX_SAFE_INTEGER,Se=0,Ce=i;Se<Ce.length;Se++){(M=(u=Ce[Se]).props).width>ye&&(ye=M.width),M.width<we&&(we=M.width),M.height>be&&(be=M.height),M.height<ke&&(ke=M.height)}h=0;for(var Te=0,Ae=i;Te<Ae.length;Te++){var Ee;M=(u=Ae[Te]).props,v=0;if("maw"==e.to?M.width!=ye&&(h=v=1,M.width=ye):"miw"==e.to?M.width!=we&&(h=v=1,M.width=we):"mah"==e.to?M.width!=be&&(h=v=1,M.height=be):"mih"==e.to&&M.width!=ke&&(h=v=1,M.height=ke),v)"table"==u.type?Ie.default.__h(u.props,{fsize:!0}):"qrcode"==u.type&&("mah"==e.to||"mih"==e.to?M.width=M.height:M.height=M.width),(Ee=Me.Vframe.get(u.id))&&Ee.invoke("assign",u)&&Ee.invoke("render")}h&&(Me.State.fire("__aA"),Me.State.fire("__D"))}},"__cd<contextmenu>":function(e){if(e.preventDefault(),"element_table"!=e.from){var i=Le.StageSelectElements.__bD(),r=Me.State.get("__aJ"),n=this;n.__ca=_.default.__bb({x:e.pageX,y:e.pageY}),Le.StageElements.__cb(n,e,null,r,function(e){if(0==e.id)Le.StageElements.__bX(r);else if(1==e.id)Le.Clipboard.__bS();else if(14==e.id)Le.Clipboard.__bY();else if(2==e.id)Le.Clipboard.__bW({coll:r,collType:"stage",width:Number.MAX_SAFE_INTEGER,height:Number.MAX_SAFE_INTEGER},n.__ca),Me.State.fire("__D");else if(7==e.id){var t=Le.StageElements.__bQ(!0);n.updater.digest({elements:t}),Me.State.fire("__D")}else{t=Le.StageElements.__cc(e.id,i[0],r);n.updater.digest({elements:t}),Me.State.fire("__D")}})}},"__ci<drop>":function(o){var d=this,e=o.originalEvent.dataTransfer.files,u=[],a=[],l=o.pageX,s=o.pageY,c=Me.default.guid("g_");Le.StageElements.__ce(e,function(e){for(var t=0,i=e;t<i.length;t++){var r=i[t],n=Me.default.guid("file_");u.push(n),a.push(r.file),Me.State.set({__cf:h.default,__cg:{locked:!0,barred:n,groupId:c,src:g.default.DROP_STAGE_LOADING,width:r.width,height:r.height}}),Me.State.fire("__by",{dropNode:o.target,pageX:l,pageY:s,ignoreSnapshot:1}),l+=40,s+=40}a.length&&(Me.State.set({__cf:null,__cg:null}),Me.State.fire("__n")),d.upload(a,c,function(n,e){for(var t=Me.State.get("__aJ"),o=[],a={},l=0,i=0;i<u.length;i++)e[i]&&(a[u[i]]=e[i]);if(Le.StageElements.__ch(t,function(e,t){if("element"==t){var i=e.props.barred;if(e.props.groupId==n&&i){var r=a[i];r&&!r.error?(l=1,Me.default.mix(e.props,r),e.props.locked=!1,delete e.props.barred,delete e.props.groupId):o.push(e)}}}),o.length)for(var r=0,s=o;r<s.length;r++){var c=s[r];Le.StageElements.__b_(c.id,!0)}l&&Me.State.fire("__D"),(l||o.length)&&d.updater.digest({elements:t})})})},"__cj<focusout>":function(){this.__q.addClass("paO")},"__ck<focusin>":function(){this.__q.removeClass("paO")}})}),define("editor/core/store",["magix"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix");t.default={__aQ:function(){var e=JSON.stringify({tempId:r.default.config("tempId"),bizId:r.default.config("bizId"),page:r.State.get("page"),scale:r.State.get("__f"),elements:r.State.get("__aJ"),select:r.State.get("__as"),xLines:r.State.get("__l"),yLines:r.State.get("__m")});try{localStorage.setItem("l.state",e)}catch(e){}},__cl:function(){var e={};try{var t=localStorage.getItem("l.state");t&&((e=JSON.parse(t)).success=!0)}catch(e){}return e},__aM:function(){try{localStorage.removeItem("l.state")}catch(e){}}}}),define("editor/core/template",["magix","../../cainiao/serializer","../../service/index"],function(e,t,i){"use strict";t.__esModule=!0;var r=e("magix"),n=e("../../cainiao/serializer"),o=e("../../service/index");r.default.applyStyle("pi",".paU{width:80px;height:80px;border:1px solid #ccc;text-align:center;line-height:80px;margin:3px;cursor:pointer;float:left}.paU:hover{border-color:#999}.paV,.paV:hover{border-color:#06f}.paW{min-height:500px}"),t.default=r.default.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.i18n,d=e.error,u=e.templates,f=e.selected;if(s+='<div mxa="ph:_" class="pK"><b mxa="ph:a" class="pd">'+r(c("_co"))+'</b></div><div mxa="ph:b" class="pL pw paW">',d)s+=" "+r(d.msg)+" ";else if(u.length){s+=" ";for(var p=0,h=u.length;p<h;p++){var g=u[p];s+='<div class="paU',f==g.id&&(s+=" paV"),s+='" mx-click="'+t+"\x1e__Q({t:'"+a(i,g)+"'})\">"+r(g.name)+"</div>"}s+=" "}else s+=" "+r(c("_cp"))+" ";return s+="</div>"},mixins:[o.default],init:function(e){this.__cm=JSON.stringify(e.page),this.__M=e.dialog,this.__N=e.enter},render:function(){var i=this;this.fetch({name:"__cn",params:{biz_id:r.default.config("bizId")}},function(e,t){i.updater.digest({selected:"-1",error:e,templates:t.get("data",[])})})},"__Q<click>":function(e){var t,i=this,r=e.params.t.code;try{(t=n.default.decode(r)).xLines=[],t.yLines=[]}catch(e){return void i.alert(e.message)}i.__cm!=JSON.stringify(t.page)&&(t.pageChange=!0),this.__N(t),this.__M.close()},"__R<click>":function(){this.__M.close()}})}),define("editor/core/toolbar",["magix","$","../../gallery/mx-monitor/index","../../util/converter","../../cainiao/const","../core/history","../../i18n/index","./workaround","gallery/mx-number/index"],function(e,t,i){e("gallery/mx-number/index"),t.__esModule=!0;var a=e("magix"),r=e("$"),n=e("../../gallery/mx-monitor/index"),o=e("../../util/converter"),l=e("../../cainiao/const"),s=e("../core/history"),c=e("../../i18n/index"),d=e("./workaround");a.default.applyStyle("pj",".paX{padding:0 12px;background:#ccc;color:#333;height:100%;background-image:-webkit-gradient(linear,0 0,0 100%,from(#eee),to(#ccc),color-stop(0,#eee))}.paY{cursor:pointer;height:25px;line-height:25px;float:left;padding:0 4px;width:25px}.paY:hover{background:#eee;color:#111}.paZ,.paZ:hover{background:#fff;z-index:200000}.pb_{height:21px;width:1px;background:#ccc;margin:2px 12px;float:left}.pba{position:absolute;right:0;top:calc(100% - 1px);background:#fff;width:400px;z-index:199999;border:1px solid #ccc}.pbb{width:125px}.pbc{width:105px}.pbd{width:20px;text-align:center}.pbe{width:60px;text-align:right;vertical-align:middle}.pbf{overflow:auto;min-height:50px;margin-left:100px;display:block;max-height:160px}.pbg{width:41px;height:50px;float:left;border:1px solid #ccc;line-height:50px;font-size:16px;cursor:pointer;text-align:center;margin:2px}.pbg:hover{border-color:#999}.pbh,.pbh:hover{border-color:#06f}.pbi{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.pbj{color:#aaa;cursor:not-allowed}.pbj:hover{color:#aaa;background:transparent}.pbk{-webkit-transform:rotate(90deg);transform:rotate(90deg)}");var u=function(e){e.scale=e.scale||a.State.get("__f"),a.State.fire("__aK",{json:e}),e.pageChange&&a.State.fire("__n"),a.State.fire("__aY"),a.State.fire("__ap"),a.State.fire("__D")};t.default=a.default.View.extend({tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.hs,d=e.i18n,u=e.canCenter,f=e.canAvg,p=e.selectCount,h=e.page,g=e.toMM,_=e.showBg,v=e.vId,m=e.CNC,x=e.scale;s+='<div mxv mxa="pi:_" class="paX pw px pu"><div mxa="pi:a" class="pp pn"><i class="pN paY',c.canUndo||(s+=" pbj"),s+='" title="'+r(d("_cG"))+'(Ctrl+Z)" ',c.canUndo&&(s+=' mx-click="'+t+"\x1e__cF({type:'undo'})\" "),s+='>&#xe682;</i><i class="pN paY pbi',c.canRedo||(s+=" pbj"),s+='" title="'+r(d("_cH"))+'(Ctrl+Y)" ',c.canRedo&&(s+=' mx-click="'+t+"\x1e__cF({type:'redo'})\" "),s+='>&#xe682;</i><i mxs="pi:_" class="pb_"></i><i class="pN paY" title="'+r(d("_cI"))+'" mx-click="'+t+'\x1e__cD()">&#xe615;</i><i class="pN paY" mx-click="'+t+'\x1e__aQ()" title="'+r(d("_S"))+'">&#xe611;</i><i class="pN paY" mx-click="'+t+'\x1e__cv()" title="'+r(d("_co"))+'">&#xe601;</i>',u()&&(s+='<i mxs="pi:_" class="pb_"></i><i class="pN paY" mx-click="'+t+"\x1e__cC({action:'put',to:'vc'})\" title=\""+r(d("_cJ"))+'">&#xe679;</i><i class="pN paY pbk" mx-click="'+t+"\x1e__cC({action:'put',to:'hc'})\" title=\""+r(d("_cK"))+'">&#xe679;</i>'),s+=" ",f()&&(s+='<i class="pN paY pbk" mx-click="'+t+"\x1e__cC({action:'avg',to:'av'})\" title=\""+r(d("_cL"))+'">&#xe604;</i><i class="pN paY" mx-click="'+t+"\x1e__cC({action:'avg',to:'ah'})\" title=\""+r(d("_cM"))+'">&#xe604;</i>'),s+=" ",1<p&&(s+='<i mxs="pi:_" class="pb_"></i><i class="pN paY" mx-click="'+t+"\x1e__cC({to:'left'})\" title=\""+r(d("_cN"))+'">&#xe70b;</i><i class="pN paY" mx-click="'+t+"\x1e__cC({to:'hcenter'})\" title=\""+r(d("_cO"))+'">&#xe711;</i><i class="pN paY" mx-click="'+t+"\x1e__cC({to:'right'})\" title=\""+r(d("_cP"))+'">&#xe70c;</i><i class="pN paY" mx-click="'+t+"\x1e__cC({to:'top'})\" title=\""+r(d("_cQ"))+'">&#xe70d;</i><i class="pN paY" mx-click="'+t+"\x1e__cC({to:'vcenter'})\" title=\""+r(d("_cR"))+'">&#xe712;</i><i class="pN paY" mx-click="'+t+"\x1e__cC({to:'bottom'})\" title=\""+r(d("_cS"))+'">&#xe70e;</i><i mxs="pi:_" class="pb_"></i><i class="pN paY" mx-click="'+t+"\x1e__cC({action:'same',to:'maw'})\" title=\""+r(d("_cT"))+'">&#xe789;</i><i class="pN paY" mx-click="'+t+"\x1e__cC({action:'same',to:'miw'})\" title=\""+r(d("_cU"))+'">&#xe788;</i><i class="pN paY pbk" mx-click="'+t+"\x1e__cC({action:'same',to:'mah'})\" title=\""+r(d("_cV"))+'">&#xe789;</i><i class="pN paY pbk" mx-click="'+t+"\x1e__cC({action:'same',to:'mih'})\" title=\""+r(d("_cW"))+'">&#xe788;</i>'),s+="</div>";var y=""===h.width?"":g(h.width);s+=" ";var b=""===h.height?"":g(h.height);s+='<div mxv class="pba pi',_||(s+=" pv"),s+='" id="bg_'+r(v)+'"><div mxa="pi:b" class="pF pw"><label mxa="pi:c" class="pG">'+r(d("_cX"))+'\uff1a</label><div mxa="pi:d" class="pH"><div class="pB pbb pB pu" mx-input="'+t+"\x1e__cB({key:'width'})\" mx-view=\"gallery/mx-number/index?value="+o(y)+"&min="+o(m.PAGE_WIDTH_MIN)+"&fixed=2&max="+o(m.PAGE_WIDTH_MAX)+'"></div><span mxs="pi:a" class="pr pbd">X</span><div class="pB pbb pB pu" mx-input="'+t+"\x1e__cB({key:'height'})\" mx-view=\"gallery/mx-number/index?value="+o(b)+"&min="+o(m.PAGE_HEIGHT_MIN)+"&fixed=2&max="+o(m.PAGE_HEIGHT_MAX)+'"></div></div></div>';var w=""===h.header?"":g(h.header);s+=" ";var k=""===h.footer?"":g(h.footer);s+='<div mxa="pi:e" class="pF pw"><label mxa="pi:f" class="pG">'+r(d("_cY"))+'\uff1a</label><div mxa="pi:g" class="pH"><div class="pB pbc pB pu" mx-input="'+t+"\x1e__cB({key:'header'})\" mx-view=\"gallery/mx-number/index?value="+o(w)+"&min=0&fixed=2&max="+o(m.PAGE_WIDTH_MAX)+'"></div><span mxa="pi:h" class="pr pbe">'+r(d("_cZ"))+'\uff1a</span><div class="pB pbc pB pu" mx-input="'+t+"\x1e__cB({key:'footer'})\" mx-view=\"gallery/mx-number/index?value="+o(k)+"&min=0&fixed=2&max="+o(m.PAGE_HEIGHT_MAX)+'"></div></div></div><div mxv mxa="pi:i" class="pF pw"><label mxa="pi:j" class="pG">'+r(d("_d_"))+'\uff1a</label><div mxv mxa="pi:k" class="pH"><input ',h.splitable&&(s+="checked"),s+=' class="pE" type="checkbox" mx-change="'+t+'\x1e__cB({key:\'splitable\'})"/></div></div><div mxa="pi:l" class="pF pw"><label mxa="pi:m" class="pG pp">'+r(d("_da"))+'\uff1a</label><div mxa="pi:n" class="pH pbf">';for(var S=0,C=m.PAGES,T=C.length;S<T;S++){var A=C[S];s+='<div class="pbg',y==A.width&&b==A.height&&(s+=" pbh"),s+='" ',y==A.width&&b==A.height||(s+=' mx-click="'+t+"\x1e__cz({page:'"+a(i,A)+"'})\" "),s+=">"+r(A.text)+"</div>"}return s+='</div></div></div><div mxa="pi:o" class="pq"><div mxa="pi:p" class="pp pw pf"><i class="pN paY" mx-click="'+t+'\x1e__cE({out:true})" title="'+r(d("_db"))+'">&#xe602;</i><span mxa="pi:q" class="pr pp pc po" style="width:40px;">'+r((100*x).toFixed(0))+'%</span><i class="pN paY" mx-click="'+t+'\x1e__cE()" title="'+r(d("_dc"))+'">&#xe699;</i></div><span mxa="pi:r" class="pr pp pc">'+r(Number(y).toFixed(2))+" x "+r(Number(b).toFixed(2))+'</span><i class="pN paY',_&&(s+=" paZ"),s+='" title="'+r(d("_dd"))+'" mx-click="'+t+'\x1e__cy()" id="bgt_'+r(v)+'">&#xe627;</i></div></div>'},init:function(){var e=this;e.__q=r.default("#"+e.id);var t=e.__bf(function(){e.render()},100);a.State.on("__ap",t),a.State.on("__o",t),a.State.on("__p",t),a.State.on("__bT",function(){0<a.State.get("__aJ").length&&e.confirm(c.default("__cq"),function(){u({elements:[],select:[],xLines:[],yLines:[]})})}),n.__cr(),e.on("destroy",function(){n.__cs(e),n.__ct()}),e.updater.set({CNC:l.default,canCenter:function(){var e=a.State.get("__as");return 1!=e.length?1<e.length:!e[0].props.useCNStyle},canAvg:function(){var e=d.StageElements.__c_();return 1==e.length?1<e[0].elements.length:0},toMM:o.default.__i})},render:function(){var e=a.State.get("page");this.updater.digest({selectCount:a.State.get("__as").length,page:e,hs:s.default.__aN(),scale:a.State.get("__f")})},__cu:function(e){return!a.default.inside(e,"app")||(a.default.inside(e,"bg_"+this.id)||a.default.inside(e,"bgt_"+this.id))},"__aQ<click>":function(){var e={elements:a.State.get("__aJ"),page:a.State.get("page")},t=this;t.mxDialog("editor/core/code",{width:1100,enter:function(e){u(e),e.pageChange&&t.render()},stage:e})},"__cv<click>":function(){var t=this;t.mxDialog("editor/core/template",{width:900,enter:function(e){u(e),e.pageChange&&t.render()},page:a.State.get("page")})},__ak:function(){this.__cw||(this.__cw=!0,this.updater.digest({showBg:!0}),n.__cx(this))},__al:function(){this.__cw&&(this.__cw=!1,this.updater.digest({showBg:!1}),n.__cs(this))},"__cy<click>":function(){this.__cw?this.__al():this.__ak()},"__cz<click>":function(e){var t=e.params.page,i=o.default.__e(t.width),r=o.default.__e(t.height),n=this.updater.get("page");n.width=i,n.height=r,this.render(),a.State.fire("__n"),a.State.fire("__D")},"__cB<change,input>":function(e){var t,i=e.params.key,r=this.updater.get("page");t="splitable"==i?e.target.checked:""===e.value?"":o.default.__e(e.value),r[i]=t,this.render(),a.State.fire("__n"),"input"==e.type?a.State.fire("__D",{key:"__cA",time:300}):a.State.fire("__D")},"__cC<click>":function(e){var t=e.params,i=t.action,r=t.to;a.State.fire("__bB",{action:i||"align",shift:e.shiftKey,ctrl:e.ctrlKey||e.metaKey,to:r})},"__cD<click>":function(){a.State.fire("__bT")},"__cE<click>":function(e){var t=e.params.out,i=l.default.SCALE_STEP,r=a.State.get("__f"),n=r,o=!1;t?r>l.default.SCALE_MIN&&(r-=i,o=!0):r<l.default.SCALE_MAX&&(r+=i,o=!0),o&&(a.State.set({__f:r}),this.render(),a.State.fire("__n",{scale:!0,from:n,to:r}),a.State.fire("__D"))},"__cF<click>":function(e){"redo"==e.params.type?s.default.__aP():s.default.__aO()}})}),define("editor/core/toolbox",["magix","../../element/index","$","../../gallery/mx-dragdrop/index","../../service/index"],function(e,t,i){"use strict";t.__esModule=!0;var s=e("magix"),n=e("../../element/index"),r=e("$"),c=e("../../gallery/mx-dragdrop/index"),o=e("../../service/index");s.default.applyStyle("pk",".pbl{width:230px;height:100%;background:#1b1b29;color:#bfbebe;padding:10px 6px 30px;transition:margin-left .15s;position:relative;z-index:3000}.pbm{margin-left:-210px}.pbn{position:relative;height:20px;color:#fff}.pbo{position:absolute;cursor:pointer;right:3px;top:-2px;font-size:20px;transition:all .15s}.pbm .pbo{right:-4px;-webkit-transform:scaleX(-1);transform:scaleX(-1)}.pbp{height:calc(100% - 20px);overflow:auto;transition:all .5s}.pbq{height:80px;overflow:hidden}.pbr{cursor:default}.pbs{border:1px solid #464646;width:60px;height:60px;margin:4px;border-radius:2px;transition:all .5s}.pbs:hover{border-color:#c2c2c2}.pbt{width:34px;height:34px;margin:3px}.pbu{text-align:center}.pbv{background:#474761;position:absolute;opacity:.5;left:-1000px;top:-1000px;width:40px;height:40px;border-radius:6px;z-index:5000}.pbw{height:1px;line-height:1px;margin:5px 0;background:hsla(0,0%,100%,.2);background:-webkit-gradient(linear,left top,right top,from(rgba(165,69,243,0)),color-stop(.5,rgba(125,118,132,.33)),to(rgba(165,69,243,0)))}.pbx{width:190px}.pby{height:calc(100% - 116px);overflow:auto}.pbz{height:30px;line-height:30px;padding:0 5px}.pbA{width:25px;height:25px;margin-top:2px}.pbB{width:160px}.pbz:hover{color:#fff}");var a=s.default.guid("de_"),d=function(e){var t=r.default("#"+a);t.length||(r.default(document.body).append('<div class="pbv" id="'+a+'"/>'),t=r.default("#"+a)),t.html(e.icon)},u=function(e){r.default("#"+a).css({left:e.pageX+10,top:e.pageY+18})},f=function(){r.default("#"+a).css({left:-1e3,top:-1e3})};t.default=s.default.View.extend({mixins:[c,o.default],tmpl:function(e,t,i,r,n,o,a,l){var s="",c=e.collapse,d=e.i18n,u=e.preList,f=e.designers,p=e.keyword;s+='<div mxv class="pbl px',c&&(s+=" pbm"),s+='"><div mxa="pj:_" class="pbn"><i class="pN pbo" mx-click="'+t+'\x1e__df()" title="',s+=r(d(c?"_di":"_dj")),s+='">&#xe616;</i></div><div id="toolbox_list" class="pbp',u.length&&(s+=" pbq"),s+='">';for(var h=0,g=f.list,_=g.length;h<_;h++){var v=g[h];s+='<div class="pp pbr" title="'+r(d(v.title))+'" mx-mousedown="'+t+"\x1e__bK({element:'"+a(i,v)+'\'})"><div class="pbs',u.length&&(s+=" pbt"),s+='">'+n(v.icon)+'</div><div class="pbu',u.length&&(s+=" pv"),s+='">'+r(d(v.title))+"</div></div>"}if(s+="</div>",u.length){s+='<div mxs="pj:_" class="pbw"></div><input class="pB pg pbx" placeholder="'+r(d("_dk"))+'" mx-input="'+t+'\x1e__dh()" value="'+r(p)+'"/><div mxa="pj:a" class="pby pi" id="toolbox_prelist">';for(var m=0,x=u.length;m<x;m++){var y=u[m];if(s+=" ",!p||0<=y.name.indexOf(p)){s+=" ";var b=f.byType(y.type);s+='<div class="pbz pw" mx-mousedown="'+t+"\x1e__bK({element:'"+a(i,b)+"',props:'"+a(i,y.props)+"',pre:true,name:'"+r(l(y.name))+'\'})"><div mxa="pj:b" class="pbA pp">'+n(b.icon)+'</div><div class="pbB pp py" title="'+r(y.name)+'">'+r(y.name)+"</div></div>"}s+=" "}s+="</div>"}return s+="</div>"},init:function(){var t=this;s.State.on("__p",function(e){t.updater.digest({lang:e.lang})})},render:function(){var r=this;this.updater.digest({designers:n.default,keyword:"",preList:[]}),this.fetch({name:"__de",params:{biz_id:s.default.config("bizId")}},function(e,t){var i=t.get("data",[]);i.length&&r.updater.digest({preList:i})})},"__bK<mousedown>":function(e){var t=e.params,i=t.element,r=t.props,n=t.pre,o=t.name;d(i),n&&(r||(r={}),r.allowEdit=0,r.tip=o),s.State.set({__cf:i,__cg:r});var a=!1,l=null;this.dragdrop(e.eventTarget,function(e){u(e),a=!0;var t=c.fromPoint(e.clientX,e.clientY);t!=l&&(l=t,s.State.fire("__bw",{hoverNode:l}))},function(e){if(l=null,s.State.fire("__bw"),!a)return s.State.fire("__bA"),void s.State.set({__cf:null,__cg:null});if(f(),e){var t=c.fromPoint(e.clientX,e.clientY);s.State.fire("__by",{dropNode:t,pageX:e.pageX,pageY:e.pageY}),s.State.set({__cf:null,__cg:null})}})},"__df<click>":function(){var e=this.updater,t=!e.get("collapse");e.digest({collapse:t}),r.default(document).trigger({type:"toolboxtoggle",collapse:t})},"__dh<input>":function(e){clearTimeout(this.__dg);var t=this.updater;t.set({keyword:e.eventTarget.value}),this.__dg=setTimeout(this.wrapAsync(function(){t.digest()}),300)}})}),define("editor/core/workaround",["magix","../../util/converter","../../util/transform","../../gallery/mx-menu/index","./contextmenu","$","../../util/table"],function(e,S,t){"use strict";var m=this&&this.__assign||function(){return(m=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};S.__esModule=!0;var C=e("magix"),_=e("../../util/converter"),T=e("../../util/transform"),v=e("../../gallery/mx-menu/index"),x=e("./contextmenu"),y=e("$"),g=e("../../util/table"),a=C.default.toMap,b=C.default.has,w=C.default.mix;S.StageSelectElements={__bu:function(e){var t=C.State.get("__as"),i=t.length;if(i||e){var r=1<i?null:t[0];t.length=0;var n=!1;e?(t.push(e),n=e!=r):i&&(n=!0),n&&(C.State.set({__ar:a(t,"id")}),C.State.fire("__ap"),C.State.fire("__D"))}},__cx:function(e){for(var t=C.State.get("__as"),i=!1,r=0,n=t;r<n.length;r++){if(n[r].id===e.id){i=!0;break}}i||(t.push(e),C.State.set({__ar:a(t,"id")}),C.State.fire("__ap"),C.State.fire("__D"))},__cs:function(e){for(var t=C.State.get("__as"),i=!1,r=-1,n=0,o=t;n<o.length;n++){if(r++,o[n].id===e.id){i=!0;break}}i&&(t.splice(r,1),C.State.set({__ar:a(t,"id")}),C.State.fire("__ap"),C.State.fire("__D"))},__bJ:function(e){var t=C.State.get("__as");t.length=0,t.push.apply(t,e),C.State.set({__ar:a(t,"id")}),C.State.fire("__ap"),C.State.fire("__D")},__dl:function(){return C.State.get("__as").length},__bD:function(){return C.State.get("__as")}},S.StageElements={__bz:function(e,t,i,r){var n,o=C.State.get("__cf");if(o){var a=C.State.get("__aJ"),l=C.State.get("__f"),s=(n=S.StageElements.__dm(e,t,i)).xy,c=n.collection,d=n.focus,u=n.collType,f=o.getProps(s.x,s.y);f.zIndex=c.length+1;var p=C.State.get("__cg");p&&w(f,p),S.StageElements.__dn(o,f,l);var h={id:C.default.guid("e_"),ctor:o,type:o.type,props:f};return"vtext"==o.type||"htext"==o.type?f.supportCNStyle="td"==u:"table"==o.type&&g.default.__h(f),c.push(h),d&&!r&&S.StageSelectElements.__bu(h),a}},__c_:function(){var _=C.State.get("__ar"),v={},m=[],x=function(e,t,i,r){for(var n=0,o=e;n<o.length;n++){var a=o[n];if(b(_,a.id)){var l=t?[t.id,i,r].join("-"):"stage";v[l]||m.push(v[l]={type:t?"td":"stage",table:t,row:i,col:r,elements:[]}),v[l].elements.push(a)}if("table"==a.type)for(var s=0,c=0,d=a.props.rows;c<d.length;c++){var u=d[c];if("tr"==u.tag)for(var f=0,p=0,h=u.cells;p<h.length;p++){var g=h[p];"td"==g.tag&&g.children&&x(g.children,a,s,f),f++}s++}}},e=C.State.get("__aJ");return x(e),m},__bN:function(){var e=this.__c_();if(1===e.length){var t=e[0];if("td"==t.type){var i=t.table;i.props.rowIndex=t.row,i.props.colIndex=t.col,C.State.fire("__am",{eId:i.id,data:i.props}),S.StageSelectElements.__bu(i)}}},__ch:function(e,f){var p=function(e){for(var t=0,i=e;t<i.length;t++){var r=i[t];if(f(r,"element"),"table"==r.type)for(var n=0,o=0,a=r.props.rows;o<a.length;o++){var l=a[o];if(f(l,"row",{row:n}),"tr"==l.tag)for(var s=0,c=0,d=l.cells;c<d.length;c++){var u=d[c];f(u,"td",{row:n,col:s}),"td"==u.tag&&u.children&&p(u.children),s++}n++}}};p(e)},__dm:function(e,t,i){var r,n=S.StageSelectElements.__bD(),o=n[0],a=_.default.__bb({x:e.pageX,y:e.pageY}),l=C.State.get("__aJ"),s=!0,c="stage";if(t&&1==n.length&&"table"==o.type&&-1<o.props.rowIndex){var d=(r=o.props).rows,u=r.rowIndex,f=r.colIndex,p=d[u];if(p){var h=p.cells[f];h&&(h.children||(h.children=[]),l=h.children,c="td",s=!(a={x:5,y:5}))}}else if(!t&&i){var g=y.default(i.node).offset();a={x:e.pageX-g.left,y:e.pageY-g.top},l=i.children,c="td"}return{collection:l,xy:a,focus:s,collType:c}},__bx:function(u){var e=C.State.get("__aJ"),f=null,p=function(e){for(var t=0,i=e;t<i.length;t++){var r=i[t],n=C.default.node(r.id);if(C.default.inside(u,n)){if("table"==r.type)for(var o=r.props.rows,a=o.length;a--;){var l=o[a];if(l.cells)for(var s=l.cells.length;s--;){var c=C.default.node("entity_"+r.id+"_c_"+a+"_"+s),d=l.cells[s];C.default.inside(u,c)&&(d.children||(d.children=[]),f={node:c,dashed:"#entity_"+r.id+"_dashed_"+a+"_"+s,children:d.children},p(f.children))}}break}}};return p(e),f},__bV:function(){var e,t=S.StageSelectElements.__bD();if(1===t.length){var i=(e=(o=t[0]).props).rows,r=e.rowIndex,n=e.colIndex;if(-1<r&&-1<n)return{coll:(a=i[r].cells[n]).children,type:"td",width:a.width,height:a.height}}var o,a,l=this.__c_(),s={coll:C.State.get("__aJ"),type:"stage",width:Number.MAX_SAFE_INTEGER,height:Number.MAX_SAFE_INTEGER};1===l.length&&("td"==(o=l[0]).type&&(s={coll:(a=o.table.props.rows[o.row].cells[o.col]).children,type:"td",width:a.width,height:a.height}));return s},__do:function(e,t){if(e.shiftKey||e.ctrlKey||e.metaKey){if(!t.props.locked&&!t.props.xLocked&&!t.props.yLocked){var i=S.StageSelectElements.__bD(),u={},f={},r=[];"table"==t.type&&r.push(t);for(var n=!1,o=i.length;o--;){(s=i[o]).id==t.id&&(n=!0),s.props.locked||s.props.xLocked||s.props.yLocked?i.splice(o,1):"table"==s.type&&r.push(s)}if(n&&1<i.length)return void S.StageSelectElements.__cs(t);var p=function(e,t){for(var i=0,r=e;i<r.length;i++){var n=r[i];if("#script"!=n.type&&(t&&(u[n.id]=1,f[n.id]=t),"table"==n.type))for(var o=0,a=n.props.rows;o<a.length;o++){var l=a[o];if("tr"==l.tag)for(var s=0,c=l.cells;s<c.length;s++){var d=c[s];"td"==d.tag&&d.children&&p(d.children,n.id)}}}};if(p(r,0),b(u,t.id))for(var a=t.id;;){var l=f[a];if(!l)break;u[l]=1,a=l}for(o=i.length;o--;){var s=i[o];b(u,s.id)&&i.splice(o,1)}S.StageSelectElements.__cx(t)}}else S.StageSelectElements.__bu(t)},__bF:function(e){for(var t,i,r=[],n=0,o=e&&e.children||C.State.get("__aJ");n<o.length;n++){var a=o[n];if(t=a.props,"#script"!=a.type&&!t.locked){i=t.rotate||0;var l={x:t.x,y:t.y,width:t.width,height:t.height};t.useCNStyle&&e&&(l.width=.92*e.width,l.height=.92*e.height);for(var s=T.default.__aw(l,i),c=s.point[0],d=s.point[2],u=s.point[6],f=s.point[4],p=c,h=c,g=c,_=c,v=0,m=[d,u,f];v<m.length;v++){var x=m[v];x.x<p.x&&(p=x),x.x>g.x&&(g=x),x.y<h.y&&(h=x),x.y>_.y&&(_=x)}r.push({element:a,left:p,top:h,right:g,bottom:_,points:[c,d,u,f],lines:[{start:c,end:d},{start:d,end:f},{start:f,end:u},{start:u,end:c}]})}}return r},__cc:function(e,t,i){for(var r=-1,n=t.props,o=T.default.__aX(i),a=o.length,l=o.length;l--;){if(o[l].id===t.id){r=l;break}}if(3==e){for(l=r+1;l<a;l++)o[l].props.zIndex=l;n.zIndex=a}else if(4==e){for(l=0;l<r;l++)o[l].props.zIndex=l+2;n.zIndex=1}else if(5==e){var s=o[r+1];if(s){var c=n.zIndex,d=s.props.zIndex;s.props.zIndex=c,n.zIndex=d}}else if(6==e){var u=o[r-1];if(u){c=n.zIndex,d=u.props.zIndex;u.props.zIndex=c,n.zIndex=d}}return i},__bX:function(e){for(var t=[],i=0,r=e;i<r.length;i++){var n=r[i];"#script"==n.type||n.props.locked||n.props.xLocked||n.props.yLocked||t.push(n)}S.StageSelectElements.__bJ(t)},__bQ:function(e){var t=S.StageSelectElements.__bD(),d=a(t,"id"),i=C.State.get("__aJ"),u=function(e){for(var t=!1,i=e.length;i--;){if("#script"!=(c=e[i]).type)if(b(d,c.id))e.splice(i,1),t=!0;else if("table"==c.type)for(var r=0,n=c.props.rows;r<n.length;r++){var o=n[r];if("tr"==o.tag)for(var a=0,l=o.cells;a<l.length;a++){var s=l[a];"td"==s.tag&&s.children&&u(s.children)}}}if(t)for(i=e.length;i--;){var c;"#script"!=(c=e[i]).type&&(c.props.zIndex=i+1)}};if(u(i),e)return t.length=0,C.State.fire("__ap"),i},__b_:function(d,e){var t=C.State.get("__aJ"),u=function(e){for(var t=!1,i=e.length;i--;){if("#script"!=(c=e[i]).type)if(d==c.id)e.splice(i,1),t=!0;else if("table"==c.type)for(var r=0,n=c.props.rows;r<n.length;r++){var o=n[r];if("tr"==o.tag)for(var a=0,l=o.cells;a<l.length;a++){var s=l[a];"td"==s.tag&&s.children&&u(s.children)}}}if(t)for(i=e.length;i--;){var c;"#script"!=(c=e[i]).type&&(c.props.zIndex=i+1)}};(u(t),e)||(S.StageSelectElements.__bD().length=0,C.State.fire("__ap"))},__dn:function(e,t,i,r){if(r&&(t.x*=i,t.y*=i),t.width*=i,t.height*=i,"table"==e.type)for(var n=0,o=t.rows;n<o.length;n++){var a=o[n];if("tr"==a.tag)for(var l=0,s=a.cells;l<s.length;l++){var c=s[l];"td"==c.tag&&(c.width*=i,c.height*=i,c.children&&S.StageElements.__dp(c.children,i,r))}}},__dp:function(e,t,i){for(var r=0,n=e;r<n.length;r++){var o=n[r];"#script"!=o.type&&S.StageElements.__dn(o,o.props,t,i)}},__bt:function(e,t){var i=C.State.get("__aJ"),r=t/e;S.StageElements.__dp(i,r,!0)},__bL:function(c,e){var t=c.params;if(!t.props.barred){var d=S.StageSelectElements.__bD();if(void 0===c.button||0==c.button)if(c.shiftKey||c.ctrlKey||c.metaKey)S.StageElements.__do(c,t);else{C.State.fire("__au",{locked:1}),C.State.fire("__av",{cursor:"move"});for(var u=[],i=(o=!1,0),r=d;i<r.length;i++){var n=r[i];t.id==n.id&&(o=!0),u.push({x:n.props.x,y:n.props.y})}o||(S.StageSelectElements.__bu(t),u.length=0,u.push({x:t.props.x,y:t.props.y}),d.length=0,d.push(t));var f=!1,p=!1;e.dragdrop(c.eventTarget,function(e){f=!0;for(var t=e.pageX-c.pageX,i=e.pageY-c.pageY,r=0,n=0,o=d;n<o.length;n++){var a=o[n];if(!a.props.locked&&!a.props.xLocked&&!a.props.yLocked){p=!0;var l=u[r++];a.props.x=l.x+t,a.props.y=l.y+i;var s=C.Vframe.get(a.id);s&&s.invoke("assign",[a,{move:!0}])&&s.invoke("render")}}C.State.fire("__ap")},function(){f&&p&&C.State.fire("__D"),C.State.fire("__au"),C.State.fire("__av")})}else{for(var o=!1,a=0,l=d;a<l.length;a++){if(l[a].id===t.id){o=!0;break}}o||S.StageSelectElements.__bu(t)}}},__cb:function(e,t,i,r,n){var o=S.StageSelectElements.__bD(),a=C.default.config("lang"),l=x.Contextmenu.stage(a),s=1,c={},d=S.Clipboard.__dq();if(r=T.default.__aX(r),c[x.Contextmenu.allId]=!r.length,c[x.Contextmenu.pasteId]=!d.length,1===o.length){var u=o[0],f=u.props.locked;if(i&&o[0].id==i)s=4,l=x.Contextmenu.tableCell(a),c[x.Contextmenu.cellTopId]=f,c[x.Contextmenu.cellBottomId]=f,c[x.Contextmenu.cellLeftId]=f,c[x.Contextmenu.cellRightId]=f,c[x.Contextmenu.cellDeleteColId]=f,c[x.Contextmenu.cellDeleteRowId]=f;else{s=2,l=x.Contextmenu.singleElement(a);var p=f||u.props.useCNStyle,h=r.length,g=!h||r[h-1].id==u.id,_=!h||r[0].id==u.id;c[x.Contextmenu.cutId]=f,c[x.Contextmenu.topId]=g||p,c[x.Contextmenu.bottomId]=_||p,c[x.Contextmenu.upId]=g||p,c[x.Contextmenu.downId]=_||p}}else 1<o.length&&(s=3,l=x.Contextmenu.multipleElement(a));v.show(e,t,{cnt:"#outer_cm",offset:"#stage_outer",scroller:"#app_stage",width:150,disabled:c,list:l,listKey:a+s,picked:n})},__bP:function(e){var t=S.StageSelectElements.__bD(),i=C.State.get("__aJ"),r=T.default.__aX(i),n=t.length,o=null;if(0===n||1<n)o=r[e.shiftKey?0:r.length-1];else{var v=null,m=null,x=null,y=null,b=!1,w=t[0].id,k=function(e){for(var t,i=0,r=e;i<r.length;i++){var n=r[i];if("#script"!=n.type&&(n.id==w?(b=!0,v=n):v&&!m?m=n:b?y=n:x=n,"table"==n.type)){var o=(t=n.props).rows,a=t.rowIndex,l=t.colIndex,s=0;if(-1<a&&-1<l){var c=o[a].cells[l];if(c.children)(_=T.default.__aX(c.children)).length&&(s=1,k(_))}if(!s)for(var d=0,u=o;d<u.length;d++){var f=u[d];if("tr"==f.tag)for(var p=0,h=f.cells;p<h.length;p++){var g=h[p];if("td"==g.tag&&g.children){var _=T.default.__aX(g.children);k(_)}}}}}};k(r),e.shiftKey?x?o=x:"table"==(o=r[r.length-1]).type&&y&&(o=y):o=m||r[0]}S.StageSelectElements.__bu(o)},__bH:function(e,t,i){for(var r,n,o,a,l,s,c,d,u,f=[],p=[{start:{x:t.x,y:t.y},end:{x:t.x+t.width,y:t.y}},{start:{x:t.x+t.width,y:t.y},end:{x:t.x+t.width,y:t.y+t.height}},{start:{x:t.x+t.width,y:t.y+t.height},end:{x:t.x,y:t.y+t.height}},{start:{x:t.x,y:t.y+t.height},end:{x:t.x,y:t.y}}],h=0,g=e;h<g.length;h++){var _=g[h];if(r=!1,i&&i[_.element.id])i&&f.push(_.element);else{for(var v=0,m=_.points;v<m.length;v++){var x=m[v];if(x.x>=t.x&&x.y>=t.y&&x.x<=t.x+t.width&&x.y<=t.y+t.height){f.push(_.element),r=!0;break}}if(!r)for(var y=0,b=_.lines;y<b.length;y++){for(var w=b[y],k=0,S=p;k<S.length;k++){if(o=S[k],void 0,a=(n=w).start,l=n.end,s=o.start,c=o.end,d=((l.x-a.x)*(s.y-a.y)-(l.y-a.y)*(s.x-a.x))*((l.x-a.x)*(c.y-a.y)-(l.y-a.y)*(c.x-a.x)),u=((c.x-s.x)*(a.y-s.y)-(c.y-s.y)*(a.x-s.x))*((c.x-s.x)*(l.y-s.y)-(c.y-s.y)*(l.x-s.x)),d<0&&u<0){r=!0,f.push(_.element);break}}if(r)break}}}return f},__ce:function(e,t){for(var n=[],o=0,i=0,r=0,a=function(){o==i&&t(n)},l=function(i,r){var e=new FileReader;e.onload=function(e){var t=new Image;t.onload=function(){n[r]={file:i,width:t.width,height:t.height},o++,a()},t.onerror=function(){o++,a()},t.src=e.target.result},e.readAsDataURL(i)},s=0;s<e.length;s++){var c=e[s];0===c.type.indexOf("image/")&&(i++,l(c,r++))}a()}};S.Clipboard={__bU:function(){return(this.__dr||[]).length},__dq:function(){return this.__dr||[]},__bS:function(){for(var e=[],t=0,i=S.StageSelectElements.__bD();t<i.length;t++){var r=i[t];e.push(r)}this.__dr=e},__bY:function(){var e=S.StageSelectElements.__bD();1==e.length&&e[0].props.locked||(this.__bS(),this.__ds=!0)},__bW:function(_,o){var a=this,e=a.__dr,v=_.coll;if(e){for(var l=[],s=0,c=0,d=0,u=function(e){for(var t=0,i=v;t<i.length;t++){var r=i[t];if(r.props.x==e.x&&r.props.y==e.y)return 1}return 0},t=function(e){var t,i,r=(t=e,i={},y.default.extend(!0,i,t));!function(e){if(0===s)if(o)c=e.x-o.x,d=e.y-o.y,e.x=o.x,e.y=o.y;else{for(var t=e.x,i=e.y;u(e);)e.x+=20,e.y+=20;for(e.x>_.width?e.x=_.width-e.width/2:e.x+e.width<0&&(e.x=-e.width/2),e.y>_.height?e.y=_.height-e.height/2:e.y+e.height<0&&(e.y=-e.height/2);u(e);)e.x-=4,e.y-=4;c=t-e.x,d=i-e.y}else e.x-=c,e.y-=d}(r.props),s++;var n={},g=function(e,t){if(w(t,e),"#script"!=e.type&&(t.id=C.default.guid("e_"),t.props={},w(t.props,e.props),"htext"!=e.type&&"vtext"!=e.type||(t.props.useCNStyle&&"td"==_.type?(t.props.x=.76,t.props.y=.76):(t.props.zIndex=v.length+1,t.props.locked=!1,t.props.supportCNStyle="td"==_.type,t.props.useCNStyle&&(t.props.xLocked=!1,t.props.yLocked=!1,t.props.widthLocked=!1,t.props.heightLocked=!1,t.props.useCNStyle=!1,t.props.width=t.props._width||("htext"==e.type?94.49:22.68),t.props.height=t.props._height||("htext"==e.type?18.9:128.5))))),"table"==e.type){t.props.rows=[];for(var i=0,r=e.props.rows;i<r.length;i++){var n=r[i],o=m({},n);if("tr"==n.tag){for(var a=[],l=0,s=n.cells;l<s.length;l++){var c=s[l],d=m({},c,{children:[]});if("td"==c.tag&&c.children)for(var u=0,f=c.children;u<f.length;u++){var p=f[u],h={};g(p,h),d.children.push(h)}a.push(d)}o.cells=a}t.props.rows.push(o)}}};g(r,n),v.push(n),l.push(n),a.__ds&&S.StageElements.__b_(e.id,!0)},i=0,r=e;i<r.length;i++){t(r[i])}a.__ds&&(delete a.__ds,delete a.__dr),S.StageSelectElements.__bJ(l),C.State.fire("__aY"),C.State.fire("__ap")}}}});